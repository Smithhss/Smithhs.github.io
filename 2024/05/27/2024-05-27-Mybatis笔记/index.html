<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>Mybatisç¬”è®° | Smith</title><meta name="keywords" content="MyBatis"><meta name="author" content="Smith"><meta name="copyright" content="Smith"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="Mybatisç¬”è®°"><meta name="application-name" content="Mybatisç¬”è®°"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="Mybatisç¬”è®°"><meta property="og:url" content="https://smithhs.cn/2024/05/27/2024-05-27-Mybatis%E7%AC%94%E8%AE%B0/index.html"><meta property="og:site_name" content="Smith"><meta property="og:description" content="1.åˆè¯†MyBatisæ¡†æ¶1.1.æ¡†æ¶(Framework) æ¡†æ¶å°±æ˜¯ä¸€å¥—å®Œæ•´çš„è§£å†³æ–¹æ¡ˆï¼Œç”¨æˆ·åœ¨ä½¿ç”¨æ¡†æ¶æ—¶åªéœ€è¦æŒ‰ç…§æ¡†æ¶çš„çº¦å®šè¿›è¡Œä½¿ç”¨å³å¯ã€‚æ¡†æ¶ä¼šè‡ªåŠ¨å®Œæˆå¯¹åº”çš„åŠŸèƒ½ã€‚  1.2.Jdbc1.2.1.æ¦‚è¿° Jdbc(Java DataBase Connectorçš„ç¼©å†™)ç§°ä¸ºJavaæ•°æ®åº“è¿æ¥å¯¹è±¡ï¼ŒJd"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/MyBatis-1.jpg"><meta property="article:author" content="Smith"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/MyBatis-1.jpg"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://smithhs.cn/2024/05/27/2024-05-27-Mybatis%E7%AC%94%E8%AE%B0/"><link rel="preconnect" href="//npm.elemecdn.com"/><link rel="preconnect" href="//npm.onmicrosoft.cn"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/node-snackbar/0.1.16/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.14/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: {"skills":["ğŸ¤–ï¸ æ•°ç ç§‘æŠ€çˆ±å¥½è€…","ğŸ” åˆ†äº«ä¸çƒ­å¿ƒå¸®åŠ©","ğŸ  æ™ºèƒ½å®¶å±…å°èƒ½æ‰‹","ğŸ”¨ è®¾è®¡å¼€å‘ä¸€æ¡é¾™","ğŸ¤ ä¸“ä¿®äº¤äº’ä¸è®¾è®¡","ğŸƒ è„šè¸å®åœ°è¡ŒåŠ¨æ´¾","ğŸ§± å›¢é˜Ÿå°ç»„å‘åŠ¨æœº","ğŸ’¢ å£®æ±‰äººç‹ è¯ä¸å¤š"]},
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç®€","rightMenuMsgToTraditionalChinese":"è½¬ä¸ºç¹ä½“","rightMenuMsgToSimplifiedChinese":"è½¬ä¸ºç®€ä½“"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":240},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: 'å¤©',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"ä½ å·²åˆ‡æ¢ä¸ºç¹ä½“","cht_to_chs":"ä½ å·²åˆ‡æ¢ä¸ºç®€ä½“","day_to_night":"ä½ å·²åˆ‡æ¢ä¸ºæ·±è‰²æ¨¡å¼","night_to_day":"ä½ å·²åˆ‡æ¢ä¸ºæµ…è‰²æ¨¡å¼","bgLight":"#3b70fc","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Mybatisç¬”è®°',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-08-26 22:40:37',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="åŠ è½½å¤´åƒ" src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/d20f536c64d06e5fcf4bfe2ec5dc25d.jpg"/><div class="loading-image-dot"></div><div id="loading-percentage">0%</div></div></div><script>if (GLOBAL_CONFIG.preloader.source == "2" || GLOBAL_CONFIG.preloader.source == "3") {
  const loadingPercentage = document.getElementById("loading-percentage");
  let loadingPercentageTimer = setInterval(function() {
    var progressBar = document.querySelector(".pace-progress");
    if (!progressBar) return
    var currentValue = progressBar.getAttribute("data-progress-text");
    if (currentValue !== loadingPercentage.textContent) {
      loadingPercentage.textContent = currentValue;
      if (currentValue === "100%") {
        clearInterval(loadingPercentageTimer);
      }
    }
  }, 100);
}

const preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div id="web_box"><div id="web_container"><div id="menu-mask"></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">ç½‘é¡µ</div><div class="back-menu-list"><a class="back-menu-item" href="https://smithhs.cn/" title="åšå®¢" target="_blank"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.png" alt="åšå®¢"/><span class="back-menu-item-text">åšå®¢</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">é¡¹ç›®</div><div class="back-menu-list"><a class="back-menu-item" href="http://robot.onliu.cn/" title="Robot" target="_blank"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/cupfox.png" alt="Robot"/><span class="back-menu-item-text">Robot</span></a><a class="back-menu-item" href="http://res.onliu.cn" title="Sale" target="_blank"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://alandodo-1315761622.cos.ap-beijing.myqcloud.com/blog-tuce/tubiao.jpg" alt="Sale"/><span class="back-menu-item-text">Sale</span></a><a class="back-menu-item" href="http://se.onliu.cn/" title="èµ„æºå…±äº«" target="_blank"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://alandodo-1315761622.cos.ap-beijing.myqcloud.com/blog/x126.png" alt="èµ„æºå…±äº«"/><span class="back-menu-item-text">èµ„æºå…±äº«</span></a><a class="back-menu-item" href="https://github.com/Smithhss" title="Github" target="_blank"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/GitHub.png" alt="Github"/><span class="back-menu-item-text">Github</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">Smith</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="javascript:void(0);"><span> æ–‡ç« </span></a><ul class="menus_item_child" style="left:-79px;"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> éš§é“</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> åˆ†ç±»</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> æ ‡ç­¾</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="javascript:void(0);"><span> æˆ‘çš„</span></a><ul class="menus_item_child" style="left:-31px;"><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> ç›¸å†Œé›†</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> éŸ³ä¹é¦†</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="javascript:void(0);"><span> å…³äº</span></a><ul class="menus_item_child" style="left:-79px;"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> å…³äºæˆ‘</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> é—²è¨€ç¢è¯­</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> éšä¾¿é€›é€›</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button only-home" id="travellings_button" title="éšæœºå‰å¾€ä¸€ä¸ªå¼€å¾€é¡¹ç›®ç½‘ç«™"><a class="site-page" onclick="anzhiyu.totraveling()" title="éšæœºå‰å¾€ä¸€ä¸ªå¼€å¾€é¡¹ç›®ç½‘ç«™" href="javascript:void(0);" rel="external nofollow" data-pjax-state="external"><i class="anzhiyufont anzhiyu-icon-train"></i></a></div><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="éšæœºå‰å¾€ä¸€ä¸ªæ–‡ç« " href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="ä¸­æ§å°" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/1.jpg" target="_blank"><img class="post-qr-code-img" alt="wechat" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/1.jpg"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/2.jpg" target="_blank"><img class="post-qr-code-img" alt="alipay" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/2.jpg"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">äº’åŠ¨</div><span class="author-content-item-title"> <span>æœ€æ–°è¯„è®º</span></span></div><div class="aside-list"><span>æ­£åœ¨åŠ è½½ä¸­...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">å…´è¶£ç‚¹</div><span class="author-content-item-title">å¯»æ‰¾ä½ æ„Ÿå…´è¶£çš„é¢†åŸŸ</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Android-Studio/" style="font-size: 1.05rem;">Android Studio<sup>1</sup></a><a href="/tags/App/" style="font-size: 1.05rem;">App<sup>2</sup></a><a href="/tags/Butterfly/" style="font-size: 1.05rem;">Butterfly<sup>1</sup></a><a href="/tags/C/" style="font-size: 1.05rem;">C++<sup>1</sup></a><a href="/tags/CSS/" style="font-size: 1.05rem;">CSS<sup>1</sup></a><a href="/tags/Cisco-Packet-Tracer/" style="font-size: 1.05rem;">Cisco Packet Tracer<sup>1</sup></a><a href="/tags/Easypan/" style="font-size: 1.05rem;">Easypan<sup>2</sup></a><a href="/tags/FurtherMathematics/" style="font-size: 1.05rem;">FurtherMathematics<sup>1</sup></a><a href="/tags/GPT/" style="font-size: 1.05rem;">GPT<sup>1</sup></a><a href="/tags/Git2/" style="font-size: 1.05rem;">Git2<sup>1</sup></a><a href="/tags/HTML/" style="font-size: 1.05rem;">HTML<sup>1</sup></a><a href="/tags/Hexo/" style="font-size: 1.05rem;">Hexo<sup>1</sup></a><a href="/tags/Java/" style="font-size: 1.05rem;">Java<sup>6</sup></a><a href="/tags/JavaScript/" style="font-size: 1.05rem;">JavaScript<sup>1</sup></a><a href="/tags/JavaWeb/" style="font-size: 1.05rem;">JavaWeb<sup>2</sup></a><a href="/tags/Jrebel/" style="font-size: 1.05rem;">Jrebel<sup>1</sup></a><a href="/tags/LeetCode/" style="font-size: 1.05rem;">LeetCode<sup>1</sup></a><a href="/tags/Linux/" style="font-size: 1.05rem;">Linux<sup>2</sup></a><a href="/tags/Markdown/" style="font-size: 1.05rem;">Markdown<sup>2</sup></a><a href="/tags/Maven/" style="font-size: 1.05rem;">Maven<sup>2</sup></a><a href="/tags/Mysql/" style="font-size: 1.05rem;">Mysql<sup>1</sup></a><a href="/tags/NoSql/" style="font-size: 1.05rem;">NoSql<sup>1</sup></a><a href="/tags/Nodejs/" style="font-size: 1.05rem;">Nodejs<sup>2</sup></a><a href="/tags/Python/" style="font-size: 1.05rem;">Python<sup>3</sup></a><a href="/tags/Spring/" style="font-size: 1.05rem;">Spring<sup>2</sup></a><a href="/tags/VMware/" style="font-size: 1.05rem;">VMware<sup>2</sup></a><a href="/tags/Vue/" style="font-size: 1.05rem;">Vue<sup>1</sup></a><a href="/tags/YouHou/" style="font-size: 1.05rem;">YouHou<sup>1</sup></a><a href="/tags/books/" style="font-size: 1.05rem;">books<sup>1</sup></a><a href="/tags/butterfly/" style="font-size: 1.05rem;">butterfly<sup>1</sup></a><a href="/tags/clash/" style="font-size: 1.05rem;">clash<sup>1</sup></a><a href="/tags/project/" style="font-size: 1.05rem;">project<sup>4</sup></a><a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 1.05rem;">å‰ç«¯<sup>1</sup></a><a href="/tags/%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6/" style="font-size: 1.05rem;">å¼€å‘æ¡†æ¶<sup>1</sup></a><a href="/tags/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/" style="font-size: 1.05rem;">å¼€å‘ç¯å¢ƒ<sup>1</sup></a><a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" style="font-size: 1.05rem;">æ“ä½œç³»ç»Ÿ<sup>1</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/" style="font-size: 1.05rem;">æ•°æ®ç»“æ„ä¸ç®—æ³•<sup>1</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/" style="font-size: 1.05rem;">è®¡ç®—æœºç»„æˆåŸç†<sup>1</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" style="font-size: 1.05rem;">è®¡ç®—æœºç½‘ç»œ<sup>1</sup></a><a href="/tags/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/" style="font-size: 1.05rem;">è½¯ä»¶å·¥ç¨‹<sup>1</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>æ–‡ç« </span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>å½’æ¡£</span><a class="card-more-btn" href="/archives/" title="æŸ¥çœ‹æ›´å¤š">
    <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/11/"><span class="card-archive-list-date">åä¸€æœˆ 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/10/"><span class="card-archive-list-date">åæœˆ 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/09/"><span class="card-archive-list-date">ä¹æœˆ 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">6</span><span>ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/07/"><span class="card-archive-list-date">ä¸ƒæœˆ 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/06/"><span class="card-archive-list-date">å…­æœˆ 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">7</span><span>ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/05/"><span class="card-archive-list-date">äº”æœˆ 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">17</span><span>ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/04/"><span class="card-archive-list-date">å››æœˆ 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>ç¯‡</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/06/"><span class="card-archive-list-date">å…­æœˆ 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>ç¯‡</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" onclick="anzhiyu.switchDarkMode()" title="æ˜¾ç¤ºæ¨¡å¼åˆ‡æ¢" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="è¾¹æ æ˜¾ç¤ºæ§åˆ¶"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item on" id="consoleCommentBarrage" onclick="anzhiyu.switchCommentBarrage()" title="çƒ­è¯„å¼€å…³"><a class="commentBarrage"><i class="anzhiyufont anzhiyu-icon-message"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="éŸ³ä¹å¼€å…³"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">åŸåˆ›</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/Programming/">Programming</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/MyBatis/" tabindex="-1"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>MyBatis</span></a></span></div></div><h1 class="post-title">Mybatisç¬”è®°</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="post-meta-icon anzhiyufont anzhiyu-icon-calendar-days"></i><span class="post-meta-label">å‘è¡¨äº</span><time datetime="2024-05-27T09:28:00.000Z" title="å‘è¡¨äº 2024-05-27 17:28:00">2024-05-27</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="æ–‡ç« å­—æ•°"></i><span class="post-meta-label" title="æ–‡ç« å­—æ•°">å­—æ•°æ€»è®¡:</span><span class="word-count" title="æ–‡ç« å­—æ•°">36.1k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="é˜…è¯»æ—¶é•¿"></i><span class="post-meta-label" title="é˜…è¯»æ—¶é•¿">é˜…è¯»æ—¶é•¿:</span><span>152åˆ†é’Ÿ</span></span><span class="post-meta-separator"></span><span class="post-meta-pv-cv" id="" data-flag-title="Mybatisç¬”è®°"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="é˜…è¯»é‡">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="ä½œè€…IPå±åœ°ä¸ºçŸ³å®¶åº„"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>çŸ³å®¶åº„</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/MyBatis-1.jpg"></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="1-åˆè¯†MyBatisæ¡†æ¶"><a href="#1-åˆè¯†MyBatisæ¡†æ¶" class="headerlink" title="1.åˆè¯†MyBatisæ¡†æ¶"></a>1.åˆè¯†MyBatisæ¡†æ¶</h1><h2 id="1-1-æ¡†æ¶-Framework"><a href="#1-1-æ¡†æ¶-Framework" class="headerlink" title="1.1.æ¡†æ¶(Framework)"></a>1.1.æ¡†æ¶(Framework)</h2><blockquote>
<p>æ¡†æ¶å°±æ˜¯ä¸€å¥—å®Œæ•´çš„è§£å†³æ–¹æ¡ˆï¼Œç”¨æˆ·åœ¨ä½¿ç”¨æ¡†æ¶æ—¶åªéœ€è¦æŒ‰ç…§æ¡†æ¶çš„çº¦å®šè¿›è¡Œä½¿ç”¨å³å¯ã€‚æ¡†æ¶ä¼šè‡ªåŠ¨å®Œæˆå¯¹åº”çš„åŠŸèƒ½ã€‚</p>
</blockquote>
<h2 id="1-2-Jdbc"><a href="#1-2-Jdbc" class="headerlink" title="1.2.Jdbc"></a>1.2.Jdbc</h2><h3 id="1-2-1-æ¦‚è¿°"><a href="#1-2-1-æ¦‚è¿°" class="headerlink" title="1.2.1.æ¦‚è¿°"></a>1.2.1.æ¦‚è¿°</h3><blockquote>
<p>Jdbc(Java DataBase Connectorçš„ç¼©å†™)ç§°ä¸ºJavaæ•°æ®åº“è¿æ¥å¯¹è±¡ï¼ŒJdbcæ˜¯Javaå’Œæ•°æ®åº“ä¹‹é—´è¿æ¥çš„æ¡¥æ¢ã€‚é€šè¿‡Jdbcå¯ä»¥ä½¿ç”¨Javaæ¥æ“ä½œæ•°æ®åº“ä¸­çš„æ•°æ®ã€‚</p>
</blockquote>
<h3 id="1-2-2-ç¼ºç‚¹"><a href="#1-2-2-ç¼ºç‚¹" class="headerlink" title="1.2.2.ç¼ºç‚¹"></a>1.2.2.ç¼ºç‚¹</h3><blockquote>
<p>å¼€å‘è¿‡ç¨‹ä¸­éœ€è¦å°†Sqlè¯­å¥ä»¥ç¡¬ç¼–ç çš„æ–¹å¼å†™å…¥åˆ°Javaä»£ç ä¸­ï¼Œå¦‚æœSqlè¯­å¥å‘ç”Ÿæ”¹å˜ï¼Œåˆ™éœ€è¦å¯¹æ•´ä¸ªJavaä»£ç è¿›è¡Œé‡æ–°ç¼–è¯‘ã€‚</p>
</blockquote>
<ul>
<li>Sqlè¯­å¥ä»¥ç¡¬ç¼–ç çš„æ–¹å¼è¿›è¡Œç¼–å†™ï¼Œä¸ä¾¿äºç³»ç»Ÿçš„ç»´æŠ¤å’Œä¿®æ”¹</li>
<li>éœ€è¦æ‰‹åŠ¨ç¼–å†™ä»£ç å®ç°æ•°æ®çš„å°è£…å’Œå¤„ç†</li>
</ul>
<h3 id="1-2-3-è§£å†³"><a href="#1-2-3-è§£å†³" class="headerlink" title="1.2.3.è§£å†³"></a>1.2.3.è§£å†³</h3><blockquote>
<p>å°†Sqlè¯­å¥å®šä¹‰åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼ŒJavaä»£ç é€šè¿‡åŠ¨æ€è¯»å–é…ç½®æ–‡ä»¶çš„æ–¹å¼æ¥åŠ è½½Sqlè¯­å¥ã€‚é€šè¿‡é…ç½®æ–‡ä»¶ç¼–å†™Sqlè¯­å¥åï¼Œå³ä½¿Sqlè¯­å¥å‘ç”Ÿäº†æ”¹å˜ï¼ŒJavaä»£ç ä¹Ÿä¸éœ€è¦é‡æ–°è¿›è¡Œç¼–è¯‘ã€‚</p>
</blockquote>
<ul>
<li>è§£å†³äº†Javaä¸­sqlè¯­å¥ç¡¬ç¼–ç çš„é—®é¢˜</li>
<li>Javaçš„å‚æ•°ä»¥æ˜ å°„æ–¹å¼åŠ¨æ€ä¸Sqlè¯­å¥å‚æ•°è¿›è¡Œæ˜ å°„</li>
<li>ResultSetç»“æœé›†å¯ä»¥è‡ªåŠ¨æ˜ å°„ä¸ºJavaå®ä½“ç±»</li>
</ul>
<h2 id="1-3-MyBatis"><a href="#1-3-MyBatis" class="headerlink" title="1.3.MyBatis"></a>1.3.MyBatis</h2><ul>
<li>2001ï¼šiBatis&#x3D;Internet aBatis</li>
<li>2010ï¼šiBatis&#x3D;&#x3D;ã€‹MyBatis(Googleæ‰˜ç®¡)</li>
</ul>
<h3 id="1-3-1-MyBatisæ˜¯ä»€ä¹ˆ"><a href="#1-3-1-MyBatisæ˜¯ä»€ä¹ˆ" class="headerlink" title="1.3.1.MyBatisæ˜¯ä»€ä¹ˆ"></a>1.3.1.MyBatisæ˜¯ä»€ä¹ˆ</h3><ul>
<li>MyBatisæ˜¯ä¸€ä¸ªæŒä¹…å±‚æ¡†æ¶</li>
<li>MyBatisæ˜¯ä¸€ä¸ªOrmæ¡†æ¶(Object Relational Mapping:å¯¹è±¡å…³ç³»æ˜ å°„ï¼ŒOrmæ˜¯ä¸€ç§ç¨‹åºè®¾è®¡æŠ€æœ¯ï¼Œä¸»è¦ç”¨äºé¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ä¸åŒç¼–ç¨‹è¯­è¨€ä¸­ä¸åŒç±»å‹ä¹‹é—´çš„è½¬æ¢)</li>
<li>MyBatisæä¾›äº†SqlMapå’ŒData Access Objects(Daos)</li>
</ul>
<h3 id="1-3-2-æ•°æ®åº“è®¿é—®æŠ€æœ¯çš„å‘å±•å†ç¨‹"><a href="#1-3-2-æ•°æ®åº“è®¿é—®æŠ€æœ¯çš„å‘å±•å†ç¨‹" class="headerlink" title="1.3.2.æ•°æ®åº“è®¿é—®æŠ€æœ¯çš„å‘å±•å†ç¨‹"></a>1.3.2.æ•°æ®åº“è®¿é—®æŠ€æœ¯çš„å‘å±•å†ç¨‹</h3><blockquote>
<p>Jdbc&#x3D;&#x3D;&gt;DBUtil&#x3D;&#x3D;&gt;MyBatis&#x3D;&#x3D;&gt;Hibernate(å·²æ­»)&#x3D;&#x3D;&gt;Jpa</p>
</blockquote>
<ul>
<li>Jdbcï¼šåŸç”Ÿæ€çš„ï¼Œéœ€è¦å¼€å‘äººå‘˜æ‰‹å†™Sqlè¯­å¥åŠæ•°æ®å°è£…çš„ä»£ç </li>
<li>DBUtilï¼šå¯¹Jdbcè¿›è¡Œäº†ä¸€å®šçš„å°è£…ï¼Œä½†éœ€è¦å¼€å‘äººå‘˜æ‰‹å†™Sqlè¯­å¥ï¼Œå·¥å…·ç±»é€šè¿‡åå°„æŠ€æœ¯å®ç°äº†ç®€å•çš„æ•°æ®ç»‘å®š</li>
<li>MyBatisï¼šéœ€è¦å¼€å‘äººå‘˜é€šè¿‡é…ç½®æ–‡ä»¶æˆ–æ³¨è§£çš„æ–¹å¼å®ç°Sqlè¯­å¥(åŠOrmæ¡†æ¶)ï¼Œæ¡†æ¶å®ç°äº†æ•°æ®çš„ç»‘å®šå’Œå‚æ•°æ˜ å°„ã€‚</li>
<li>Hibernateï¼šéœ€è¦å¼€å‘äººå‘˜ç¼–å†™é…ç½®æ–‡ä»¶ï¼Œæ¡†æ¶è‡ªåŠ¨å®ç°æ•°æ®çš„ç»‘å®šå’Œå¤„ç†</li>
<li>Jpaï¼šç®€å•ä¸”åŠŸèƒ½å¼ºå¤§çš„æ¡†æ¶</li>
</ul>
<h3 id="1-3-3-MyBatisçš„æœ¬è´¨"><a href="#1-3-3-MyBatisçš„æœ¬è´¨" class="headerlink" title="1.3.3.MyBatisçš„æœ¬è´¨"></a>1.3.3.MyBatisçš„æœ¬è´¨</h3><blockquote>
<p>MyBatiså…¶å®å°±æ˜¯ä¸€ä¸ªåŠŸèƒ½æ™šä¸Šçš„é«˜çº§ç‰ˆDBUtilå·¥å…·ç±»ã€‚</p>
</blockquote>
<h3 id="1-3-4-MyBatisçš„ç›®çš„"><a href="#1-3-4-MyBatisçš„ç›®çš„" class="headerlink" title="1.3.4.MyBatisçš„ç›®çš„"></a>1.3.4.MyBatisçš„ç›®çš„</h3><blockquote>
<p>MyBatisçš„æ„¿æ™¯å°±æ˜¯å¸Œæœ›å¼€å‘äººå‘˜æŠŠæ›´å¤šç»å†æ”¾åœ¨Sqlè¯­å¥å’Œä¸šåŠ¡ä¸Šï¼Œé€šè¿‡MyBatisæä¾›çš„æ˜ å°„æ–¹å¼è‡ªåŠ¨åŒ–å°†ç»“æœé›†ä¸­çš„æ•°æ®æ˜ å°„å½“Javaå¯¹è±¡ä¸Šã€‚</p>
</blockquote>
<h3 id="1-3-5-ç¬¬ä¸€ä¸ªMyBatisç¤ºä¾‹"><a href="#1-3-5-ç¬¬ä¸€ä¸ªMyBatisç¤ºä¾‹" class="headerlink" title="1.3.5.ç¬¬ä¸€ä¸ªMyBatisç¤ºä¾‹"></a>1.3.5.ç¬¬ä¸€ä¸ªMyBatisç¤ºä¾‹</h3><p>1)åˆ›å»ºæ­¥éª¤</p>
<ul>
<li><p>åˆ›å»ºé¡¹ç›®</p>
</li>
<li><p>æ·»åŠ ä¾èµ–</p>
</li>
<li><p>ç¼–å†™æ ¸å¿ƒé…ç½®æ–‡ä»¶</p>
</li>
<li><p>ç¼–å†™Pojoç±»</p>
</li>
<li><p>ç¼–å†™æ˜ å°„æ–‡ä»¶(Mapperæ–‡ä»¶)</p>
</li>
<li><p>åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­å¼•å…¥æ˜ å°„æ–‡ä»¶(Mapperæ–‡ä»¶)</p>
</li>
<li><p>ç¼–å†™ä»£ç ä½¿ç”¨æ˜ å°„<br>2)ç¤ºä¾‹</p>
</li>
<li><p>åˆ›å»ºé¡¹ç›®</p>
<blockquote>
<p>æ‰“å¼€ç³»ç»Ÿèœå•ï¼šFile&#x3D;&#x3D;&gt;New&#x3D;&#x3D;&gt;Project<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y1.png"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y2.png"><br>é€‰æ‹©é¡¹ç›®ç±»å‹ï¼šä¸€èˆ¬Javaé¡¹ç›®<br>ä»æ¨¡ç‰ˆåˆ›å»ºé¡¹ç›®ï¼šæ— <br>ç¼–è¾‘é¡¹ç›®ä¿¡æ¯ï¼šé¡¹ç›®åã€ä¿å­˜ä½ç½®ã€æ¨¡å—åç­‰</p>
</blockquote>
</li>
<li><p>æ·»åŠ ä¾èµ–(.jaræ–‡ä»¶ï¼Œä¹Ÿç§°ä¸ºjaråŒ…)</p>
</li>
<li><p>Mybatis-3.4.4.jarï¼šMyBatisçš„ä¾èµ–</p>
</li>
<li><p>Mysql-connector-java-8.0.17.jarï¼šMySqlæ•°æ®åº“çš„ä¾èµ–</p>
<blockquote>
<p>åœ¨é¡¹ç›®ä¸‹æ·»åŠ åä¸ºlibçš„ç›®å½•ï¼šé¡¹ç›®(é¼ æ ‡å³é”®)&#x3D;&#x3D;&gt;New&#x3D;&#x3D;&gt;Directory<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y3.png"><br>å¤åˆ¶ä¾èµ–åˆ°libç›®å½•ä¸‹ï¼š</p>
</blockquote>
</li>
<li><p>å¤åˆ¶ï¼šCtrl+c</p>
</li>
<li><p>ç²˜è´´ï¼šCtrl+v<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y4.png"></p>
<blockquote>
<p>å°†ä¾èµ–æ·»åŠ åˆ°å½“å‰é¡¹ç›®ä¸­ï¼šä¾èµ–æ–‡ä»¶(é¼ æ ‡å³é”®)&#x3D;&#x3D;&gt;èœå•<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y5.png"></p>
</blockquote>
</li>
<li><p>ç¼–å†™æ ¸å¿ƒé…ç½®æ–‡ä»¶</p>
<blockquote>
<p>åœ¨srcç›®å½•ä¸‹æ·»åŠ åä¸ºmybatis-config.xmlçš„é…ç½®æ–‡ä»¶ï¼šsrc(é¼ æ ‡å³é”®)&#x3D;&#x3D;ã€‹New&#x3D;&#x3D;ã€‹File<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y6.png"><br>ç¼–å†™æ ¸å¿ƒé…ç½®æ–‡ä»¶å†…å®¹ï¼šå‚ç…§å®˜æ–¹å¸®åŠ©æ‰‹å†Œ<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y7.png"></p>
</blockquote>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="line">&lt;!DOCTYPE configuration</span><br><span class="line">        PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span><br><span class="line">        &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;</span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">    &lt;environments default=&quot;development&quot;&gt;</span><br><span class="line">        &lt;environment id=&quot;development&quot;&gt;</span><br><span class="line">            &lt;transactionManager type=&quot;JDBC&quot;/&gt;</span><br><span class="line">            &lt;dataSource type=&quot;POOLED&quot;&gt;</span><br><span class="line">                &lt;!-- æ•°æ®åº“é©±åŠ¨ï¼šå‘Šè¯‰ç¼–ç¨‹è¯­è¨€å¦‚ä½•æ¥è¿æ¥æ•°æ®åº“--&gt;</span><br><span class="line">                &lt;property name=&quot;driver&quot; value=&quot;com.mysql.cj.jdbc.Driver&quot;/&gt;</span><br><span class="line">                &lt;!-- æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²ï¼šè¯´æ˜äº†æ•°æ®åº“æœåŠ¡å™¨çš„åœ°å€ã€ç«¯å£å·åŠæ•°æ®åº“åç§°ç­‰ä¿¡æ¯--&gt;</span><br><span class="line">                &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/bank_db?serverTimezone=UTC&quot;/&gt;</span><br><span class="line">                &lt;!-- ç”¨æˆ·åï¼šè¿æ¥æ•°æ®åº“æ—¶éœ€è¦ä½¿ç”¨çš„ç”¨æˆ·å --&gt;</span><br><span class="line">                &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt;</span><br><span class="line">                &lt;!-- å¯†ç ï¼šè¿æ¥æ•°æ®åº“æ—¶ä¸ç”¨æˆ·ååŒ¹é…çš„å¯†ç --&gt;</span><br><span class="line">                &lt;property name=&quot;password&quot; value=&quot;123456&quot;/&gt;</span><br><span class="line">            &lt;/dataSource&gt;</span><br><span class="line">        &lt;/environment&gt;</span><br><span class="line">    &lt;/environments&gt;</span><br><span class="line">    &lt;mappers&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/mappers&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>ç¼–å†™Pojoç±»</p>
<blockquote>
<p>åˆ›å»ºåä¸ºedu.shifan.pojoçš„åŒ…ï¼šsrc(é¼ æ ‡å³é”®)&#x3D;&#x3D;&gt;New&#x3D;&#x3D;&gt;Package<br>åŒ…çš„å‘½åè§„åˆ™ï¼šåŸŸåå€’åºï¼Œå¦‚ï¼šxja.comï¼Œåˆ™åŒ…åä¸ºï¼šcom.xja<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y8.png"><br>åœ¨pojoåŒ…ä¸‹åˆ›å»ºåä¸ºçš„Userç±»ï¼šåŒ…å(é¼ æ ‡å³é”®)&#x3D;&#x3D;&gt;New&#x3D;&#x3D;&gt;Java Class<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y9.png"><br>ç¤ºä¾‹ä»£ç </p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Pojoç±»(å®ä½“ç±»)</span><br><span class="line"> *  ä½œç”¨ï¼šç”¨äºå®ç°æ•°æ®çš„å°è£…åŠä¼ é€’</span><br><span class="line"> *  åˆ›å»ºè¦æ±‚ï¼šä¸€ä¸ªæ•°æ®åº“ä¸­çš„è¡¨å¯¹åº”äºä¸€ä¸ª(æˆ–å¤šä¸ª)Pojoç±»</span><br><span class="line"> *  å‘½åè§„èŒƒï¼š</span><br><span class="line"> *      å®ä½“ç±»çš„åç§°ä¸æ•°æ®åº“è¡¨çš„åç§°ç›¸ä¸€è‡´</span><br><span class="line"> *          å¤šé‡‡ç”¨è¡¨åçš„å•æ•°å½¢å¼è¿›è¡Œå‘½å</span><br><span class="line"> *          å¦‚æœè¡¨åæœ‰å‰ç¼€ï¼Œåˆ™å»æ‰å‰ç¼€ã€‚å¦‚è¡¨åä¸ºsys_userï¼Œåˆ™å®ä½“ç±»åä¸ºUser</span><br><span class="line"> *  å››è¦ç´ ï¼š</span><br><span class="line"> *      aã€å…¬å…±çš„ç±»(ç±»ç”¨publicå…³é”®å­—è¿›è¡Œä¿®é¥°)</span><br><span class="line"> *      bã€ç§æœ‰æˆå‘˜å­—æ®µ</span><br><span class="line"> *          å­—æ®µçš„æ•°é‡ã€ç±»å‹åŠåç§°ä¸æ•°æ®åº“è¡¨ä¸­çš„å­—æ®µç›¸ä¸€è‡´</span><br><span class="line"> *          MySql       Java</span><br><span class="line"> *          int         int/Integer</span><br><span class="line"> *          varchar     String</span><br><span class="line"> *          bit(1)      boolean</span><br><span class="line"> *      cã€æ— å‚æ„é€ å™¨</span><br><span class="line"> *      dã€get/setè®¿é—®å™¨</span><br><span class="line"> */</span><br><span class="line">public class User &#123;</span><br><span class="line">    //bã€ç§æœ‰æˆå‘˜å­—æ®µ</span><br><span class="line">    private int userId;</span><br><span class="line">    private String userName;</span><br><span class="line">    private String card_no;</span><br><span class="line">    private String pwd;</span><br><span class="line">    private int blance;</span><br><span class="line"></span><br><span class="line">    //cã€æ— å‚æ„é€ </span><br><span class="line">    //å¿«æ·é”®ï¼šalt + Insert</span><br><span class="line">    public User() &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //dã€get/setè®¿é—®å™¨</span><br><span class="line">    public int getUserId() &#123;</span><br><span class="line">        return userId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setUserId(int userId) &#123;</span><br><span class="line">        this.userId = userId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    â€¦ â€¦</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>ç¼–å†™æ˜ å°„æ–‡ä»¶(Mapperæ–‡ä»¶)</p>
<blockquote>
<p>åœ¨pojoåŒ…ä¸‹åˆ›å»ºæ˜ å°„æ–‡ä»¶ï¼šåŒ…å(é¼ æ ‡å³é”®)&#x3D;&#x3D;&gt;New&#x3D;&#x3D;&gt;File<br>æ˜ å°„æ–‡ä»¶çš„å‘½åè§„åˆ™ï¼šå®ä½“ç±»å+Mapper.xml<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y10.png"><br>ç¼–è¾‘æ˜ å°„æ–‡ä»¶çš„å†…å®¹ï¼š</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper</span><br><span class="line">        PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span><br><span class="line">        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- æ˜ å°„æ–‡ä»¶ï¼šç”¨äºå®šä¹‰Sqlè¯­å¥ä»£ç ç‰‡æ®µ--&gt;</span><br><span class="line">&lt;!-- å‚è€ƒå¸®åŠ©æ‰‹å†Œï¼šå…¥é—¨==ã€‹æ¢ç©¶å·²æ˜ å°„çš„ SQL è¯­å¥--&gt;</span><br><span class="line">&lt;mapper namespace=&quot;edu.shifan.pojo.UserMapper&quot;&gt;</span><br><span class="line">    &lt;!-- æŸ¥è¯¢æ‰€æœ‰çš„ç”¨æˆ·æ•°æ®--&gt;</span><br><span class="line">    &lt;select id=&quot;findAll&quot; resultType=&quot;edu.shifan.pojo.User&quot;&gt;</span><br><span class="line">        select * from users</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­å¼•å…¥æ˜ å°„æ–‡ä»¶(Mapperæ–‡ä»¶)<br>åœ¨MyBatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­å¼•å…¥Mapperæ˜ å°„æ–‡ä»¶ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;configuration&gt;</span><br><span class="line">    &lt;environments default=&quot;development&quot;&gt;</span><br><span class="line">        &lt;environment id=&quot;development&quot;&gt;</span><br><span class="line">            &lt;transactionManager type=&quot;JDBC&quot;/&gt;</span><br><span class="line">            &lt;dataSource type=&quot;POOLED&quot;&gt;</span><br><span class="line">                &lt;!-- æ•°æ®åº“é©±åŠ¨ï¼šå‘Šè¯‰ç¼–ç¨‹è¯­è¨€å¦‚ä½•æ¥è¿æ¥æ•°æ®åº“--&gt;</span><br><span class="line">                &lt;property name=&quot;driver&quot; value=&quot;com.mysql.cj.jdbc.Driver&quot;/&gt;</span><br><span class="line">                &lt;!-- æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²ï¼šè¯´æ˜äº†æ•°æ®åº“æœåŠ¡å™¨çš„åœ°å€ã€ç«¯å£å·åŠæ•°æ®åº“åç§°ç­‰ä¿¡æ¯--&gt;</span><br><span class="line">                &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/bank_db?serverTimezone=UTC&quot;/&gt;</span><br><span class="line">                &lt;!-- ç”¨æˆ·åï¼šè¿æ¥æ•°æ®åº“æ—¶éœ€è¦ä½¿ç”¨çš„ç”¨æˆ·å --&gt;</span><br><span class="line">                &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt;</span><br><span class="line">                &lt;!-- å¯†ç ï¼šè¿æ¥æ•°æ®åº“æ—¶ä¸ç”¨æˆ·ååŒ¹é…çš„å¯†ç --&gt;</span><br><span class="line">                &lt;property name=&quot;password&quot; value=&quot;123456&quot;/&gt;</span><br><span class="line">            &lt;/dataSource&gt;</span><br><span class="line">        &lt;/environment&gt;</span><br><span class="line">    &lt;/environments&gt;</span><br><span class="line">    &lt;mappers&gt;</span><br><span class="line">        &lt;!-- åœ¨mappersæ ‡ç­¾ä¸­å¼•å…¥æ˜ å°„æ–‡ä»¶ï¼šå‘Šè¯‰MyBatisæ˜ å°„æ–‡ä»¶çš„ä½ç½®--&gt;</span><br><span class="line">        &lt;mapper resource=&quot;edu/shifan/pojo/UserMapper.xml&quot; /&gt;</span><br><span class="line">    &lt;/mappers&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>ç¼–å†™ä»£ç ä½¿ç”¨æ˜ å°„<br>åœ¨srcç›®å½•ä¸‹åˆ›å»ºåä¸ºedu.shifan.demoçš„åŒ…ï¼šsrc(é¼ æ ‡å³é”®)&#x3D;&#x3D;&gt;New&#x3D;&#x3D;&gt;package<br>åœ¨demoåŒ…ä¸‹åˆ›å»ºåä¸ºDemoçš„ç±»ã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">public class Demo &#123;</span><br><span class="line">    /**</span><br><span class="line">     * main()å‡½æ•°</span><br><span class="line">     *  å¿«æ·é”®ï¼š</span><br><span class="line">     *      psvm + å›è½¦       //ç”Ÿæˆmain()æ–¹æ³•</span><br><span class="line">     *      sout + å›è½¦       //ç”Ÿæˆè¾“å‡ºè¯­å¥</span><br><span class="line">     *</span><br><span class="line">     * @param args</span><br><span class="line">     */</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        //ä»¥æµæ–¹å¼åŠ è½½é…ç½®æ–‡ä»¶</span><br><span class="line">        InputStream is = Demo.class.getClassLoader().getResourceAsStream(&quot;mybatis-config.xml&quot;);</span><br><span class="line">        //è·å–å·¥å‚æ„å»ºå™¨å¯¹è±¡</span><br><span class="line">        SqlSessionFactoryBuilder builder = new SqlSessionFactoryBuilder();</span><br><span class="line">        //é€šè¿‡æ„å»ºå™¨å¯¹è±¡è·å–å·¥å‚å¯¹è±¡</span><br><span class="line">        SqlSessionFactory factory = builder.build(is);</span><br><span class="line">        //é€šè¿‡å·¥å‚å¯¹è±¡è·å–SqlSessionå¯¹è±¡</span><br><span class="line">        SqlSession session = factory.openSession();</span><br><span class="line">        //é€šè¿‡sessionå¯¹è±¡æ‰§è¡Œæ˜ å°„</span><br><span class="line">        //å¦‚æœç±»å‹æ˜¾ç¤ºä¸ºçº¢è‰²åˆ™è¡¨ç¤ºæœªå¯¼åŒ…ï¼Œé€šè¿‡å¿«æ·é”®alt+Enterå¯¼åŒ…</span><br><span class="line">        List&lt;User&gt; list = session.selectList(&quot;edu.shifan.pojo.UserMapper.findAll&quot;);</span><br><span class="line">        //å…³é—­sessionå¯¹è±¡</span><br><span class="line">        session.close();</span><br><span class="line"></span><br><span class="line">        //é€šè¿‡è¾“å‡ºè¯­å¥è¾“å‡ºæŸ¥è¯¢ç»“æœ</span><br><span class="line">        //System.out.println(list);</span><br><span class="line">        for(User u : list)</span><br><span class="line">            System.out.println(u);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="2-MyBatiså®ç°CRUD"><a href="#2-MyBatiså®ç°CRUD" class="headerlink" title="2.MyBatiså®ç°CRUD"></a>2.MyBatiså®ç°CRUD</h1><h2 id="2-1-å¸¸ç”¨Sqlè¯­å¥"><a href="#2-1-å¸¸ç”¨Sqlè¯­å¥" class="headerlink" title="2.1.å¸¸ç”¨Sqlè¯­å¥"></a>2.1.å¸¸ç”¨Sqlè¯­å¥</h2><blockquote>
<p>ã€Selectè¯­å¥ã€‘</p>
</blockquote>
<ul>
<li>1ã€Râ€“Readï¼šä»æ•°æ®åº“ä¸­è¡¨ä¸­è¯»å–æ•°æ®<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select *|å­—æ®µåˆ—è¡¨ from è¡¨å [whereæ¡ä»¶] [order by å­—æ®µå asc(é»˜è®¤å€¼ï¼Œå‡åºæ’åº) | desc(é™åºæ’åº)]</span><br></pre></td></tr></table></figure></li>
<li>ä½¿ç”¨*æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯</li>
<li>*è¡¨ç¤ºæ‰€æœ‰å­—æ®µï¼Œå®é™…å·¥ä½œä¸­ä¸æ¨èä½¿ç”¨ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç´¢å¼•å¤±æ•ˆ<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select * from users</span><br></pre></td></tr></table></figure></li>
<li>ä½¿ç”¨å­—æ®µåˆ—è¡¨è¿›è¡ŒæŸ¥è¯¢(æ¨èæ–¹å¼)</li>
<li>ç¼ºç‚¹ï¼šSqlè¯­å¥ç›¸å¯¹æ¯”è¾ƒå¤æ‚</li>
<li>ä¼˜ç‚¹ï¼šä½¿å¾—æŸ¥è¯¢æ›´åŠ çµæ´»(å¯ä»¥æ ¹æ®éœ€è¦è¿”å›å­—æ®µåˆ—è¡¨)<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select user_id,user_name,card_no,pwd,blance from users</span><br></pre></td></tr></table></figure></li>
<li>ä½¿ç”¨whereè¯­å¥å®ç°æ•°æ®çš„æŸ¥è¯¢<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select user_id,user_name,card_no,pwd,blance from users</span><br><span class="line">	where blance&gt;500 and blance &lt;5000</span><br></pre></td></tr></table></figure></li>
<li>ä½¿ç”¨order byå­å¥å®ç°æ•°æ®çš„æŸ¥è¯¢<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select user_id,user_name,card_no,pwd,blance from users</span><br><span class="line">	order by blance desc</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ã€Insertè¯­å¥ã€‘</p>
</blockquote>
</li>
<li>2ã€Câ€“Createï¼šå°†æ•°æ®å†™å…¥åˆ°æ•°æ®åº“è¡¨ä¸­<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into è¡¨å [(å­—æ®µåˆ—è¡¨)] values(å€¼åˆ—è¡¨)</span><br></pre></td></tr></table></figure></li>
<li>å¸¦æœ‰å­—æ®µåˆ—è¡¨çš„æ’å…¥è¯­å¥</li>
<li>æ³¨æ„ï¼šè¯­å¥ä¸­å­—æ®µçš„ä¸ªæ•°å’Œå€¼çš„ä¸ªæ•°å¿…é¡»ç›¸åŒ¹é…<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">insert into users (user_id,user_name,card_no,pwd,blance)</span><br><span class="line">	values(6,&#x27;Tom&#x27;,&#x27;5542145&#x27;,&#x27;123&#x27;,200)</span><br></pre></td></tr></table></figure></li>
<li>å¸¦æœ‰éƒ¨åˆ†å­—æ®µåˆ—è¡¨çš„æ’å…¥è¯­å¥	</li>
<li>æ³¨æ„ï¼šæ’å…¥æ•°æ®æ—¶å¿…é¡»ä¸ºéç©ºå­—æ®µæä¾›å€¼ï¼Œå¦åˆ™æ‰§è¡ŒæŠ¥é”™<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">insert into users (user_id,user_name,blance)	</span><br><span class="line">	values(8,&#x27;Jerry&#x27;,300)</span><br></pre></td></tr></table></figure></li>
<li>ç¼ºçœå­—æ®µåˆ—è¡¨çš„æ’å…¥è¯­å¥<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into users values(9,&#x27;Rose&#x27;,&#x27;5542147&#x27;,&#x27;123&#x27;,200)</span><br></pre></td></tr></table></figure></li>
<li>ç¼ºçœå­—æ®µåˆ—è¡¨çš„æ–¹å¼å¯¹éƒ¨åˆ†å­—æ®µè¿›è¡Œæ•°æ®æ’å…¥</li>
<li>æ³¨æ„ï¼šç¼ºçœå­—æ®µåˆ—è¡¨çš„æ’å…¥è¯­å¥é»˜è®¤å°†ä¸ºæ‰€æœ‰å­—æ®µæ’å…¥æ•°æ®(ä¸æ”¯æŒéƒ¨åˆ†æ’å…¥)</li>
<li>ä¸‹é¢çš„è¯­å¥æ— æ³•æ­£å¸¸æ‰§è¡Œ<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into users values(8,&#x27;Jerry&#x27;,300)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ã€Updateè¯­å¥ã€‘</p>
</blockquote>
</li>
<li>3ã€Uâ€“Updateï¼šæ›´æ–°æ•°æ®åº“è¡¨ä¸­çš„æ•°æ®<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update è¡¨å set å­—æ®µå1=å€¼1 [,å­—æ®µå2=å€¼2,......] [whereæ¡ä»¶]</span><br></pre></td></tr></table></figure></li>
<li>å¸¦æœ‰whereæ¡ä»¶çš„æ›´æ–°è¯­å¥<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">update users set card_no=&#x27;63340921&#x27;,pwd=&#x27;789&#x27;</span><br><span class="line">	where user_id=8</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ã€Deleteè¯­å¥ã€‘</p>
</blockquote>
</li>
<li>4ã€Dâ€“Deleteï¼šä»æ•°æ®åº“è¡¨ä¸­åˆ é™¤æ•°æ®<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">delete from è¡¨å [whereæ¡ä»¶]</span><br></pre></td></tr></table></figure></li>
<li>å¸¦æœ‰whereæ¡ä»¶çš„åˆ é™¤è¯­å¥<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">delete from users </span><br><span class="line">	where user_id&gt;4</span><br><span class="line">æ³¨æ„ï¼šå¦‚æœåœ¨updateæˆ–deleteè¯­å¥ä¸­çœç•¥äº†whereå­å¥ï¼Œåˆ™è¯­å¥ä¼šå¯¹è¡¨ä¸­æ‰€æœ‰æ•°æ®ç”Ÿæ•ˆã€‚</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="2-2-MyBatiså®ç°CRUD"><a href="#2-2-MyBatiså®ç°CRUD" class="headerlink" title="2.2.MyBatiså®ç°CRUD"></a>2.2.MyBatiså®ç°CRUD</h2><h3 id="2-2-1-åˆ›å»ºé¡¹ç›®"><a href="#2-2-1-åˆ›å»ºé¡¹ç›®" class="headerlink" title="2.2.1.åˆ›å»ºé¡¹ç›®"></a>2.2.1.åˆ›å»ºé¡¹ç›®</h3><p>ç•¥</p>
<h3 id="2-2-2-æ·»åŠ ä¾èµ–"><a href="#2-2-2-æ·»åŠ ä¾èµ–" class="headerlink" title="2.2.2.æ·»åŠ ä¾èµ–"></a>2.2.2.æ·»åŠ ä¾èµ–</h3><p>ç•¥</p>
<h3 id="2-2-3-æ·»åŠ MyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶"><a href="#2-2-3-æ·»åŠ MyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶" class="headerlink" title="2.2.3.æ·»åŠ MyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶"></a>2.2.3.æ·»åŠ MyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶</h3><p>ç•¥</p>
<h2 id="2-3-åˆ›å»ºPojoç±»"><a href="#2-3-åˆ›å»ºPojoç±»" class="headerlink" title="2.3.åˆ›å»ºPojoç±»"></a>2.3.åˆ›å»ºPojoç±»</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * å®ä½“ç±»</span><br><span class="line"> *  å‘½åè§„åˆ™</span><br><span class="line"> *      ç»„æˆç±»åçš„å„å•è¯é¦–å­—æ¯å¤§å†™ã€‚</span><br><span class="line"> *  å­—æ®µå‘½åè§„åˆ™</span><br><span class="line"> *      å¦‚æœå­—æ®µåç”±ä¸€ä¸ªå•è¯ç»„æˆï¼Œåˆ™å•è¯çš„å„å­—æ¯å…¨éƒ¨å°å†™</span><br><span class="line"> *      å¦‚æœå­—æ®µåç”±å¤šä¸ªå•è¯ç»„æˆï¼Œåˆ™ç¬¬ä¸€ä¸ªå•è¯å…¨éƒ¨å°å†™ï¼Œå…¶åå„å•è¯é¦–å­—æ¯å¤§å†™ã€‚å¦‚ï¼šuserName</span><br><span class="line"> */</span><br><span class="line">public class User &#123;</span><br><span class="line">    //ç§æœ‰æˆå‘˜å­—æ®µ</span><br><span class="line">    private int userId;</span><br><span class="line">    private String userName;</span><br><span class="line">    private String cardNo;</span><br><span class="line">    private String pwd;</span><br><span class="line">    private int blance;</span><br><span class="line"></span><br><span class="line">    //æ— å‚æ„é€ å‡½æ•°</span><br><span class="line">    public User() &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //get/setè®¿é—®å™¨</span><br><span class="line">    public int getUserId() &#123;</span><br><span class="line">        return userId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setUserId(int userId) &#123;</span><br><span class="line">        this.userId = userId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    â€¦â€¦</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="2-4-ç¼–å†™Mapperæ˜ å°„"><a href="#2-4-ç¼–å†™Mapperæ˜ å°„" class="headerlink" title="2.4.ç¼–å†™Mapperæ˜ å°„"></a>2.4.ç¼–å†™Mapperæ˜ å°„</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;mapper namespace=&quot;edu.shifan.pojo.UserMapper&quot;&gt;</span><br><span class="line">    &lt;!-- æ–°å¢æ•°æ®åˆ°æ•°æ®åº“ä¸­ --&gt;</span><br><span class="line">    &lt;insert id=&quot;add&quot;&gt;</span><br><span class="line">        insert into users</span><br><span class="line">            values(10,&#x27;Tom&#x27;,&#x27;53343261&#x27;,&#x27;123&#x27;,2000)</span><br><span class="line">    &lt;/insert&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- æŒ‰Idä¿®æ”¹æ•°æ® --&gt;</span><br><span class="line">    &lt;update id=&quot;updateById&quot;&gt;</span><br><span class="line">        update users set user_name=&#x27;Jerry&#x27;,pwd=&#x27;456&#x27;,blance=10000</span><br><span class="line">           where user_id=10</span><br><span class="line">    &lt;/update&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- æŒ‰Idåˆ é™¤æ•°æ® --&gt;</span><br><span class="line">    &lt;delete id=&quot;delById&quot;&gt;</span><br><span class="line">        delete from users</span><br><span class="line">           where user_id=10</span><br><span class="line">    &lt;/delete&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·æ•°æ® --&gt;</span><br><span class="line">    &lt;select id=&quot;findAll&quot; resultType=&quot;edu.shifan.pojo.User&quot;&gt;</span><br><span class="line">        select * from users</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>
<h2 id="2-5-å¼•å…¥Mapperæ˜ å°„"><a href="#2-5-å¼•å…¥Mapperæ˜ å°„" class="headerlink" title="2.5.å¼•å…¥Mapperæ˜ å°„"></a>2.5.å¼•å…¥Mapperæ˜ å°„</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;mappers&gt;</span><br><span class="line">    &lt;!-- å¼•å…¥æ˜ å°„æ–‡ä»¶ --&gt;</span><br><span class="line">    &lt;mapper resource=&quot;edu/shifan/pojo/UserMapper.xml&quot; /&gt;</span><br><span class="line">&lt;/mappers&gt;</span><br></pre></td></tr></table></figure>

<h2 id="2-6-ä½¿ç”¨æ˜ å°„"><a href="#2-6-ä½¿ç”¨æ˜ å°„" class="headerlink" title="2.6.ä½¿ç”¨æ˜ å°„"></a>2.6.ä½¿ç”¨æ˜ å°„</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line">public class Demo &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        //æ–°å¢æ•°æ®åˆ°Usersè¡¨ä¸­</span><br><span class="line">        //add();</span><br><span class="line"></span><br><span class="line">        //æ›´æ–°usersè¡¨ä¸­æ•°æ®</span><br><span class="line">        //update();</span><br><span class="line"></span><br><span class="line">        //æŒ‰Idåˆ é™¤ç”¨æˆ·ä¿¡æ¯</span><br><span class="line">        del();</span><br><span class="line"></span><br><span class="line">        //æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·åˆ—è¡¨</span><br><span class="line">        findList();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * æ–°å¢ç”¨æˆ·ä¿¡æ¯åˆ°Usersè¡¨ä¸­</span><br><span class="line">     */</span><br><span class="line">    private static void add() &#123;</span><br><span class="line">        //ä»¥æµæ–¹å¼è¯»å–é…ç½®æ–‡ä»¶</span><br><span class="line">        InputStream is = Demo.class.getClassLoader().getResourceAsStream(&quot;mybatis-config.xml&quot;);</span><br><span class="line">        //è·å–SqlSessionå·¥å‚å¯¹è±¡</span><br><span class="line">        SqlSessionFactory factory  = new SqlSessionFactoryBuilder().build(is);</span><br><span class="line">        //è·å–SqlSessionå¯¹è±¡</span><br><span class="line">        SqlSession session = factory.openSession(true);</span><br><span class="line"></span><br><span class="line">        //ä½¿ç”¨æ˜ å°„</span><br><span class="line">        //countï¼šå—å½±å“è¡Œæ•°</span><br><span class="line">        int count = session.insert(&quot;edu.shifan.pojo.UserMapper.add&quot;);</span><br><span class="line"></span><br><span class="line">        //å…³é—­Sessionå¯¹è±¡</span><br><span class="line">        session.close();</span><br><span class="line"></span><br><span class="line">        //å¤„ç†æ‰§è¡Œç»“æœ</span><br><span class="line">        if(count&gt;0)</span><br><span class="line">            System.out.println(&quot;æ•°æ®æ·»åŠ æˆåŠŸ&quot;);</span><br><span class="line">        else</span><br><span class="line">            System.out.println(&quot;æ•°æ®æ·»åŠ å¤±è´¥&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * æ›´æ–°ç”¨æˆ·ä¿¡æ¯åˆ°Usersè¡¨ä¸­</span><br><span class="line">     */</span><br><span class="line">    private static void update() &#123;</span><br><span class="line">        //ä»¥æµæ–¹å¼è¯»å–é…ç½®æ–‡ä»¶</span><br><span class="line">        InputStream is = Demo.class.getClassLoader().getResourceAsStream(&quot;mybatis-config.xml&quot;);</span><br><span class="line">        //è·å–SqlSessionå·¥å‚å¯¹è±¡</span><br><span class="line">        SqlSessionFactory factory  = new SqlSessionFactoryBuilder().build(is);</span><br><span class="line">        //è·å–SqlSessionå¯¹è±¡</span><br><span class="line">        SqlSession session = factory.openSession(true);</span><br><span class="line"></span><br><span class="line">        //ä½¿ç”¨æ˜ å°„</span><br><span class="line">        //countï¼šå—å½±å“è¡Œæ•°</span><br><span class="line">        int count = session.update(&quot;edu.shifan.pojo.UserMapper.updateById&quot;);</span><br><span class="line"></span><br><span class="line">        //å…³é—­Sessionå¯¹è±¡</span><br><span class="line">        session.close();</span><br><span class="line"></span><br><span class="line">        //å¤„ç†æ‰§è¡Œç»“æœ</span><br><span class="line">        if(count&gt;0)</span><br><span class="line">            System.out.println(&quot;æ•°æ®ä¿®æ”¹æˆåŠŸ&quot;);</span><br><span class="line">        else</span><br><span class="line">            System.out.println(&quot;æ•°æ®ä¿®æ”¹å¤±è´¥&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * æ›´æ–°ç”¨æˆ·ä¿¡æ¯åˆ°Usersè¡¨ä¸­</span><br><span class="line">     */</span><br><span class="line">    private static void del() &#123;</span><br><span class="line">        //ä»¥æµæ–¹å¼è¯»å–é…ç½®æ–‡ä»¶</span><br><span class="line">        InputStream is = Demo.class.getClassLoader().getResourceAsStream(&quot;mybatis-config.xml&quot;);</span><br><span class="line">        //è·å–SqlSessionå·¥å‚å¯¹è±¡</span><br><span class="line">        SqlSessionFactory factory  = new SqlSessionFactoryBuilder().build(is);</span><br><span class="line">        //è·å–SqlSessionå¯¹è±¡</span><br><span class="line">        SqlSession session = factory.openSession(true);</span><br><span class="line"></span><br><span class="line">        //ä½¿ç”¨æ˜ å°„</span><br><span class="line">        //countï¼šå—å½±å“è¡Œæ•°</span><br><span class="line">        int count = session.delete(&quot;edu.shifan.pojo.UserMapper.delById&quot;);</span><br><span class="line"></span><br><span class="line">        //å…³é—­Sessionå¯¹è±¡</span><br><span class="line">        session.close();</span><br><span class="line"></span><br><span class="line">        //å¤„ç†æ‰§è¡Œç»“æœ</span><br><span class="line">        if(count&gt;0)</span><br><span class="line">            System.out.println(&quot;æ•°æ®åˆ é™¤æˆåŠŸ&quot;);</span><br><span class="line">        else</span><br><span class="line">            System.out.println(&quot;æ•°æ®åˆ é™¤å¤±è´¥&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·åˆ—è¡¨</span><br><span class="line">     */</span><br><span class="line">    private static void findList() &#123;</span><br><span class="line">        //ä»¥æµæ–¹å¼è¯»å–é…ç½®æ–‡ä»¶</span><br><span class="line">        InputStream is = Demo.class.getClassLoader().getResourceAsStream(&quot;mybatis-config.xml&quot;);</span><br><span class="line">        //è·å–SqlSessionå·¥å‚å¯¹è±¡</span><br><span class="line">        SqlSessionFactory factory  = new SqlSessionFactoryBuilder().build(is);</span><br><span class="line">        //è·å–SqlSessionå¯¹è±¡</span><br><span class="line">        SqlSession session = factory.openSession();</span><br><span class="line"></span><br><span class="line">        //ä½¿ç”¨æ˜ å°„</span><br><span class="line">        List&lt;User&gt; list = session.selectList(&quot;edu.shifan.pojo.UserMapper.findAll&quot;);</span><br><span class="line"></span><br><span class="line">        //å…³é—­Sessionå¯¹è±¡</span><br><span class="line">        session.close();</span><br><span class="line"></span><br><span class="line">        //å¤„ç†æŸ¥è¯¢ç»“æœ</span><br><span class="line">        for(User u : list)</span><br><span class="line">            System.out.println(u);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="3-MyBatisé…ç½®æ–‡ä»¶"><a href="#3-MyBatisé…ç½®æ–‡ä»¶" class="headerlink" title="3.MyBatisé…ç½®æ–‡ä»¶"></a>3.MyBatisé…ç½®æ–‡ä»¶</h1><h2 id="3-1-æ ¸å¿ƒé…ç½®æ–‡ä»¶"><a href="#3-1-æ ¸å¿ƒé…ç½®æ–‡ä»¶" class="headerlink" title="3.1.æ ¸å¿ƒé…ç½®æ–‡ä»¶"></a>3.1.æ ¸å¿ƒé…ç½®æ–‡ä»¶</h2><h3 id="3-1-1-æ¦‚è¿°"><a href="#3-1-1-æ¦‚è¿°" class="headerlink" title="3.1.1.æ¦‚è¿°"></a>3.1.1.æ¦‚è¿°</h3><blockquote>
<p>Mybatis-config.xmlé…ç½®æ–‡ä»¶(æ ¸å¿ƒé…ç½®æ–‡ä»¶)æ˜¯ä¸€ä¸ªå…¨å±€çš„é…ç½®æ–‡ä»¶ã€‚</p>
</blockquote>
<h3 id="3-1-2-é…ç½®é¡¹"><a href="#3-1-2-é…ç½®é¡¹" class="headerlink" title="3.1.2.é…ç½®é¡¹"></a>3.1.2.é…ç½®é¡¹</h3><ul>
<li>Propertiesï¼šåŠ è½½å¤–éƒ¨èµ„æºæ–‡ä»¶</li>
<li>Settingsï¼šå…¨å±€å‚æ•°é…ç½®</li>
<li>typeAliasesï¼šç±»å‹åˆ«å</li>
<li>typeHandlerï¼šç±»å‹å¤„ç†å™¨</li>
<li>pluginsï¼šæ’ä»¶</li>
<li>environmentsï¼šè¿è¡Œç¯å¢ƒå¯¹è±¡é›†åˆ</li>
<li>environmentï¼šè¿è¡Œç¯å¢ƒå¯¹è±¡</li>
<li>mappersï¼šæ˜ å°„å™¨<blockquote>
<p>æ³¨æ„ï¼šé…ç½®é¡¹æœ‰å…ˆåé¡ºåºçš„è¦æ±‚</p>
</blockquote>
</li>
</ul>
<h2 id="2-å¸¸ç”¨é…ç½®"><a href="#2-å¸¸ç”¨é…ç½®" class="headerlink" title=".2.å¸¸ç”¨é…ç½®"></a>.2.å¸¸ç”¨é…ç½®</h2><h3 id="3-2-1-Properties"><a href="#3-2-1-Properties" class="headerlink" title="3.2.1.Properties"></a>3.2.1.Properties</h3><blockquote>
<p>1)ä½œç”¨<br>å¼•å…¥å¤–éƒ¨é…ç½®æ–‡ä»¶<br>2)ç¤ºä¾‹</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">ã€Propertiesé…ç½®æ–‡ä»¶ã€‘</span><br><span class="line"># é…ç½®æ–‡ä»¶</span><br><span class="line"># å¸¸è§é…ç½®æ–‡ä»¶ï¼š.iniã€.xmlã€.properties</span><br><span class="line"># æ ¼å¼ï¼škey=value</span><br><span class="line"># æ³¨æ„ï¼šé…ç½®æ–‡ä»¶ä¸­çš„æ‰€æœ‰å†…å®¹éƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹çš„</span><br><span class="line">driver=com.mysql.cj.jdbc.Driver</span><br><span class="line">url=jdbc:mysql://localhost:3306/bank_db?serverTimezone=UTC</span><br><span class="line">user=root</span><br><span class="line">pwd=123456</span><br><span class="line">ã€æ ¸å¿ƒé…ç½®æ–‡ä»¶ã€‘</span><br><span class="line">&lt;!--</span><br><span class="line">    xmlæ–‡ä»¶</span><br><span class="line">        æ–‡æ¡£å£°æ˜</span><br><span class="line"></span><br><span class="line">        æ–‡æ¡£å†…å®¹(configurationéƒ¨åˆ†ï¼Œconfigurationç§°ä¸ºæ ¹èŠ‚ç‚¹)</span><br><span class="line">    æ³¨æ„ï¼šxmlæ–‡ä»¶ä¸­æ ¹èŠ‚ç‚¹åªèƒ½æœ‰ä¸€ä¸ª</span><br><span class="line">--&gt;</span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">    &lt;!-- propertiesï¼šç”¨äºå¼•å…¥å¤–éƒ¨é…ç½®æ–‡ä»¶ï¼Œé…ç½®åœ¨environmentsçš„å‰é¢--&gt;</span><br><span class="line">    &lt;properties resource=&quot;db.properties&quot;/&gt;</span><br><span class="line"></span><br><span class="line">    &lt;environments default=&quot;development&quot;&gt;</span><br><span class="line">        &lt;environment id=&quot;development&quot;&gt;</span><br><span class="line">            &lt;transactionManager type=&quot;JDBC&quot;/&gt;</span><br><span class="line">            &lt;dataSource type=&quot;POOLED&quot;&gt;</span><br><span class="line">                &lt;property name=&quot;driver&quot; value=&quot;$&#123;driver&#125;&quot;/&gt;</span><br><span class="line">                &lt;property name=&quot;url&quot; value=&quot;$&#123;url&#125;&quot;/&gt;</span><br><span class="line">                &lt;property name=&quot;username&quot; value=&quot;$&#123;user&#125;&quot;/&gt;</span><br><span class="line">                &lt;property name=&quot;password&quot; value=&quot;$&#123;pwd&#125;&quot;/&gt;</span><br><span class="line">            &lt;/dataSource&gt;</span><br><span class="line">        &lt;/environment&gt;</span><br><span class="line">    &lt;/environments&gt;</span><br><span class="line"></span><br><span class="line">    &lt;mappers&gt;</span><br><span class="line">    &lt;/mappers&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>3)è¯´æ˜<br>Mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­çš„propertiesæ ‡ç­¾çš„åŠ è½½æ˜¯æœ‰é¡ºåºçš„ï¼Œé¦–å…ˆåŠ è½½propertiesæ ‡ç­¾ä¸­å®šä¹‰çš„å±æ€§ï¼Œç„¶ååœ¨å»è¯»å–resourcesæ ‡ç­¾ä¸­resourceå±æ€§å¼•å…¥çš„å¤–éƒ¨æ–‡ä»¶ã€‚è¯»å–è¿‡ç¨‹åé¢çš„å†…å®¹ä¼šè¦†ç›–å‰é¢çš„å†…å®¹ã€‚<br>4)ä¼˜åŠ¿<br>ä½¿å¾—mybatisçš„ç¯å¢ƒé…ç½®ä¸æ•°æ®åº“çš„é…ç½®åˆ†ç¦»ï¼Œä¾¿äºæ•°æ®åº“è¿æ¥ä¿¡æ¯çš„ä¿®æ”¹ã€‚<br>5)æ³¨æ„äº‹é¡¹</p>
</blockquote>
<ul>
<li>Propertiesæ ‡ç­¾éœ€è¦å®šä¹‰åœ¨environmentsçš„å‰é¢</li>
<li>æ³¨æ„åŒºåˆ†å¤§å°å†™</li>
</ul>
<h3 id="3-2-2-environments"><a href="#3-2-2-environments" class="headerlink" title="3.2.2.environments"></a>3.2.2.environments</h3><blockquote>
<p>1)æ¦‚è¿°<br>MyBatisä¸­é€šè¿‡environmentså¯ä»¥é…ç½®æ•°æ®åº“çš„è¿æ¥ä¿¡æ¯ã€‚<br>2)é…ç½®</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--</span><br><span class="line">    xmlæ–‡ä»¶</span><br><span class="line">        æ–‡æ¡£å£°æ˜</span><br><span class="line"></span><br><span class="line">        æ–‡æ¡£å†…å®¹(configurationéƒ¨åˆ†ï¼Œconfigurationç§°ä¸ºæ ¹èŠ‚ç‚¹)</span><br><span class="line">    æ³¨æ„ï¼šxmlæ–‡ä»¶ä¸­æ ¹èŠ‚ç‚¹åªèƒ½æœ‰ä¸€ä¸ª</span><br><span class="line">--&gt;</span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">    &lt;!-- propertiesï¼šç”¨äºå¼•å…¥å¤–éƒ¨é…ç½®æ–‡ä»¶ï¼Œé…ç½®åœ¨environmentsçš„å‰é¢--&gt;</span><br><span class="line">    &lt;properties resource=&quot;db.properties&quot;/&gt;</span><br><span class="line">    &lt;!--</span><br><span class="line">        è¿è¡Œç¯å¢ƒå¯¹è±¡é›†åˆ(æ•°æ®åº“ç¯å¢ƒé…ç½®)</span><br><span class="line">            defaultå±æ€§ï¼šæŒ‡å®šå½“å‰ä½¿ç”¨çš„æ•°æ®æºç¯å¢ƒ</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;environments default=&quot;dev&quot;&gt;</span><br><span class="line">        &lt;!-- æ•°æ®æºç¯å¢ƒ--&gt;</span><br><span class="line">        &lt;!-- æ•°æ®æºç¯å¢ƒ1ï¼šå¼€å‘æ—¶ä½¿ç”¨çš„æ•°æ®åº“ç¯å¢ƒ--&gt;</span><br><span class="line">        &lt;environment id=&quot;dev&quot;&gt;</span><br><span class="line">            &lt;!--</span><br><span class="line">                é…ç½®äº‹åŠ¡ç®¡ç†çš„æ–¹å¼ï¼š</span><br><span class="line">                    typeçš„å–å€¼ï¼š</span><br><span class="line">                        JDBCï¼šä½¿ç”¨JDBCçš„äº‹åŠ¡æäº¤ï¼Œäº‹åŠ¡ç®¡ç†å™¨æ¥æºäºæ•°æ®æº</span><br><span class="line">                        MANAGEDï¼šä½¿ç”¨å®¹å™¨æ¥å®ç°äº‹åŠ¡ç®¡ç†ï¼Œå¦‚ï¼šspring(å®¹å™¨)</span><br><span class="line">            --&gt;</span><br><span class="line">            &lt;transactionManager type=&quot;JDBC&quot;/&gt;</span><br><span class="line">            &lt;!--</span><br><span class="line">                dataSource:é…ç½®æ•°æ®æºå¯¹è±¡</span><br><span class="line">                    typeçš„å–å€¼ï¼š</span><br><span class="line">                        UNPOOLEDï¼šä½¿ç”¨ç®€å•æ•°æ®æº(ä¸ä½¿ç”¨è¿æ¥æ± )ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½ä¼šæ‰“å¼€å’Œå…³é—­ä¸€ä¸ªè¿æ¥å¯¹è±¡</span><br><span class="line">                        POOLEDï¼šä½¿ç”¨è¿æ¥æ± å¯¹è±¡ï¼Œæ•ˆç‡ç›¸å¯¹è¾ƒé«˜</span><br><span class="line">                        JNDIï¼šåœ¨å¤–éƒ¨é…ç½®æ•°æ®æº</span><br><span class="line">            --&gt;</span><br><span class="line">            &lt;dataSource type=&quot;POOLED&quot;&gt;</span><br><span class="line">                &lt;property name=&quot;driver&quot; value=&quot;$&#123;driver&#125;&quot;/&gt;</span><br><span class="line">                &lt;property name=&quot;url&quot; value=&quot;$&#123;url&#125;&quot;/&gt;</span><br><span class="line">                &lt;property name=&quot;username&quot; value=&quot;$&#123;user&#125;&quot;/&gt;</span><br><span class="line">                &lt;property name=&quot;password&quot; value=&quot;$&#123;pwd&#125;&quot;/&gt;</span><br><span class="line">            &lt;/dataSource&gt;</span><br><span class="line">        &lt;/environment&gt;</span><br><span class="line">        </span><br><span class="line">        &lt;!-- æ•°æ®æºç¯å¢ƒ2ï¼šæµ‹è¯•æ—¶ä½¿ç”¨çš„æ•°æ®åº“ç¯å¢ƒ--&gt;</span><br><span class="line">        &lt;environment id=&quot;test&quot;&gt;</span><br><span class="line">            &lt;transactionManager type=&quot;JDBC&quot; /&gt;</span><br><span class="line">            &lt;dataSource type=&quot;POOLED&quot;&gt;</span><br><span class="line">                &lt;property name=&quot;driver&quot; value=&quot;$&#123;driver&#125;&quot;/&gt;</span><br><span class="line">                &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://192.168.1.103/bank_db?serverTimezone=UTC&quot;/&gt;</span><br><span class="line">                &lt;property name=&quot;username&quot; value=&quot;$&#123;user&#125;&quot;/&gt;</span><br><span class="line">                &lt;property name=&quot;password&quot; value=&quot;$&#123;pwd&#125;&quot;/&gt;</span><br><span class="line">            &lt;/dataSource&gt;</span><br><span class="line">        &lt;/environment&gt;</span><br><span class="line">    &lt;/environments&gt;</span><br><span class="line"></span><br><span class="line">    &lt;mappers&gt;</span><br><span class="line">    &lt;/mappers&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>
<h1 id="4-å°è£…Utilå·¥å…·ç±»"><a href="#4-å°è£…Utilå·¥å…·ç±»" class="headerlink" title="4.å°è£…Utilå·¥å…·ç±»"></a>4.å°è£…Utilå·¥å…·ç±»</h1><h2 id="4-1-é¡¹ç›®æ­å»º"><a href="#4-1-é¡¹ç›®æ­å»º" class="headerlink" title="4.1.é¡¹ç›®æ­å»º"></a>4.1.é¡¹ç›®æ­å»º</h2><h3 id="4-1-1-åˆ›å»ºé¡¹ç›®"><a href="#4-1-1-åˆ›å»ºé¡¹ç›®" class="headerlink" title="4.1.1.åˆ›å»ºé¡¹ç›®"></a>4.1.1.åˆ›å»ºé¡¹ç›®</h3><p>ç•¥</p>
<h3 id="4-1-2-æ·»åŠ ä¾èµ–"><a href="#4-1-2-æ·»åŠ ä¾èµ–" class="headerlink" title="4.1.2.æ·»åŠ ä¾èµ–"></a>4.1.2.æ·»åŠ ä¾èµ–</h3><p>ç•¥</p>
<h3 id="4-1-3-ç¼–å†™é…ç½®æ–‡ä»¶"><a href="#4-1-3-ç¼–å†™é…ç½®æ–‡ä»¶" class="headerlink" title="4.1.3.ç¼–å†™é…ç½®æ–‡ä»¶"></a>4.1.3.ç¼–å†™é…ç½®æ–‡ä»¶</h3><blockquote>
<p>1)åˆ›å»ºèµ„æºç›®å½•<br>é¡¹ç›®å(é¼ æ ‡å³é”®)&#x3D;&#x3D;&gt;New&#x3D;&#x3D;&gt;Directory&#x3D;&#x3D;&gt;å‘½åä¸ºresources<br>2)å°†ç›®å½•æ ‡è®°ä¸ºèµ„æºç›®å½•<br>Resources(é¼ æ ‡å³é”®)&#x3D;&#x3D;&gt;Mark Directory as&#x3D;&#x3D;&gt;Resource Root<br>3)åˆ›å»ºé…ç½®æ–‡ä»¶</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">ã€db.propertiesã€‘</span><br><span class="line">driver=com.mysql.cj.jdbc.Driver</span><br><span class="line">url=jdbc:mysql://localhost:3306/bank_db?serverTimezone=UTC</span><br><span class="line">username=root</span><br><span class="line">password=123456</span><br><span class="line">ã€mybatis-config.xmlã€‘</span><br><span class="line">&lt;configuration&gt;</span><br><span class="line">    &lt;!-- å¼•å…¥å¤–éƒ¨èµ„æºæ–‡ä»¶--&gt;</span><br><span class="line">    &lt;properties resource=&quot;db.properties&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;environments default=&quot;development&quot;&gt;</span><br><span class="line">        &lt;environment id=&quot;development&quot;&gt;</span><br><span class="line">            &lt;transactionManager type=&quot;JDBC&quot;/&gt;</span><br><span class="line">            &lt;dataSource type=&quot;POOLED&quot;&gt;</span><br><span class="line">                &lt;property name=&quot;driver&quot; value=&quot;$&#123;driver&#125;&quot;/&gt;</span><br><span class="line">                &lt;property name=&quot;url&quot; value=&quot;$&#123;url&#125;&quot;/&gt;</span><br><span class="line">                &lt;property name=&quot;username&quot; value=&quot;$&#123;username&#125;&quot;/&gt;</span><br><span class="line">                &lt;property name=&quot;password&quot; value=&quot;$&#123;password&#125;&quot;/&gt;</span><br><span class="line">            &lt;/dataSource&gt;</span><br><span class="line">        &lt;/environment&gt;</span><br><span class="line">    &lt;/environments&gt;</span><br><span class="line">    &lt;mappers&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/mappers&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>
<h2 id="4-2-å°è£…Utilå·¥å…·ç±»"><a href="#4-2-å°è£…Utilå·¥å…·ç±»" class="headerlink" title="4.2.å°è£…Utilå·¥å…·ç±»"></a>4.2.å°è£…Utilå·¥å…·ç±»</h2><h3 id="4-2-1-å¯¹è±¡çš„èŒƒå›´"><a href="#4-2-1-å¯¹è±¡çš„èŒƒå›´" class="headerlink" title="4.2.1.å¯¹è±¡çš„èŒƒå›´"></a>4.2.1.å¯¹è±¡çš„èŒƒå›´</h3><blockquote>
<p>1)SqlSessionFacBuilder</p>
</blockquote>
<ul>
<li>ä½œç”¨<br>æä¾›ç”¨äºæ„å»ºSqlSessionFaçš„æ–¹æ³•ã€‚</li>
<li>èŒƒå›´<br>æœ€ä½³èŒƒå›´æ˜¯æ–¹æ³•èŒƒå›´(æ–¹æ³•çš„å±€éƒ¨å˜é‡)ã€‚<blockquote>
<p>2)SqlSessionFactory</p>
</blockquote>
</li>
<li>ä½œç”¨<br>æä¾›äº†ç”¨äºæ„å»ºSqlSessionçš„æ–¹æ³•ã€‚</li>
<li>èŒƒå›´<br>åº”ç”¨ç¨‹åºèŒƒå›´å†…(æ•´ä¸ªåº”ç”¨ç¨‹åºè¿è¡ŒæœŸé—´ä»…æœ‰ä¸€ä¸ªå¯¹è±¡)ã€‚<blockquote>
<p>3)SqlSession</p>
</blockquote>
</li>
<li>ä½œç”¨<br>æä¾›ç”¨äºè°ƒç”¨æ˜ å°„çš„ç›¸å…³æ–¹æ³•ã€‚</li>
<li>èŒƒå›´<br>æ¯ä¸ªçº¿ç¨‹æˆ–è¯·æ±‚éƒ½åº”è¯¥æœ‰è‡ªå·±çš„Sessionç¤ºä¾‹ï¼Œæ‰€ä»¥æœ€ä½³èŒƒå›´æ˜¯è¯·æ±‚æˆ–æ–¹æ³•èŒƒå›´ã€‚</li>
</ul>
<h3 id="4-2-2-å°è£…Utilå·¥å…·ç±»"><a href="#4-2-2-å°è£…Utilå·¥å…·ç±»" class="headerlink" title="4.2.2.å°è£…Utilå·¥å…·ç±»"></a>4.2.2.å°è£…Utilå·¥å…·ç±»</h3><blockquote>
<p>1)æ­¥éª¤</p>
</blockquote>
<ul>
<li>åˆ›å»ºåä¸ºutilçš„åŒ…</li>
<li>åˆ›å»ºåä¸ºSessionUtilçš„ç±»</li>
<li>ç¼–å†™ä»£ç <blockquote>
<p>2)ç¤ºä¾‹</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Utilå·¥å…·ç±»</span><br><span class="line"> *  ç±»ä¸­æä¾›äº†æ“ä½œSessionå¯¹è±¡çš„æ–¹æ³•</span><br><span class="line"> */</span><br><span class="line">public class SessionUtil &#123;</span><br><span class="line">    //ä½¿ç”¨staticä¿®é¥°çš„æˆå‘˜ç§°ä¸ºé™æ€æˆå‘˜(é™æ€æˆå‘˜åœ¨ç±»ä¸­åªæœ‰ä¸€ä¸ªå®ä¾‹)</span><br><span class="line">    //privateï¼šç§æœ‰çš„ï¼Œè¢«privateä¿®é¥°çš„æˆå‘˜ä¸ä¼šè¢«å…¶ä»–ç±»æ‰€è®¿é—®(å°è£…çš„æ€æƒ³)</span><br><span class="line">    private static SqlSessionFactory factory = null;</span><br><span class="line">    //ThreadLocalä¼šä¸ºæ¯ä¸€ä¸ªçº¿ç¨‹æä¾›ä¸€å—ç‹¬ç«‹çš„å†…å­˜ç©ºé—´ç”¨äºå­˜å‚¨æ•°æ®(å¯¹è±¡)</span><br><span class="line">    //ThreadLocalç›¸å½“äºä¸‡å¾·éš†æ¥¼ä¸‹çš„å‚¨ç‰©æŸœ(æ¯ä¸ªç”¨æˆ·ç›¸å½“äºä¸€ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªç”¨æˆ·éƒ½æœ‰è‡ªå·±ç‹¬ç«‹çš„å­˜å‚¨ç©ºé—´)</span><br><span class="line">    private static ThreadLocal&lt;SqlSession&gt; threadLocal = new ThreadLocal&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * é™æ€ä»£ç å—</span><br><span class="line">     *  åœ¨ç±»åŠ è½½åè¢«æ‰§è¡Œ(åªè¢«æ‰§è¡Œ1æ¬¡)</span><br><span class="line">     *  é€šè¿‡é™æ€ä»£ç å—å¯¹factoryå¯¹è±¡è¿›è¡Œå®ä¾‹åŒ–</span><br><span class="line">     */</span><br><span class="line">    static &#123;</span><br><span class="line">        //ä»¥æµæ–¹å¼è¯»å–é…ç½®æ–‡ä»¶</span><br><span class="line">        InputStream is = SessionUtil.class.getClassLoader().getResourceAsStream(&quot;mybatis-config.xml&quot;);</span><br><span class="line">        //é€šè¿‡SqlSessionFactoryBuilderæ¥æ„å»ºSqlSessionFactoryå¯¹è±¡</span><br><span class="line">        factory = new SqlSessionFactoryBuilder().build(is);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * è¿”å›ä¸€ä¸ªSqlSessionå¯¹è±¡</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    public static SqlSession getSession()&#123;</span><br><span class="line">        //ä»å­˜å‚¨ç©ºé—´ä¸­è¯»å–å¯¹è±¡çš„sessionå¯¹è±¡</span><br><span class="line">        SqlSession session = threadLocal.get();</span><br><span class="line"></span><br><span class="line">        //åˆ¤æ–­sessionå¯¹è±¡æ˜¯å¦æœ‰æ•ˆ</span><br><span class="line">        if(session==null)&#123;</span><br><span class="line">            //é€šè¿‡å·¥å‚åˆ›å»ºå¯¹è±¡</span><br><span class="line">            session = factory.openSession(true);</span><br><span class="line">            //å°†sessionå¯¹è±¡æ·»åŠ åˆ°å­˜å‚¨ç©ºé—´ä¸­è¿›è¡Œå­˜å‚¨(ä¸€éä¸‹ä¸€æ¬¡ä½¿ç”¨)</span><br><span class="line">            threadLocal.set(session);</span><br><span class="line">        &#125;</span><br><span class="line">        return  session;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * è¿”å›ä¸€ä¸ªSqlSessionå¯¹è±¡</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    public static SqlSession getSession(boolean state)&#123;</span><br><span class="line">        //ä»å­˜å‚¨ç©ºé—´ä¸­è¯»å–å¯¹è±¡çš„sessionå¯¹è±¡</span><br><span class="line">        SqlSession session = threadLocal.get();</span><br><span class="line"></span><br><span class="line">        //åˆ¤æ–­sessionå¯¹è±¡æ˜¯å¦æœ‰æ•ˆ</span><br><span class="line">        if(session==null)&#123;</span><br><span class="line">            //é€šè¿‡å·¥å‚åˆ›å»ºå¯¹è±¡</span><br><span class="line">            session = factory.openSession(state);</span><br><span class="line">            //å°†sessionå¯¹è±¡æ·»åŠ åˆ°å­˜å‚¨ç©ºé—´ä¸­è¿›è¡Œå­˜å‚¨(ä¸€éä¸‹ä¸€æ¬¡ä½¿ç”¨)</span><br><span class="line">            threadLocal.set(session);</span><br><span class="line">        &#125;</span><br><span class="line">        return  session;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * å…³é—­sessionå¯¹è±¡</span><br><span class="line">     */</span><br><span class="line">    public static void close()&#123;</span><br><span class="line">        //ä»å­˜å‚¨ç©ºé—´ä¸­è¯»å–å¯¹è±¡çš„sessionå¯¹è±¡</span><br><span class="line">        SqlSession session = threadLocal.get();</span><br><span class="line"></span><br><span class="line">        //åˆ¤æ–­sessionçš„çŠ¶æ€</span><br><span class="line">        if(session!=null)</span><br><span class="line">            //å…³é—­session</span><br><span class="line">            session.close();</span><br><span class="line"></span><br><span class="line">        //ä»å­˜å‚¨ç©ºé—´ä¸­ç§»é™¤å¯¹è±¡</span><br><span class="line">        threadLocal.remove();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="4-3-æµ‹è¯•å·¥å…·ç±»"><a href="#4-3-æµ‹è¯•å·¥å…·ç±»" class="headerlink" title="4.3.æµ‹è¯•å·¥å…·ç±»"></a>4.3.æµ‹è¯•å·¥å…·ç±»</h2><h3 id="4-3-1-éœ€æ±‚"><a href="#4-3-1-éœ€æ±‚" class="headerlink" title="4.3.1.éœ€æ±‚"></a>4.3.1.éœ€æ±‚</h3><p>æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯åˆ—è¡¨ã€‚</p>
<h3 id="4-3-2-å®ç°"><a href="#4-3-2-å®ç°" class="headerlink" title="4.3.2.å®ç°"></a>4.3.2.å®ç°</h3><blockquote>
<p>1)ç¼–å†™pojoç±»</p>
</blockquote>
<ul>
<li>å®ç°æ­¥éª¤<ul>
<li>åˆ›å»ºpojoåŒ…</li>
<li>åˆ›å»ºå®ä½“ç±»</li>
<li>ç¼–å†™å®ä½“ç±»ä»£ç </li>
</ul>
</li>
<li>ç¤ºä¾‹<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public class User &#123;</span><br><span class="line">    //ç§æœ‰æˆå‘˜å­—æ®µ</span><br><span class="line">    private int userId;</span><br><span class="line">    private String userName;</span><br><span class="line">    private String cardNo;</span><br><span class="line">    private String pwd;</span><br><span class="line">    private int blance;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>2)ç¼–å†™Mapperæ˜ å°„</p>
</blockquote>
</li>
<li>å®ç°æ­¥éª¤<ul>
<li>åœ¨resourcesç›®å½•ä¸‹åˆ›å»ºåä¸ºmappersçš„å­ç›®å½•</li>
<li>åœ¨mapperså­ç›®å½•ä¸‹åˆ›å»ºMapperæ˜ å°„æ–‡ä»¶</li>
</ul>
</li>
<li>ç¤ºä¾‹<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;mapper namespace=&quot;edu.shifan.mapper.UserMapper&quot;&gt;</span><br><span class="line">    &lt;!-- æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯ --&gt;</span><br><span class="line">    &lt;select id=&quot;findAll&quot; resultType=&quot;edu.shifan.pojo.User&quot;&gt;</span><br><span class="line">        select * from users</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>3)æ³¨å†Œæ˜ å°„</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;mappers&gt;</span><br><span class="line">    &lt;mapper resource=&quot;mappers/UserMapper.xml&quot; /&gt;</span><br><span class="line">&lt;/mappers&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>4)ç¼–å†™æµ‹è¯•ä»£ç </p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">public class TestUtil &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        //ä»¥å‰çš„å†™æ³•</span><br><span class="line">        /*</span><br><span class="line">        //1ã€ä»¥æµæ–¹å¼è¯»å–é…ç½®æ–‡ä»¶</span><br><span class="line">        InputStream is = TestUtil.class.getClassLoader().getResourceAsStream(&quot;mybatis-config.xml&quot;);</span><br><span class="line">        //2ã€è·å–SqlSessionFactoryå¯¹è±¡</span><br><span class="line">        SqlSessionFactory factory = new SqlSessionFactoryBuilder().build(is);</span><br><span class="line">        //3ã€è·å–Sessionå¯¹è±¡</span><br><span class="line">        SqlSession session = factory.openSession();</span><br><span class="line">        */</span><br><span class="line">        SqlSession session = SessionUtil.getSession(false);</span><br><span class="line">        //4ã€ä½¿ç”¨æ˜ å°„</span><br><span class="line">        List&lt;User&gt; list = session.selectList(&quot;edu.shifan.mapper.UserMapper.findAll&quot;);</span><br><span class="line"></span><br><span class="line">        //5ã€å…³é—­è¿æ¥</span><br><span class="line">        //session.close();</span><br><span class="line">        SessionUtil.close();</span><br><span class="line"></span><br><span class="line">        //å¤„ç†æŸ¥è¯¢ç»“æœ</span><br><span class="line">        //System.out.println(list);</span><br><span class="line">        for(User u : list)</span><br><span class="line">            System.out.println(u);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="5-åˆ—åä¸å­—æ®µåä¸ä¸€è‡´"><a href="#5-åˆ—åä¸å­—æ®µåä¸ä¸€è‡´" class="headerlink" title="5.åˆ—åä¸å­—æ®µåä¸ä¸€è‡´"></a>5.åˆ—åä¸å­—æ®µåä¸ä¸€è‡´</h1><h2 id="5-1-é—®é¢˜"><a href="#5-1-é—®é¢˜" class="headerlink" title="5.1.é—®é¢˜"></a>5.1.é—®é¢˜</h2><p>åœ¨è¿›è¡ŒæŸ¥è¯¢æ—¶ï¼Œå¦‚æœæŸ¥è¯¢ç»“æœä¸­åˆ—çš„åç§°ä¸Javaå®ä½“ç±»ä¸­å­—æ®µåç§°ä¸ä¸€è‡´ï¼Œå°†å¯¼è‡´å®ä½“ç±»ä¸­å­—æ®µçš„å€¼ç»‘å®šå¤±è´¥ã€‚</p>
<h2 id="5-2-è§£å†³æ–¹æ¡ˆ"><a href="#5-2-è§£å†³æ–¹æ¡ˆ" class="headerlink" title="5.2.è§£å†³æ–¹æ¡ˆ"></a>5.2.è§£å†³æ–¹æ¡ˆ</h2><h3 id="5-2-1-å­—æ®µåˆ«å"><a href="#5-2-1-å­—æ®µåˆ«å" class="headerlink" title="5.2.1.å­—æ®µåˆ«å"></a>5.2.1.å­—æ®µåˆ«å</h3><blockquote>
<p>1)å®ç°æ–¹å¼<br>åœ¨æŸ¥è¯¢è¯­å¥ä¸­ä½¿ç”¨å­—æ®µåˆ«åæ–¹å¼è¿›è¡ŒæŸ¥è¯¢ã€‚<br>2)ç¤ºä¾‹</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;mapper namespace=&quot;edu.shifan.mapper.UserMapper&quot;&gt;</span><br><span class="line">    &lt;!-- æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯åˆ—è¡¨ --&gt;</span><br><span class="line">    &lt;!-- 1ã€ä½¿ç”¨é€šé…ç¬¦æ–¹å¼è¿›è¡ŒæŸ¥è¯¢ --&gt;</span><br><span class="line">    &lt;!--</span><br><span class="line">        resultType:é…ç½®ä»£ç æ®µæ‰§è¡Œç»“æœçš„è¿”å›å€¼çš„ç±»å‹</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;select id=&quot;findAll1&quot; resultType=&quot;edu.shifan.pojo.User&quot;&gt;</span><br><span class="line">        select * from users</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 2ã€æŸ¥è¯¢è¯­å¥å­—æ®µåˆ«åæ–¹å¼è¿›è¡ŒæŸ¥è¯¢--&gt;</span><br><span class="line">    &lt;select id=&quot;findAll2&quot; resultType=&quot;edu.shifan.pojo.User&quot;&gt;</span><br><span class="line">        select  user_id userId, user_name username, card_no  cardno,pwd,blance from users</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>3)ç¼ºç‚¹</p>
</blockquote>
<ul>
<li>ä»£ç å¤ç”¨æ€§è¾ƒå·®</li>
<li>Sqlè¯­å¥å­˜åœ¨ä¸€å®šçš„å†—ä½™</li>
</ul>
<h3 id="5-2-2-ResultMapæè¿°æ˜ å°„å…³ç³»"><a href="#5-2-2-ResultMapæè¿°æ˜ å°„å…³ç³»" class="headerlink" title="5.2.2.ResultMapæè¿°æ˜ å°„å…³ç³»"></a>5.2.2.ResultMapæè¿°æ˜ å°„å…³ç³»</h3><blockquote>
<p>1)å®ç°æ–¹å¼<br>é€šè¿‡resultMapå¯¹æŸ¥è¯¢ç»“æœä¸­çš„åˆ—åä¸Javaå®ä½“ç±»çš„å­—æ®µåè¿›è¡Œå¯¹åº”å…³ç³»æè¿°ã€‚<br>2)ç¤ºä¾‹</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;mapper namespace=&quot;edu.shifan.mapper.UserMapper&quot;&gt;</span><br><span class="line">    &lt;!-- æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·ä¿¡æ¯åˆ—è¡¨ --&gt;</span><br><span class="line">    &lt;!-- 1ã€ä½¿ç”¨é€šé…ç¬¦æ–¹å¼è¿›è¡ŒæŸ¥è¯¢ --&gt;</span><br><span class="line">    &lt;!--</span><br><span class="line">        resultType:é…ç½®ä»£ç æ®µæ‰§è¡Œç»“æœçš„è¿”å›å€¼çš„ç±»å‹</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;select id=&quot;findAll1&quot; resultType=&quot;edu.shifan.pojo.User&quot;&gt;</span><br><span class="line">        select * from users</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 2ã€æŸ¥è¯¢è¯­å¥å­—æ®µåˆ«åæ–¹å¼è¿›è¡ŒæŸ¥è¯¢--&gt;</span><br><span class="line">    &lt;select id=&quot;findAll2&quot; resultType=&quot;edu.shifan.pojo.User&quot;&gt;</span><br><span class="line">        select  user_id userId, user_name username, card_no  cardno,pwd,blance from users</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 3ã€é€šè¿‡ResultMapæè¿°å¯¹åº”å…³ç³»--&gt;</span><br><span class="line">    &lt;select id=&quot;findAll3&quot; resultMap=&quot;userMap&quot;&gt;</span><br><span class="line">        select * from users</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--</span><br><span class="line">        resultMap:ç»“æœæ˜ å°„å…³ç³»å›¾ï¼Œå¯ä»¥å°†æŸ¥è¯¢ç»“æœä¸­çš„å­—æ®µä¸Javaå®ä½“ç±»ä¸­çš„å­—æ®µæŒ‰ç…§å¯¹åº”å…³ç³»è¿›è¡Œæè¿°</span><br><span class="line">            idï¼šç»“æœæ˜ å°„å…³ç³»å›¾çš„å”¯ä¸€æ ‡è¯†ï¼Œå…¶ä»–ä»£ç æ®µé€šè¿‡idå¯¹å…¶è¿›è¡Œè°ƒç”¨</span><br><span class="line">            typeï¼šé…ç½®éœ€è¦è¿›è¡Œæ˜ å°„çš„å®ä½“ç±»(å¦‚æœæ²¡æœ‰é…ç½®ç±»å‹åˆ«åï¼Œåˆ™éœ€è¦ä½¿ç”¨ç±»å…¨å=åŒ…å+ç±»å)</span><br><span class="line"></span><br><span class="line">            å¦‚æœè¡¨ä¸­å­—æ®µåä¸å®ä½“ç±»çš„å±æ€§åç›¸ä¸€è‡´ï¼Œå¯ä»¥ä¸è¿›è¡Œå¼ºåˆ¶çš„å¯¹åº”å…³ç³»æè¿°</span><br><span class="line">            å»ºè®®ï¼šå…¨éƒ¨è¿›è¡Œæè¿°</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;resultMap id=&quot;userMap&quot; type=&quot;edu.shifan.pojo.User&quot;&gt;</span><br><span class="line">        &lt;!--</span><br><span class="line">            id:ç”¨äºæè¿°ä¸»é”®åˆ—çš„æ˜ å°„å…³ç³»</span><br><span class="line">                columnï¼šè¿›è¡Œæ˜ å°„çš„æ•°æ®è¡¨ä¸­å­—æ®µçš„åç§°</span><br><span class="line">                propertyï¼šè¿›è¡Œæ˜ å°„çš„Javaå®ä½“ç±»çš„å­—æ®µåç§°</span><br><span class="line">        --&gt;</span><br><span class="line">        &lt;id column=&quot;user_id&quot; property=&quot;userId&quot; /&gt;</span><br><span class="line">        &lt;!--</span><br><span class="line">            result:ç”¨äºæè¿°éä¸»é”®åˆ—çš„æ˜ å°„å…³ç³»</span><br><span class="line">                columnï¼šè¿›è¡Œæ˜ å°„çš„æ•°æ®è¡¨ä¸­å­—æ®µçš„åç§°</span><br><span class="line">                propertyï¼šè¿›è¡Œæ˜ å°„çš„Javaå®ä½“ç±»çš„å­—æ®µåç§°</span><br><span class="line">        --&gt;</span><br><span class="line">        &lt;result column=&quot;user_name&quot; property=&quot;userName&quot; /&gt;</span><br><span class="line">        &lt;result column=&quot;card_no&quot; property=&quot;cardNo&quot; /&gt;</span><br><span class="line">    &lt;/resultMap&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>3)ä¼˜ç‚¹</p>
</blockquote>
<ul>
<li>ä»£ç å¤ç”¨æ€§è¾ƒé«˜</li>
<li>é™ä½äº†Sqlè¯­å¥çš„å†—ä½™</li>
</ul>
<h3 id="5-2-3-å¯ç”¨mapUnderscoreToCamelCase"><a href="#5-2-3-å¯ç”¨mapUnderscoreToCamelCase" class="headerlink" title="5.2.3.å¯ç”¨mapUnderscoreToCamelCase"></a>5.2.3.å¯ç”¨mapUnderscoreToCamelCase</h3><blockquote>
<p>1)å®ç°æ–¹å¼<br>åœ¨MyBatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­é€šè¿‡åœ¨settingsèŠ‚ä¸­é…ç½®mapUnders coreToCamelCaseé¡¹æ¥å¼€å¯è‡ªåŠ¨åŒ¹é…åŠŸèƒ½ã€‚<br>2)ç¤ºä¾‹</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- å¼•å…¥å¤–éƒ¨é…ç½®æ–‡ä»¶ --&gt;</span><br><span class="line">&lt;properties resource=&quot;db.properties&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- é€šè¿‡setttingså…¨å±€é…ç½®è¿›è¡Œå®ç°--&gt;</span><br><span class="line">&lt;settings&gt;</span><br><span class="line">    &lt;!--</span><br><span class="line">        mapUnderscoreToCamelCase:å¼€å¯ä»æ•°æ®åº“ç»å…¸åˆ—ååˆ°Javaå®ä½“ç±»å­—æ®µç»å…¸åˆ—åçš„è‡ªåŠ¨è½¬æ¢</span><br><span class="line">            trueï¼šå¼€å¯è½¬æ¢åŠŸèƒ½</span><br><span class="line">            falseï¼šå…³é—­è½¬æ¢åŠŸèƒ½</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;setting name=&quot;mapUnderscoreToCamelCase&quot; value=&quot;true&quot;/&gt;</span><br><span class="line">&lt;/settings&gt;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>3)ä¼˜ç‚¹</p>
</blockquote>
<ul>
<li>ç®€å•æ–¹ä¾¿</li>
</ul>
<h1 id="6-é¢å‘æ¥å£å¼€å‘"><a href="#6-é¢å‘æ¥å£å¼€å‘" class="headerlink" title="6.é¢å‘æ¥å£å¼€å‘"></a>6.é¢å‘æ¥å£å¼€å‘</h1><h2 id="6-1-å¸¸è§å¼‚å¸¸"><a href="#6-1-å¸¸è§å¼‚å¸¸" class="headerlink" title="6.1.å¸¸è§å¼‚å¸¸"></a>6.1.å¸¸è§å¼‚å¸¸</h2><h3 id="6-1-1-é”™è¯¯1"><a href="#6-1-1-é”™è¯¯1" class="headerlink" title="6.1.1.é”™è¯¯1"></a>6.1.1.é”™è¯¯1</h3><blockquote>
<p>1)é”™è¯¯æè¿°<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y11.png"><br>2)é”™è¯¯åŸå› </p>
</blockquote>
<ul>
<li>é…ç½®æ–‡ä»¶æ‰€å±ç›®å½•ä¸æ˜¯èµ„æºæˆ–srcç›®å½•</li>
<li>å¼•å…¥çš„é…ç½®æ–‡ä»¶ä¸å­˜åœ¨æˆ–æ–‡ä»¶åé”™è¯¯<blockquote>
<p>3)è§£å†³æ–¹æ¡ˆ</p>
</blockquote>
</li>
<li>æ£€æŸ¥ç›®å½•æ˜¯å¦æ­£ç¡®</li>
<li>æ£€æŸ¥æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®</li>
<li>æ£€æŸ¥æ–‡ä»¶åæ˜¯å¦æ­£ç¡®</li>
</ul>
<h3 id="6-1-2-é”™è¯¯2"><a href="#6-1-2-é”™è¯¯2" class="headerlink" title="6.1.2.é”™è¯¯2"></a>6.1.2.é”™è¯¯2</h3><blockquote>
<p>1)é”™è¯¯æè¿°<br>Cause: org.apache.ibatis.builder.BuilderException: Error parsing SQL Mapper Configuration. Cause: org.apache.ibatis.builder.BuilderException: The setting mapUnderscoreToCamelCase  is not known.  Make sure you spelled it correctly (case sensitive).<br>2)é”™è¯¯åŸå› </p>
</blockquote>
<ul>
<li>é…ç½®æ–‡ä»¶ä¸­çš„å±æ€§åå­˜åœ¨é”™è¯¯<blockquote>
<p>3)è§£å†³æ–¹æ¡ˆ</p>
</blockquote>
</li>
<li>æ£€æŸ¥é…ç½®æ–‡ä»¶ä¸­çš„å±æ€§åæ˜¯å¦æ­£ç¡®</li>
</ul>
<h3 id="6-1-3-é”™è¯¯3"><a href="#6-1-3-é”™è¯¯3" class="headerlink" title="6.1.3.é”™è¯¯3"></a>6.1.3.é”™è¯¯3</h3><blockquote>
<p>1)é”™è¯¯æè¿°<br>Cause: java.lang.IllegalArgumentException: Mapped Statements collection does not contain value for edu.shifan.mappers.UserMapper.findAll<br>2)é”™è¯¯åŸå› </p>
</blockquote>
<ul>
<li>æ˜ å°„æ–‡ä»¶æ²¡æœ‰åœ¨MyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œ</li>
<li>æµ‹è¯•ä»£ç ä¸­çš„æ˜ å°„ä¸Mapperæ˜ å°„æ–‡ä»¶ä¸­çš„ä¸ä¸€è‡´<blockquote>
<p>3)è§£å†³æ–¹æ¡ˆ</p>
</blockquote>
</li>
<li>æ£€æŸ¥æ˜ å°„æ–‡ä»¶æ˜¯å¦è¿›è¡Œæ³¨å†Œ</li>
<li>æ£€æŸ¥æµ‹è¯•ä»£ç ä¸­ä¸æ˜ å°„æ–‡ä»¶ä¸­é…ç½®æ˜¯å¦ä¸€è‡´</li>
</ul>
<h3 id="6-1-4-é”™è¯¯4"><a href="#6-1-4-é”™è¯¯4" class="headerlink" title="6.1.4.é”™è¯¯4"></a>6.1.4.é”™è¯¯4</h3><p>1)é”™è¯¯æè¿°<br>Cause: java.sql.SQLException: Error setting driver on UnpooledDataSource. Cause: java.lang.ClassNotFoundException: Cannot find class: ${driver}<br>2)é”™è¯¯åŸå› </p>
<ul>
<li>é…ç½®æ–‡ä»¶ä¸­çš„keyä¸å­˜åœ¨</li>
<li>é©±åŠ¨ç±»é”™è¯¯<blockquote>
<p>3)è§£å†³æ–¹æ¡ˆ</p>
</blockquote>
</li>
<li>æ£€æŸ¥æ•°æ®åº“çš„é…ç½®æ–‡ä»¶ä¸­keyä¸è¯»å–çš„keyå€¼æ˜¯å¦ä¸€è‡´</li>
<li>æ£€æŸ¥é©±åŠ¨ç±»æ˜¯å¦æ­£ç¡®</li>
</ul>
<h3 id="6-1-5-é”™è¯¯5"><a href="#6-1-5-é”™è¯¯5" class="headerlink" title="6.1.5.é”™è¯¯5"></a>6.1.5.é”™è¯¯5</h3><blockquote>
<p>1)é”™è¯¯æè¿°<br>Cause: java.sql.SQLException: No suitable driver found for jdbc.mysql:&#x2F;&#x2F;localhost:3306&#x2F;band_db?serveTimezone&#x3D;UTC<br>2)é”™è¯¯åŸå› </p>
</blockquote>
<ul>
<li>æ•°æ®åº“é…ç½®æ–‡ä»¶ä¸­çš„è¿æ¥å­—ç¬¦ä¸²å­˜åœ¨é”™è¯¯<blockquote>
<p>3)è§£å†³æ–¹æ¡ˆ</p>
</blockquote>
</li>
<li>æ£€æŸ¥urlè¿æ¥å­—ç¬¦ä¸²æ˜¯å¦æ­£ç¡®</li>
</ul>
<h3 id="6-1-6-é”™è¯¯6"><a href="#6-1-6-é”™è¯¯6" class="headerlink" title="6.1.6.é”™è¯¯6"></a>6.1.6.é”™è¯¯6</h3><blockquote>
<p>1)é”™è¯¯æè¿°<br>Cause: java.sql.SQLException: Access denied for user â€˜rootâ€˜@â€™localhostâ€™ (using password: YES)<br>2)é”™è¯¯åŸå› </p>
</blockquote>
<ul>
<li>æ•°æ®åº“è®¿é—®å¯†ç é”™è¯¯<blockquote>
<p>3)è§£å†³æ–¹æ¡ˆ</p>
</blockquote>
</li>
<li>æ£€æŸ¥æ•°æ®åº“è®¿é—®å¯†ç </li>
</ul>
<h3 id="6-1-7-é”™è¯¯7"><a href="#6-1-7-é”™è¯¯7" class="headerlink" title="6.1.7.é”™è¯¯7"></a>6.1.7.é”™è¯¯7</h3><blockquote>
<p>1)é”™è¯¯æè¿°<br>Cause: java.sql.SQLSyntaxErrorException: Unknown database â€˜band_dbâ€™<br>2)é”™è¯¯åŸå› </p>
</blockquote>
<ul>
<li>æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²ä¸­çš„æ•°æ®åº“åç§°é”™è¯¯<blockquote>
<p>3)è§£å†³æ–¹æ¡ˆ</p>
</blockquote>
</li>
<li>æ£€æŸ¥æ•°æ®åº“åç§°æ˜¯å¦æ­£ç¡®</li>
</ul>
<h3 id="6-1-8-é”™è¯¯8"><a href="#6-1-8-é”™è¯¯8" class="headerlink" title="6.1.8.é”™è¯¯8"></a>6.1.8.é”™è¯¯8</h3><blockquote>
<p>1)é”™è¯¯æè¿°<br>Cause: java.sql.SQLException: The server time zone value â€˜ï¿½Ğ¹ï¿½ï¿½ï¿½×¼Ê±ï¿½ï¿½â€™ is unrecognized or represents more than one time zone. You must configure either the server or JDBC driver (via the serverTimezone configuration property) to use a more specifc time zone value if you want to utilize time zone support.<br>2)é”™è¯¯åŸå› </p>
</blockquote>
<ul>
<li>æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²ä¸­çš„å‚æ•°åæœ‰é”™è¯¯<blockquote>
<p>3)è§£å†³æ–¹æ¡ˆ</p>
</blockquote>
</li>
<li>æ£€æŸ¥å‚æ•°åå¹¶æ”¹æ­£</li>
</ul>
<h3 id="6-1-9-é”™è¯¯9"><a href="#6-1-9-é”™è¯¯9" class="headerlink" title="6.1.9.é”™è¯¯9"></a>6.1.9.é”™è¯¯9</h3><blockquote>
<p>1)é”™è¯¯æè¿°<br>Cause: java.sql.SQLSyntaxErrorException: Table â€˜bank_db.userâ€™ doesnâ€™t exist<br>2)é”™è¯¯åŸå› </p>
</blockquote>
<ul>
<li>æ˜ å°„æ–‡ä»¶ä¸­Sqlè¯­å¥ä¸­ä½¿ç”¨åˆ°çš„æ•°æ®è¡¨åç§°ä¸å­˜åœ¨<br>3)è§£å†³æ–¹æ¡ˆ</li>
<li>æ£€æŸ¥æ•°æ®è¡¨å</li>
</ul>
<h2 id="6-2-é¢å‘æ¥å£å¼€å‘"><a href="#6-2-é¢å‘æ¥å£å¼€å‘" class="headerlink" title="6.2.é¢å‘æ¥å£å¼€å‘"></a>6.2.é¢å‘æ¥å£å¼€å‘</h2><h3 id="6-2-1-é¢å‘æ¥å£å¼€å‘çš„åŸåˆ™"><a href="#6-2-1-é¢å‘æ¥å£å¼€å‘çš„åŸåˆ™" class="headerlink" title="6.2.1.é¢å‘æ¥å£å¼€å‘çš„åŸåˆ™"></a>6.2.1.é¢å‘æ¥å£å¼€å‘çš„åŸåˆ™</h3><ul>
<li>Mapperæ˜ å°„æ–‡ä»¶çš„namespaceå¿…é¡»å’Œmapperæ¥å£çš„ç±»å…¨åç›¸ä¸€è‡´</li>
<li>Mapperæ˜ å°„æ¥å£ä¸­çš„æ–¹æ³•åå’ŒMpperæ˜ å°„æ–‡ä»¶ä¸­statementçš„idå¿…é¡»ä¿æŒä¸€è‡´</li>
<li>Mapperæ˜ å°„æ¥å£ä¸­æ–¹æ³•çš„å‚æ•°ç±»å‹å¿…é¡»å’ŒMapperæ˜ å°„æ–‡ä»¶ä¸­sta tementçš„parameterTypeç±»å‹ä¿æŒä¸€è‡´</li>
<li>Mapperæ˜ å°„æ¥å£ä¸­æ–¹æ³•çš„è¿”å›å€¼ç±»å‹å¿…é¡»å’ŒMapperæ˜ å°„æ–‡ä»¶ä¸­re sultTypeçš„ç±»å‹ä¿æŒä¸€è‡´</li>
<li>Mapperæ˜ å°„æ¥å£å’ŒMapperæ˜ å°„æ–‡ä»¶å¿…é¡»åœ¨åŒä¸€ç›®å½•(åŒ…)ä¸‹ï¼Œä¸”å…·æœ‰ç›¸åŒçš„åç§°</li>
</ul>
<h3 id="6-2-2-å®ç°æ­¥éª¤"><a href="#6-2-2-å®ç°æ­¥éª¤" class="headerlink" title="6.2.2.å®ç°æ­¥éª¤"></a>6.2.2.å®ç°æ­¥éª¤</h3><ul>
<li>ç¼–å†™Mappeæ˜ å°„æ¥å£å’ŒMapperæ˜ å°„æ–‡ä»¶</li>
<li>åœ¨MyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œæ˜ å°„æ¥å£æˆ–æ˜ å°„æ–‡ä»¶</li>
<li>åœ¨æµ‹è¯•ä»£ç ä¸­ä½¿ç”¨æ˜ å°„æ¥å£</li>
</ul>
<h3 id="6-2-3-å®ç°"><a href="#6-2-3-å®ç°" class="headerlink" title="6.2.3.å®ç°"></a>6.2.3.å®ç°</h3><p>1)åˆ›å»ºå®ä½“ç±»</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * å®ä½“ç±»</span><br><span class="line"> *  ä½œç”¨ï¼šå°è£…æ•°æ®</span><br><span class="line"> */</span><br><span class="line">public class User &#123;</span><br><span class="line">    //ç§æœ‰æˆå‘˜å­—æ®µ</span><br><span class="line">    private int userId;</span><br><span class="line">    private String userName;</span><br><span class="line">    private String cardNo;</span><br><span class="line">    private String pwd;</span><br><span class="line">    private int blance;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2)åˆ›å»ºæ˜ å°„æ¥å£</p>
<ul>
<li>åˆ›å»ºåä¸ºedu.shifan.daoçš„åŒ…</li>
<li>åˆ›å»ºæ˜ å°„æ¥å£<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * æ˜ å°„æ¥å£</span><br><span class="line"> *  æ¥å£ï¼šæ¥å£æ˜¯ä¸€ç§çº¦æŸï¼Œæ¥å£ä¸­åªèƒ½æä¾›æ–¹æ³•å£°æ˜(ä¸èƒ½æœ‰å…·ä½“çš„å®ç°)</span><br><span class="line"> *  æ–¹æ³•å››è¦ç´ ï¼šè¿”å›å€¼ç±»å‹ã€æ–¹æ³•åã€å‚æ•°åˆ—è¡¨ã€æ–¹æ³•ä½“</span><br><span class="line"> */</span><br><span class="line">public interface UserDao &#123;</span><br><span class="line">    /**</span><br><span class="line">     * å°†ç”¨æˆ·ä¿¡æ¯æ·»åŠ åˆ°æ•°æ®åº“ä¸­</span><br><span class="line">     * @param userï¼šå°è£…äº†ç”¨æˆ·çš„ä¿¡æ¯</span><br><span class="line">     * @returnï¼šå—å½±å“è¡Œæ•°</span><br><span class="line">     */</span><br><span class="line">    int add(User user);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
3)åˆ›å»ºæ˜ å°„æ–‡ä»¶<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--</span><br><span class="line">    namespaceä¸æ˜ å°„æ¥å£çš„ç±»å…¨å(åŒ…å+ç±»å)ç›¸ä¸€è‡´</span><br><span class="line">    æ¥å£å(é¼ æ ‡å³é”®)==ã€‹copy==ã€‹copy reference</span><br><span class="line"> --&gt;</span><br><span class="line">&lt;mapper namespace=&quot;edu.shifan.dao.UserDao&quot;&gt;</span><br><span class="line">    &lt;!-- æ–°å¢ç”¨æˆ·ä¿¡æ¯--&gt;</span><br><span class="line">    &lt;!--</span><br><span class="line">        parameterTypeå¿…é¡»å’Œæ¥å£ä¸­æ–¹æ³•çš„å‚æ•°ç±»å‹ä¿æŒä¸€è‡´</span><br><span class="line">        åœ¨insertã€updateåŠdeleteä¸­resultTypeé»˜è®¤ç±»å‹ä¸ºintï¼Œå¯ä»¥ç¼ºçœ</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;insert id=&quot;add&quot; parameterType=&quot;edu.shifan.pojo.User&quot; &gt;</span><br><span class="line">        &lt;!-- #&#123;&#125;è¡¨ç¤ºè¯»å–æŒ‡å®šå‚æ•°çš„å€¼--&gt;</span><br><span class="line">        insert into users values(#&#123;userId&#125;,#&#123;userName&#125;,#&#123;cardNo&#125;,#&#123;pwd&#125;,#&#123;blance&#125;)</span><br><span class="line">    &lt;/insert&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>
4)æ³¨å†Œæ˜ å°„æ¥å£<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;configuration&gt;</span><br><span class="line">    &lt;!-- å¼•å…¥å¤–éƒ¨é…ç½®æ–‡ä»¶--&gt;</span><br><span class="line">    &lt;property resource = &quot;db.properties&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- å¼€å¯è‡ªåŠ¨åŒ¹é…è®¾ç½® --&gt;</span><br><span class="line">    &lt;settings&gt;</span><br><span class="line">        &lt;setting name=&quot;mapUnderscoreToCamelCase&quot; value=&quot;true&quot; /&gt;</span><br><span class="line">    &lt;/settings&gt;</span><br><span class="line"></span><br><span class="line">    &lt;environments default=&quot;development&quot;&gt;</span><br><span class="line">        &lt;environment id=&quot;development&quot;&gt;</span><br><span class="line">            &lt;transactionManager type=&quot;JDBC&quot;/&gt;</span><br><span class="line">            &lt;dataSource type=&quot;POOLED&quot;&gt;</span><br><span class="line">                &lt;property name=&quot;driver&quot; value=&quot;$&#123;driver&#125;&quot;/&gt;</span><br><span class="line">                &lt;property name=&quot;url&quot; value=&quot;$&#123;url&#125;&quot;/&gt;</span><br><span class="line">                &lt;property name=&quot;username&quot; value=&quot;$&#123;username&#125;&quot;/&gt;</span><br><span class="line">                &lt;property name=&quot;password&quot; value=&quot;$&#123;password&#125;&quot;/&gt;</span><br><span class="line">            &lt;/dataSource&gt;</span><br><span class="line">        &lt;/environment&gt;</span><br><span class="line">    &lt;/environments&gt;</span><br><span class="line">    &lt;mappers&gt;</span><br><span class="line">        &lt;!--</span><br><span class="line">            æ³¨å†Œæ˜ å°„æ¥å£</span><br><span class="line">            æ³¨æ„ï¼šéœ€è¦ä½¿ç”¨classå±æ€§</span><br><span class="line">        --&gt;</span><br><span class="line">        &lt;mapper class=&quot;edu.shifan.dao.UserDao&quot; /&gt;</span><br><span class="line">    &lt;/mappers&gt;</span><br><span class="line">&lt;/configuration&gt;</span><br></pre></td></tr></table></figure>
5)æµ‹è¯•æ˜ å°„æ¥å£<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * æ–°å¢ç”¨æˆ·ä¿¡æ¯</span><br><span class="line"> */</span><br><span class="line">private static void add() &#123;</span><br><span class="line">    //é€šè¿‡å¯¹è±¡Uå°è£…æ•°æ®</span><br><span class="line">    User u = new User();</span><br><span class="line">    u.setUserId(9);</span><br><span class="line">    u.setUserName(&quot;Mike&quot;);</span><br><span class="line">    u.setCardNo(&quot;622020013&quot;);</span><br><span class="line">    u.setPwd(&quot;123456&quot;);</span><br><span class="line">    u.setBlance(9000);</span><br><span class="line"></span><br><span class="line">    //1ã€è·å–Sessionå¯¹è±¡</span><br><span class="line">    SqlSession session = SessionUtil.getSession();</span><br><span class="line">    //2ã€è·å–æ˜ å°„å¯¹è±¡</span><br><span class="line">    UserDao dao = session.getMapper(UserDao.class);</span><br><span class="line">    //3ã€è°ƒç”¨åˆ°æ¥å£å¯¹è±¡çš„æ–¹æ³•</span><br><span class="line">    int count = dao.add(u);</span><br><span class="line">    //4ã€å…³é—­Sessionå¯¹è±¡</span><br><span class="line">    SessionUtil.close();</span><br><span class="line"></span><br><span class="line">    //5ã€å¤„ç†æ‰§è¡Œç»“æœ</span><br><span class="line">    if(count&gt;0)</span><br><span class="line">        System.out.println(&quot;ä¿¡æ¯æ·»åŠ æˆåŠŸ&quot;);</span><br><span class="line">    else</span><br><span class="line">        System.out.println(&quot;ä¿¡æ¯æ·»åŠ å¤±è´¥&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="7-åŠ¨æ€SQLè¯­å¥"><a href="#7-åŠ¨æ€SQLè¯­å¥" class="headerlink" title="7.åŠ¨æ€SQLè¯­å¥"></a>7.åŠ¨æ€SQLè¯­å¥</h1><h2 id="7-1-å¤šæ¡ä»¶æŸ¥è¯¢"><a href="#7-1-å¤šæ¡ä»¶æŸ¥è¯¢" class="headerlink" title="7.1.å¤šæ¡ä»¶æŸ¥è¯¢"></a>7.1.å¤šæ¡ä»¶æŸ¥è¯¢</h2><h3 id="7-1-1-éœ€æ±‚"><a href="#7-1-1-éœ€æ±‚" class="headerlink" title="7.1.1.éœ€æ±‚"></a>7.1.1.éœ€æ±‚</h3><p>æŒ‰å§“åã€æ€§åˆ«åŠæ‰€å±å¹´çº§ç­‰å¤šä¸ªå­—æ®µç»„åˆæŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯ã€‚</p>
<h3 id="7-1-2-SQLè¯­å¥"><a href="#7-1-2-SQLè¯­å¥" class="headerlink" title="7.1.2.SQLè¯­å¥"></a>7.1.2.SQLè¯­å¥</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># 1ã€æœªæä¾›ä»»ä½•æ¡ä»¶å­—æ®µå€¼</span><br><span class="line">select * from sys_students</span><br><span class="line"></span><br><span class="line"># 2ã€æä¾›äº†å§“åå­—æ®µå€¼</span><br><span class="line">select * from sys_students where stu_name like &#x27;%äº®%&#x27;</span><br><span class="line"></span><br><span class="line"># 3ã€æä¾›äº†æ€§åˆ«å­—æ®µå€¼</span><br><span class="line">select * from sys_students where gender=true</span><br><span class="line"></span><br><span class="line"># 4ã€æä¾›äº†æ‰€å±å¹´çº§IDå­—æ®µå€¼</span><br><span class="line">select * from sys_students where grade_id=3</span><br><span class="line"></span><br><span class="line"># 5ã€æä¾›äº†å§“åã€æ€§åˆ«å­—æ®µå€¼</span><br><span class="line">select * from sys_students where stu_name like &#x27;%äº®%&#x27; and gender=true</span><br></pre></td></tr></table></figure>
<h3 id="7-1-3-æ¡ä»¶ç»„åˆ"><a href="#7-1-3-æ¡ä»¶ç»„åˆ" class="headerlink" title="7.1.3.æ¡ä»¶ç»„åˆ"></a>7.1.3.æ¡ä»¶ç»„åˆ</h3><pre><code>å§“å	æ€§åˆ«	æ‰€å±å¹´çº§
</code></pre>
<p>1	Ã—	Ã—	Ã—<br>2	âˆš	Ã—	Ã—<br>3	Ã—	âˆš	Ã—<br>4	Ã—	Ã—	âˆš<br>5	âˆš	âˆš	Ã—<br>6	âˆš	Ã—	âˆš<br>7	âˆš	âˆš	âˆš</p>
<h2 id="7-2-å®ç°æ–¹å¼"><a href="#7-2-å®ç°æ–¹å¼" class="headerlink" title="7.2.å®ç°æ–¹å¼"></a>7.2.å®ç°æ–¹å¼</h2><h3 id="7-2-1-ä¼ ç»Ÿæ–¹å¼"><a href="#7-2-1-ä¼ ç»Ÿæ–¹å¼" class="headerlink" title="7.2.1.ä¼ ç»Ÿæ–¹å¼"></a>7.2.1.ä¼ ç»Ÿæ–¹å¼</h3><p>åœ¨Javaä¸­é€šè¿‡ifè¯­å¥+SQLçš„è¾…åŠ©æ¡ä»¶(1&#x3D;1)è¿›è¡Œå®ç°ã€‚</p>
<h3 id="7-2-2-MyBatisæ–¹å¼"><a href="#7-2-2-MyBatisæ–¹å¼" class="headerlink" title="7.2.2.MyBatisæ–¹å¼"></a>7.2.2.MyBatisæ–¹å¼</h3><p>MyBatisä¸­æä¾›äº†æ ‡ç­¾çš„æ–¹å¼å®ç°åŠ¨æ€SQLè¯­å¥ã€‚</p>
<h2 id="7-3-åŠ¨æ€SQLè¯­å¥"><a href="#7-3-åŠ¨æ€SQLè¯­å¥" class="headerlink" title="7.3.åŠ¨æ€SQLè¯­å¥"></a>7.3.åŠ¨æ€SQLè¯­å¥</h2><p>æ‰€è°“åŠ¨æ€SQLè¯­å¥æ˜¯æŒ‡ç¨‹åºä»£ç æ ¹æ®æ¡ä»¶çš„ä¸åŒåŠ¨æ€ç”ŸæˆSQLè¯­å¥ã€‚</p>
<h2 id="7-4-Ifæ ‡ç­¾"><a href="#7-4-Ifæ ‡ç­¾" class="headerlink" title="7.4.Ifæ ‡ç­¾"></a>7.4.Ifæ ‡ç­¾</h2><h3 id="7-4-1-éœ€æ±‚"><a href="#7-4-1-éœ€æ±‚" class="headerlink" title="7.4.1.éœ€æ±‚"></a>7.4.1.éœ€æ±‚</h3><p>æ ¹æ®å§“åã€æ€§åˆ«åŠæ‰€å±å¹´çº§ç­‰æ¡ä»¶ç»„åˆå®ç°æ•°æ®çš„æŸ¥è¯¢ã€‚</p>
<h3 id="7-4-2-å®ç°"><a href="#7-4-2-å®ç°" class="headerlink" title="7.4.2.å®ç°"></a>7.4.2.å®ç°</h3><p>1)ç¼–å†™Pojoç±»</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * å­¦ç”Ÿå®ä½“ç±»</span><br><span class="line"> *  åŸºæœ¬ç±»å‹  === åŒ…è£…ç±»å‹</span><br><span class="line"> *  int         == Integer</span><br><span class="line"> *  boolean     == Boolean</span><br><span class="line"> *  long        == Long</span><br><span class="line"> */</span><br><span class="line">public class Student &#123;</span><br><span class="line">    private String stuName;</span><br><span class="line">    private Boolean gender;</span><br><span class="line">    private Integer gradeId;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2)ç¼–å†™Mapperæ˜ å°„</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">ã€Mapperæ¥å£ã€‘</span><br><span class="line">public interface StudentMapper &#123;</span><br><span class="line">    /**</span><br><span class="line">     * æŒ‰ç…§æ¡ä»¶æŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯</span><br><span class="line">     *  æ¡ä»¶ï¼šå§“åã€æ€§åˆ«ã€æ‰€å±å¹´çº§ID</span><br><span class="line">     */</span><br><span class="line">    List&lt;Student&gt; findByExp(Student student);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">ã€Mapperæ˜ å°„ã€‘</span><br><span class="line">&lt;mapper namespace=&quot;edu.shifan.mapper.StudentMapper&quot;&gt;</span><br><span class="line">    &lt;!-- ifæ ‡ç­¾ä½¿ç”¨ç¤ºä¾‹ --&gt;</span><br><span class="line">    &lt;select id=&quot;findByExp&quot; parameterType=&quot;edu.shifan.pojo.Student&quot; resultType=&quot;edu.shifan.pojo.Student&quot;&gt;</span><br><span class="line">        select * from  sys_students where 1=1</span><br><span class="line"></span><br><span class="line">        &lt;if test=&quot;stuName!=null and stuName!=&#x27;&#x27;&quot;&gt;</span><br><span class="line">            and stu_name like &quot;%&quot;#&#123;stuName&#125;&quot;%&quot;</span><br><span class="line">        &lt;/if&gt;</span><br><span class="line"></span><br><span class="line">        &lt;if test=&quot;gender!=null&quot;&gt;</span><br><span class="line">            and gender=#&#123;gender&#125;</span><br><span class="line">        &lt;/if&gt;</span><br><span class="line"></span><br><span class="line">         &lt;if test=&quot;gradeId!=null and gradeId!=0&quot;&gt;</span><br><span class="line">             and grade_id=#&#123;gradeId&#125;</span><br><span class="line">         &lt;/if&gt;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>
<p>3)æµ‹è¯•æ˜ å°„</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * æµ‹è¯•ifæ ‡ç­¾</span><br><span class="line"> */</span><br><span class="line">private static void testIf() &#123;</span><br><span class="line">    //1ã€å°è£…å‚æ•°å¯¹è±¡</span><br><span class="line">    Student stu = new Student();</span><br><span class="line">    stu.setStuName(&quot;J&quot;);</span><br><span class="line">    stu.setGender(false);</span><br><span class="line"></span><br><span class="line">    System.out.println(stu);</span><br><span class="line"></span><br><span class="line">    //2ã€è°ƒç”¨Mapperå¯¹è±¡çš„æ–¹æ³•æŸ¥è¯¢æ•°æ®</span><br><span class="line">    //aã€è·å–Sessionå¯¹è±¡</span><br><span class="line">    SqlSession session = SessionUtil.getSession(false);</span><br><span class="line">    //bã€è·å–Mapperå¯¹è±¡</span><br><span class="line">    StudentMapper mapper = session.getMapper(StudentMapper.class);</span><br><span class="line">    //cã€è°ƒç”¨mapperå¯¹è±¡çš„æ–¹æ³•</span><br><span class="line">    List&lt;Student&gt; list = mapper.findByExp(stu);</span><br><span class="line">    //dã€å…³é—­Session</span><br><span class="line">    SessionUtil.close();</span><br><span class="line"></span><br><span class="line">    //3ã€å¤„ç†æŸ¥è¯¢ç»“æœ</span><br><span class="line">    for(Student s : list)</span><br><span class="line">        System.out.println(s);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4)ä¼˜ç‚¹<br>å®ç°äº†åŠ¨æ€SQLè¯­å¥ï¼Œæé«˜äº†è¯­å¥çš„çµæ´»æ€§ã€‚<br>5)ç¼ºç‚¹<br>ä¸ºäº†ä¿è¯è¯­å¥çš„å®Œæ•´æ€§ï¼Œéœ€è¦å€ŸåŠ©äºè¾…åŠ©æ¡ä»¶(1&#x3D;1)è¿›è¡Œå®ç°ã€‚</p>
<h2 id="7-5-Whereæ ‡ç­¾"><a href="#7-5-Whereæ ‡ç­¾" class="headerlink" title="7.5.Whereæ ‡ç­¾"></a>7.5.Whereæ ‡ç­¾</h2><h3 id="7-5-1-å®ç°"><a href="#7-5-1-å®ç°" class="headerlink" title="7.5.1.å®ç°"></a>7.5.1.å®ç°</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">1)ç¼–å†™Mapperæ˜ å°„</span><br><span class="line">public interface StudentMapper &#123;</span><br><span class="line">    /**</span><br><span class="line">     * ifæ ‡ç­¾ç¤ºä¾‹</span><br><span class="line">     * æŒ‰ç…§æ¡ä»¶æŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯</span><br><span class="line">     *  æ¡ä»¶ï¼šå§“åã€æ€§åˆ«ã€æ‰€å±å¹´çº§ID</span><br><span class="line">     */</span><br><span class="line">    List&lt;Student&gt; findByExp(Student student);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * whereæ ‡ç­¾ç¤ºä¾‹</span><br><span class="line">     */</span><br><span class="line">    List&lt;Student&gt; findByExp2(Student student);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&lt;mapper namespace=&quot;edu.shifan.mapper.StudentMapper&quot;&gt;</span><br><span class="line">    &lt;!-- ifæ ‡ç­¾ä½¿ç”¨ç¤ºä¾‹ --&gt;</span><br><span class="line">    &lt;select id=&quot;findByExp&quot; parameterType=&quot;edu.shifan.pojo.Student&quot; resultType=&quot;edu.shifan.pojo.Student&quot;&gt;</span><br><span class="line">        select * from  sys_students where 1=1</span><br><span class="line"></span><br><span class="line">        &lt;if test=&quot;stuName!=null and stuName!=&#x27;&#x27;&quot;&gt;</span><br><span class="line">            and stu_name like &quot;%&quot;#&#123;stuName&#125;&quot;%&quot;</span><br><span class="line">        &lt;/if&gt;</span><br><span class="line"></span><br><span class="line">        &lt;if test=&quot;gender!=null&quot;&gt;</span><br><span class="line">            and gender=#&#123;gender&#125;</span><br><span class="line">        &lt;/if&gt;</span><br><span class="line"></span><br><span class="line">         &lt;if test=&quot;gradeId!=null and gradeId!=0&quot;&gt;</span><br><span class="line">             and grade_id=#&#123;gradeId&#125;</span><br><span class="line">         &lt;/if&gt;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- whereæ ‡ç­¾ä½¿ç”¨ç¤ºä¾‹--&gt;</span><br><span class="line">    &lt;select id=&quot;findByExp2&quot; parameterType=&quot;edu.shifan.pojo.Student&quot; resultType=&quot;edu.shifan.pojo.Student&quot;&gt;</span><br><span class="line">        select * from  sys_students</span><br><span class="line">        &lt;where&gt;</span><br><span class="line">            &lt;if test=&quot;stuName!=null and stuName!=&#x27;&#x27;&quot;&gt;</span><br><span class="line">                and stu_name like &quot;%&quot;#&#123;stuName&#125;&quot;%&quot;</span><br><span class="line">            &lt;/if&gt;</span><br><span class="line"></span><br><span class="line">            &lt;if test=&quot;gender!=null&quot;&gt;</span><br><span class="line">                and gender=#&#123;gender&#125;</span><br><span class="line">            &lt;/if&gt;</span><br><span class="line"></span><br><span class="line">            &lt;if test=&quot;gradeId!=null and gradeId!=0&quot;&gt;</span><br><span class="line">                and grade_id=#&#123;gradeId&#125;</span><br><span class="line">            &lt;/if&gt;</span><br><span class="line">        &lt;/where&gt;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>
<p>2)æµ‹è¯•æŸ¥è¯¢</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * æµ‹è¯•whereæ ‡ç­¾</span><br><span class="line"> */</span><br><span class="line">private static void testWhere() &#123;</span><br><span class="line">    //1ã€å°è£…å‚æ•°å¯¹è±¡</span><br><span class="line">    Student stu = new Student();</span><br><span class="line">    stu.setStuName(&quot;J&quot;);</span><br><span class="line">    stu.setGender(false);</span><br><span class="line"></span><br><span class="line">    System.out.println(stu);</span><br><span class="line"></span><br><span class="line">    //2ã€è°ƒç”¨Mapperå¯¹è±¡çš„æ–¹æ³•æŸ¥è¯¢æ•°æ®</span><br><span class="line">    //aã€è·å–Sessionå¯¹è±¡</span><br><span class="line">    SqlSession session = SessionUtil.getSession(false);</span><br><span class="line">    //bã€è·å–Mapperå¯¹è±¡</span><br><span class="line">    StudentMapper mapper = session.getMapper(StudentMapper.class);</span><br><span class="line">    //cã€è°ƒç”¨mapperå¯¹è±¡çš„æ–¹æ³•</span><br><span class="line">    List&lt;Student&gt; list = mapper.findByExp2(stu);</span><br><span class="line">    //dã€å…³é—­Session</span><br><span class="line">    SessionUtil.close();</span><br><span class="line"></span><br><span class="line">    //3ã€å¤„ç†æŸ¥è¯¢ç»“æœ</span><br><span class="line">    for(Student s : list)</span><br><span class="line">        System.out.println(s);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3)ä¼˜ç‚¹<br>å®ç°äº†åŠ¨æ€SQLè¯­å¥ï¼Œæé«˜äº†è¯­å¥çš„çµæ´»æ€§ã€‚<br>4)Ifä¸where</p>
<ul>
<li>Whereæ ‡ç­¾åªèƒ½ç”¨äºç”ŸæˆåŠ¨æ€çš„å¤šæ¡ä»¶whereè¯­å¥ï¼›ifæ ‡ç­¾é™¤äº†åŠ¨æ€ç”Ÿæˆå¤šæ¡ä»¶whereè¯­å¥å¤–è¿˜èƒ½å®ç°å…¶ä»–çš„åŠ¨æ€å¤„ç†</li>
<li>Whereæ ‡ç­¾å®ç°åŠ¨æ€SQLè¯­å¥éœ€è¦å€ŸåŠ©äºifæ ‡ç­¾ï¼›è€Œifæ ‡ç­¾åˆ™ä¸ä¸€å®šå€ŸåŠ©äºwhereæ ‡ç­¾è¿›è¡Œå®ç°</li>
</ul>
<h2 id="7-6-Foreachæ ‡ç­¾"><a href="#7-6-Foreachæ ‡ç­¾" class="headerlink" title="7.6.Foreachæ ‡ç­¾"></a>7.6.Foreachæ ‡ç­¾</h2><h3 id="7-6-1-éœ€æ±‚"><a href="#7-6-1-éœ€æ±‚" class="headerlink" title="7.6.1.éœ€æ±‚"></a>7.6.1.éœ€æ±‚</h3><p>æŒ‰ID(ä¸è¿ç»­çš„å¤šä¸ªID)æŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯</p>
<h3 id="7-6-2-å®ç°"><a href="#7-6-2-å®ç°" class="headerlink" title="7.6.2.å®ç°"></a>7.6.2.å®ç°</h3><p>1)ç¼–å†™Mapperæ˜ å°„</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">public interface StudentMapper &#123;</span><br><span class="line">    /**</span><br><span class="line">     * ifæ ‡ç­¾ç¤ºä¾‹</span><br><span class="line">     * æŒ‰ç…§æ¡ä»¶æŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯</span><br><span class="line">     *  æ¡ä»¶ï¼šå§“åã€æ€§åˆ«ã€æ‰€å±å¹´çº§ID</span><br><span class="line">     */</span><br><span class="line">    List&lt;Student&gt; findByExp(Student student);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * whereæ ‡ç­¾ç¤ºä¾‹</span><br><span class="line">     */</span><br><span class="line">    List&lt;Student&gt; findByExp2(Student student);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * foreachæ ‡ç­¾ç¤ºä¾‹</span><br><span class="line">     */</span><br><span class="line">    List&lt;Student&gt; findByExp3(List&lt;Integer&gt; array);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&lt;mapper namespace=&quot;edu.shifan.mapper.StudentMapper&quot;&gt;</span><br><span class="line">    &lt;sql id=&quot;findStatement&quot;&gt;select * from  sys_students&lt;/sql&gt;</span><br><span class="line">    &lt;!-- ifæ ‡ç­¾ä½¿ç”¨ç¤ºä¾‹ --&gt;</span><br><span class="line">    &lt;select id=&quot;findByExp&quot; parameterType=&quot;edu.shifan.pojo.Student&quot; resultType=&quot;edu.shifan.pojo.Student&quot;&gt;</span><br><span class="line">        &lt;include refid=&quot;findStatement&quot; /&gt; where 1=1</span><br><span class="line"></span><br><span class="line">        &lt;if test=&quot;stuName!=null and stuName!=&#x27;&#x27;&quot;&gt;</span><br><span class="line">            and stu_name like &quot;%&quot;#&#123;stuName&#125;&quot;%&quot;</span><br><span class="line">        &lt;/if&gt;</span><br><span class="line"></span><br><span class="line">        &lt;if test=&quot;gender!=null&quot;&gt;</span><br><span class="line">            and gender=#&#123;gender&#125;</span><br><span class="line">        &lt;/if&gt;</span><br><span class="line"></span><br><span class="line">         &lt;if test=&quot;gradeId!=null and gradeId!=0&quot;&gt;</span><br><span class="line">             and grade_id=#&#123;gradeId&#125;</span><br><span class="line">         &lt;/if&gt;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- whereæ ‡ç­¾ä½¿ç”¨ç¤ºä¾‹--&gt;</span><br><span class="line">    &lt;select id=&quot;findByExp2&quot; parameterType=&quot;edu.shifan.pojo.Student&quot; resultType=&quot;edu.shifan.pojo.Student&quot;&gt;</span><br><span class="line">        &lt;include refid=&quot;findStatement&quot; /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;where&gt;</span><br><span class="line">            &lt;if test=&quot;stuName!=null and stuName!=&#x27;&#x27;&quot;&gt;</span><br><span class="line">                and stu_name like &quot;%&quot;#&#123;stuName&#125;&quot;%&quot;</span><br><span class="line">            &lt;/if&gt;</span><br><span class="line"></span><br><span class="line">            &lt;if test=&quot;gender!=null&quot;&gt;</span><br><span class="line">                and gender=#&#123;gender&#125;</span><br><span class="line">            &lt;/if&gt;</span><br><span class="line"></span><br><span class="line">            &lt;if test=&quot;gradeId!=null and gradeId!=0&quot;&gt;</span><br><span class="line">                and grade_id=#&#123;gradeId&#125;</span><br><span class="line">            &lt;/if&gt;</span><br><span class="line">        &lt;/where&gt;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- foreachæ ‡ç­¾ä½¿ç”¨ç¤ºä¾‹--&gt;</span><br><span class="line">    &lt;select id=&quot;findByExp3&quot; parameterType=&quot;java.util.List&quot; resultType=&quot;edu.shifan.pojo.Student&quot;&gt;</span><br><span class="line">        &lt;include refid=&quot;findStatement&quot; /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;where&gt;</span><br><span class="line">            &lt;foreach collection=&quot;list&quot; item=&quot;id&quot; open=&quot;stu_no in(&quot; close=&quot;)&quot; separator=&quot;,&quot;&gt;</span><br><span class="line">                #&#123;id&#125;</span><br><span class="line">            &lt;/foreach&gt;</span><br><span class="line">        &lt;/where&gt;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>
<p>2)æµ‹è¯•</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * æµ‹è¯•forEachæ ‡ç­¾</span><br><span class="line">  */</span><br><span class="line">private static void testForeach() &#123;</span><br><span class="line">    List&lt;Integer&gt; array = new ArrayList&lt;&gt;();</span><br><span class="line">    array.add(1);</span><br><span class="line">    array.add(2);</span><br><span class="line">    array.add(41);</span><br><span class="line">    array.add(42);</span><br><span class="line">    array.add(50);</span><br><span class="line"></span><br><span class="line">    //2ã€è°ƒç”¨Mapperå¯¹è±¡çš„æ–¹æ³•æŸ¥è¯¢æ•°æ®</span><br><span class="line">    //aã€è·å–Sessionå¯¹è±¡</span><br><span class="line">    SqlSession session = SessionUtil.getSession(false);</span><br><span class="line">    //bã€è·å–Mapperå¯¹è±¡</span><br><span class="line">    StudentMapper mapper = session.getMapper(StudentMapper.class);</span><br><span class="line">    //cã€è°ƒç”¨mapperå¯¹è±¡çš„æ–¹æ³•</span><br><span class="line">    List&lt;Student&gt; list = mapper.findByExp3(array);</span><br><span class="line">    //dã€å…³é—­Session</span><br><span class="line">    SessionUtil.close();</span><br><span class="line"></span><br><span class="line">    //3ã€å¤„ç†æŸ¥è¯¢ç»“æœ</span><br><span class="line">    for(Student s : list)</span><br><span class="line">        System.out.println(s);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3)è¯´æ˜<br>å¤šå‚æ•°æŸ¥è¯¢çš„æœ¬è´¨å°±æ˜¯ä¸€ä¸ªinå­æŸ¥è¯¢</p>
<h2 id="7-7-Chooseæ ‡ç­¾"><a href="#7-7-Chooseæ ‡ç­¾" class="headerlink" title="7.7.Chooseæ ‡ç­¾"></a>7.7.Chooseæ ‡ç­¾</h2><h3 id="7-7-1-éœ€æ±‚"><a href="#7-7-1-éœ€æ±‚" class="headerlink" title="7.7.1.éœ€æ±‚"></a>7.7.1.éœ€æ±‚</h3><p>ä½¿ç”¨å§“åã€æ€§åˆ«æˆ–æ‰€å±å¹´çº§ä¹‹ä¸€ä½œä¸ºæŸ¥è¯¢æ¡ä»¶è¿›è¡ŒæŸ¥è¯¢ã€‚</p>
<h3 id="7-7-2-å®ç°"><a href="#7-7-2-å®ç°" class="headerlink" title="7.7.2.å®ç°"></a>7.7.2.å®ç°</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">1)ç¼–å†™Mapperæ˜ å°„</span><br><span class="line">public interface StudentMapper &#123;</span><br><span class="line">    /**</span><br><span class="line">     * ifæ ‡ç­¾ç¤ºä¾‹</span><br><span class="line">     * æŒ‰ç…§æ¡ä»¶æŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯</span><br><span class="line">     *  æ¡ä»¶ï¼šå§“åã€æ€§åˆ«ã€æ‰€å±å¹´çº§ID</span><br><span class="line">     */</span><br><span class="line">    List&lt;Student&gt; findByExp(Student student);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * whereæ ‡ç­¾ç¤ºä¾‹</span><br><span class="line">     */</span><br><span class="line">    List&lt;Student&gt; findByExp2(Student student);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * foreachæ ‡ç­¾ç¤ºä¾‹</span><br><span class="line">     */</span><br><span class="line">    List&lt;Student&gt; findByExp3(List&lt;Integer&gt; array);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * chooseæ ‡ç­¾ç¤ºä¾‹</span><br><span class="line">     */</span><br><span class="line">    List&lt;Student&gt; findByExp4(Student student);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;!-- chooseæ ‡ç­¾ä½¿ç”¨ç¤ºä¾‹--&gt;</span><br><span class="line">&lt;select id=&quot;findByExp4&quot; parameterType=&quot;edu.shifan.pojo.Student&quot; resultType=&quot;edu.shifan.pojo.Student&quot;&gt;</span><br><span class="line">    &lt;include refid=&quot;findStatement&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;where&gt;</span><br><span class="line">        &lt;!-- ç›¸å½“äºJavaè¯­è¨€ä¸­çš„switchè¯­å¥--&gt;</span><br><span class="line">        &lt;choose&gt;</span><br><span class="line">            &lt;!-- ç›¸å½“äºJavaè¯­è¨€ä¸­çš„caseè¯­å¥--&gt;</span><br><span class="line">            &lt;when test=&quot;stuName!=null and stuName!=&#x27;&#x27;&quot;&gt;</span><br><span class="line">                and stu_name like &quot;%&quot;#&#123;stuName&#125;&quot;%&quot;</span><br><span class="line">            &lt;/when&gt;</span><br><span class="line"></span><br><span class="line">            &lt;when test=&quot;gender!=null&quot;&gt;</span><br><span class="line">                and gender=#&#123;gender&#125;</span><br><span class="line">            &lt;/when&gt;</span><br><span class="line"></span><br><span class="line">            &lt;when test=&quot;gradeId!=null and gradeId!=0&quot;&gt;</span><br><span class="line">                and grade_id=#&#123;gradeId&#125;</span><br><span class="line">            &lt;/when&gt;</span><br><span class="line"></span><br><span class="line">            &lt;!-- ç›¸å½“äºJavaè¯­è¨€ä¸­çš„defaultè¯­å¥--&gt;</span><br><span class="line">            &lt;otherwise&gt;</span><br><span class="line">                and 1=1</span><br><span class="line">            &lt;/otherwise&gt;</span><br><span class="line">        &lt;/choose&gt;</span><br><span class="line">    &lt;/where&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>
<p>2)æµ‹è¯•</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * æµ‹è¯•chooseæ ‡ç­¾</span><br><span class="line"> */</span><br><span class="line">private static void testChoose() &#123;</span><br><span class="line">    Student student = new Student();</span><br><span class="line">    student.setGradeId(3);</span><br><span class="line">    student.setStuName(&quot;T&quot;);</span><br><span class="line"></span><br><span class="line">    //2ã€è°ƒç”¨Mapperå¯¹è±¡çš„æ–¹æ³•æŸ¥è¯¢æ•°æ®</span><br><span class="line">    //aã€è·å–Sessionå¯¹è±¡</span><br><span class="line">    SqlSession session = SessionUtil.getSession(false);</span><br><span class="line">    //bã€è·å–Mapperå¯¹è±¡</span><br><span class="line">    StudentMapper mapper = session.getMapper(StudentMapper.class);</span><br><span class="line">    //cã€è°ƒç”¨mapperå¯¹è±¡çš„æ–¹æ³•</span><br><span class="line">    List&lt;Student&gt; list = mapper.findByExp4(student);</span><br><span class="line">    //dã€å…³é—­Session</span><br><span class="line">    SessionUtil.close();</span><br><span class="line"></span><br><span class="line">    //3ã€å¤„ç†æŸ¥è¯¢ç»“æœ</span><br><span class="line">    for(Student s : list)</span><br><span class="line">        System.out.println(s);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3)è¯´æ˜<br>Chooseæ ‡ç­¾ç›¸å½“äºJavaä¸­çš„switchè¯­å¥ï¼Œåªèƒ½åŒ¹é…å…¶ä¸­ä¸€ä¸ªè¯­å¥æ®µã€‚</p>
<h1 id="8-å¤šè¡¨è¿æ¥æŸ¥è¯¢"><a href="#8-å¤šè¡¨è¿æ¥æŸ¥è¯¢" class="headerlink" title="8.å¤šè¡¨è¿æ¥æŸ¥è¯¢"></a>8.å¤šè¡¨è¿æ¥æŸ¥è¯¢</h1><h2 id="8-1-è¡¨é—´å…³ç³»"><a href="#8-1-è¡¨é—´å…³ç³»" class="headerlink" title="8.1.è¡¨é—´å…³ç³»"></a>8.1.è¡¨é—´å…³ç³»</h2><h3 id="8-1-1-ä¸€å¯¹ä¸€"><a href="#8-1-1-ä¸€å¯¹ä¸€" class="headerlink" title="8.1.1.ä¸€å¯¹ä¸€"></a>8.1.1.ä¸€å¯¹ä¸€</h3><p>1)æ•°æ®é—´å…³ç³»<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y12.png"><br>å·¦ä¾§è¡¨ä¸­1æ¡æ•°æ®å¯¹åº”äºå³ä¾§è¡¨ä¸­0~1æ¡æ•°æ®ï¼Œè¿™ç§å¯¹åº”å…³ç³»å°±æ˜¯ä¸€å¯¹ä¸€å…³ç³»ã€‚<br>2)è¡¨ç»“æ„</p>
<blockquote>
<p>è¡¨åï¼šå…¬æ°‘ä¿¡æ¯è¡¨(sys_person)<br>å­—æ®µå	ç±»å‹	ç‰¹å¾	è¯´æ˜<br>Person_Id	Int(4)	PKã€è‡ªå¢	è®°å½•ID<br>Name	Varchar(20)		å…¬æ°‘å§“å<br>Loc	Varchar(50)		æ‰€åœ¨åœ°</p>
</blockquote>
<blockquote>
<p>è¡¨åï¼šèº«ä»½è¯ä¿¡æ¯è¡¨(sys_IdCard)<br>å­—æ®µå	ç±»å‹	ç‰¹å¾	è¯´æ˜<br>Card_No	Int(18)	PK 	èº«ä»½è¯å·ç <br>Create_Date	Date		å‘è¯æ—¶é—´<br>P_Id	Int(4)		æ‰€å±å…¬æ°‘ID</p>
</blockquote>
<h3 id="8-1-2-ä¸€å¯¹å¤š"><a href="#8-1-2-ä¸€å¯¹å¤š" class="headerlink" title="8.1.2.ä¸€å¯¹å¤š"></a>8.1.2.ä¸€å¯¹å¤š</h3><p>1)æ•°æ®é—´å…³ç³»<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y13.png"><br>å·¦ä¾§è¡¨ä¸­ä¸€æ¡æ•°æ®å¯¹åº”äºå³ä¾§è¡¨ä¸­0~Nè¡¨æ•°æ®ï¼Œè¿™ç§æ•°æ®å¯¹åº”å…³ç³»å°±æ˜¯ä¸€å¯¹å¤šå…³ç³»ã€‚<br>2)è¡¨ç»“æ„</p>
<blockquote>
<p>è¡¨åï¼šå…¬æ°‘ä¿¡æ¯è¡¨(sys_person)<br>å­—æ®µå	ç±»å‹	ç‰¹å¾	è¯´æ˜<br>Person_Id	Int(4)	PKã€è‡ªå¢	è®°å½•ID<br>Name	Varchar(20)		å…¬æ°‘å§“å<br>Loc	Varchar(50)		æ‰€åœ¨åœ°</p>
</blockquote>
<blockquote>
<p>è¡¨åï¼šè´¦å·ä¿¡æ¯è¡¨(sys_Account)<br>å­—æ®µå	ç±»å‹	ç‰¹å¾	è¯´æ˜<br>Card_No	Int(19)	PK 	å¡å·<br>Blance	Int		ä½™é¢<br>P_Id	Int(4)		æ‰€å±å‚¨æˆ·ID</p>
</blockquote>
<h3 id="8-1-3-å¤šå¯¹ä¸€"><a href="#8-1-3-å¤šå¯¹ä¸€" class="headerlink" title="8.1.3.å¤šå¯¹ä¸€"></a>8.1.3.å¤šå¯¹ä¸€</h3><p>å‚è€ƒä¸€å¯¹å¤š</p>
<h3 id="8-1-4-å¤šå¯¹å¤š"><a href="#8-1-4-å¤šå¯¹å¤š" class="headerlink" title="8.1.4.å¤šå¯¹å¤š"></a>8.1.4.å¤šå¯¹å¤š</h3><p>1)æ•°æ®é—´å…³ç³»<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y14.png"><br>å·¦å³ä¸¤ä¾§è¡¨ä¸­æ•°æ®éƒ½èƒ½å¤Ÿäºå¯¹æ–¹å½¢æˆ0~Nçš„å¯¹åº”å…³ç³»ï¼Œè¿™ç§å°±ç§°ä¸ºå¤šå¯¹å¤šå…³ç³»ã€‚<br>2)è¡¨ç»“æ„</p>
<blockquote>
<p>è¡¨åï¼šæ•™å¸ˆä¿¡æ¯è¡¨(sys_teacher)<br>å­—æ®µå	ç±»å‹	ç‰¹å¾	è¯´æ˜<br>Teach_Id	Int(4)	PKã€è‡ªå¢	æ•™å¸ˆç¼–å·<br>Teach_Name	Varchar(20)		æ•™å¸ˆåç§°</p>
</blockquote>
<blockquote>
<p>è¡¨åï¼šå­¦ç”Ÿä¿¡æ¯è¡¨(sys_Students)<br>å­—æ®µå	ç±»å‹	ç‰¹å¾	è¯´æ˜<br>Stu_No	Int(4)	PK 	å­¦å·<br>Stu_Name	Varchar(20)		å­¦ç”Ÿå§“å<br>æ³¨æ„ï¼šå¤šå¯¹å¤šå…³ç³»ä¸€èˆ¬éƒ½éœ€è¦å€ŸåŠ©äºä¸­é—´è¡¨è¿›è¡Œå®ç°ã€‚</p>
</blockquote>
<h3 id="8-2-å¤šè¡¨è¿æ¥æŸ¥è¯¢"><a href="#8-2-å¤šè¡¨è¿æ¥æŸ¥è¯¢" class="headerlink" title="8.2.å¤šè¡¨è¿æ¥æŸ¥è¯¢"></a>8.2.å¤šè¡¨è¿æ¥æŸ¥è¯¢</h3><h3 id="8-2-1-ä¸€å¯¹ä¸€"><a href="#8-2-1-ä¸€å¯¹ä¸€" class="headerlink" title="8.2.1.ä¸€å¯¹ä¸€"></a>8.2.1.ä¸€å¯¹ä¸€</h3><p>1)Sqlè¯­å¥</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># aã€è¿æ¥æŸ¥è¯¢</span><br><span class="line">select * </span><br><span class="line">	from sys_person a</span><br><span class="line">	left join sys_idcard b on a.person_id = b.p_id</span><br><span class="line"># bã€ç‹¬ç«‹æŸ¥è¯¢è¯­å¥</span><br><span class="line">select * from sys_person</span><br><span class="line">select * from sys_idcard where p_id = 1</span><br></pre></td></tr></table></figure>
<p>2)ç¼–å†™å®ä½“ç±»</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * å®ä½“ç±»</span><br><span class="line"> */</span><br><span class="line">public class IdCard &#123;</span><br><span class="line">    private String cardNo;</span><br><span class="line">    private Date createDate;</span><br><span class="line">    private int pId;</span><br><span class="line">&#125;</span><br><span class="line">/**</span><br><span class="line"> * å®ä½“ç±»</span><br><span class="line"> */</span><br><span class="line">public class Person &#123;</span><br><span class="line">    private int personId;</span><br><span class="line">    private String personName;</span><br><span class="line">    private String location;</span><br><span class="line"></span><br><span class="line">    //å¼•å…¥å…¶ä»–ç±»å‹--äººæ‹¥æœ‰èº«ä»½è¯</span><br><span class="line">    private IdCard card;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3)ç¼–å†™Mapperæ˜ å°„</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * ä¸€å¯¹ä¸€æ˜ å°„</span><br><span class="line"> */</span><br><span class="line">public interface OneToOneMapper &#123;</span><br><span class="line">    /**</span><br><span class="line">     * æŸ¥è¯¢å…¬æ°‘å®Œæ•´ä¿¡æ¯</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    List&lt;Person&gt; findAll();</span><br><span class="line">&#125;</span><br><span class="line">&lt;mapper namespace=&quot;edu.shifan.mapper.OneToOneMapper&quot;&gt;</span><br><span class="line">    &lt;!-- èº«ä»½è¯å®ä½“å…³ç³»æ˜ å°„å›¾ --&gt;</span><br><span class="line">    &lt;resultMap id=&quot;cardMap&quot; type=&quot;edu.shifan.pojo.IdCard&quot;&gt;</span><br><span class="line">        &lt;id property=&quot;cardNo&quot; column=&quot;card_No&quot; /&gt;</span><br><span class="line">        &lt;result property=&quot;createDate&quot; column=&quot;create_Date&quot; /&gt;</span><br><span class="line">        &lt;result property=&quot;pId&quot; column=&quot;p_Id&quot; /&gt;</span><br><span class="line">    &lt;/resultMap&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;!-- å…¬æ°‘å®ä½“å…³ç³»æ˜ å°„å›¾ --&gt;</span><br><span class="line">    &lt;resultMap id=&quot;personMap&quot; type=&quot;edu.shifan.pojo.Person&quot;&gt;</span><br><span class="line">        &lt;id property=&quot;personId&quot; column=&quot;person_Id&quot; /&gt;</span><br><span class="line">        &lt;result property=&quot;personName&quot; column=&quot;person_Name&quot; /&gt;</span><br><span class="line">        &lt;result property=&quot;location&quot; column=&quot;location&quot; /&gt;</span><br><span class="line">        </span><br><span class="line">        &lt;!-- å¼•å…¥å¦ä¸€ä¸ªæŸ¥è¯¢ --&gt;</span><br><span class="line">        &lt;!--</span><br><span class="line">            associationï¼šè¡¨ç¤ºä¸€å¯¹ä¸€å¼•ç”¨å…³ç³»</span><br><span class="line">                propertyï¼šå½“å‰è¿”å›å€¼ç±»å‹ä¸­å¼•å…¥çš„å±æ€§å</span><br><span class="line">                JavaTypeï¼šå±æ€§çš„ç±»å‹å</span><br><span class="line">                selectï¼šå¼•å…¥çš„æŸ¥è¯¢å”¯ä¸€æ ‡è¯†</span><br><span class="line">                columnï¼šä¸ºå¼•å…¥æŸ¥è¯¢æä¾›æŸ¥è¯¢å‚æ•°çš„åˆ—å</span><br><span class="line">        --&gt;</span><br><span class="line">        &lt;association property=&quot;card&quot;</span><br><span class="line">                     javaType=&quot;edu.shifan.pojo.IdCard&quot;</span><br><span class="line">                     select=&quot;getCard&quot;</span><br><span class="line">                     column=&quot;person_id&quot; /&gt;</span><br><span class="line">    &lt;/resultMap&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- æŸ¥è¯¢å…¬æ°‘ä¿¡æ¯--&gt;</span><br><span class="line">    &lt;select id=&quot;findAll&quot; resultMap=&quot;personMap&quot;&gt;</span><br><span class="line">        select * from sys_person</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line"></span><br><span class="line">    &lt;select id=&quot;getCard&quot; parameterType=&quot;int&quot; resultMap=&quot;cardMap&quot;&gt;</span><br><span class="line">        select * from sys_idcard where p_id = #&#123;id&#125;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>
<p>4)æµ‹è¯•æ˜ å°„</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * æµ‹è¯•ä¸€å¯¹ä¸€æŸ¥è¯¢</span><br><span class="line"> */</span><br><span class="line">private static void testOneToOne() &#123;</span><br><span class="line">    //1ã€è·å–Sessionå¯¹è±¡</span><br><span class="line">    SqlSession session = SessionUtil.getSession(false);</span><br><span class="line">    //2ã€è·å–Mapperå¯¹è±¡</span><br><span class="line">    OneToOneMapper mapper = session.getMapper(OneToOneMapper.class);</span><br><span class="line">    //3ã€æ‰§è¡ŒæŸ¥è¯¢</span><br><span class="line">    List&lt;Person&gt; list = mapper.findAll();</span><br><span class="line">    //4ã€å…³é—­Session</span><br><span class="line">    SessionUtil.close();</span><br><span class="line"></span><br><span class="line">    //å¤„ç†æŸ¥è¯¢ç»“æœ</span><br><span class="line">    for(Person p : list)</span><br><span class="line">        System.out.println(p);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="8-2-2-ä¸€å¯¹å¤š"><a href="#8-2-2-ä¸€å¯¹å¤š" class="headerlink" title="8.2.2.ä¸€å¯¹å¤š"></a>8.2.2.ä¸€å¯¹å¤š</h3><p>1)Sqlè¯­å¥</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># aã€è¿æ¥æŸ¥è¯¢</span><br><span class="line">select * </span><br><span class="line">	from sys_person a</span><br><span class="line">	left join sys_account b on a.person_id = b.p_id</span><br><span class="line"># bã€ç‹¬ç«‹æŸ¥è¯¢è¯­å¥</span><br><span class="line">select * from sys_person</span><br><span class="line">select * from sys_account where p_id = 1</span><br></pre></td></tr></table></figure>
<p>2)ç¼–å†™å®ä½“ç±»</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * å®ä½“ç±»</span><br><span class="line"> */</span><br><span class="line">public class Account &#123;</span><br><span class="line">    private String cardNo;</span><br><span class="line">    private int blance;</span><br><span class="line">    private int pId;</span><br><span class="line">&#125;</span><br><span class="line">/**</span><br><span class="line"> * å®ä½“ç±»</span><br><span class="line"> */</span><br><span class="line">public class Person &#123;</span><br><span class="line">    private int personId;</span><br><span class="line">    private String personName;</span><br><span class="line">    private String location;</span><br><span class="line"></span><br><span class="line">    //å¼•å…¥å…¶ä»–ç±»å‹--äººæ‹¥æœ‰èº«ä»½è¯</span><br><span class="line">    private IdCard card;</span><br><span class="line"></span><br><span class="line">    //å¼•å…¥å…¶ä»–ç±»å‹--é“¶è¡Œè´¦æˆ·</span><br><span class="line">    private List&lt;Account&gt; accounts;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3)Mapperæ˜ å°„</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * ä¸€å¯¹ä¸€æ˜ å°„</span><br><span class="line"> */</span><br><span class="line">public interface OneToMoreMapper &#123;</span><br><span class="line">    /**</span><br><span class="line">     * æŸ¥è¯¢å…¬æ°‘å®Œæ•´ä¿¡æ¯</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    List&lt;Person&gt; findAll();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;mapper namespace=&quot;edu.shifan.mapper.OneToMoreMapper&quot;&gt;</span><br><span class="line">    &lt;!-- é“¶è¡Œè´¦æˆ·å®ä½“å…³ç³»æ˜ å°„å›¾--&gt;</span><br><span class="line">    &lt;resultMap id=&quot;accountMap&quot; type=&quot;edu.shifan.pojo.Account&quot;&gt;</span><br><span class="line">        &lt;id property=&quot;cardNo&quot; column=&quot;card_No&quot; /&gt;</span><br><span class="line">        &lt;result property=&quot;blance&quot; column=&quot;blance&quot; /&gt;</span><br><span class="line">        &lt;result property=&quot;pId&quot; column=&quot;p_Id&quot; /&gt;</span><br><span class="line">    &lt;/resultMap&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;!-- å…¬æ°‘å®ä½“å…³ç³»æ˜ å°„å›¾ --&gt;</span><br><span class="line">    &lt;resultMap id=&quot;personMap&quot; type=&quot;edu.shifan.pojo.Person&quot;&gt;</span><br><span class="line">        &lt;id property=&quot;personId&quot; column=&quot;person_Id&quot; /&gt;</span><br><span class="line">        &lt;result property=&quot;personName&quot; column=&quot;person_Name&quot; /&gt;</span><br><span class="line">        &lt;result property=&quot;location&quot; column=&quot;location&quot; /&gt;</span><br><span class="line">        </span><br><span class="line">        &lt;!-- å¼•å…¥å¦ä¸€ä¸ªæŸ¥è¯¢ --&gt;</span><br><span class="line">        &lt;!--</span><br><span class="line">            collectionï¼šè¡¨ç¤ºä¸€å¯¹å¤šå¼•ç”¨å…³ç³»</span><br><span class="line">                propertyï¼šå½“å‰è¿”å›å€¼ç±»å‹ä¸­å¼•å…¥çš„å±æ€§å</span><br><span class="line">                JavaTypeï¼šå±æ€§çš„ç±»å‹å(é›†åˆç±»å‹)</span><br><span class="line">                ofTypeï¼šé›†åˆä¸­å…ƒç´ çš„ç±»å‹</span><br><span class="line">                selectï¼šå¼•å…¥çš„æŸ¥è¯¢å”¯ä¸€æ ‡è¯†</span><br><span class="line">                columnï¼šä¸ºå¼•å…¥æŸ¥è¯¢æä¾›æŸ¥è¯¢å‚æ•°çš„åˆ—å</span><br><span class="line">        --&gt;</span><br><span class="line">        &lt;collection property=&quot;accounts&quot;</span><br><span class="line">                    javaType=&quot;java.util.List&quot;</span><br><span class="line">                    ofType=&quot;edu.shifan.pojo.Account&quot;</span><br><span class="line">                    select=&quot;getAccount&quot;</span><br><span class="line">                    column=&quot;person_id&quot; /&gt;</span><br><span class="line">    &lt;/resultMap&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- æŸ¥è¯¢å…¬æ°‘ä¿¡æ¯--&gt;</span><br><span class="line">    &lt;select id=&quot;findAll&quot; resultMap=&quot;personMap&quot;&gt;</span><br><span class="line">        select * from sys_person</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line"></span><br><span class="line">    &lt;select id=&quot;getAccount&quot; parameterType=&quot;int&quot; resultMap=&quot;accountMap&quot;&gt;</span><br><span class="line">        select * from sys_account where p_id = #&#123;id&#125;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>
<p>4)æµ‹è¯•æ˜ å°„</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * æµ‹è¯•ä¸€å¯¹å¤šæŸ¥è¯¢</span><br><span class="line"> */</span><br><span class="line">private static void testOneToMore() &#123;</span><br><span class="line">    //1ã€è·å–Sessionå¯¹è±¡</span><br><span class="line">    SqlSession session = SessionUtil.getSession(false);</span><br><span class="line">    //2ã€è·å–Mapperå¯¹è±¡</span><br><span class="line">    OneToMoreMapper mapper = session.getMapper(OneToMoreMapper.class);</span><br><span class="line">    //3ã€æ‰§è¡ŒæŸ¥è¯¢</span><br><span class="line">    List&lt;Person&gt; list = mapper.findAll();</span><br><span class="line">    //4ã€å…³é—­Session</span><br><span class="line">    SessionUtil.close();</span><br><span class="line"></span><br><span class="line">    //å¤„ç†æŸ¥è¯¢ç»“æœ</span><br><span class="line">    for(Person p : list)</span><br><span class="line">        System.out.println(p);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="9-Webåº”ç”¨ç¨‹åº"><a href="#9-Webåº”ç”¨ç¨‹åº" class="headerlink" title="9.Webåº”ç”¨ç¨‹åº"></a>9.Webåº”ç”¨ç¨‹åº</h1><h2 id="9-1-åˆ†ç±»"><a href="#9-1-åˆ†ç±»" class="headerlink" title="9.1.åˆ†ç±»"></a>9.1.åˆ†ç±»</h2><ul>
<li>æ¡Œé¢åº”ç”¨ç¨‹åº(C&#x2F;S)ï¼šéœ€è¦é¢„å…ˆè¿›è¡Œå®‰è£…ï¼Œç„¶åå¯ä»¥ç›´æ¥å¯åŠ¨å¹¶è¿è¡Œçš„åº”ç”¨ç¨‹åºã€‚å¦‚ï¼šqqã€ideaã€æ¸¸æˆã€‚</li>
<li>Webåº”ç”¨ç¨‹åº(B&#x2F;S)ï¼šå®¢æˆ·ç«¯ä¸éœ€è¦è¿›è¡Œå®‰è£…ï¼Œé€šè¿‡æµè§ˆå™¨å™¨è¿›è¡Œè®¿é—®ã€‚å¦‚ï¼šæ·˜å®ã€ç½‘æ˜“é‚®ç®±ã€å…¶ä»–ç½‘ç«™ç­‰ã€‚Webåº”ç”¨ç¨‹åºéœ€è¦éƒ¨ç½²åœ¨æœåŠ¡å™¨ä¸Šè¿›è¡Œè¿è¡Œã€‚</li>
</ul>
<h2 id="9-2-æœåŠ¡å™¨"><a href="#9-2-æœåŠ¡å™¨" class="headerlink" title="9.2.æœåŠ¡å™¨"></a>9.2.æœåŠ¡å™¨</h2><ul>
<li>ç¡¬ä»¶ï¼šä¸€å°å¯ä»¥ä¸ºå…¶ä»–å®¢æˆ·ç«¯æä¾›æœåŠ¡å™¨çš„è®¡ç®—æœº</li>
<li>è½¯ä»¶ï¼šwebåº”ç”¨ç¨‹åºçš„å®¹å™¨ï¼Œå¯ä»¥ç”¨äºéƒ¨ç½²webåº”ç”¨ç¨‹åºã€‚å¦‚ï¼šTomcatã€WebShareã€JBossç­‰</li>
</ul>
<h2 id="9-3-TomcatæœåŠ¡å™¨"><a href="#9-3-TomcatæœåŠ¡å™¨" class="headerlink" title="9.3.TomcatæœåŠ¡å™¨"></a>9.3.TomcatæœåŠ¡å™¨</h2><h3 id="9-3-1-æ¦‚è¿°"><a href="#9-3-1-æ¦‚è¿°" class="headerlink" title="9.3.1.æ¦‚è¿°"></a>9.3.1.æ¦‚è¿°</h3><p>Tomcatæ˜¯ä¸€ä¸ªå…è´¹å¼€æºçš„WebæœåŠ¡å™¨ã€‚å…·æœ‰è¿è¡Œç¨³å®šï¼ŒåŠŸèƒ½å¼ºå¤§çš„ç‰¹ç‚¹ã€‚</p>
<h3 id="9-3-2-ç›®å½•ç»“æ„"><a href="#9-3-2-ç›®å½•ç»“æ„" class="headerlink" title="9.3.2.ç›®å½•ç»“æ„"></a>9.3.2.ç›®å½•ç»“æ„</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y15.png"></p>
<h3 id="9-3-3-TomcatæœåŠ¡å™¨çš„å¯åŠ¨ä¸åœæ­¢"><a href="#9-3-3-TomcatæœåŠ¡å™¨çš„å¯åŠ¨ä¸åœæ­¢" class="headerlink" title="9.3.3.TomcatæœåŠ¡å™¨çš„å¯åŠ¨ä¸åœæ­¢"></a>9.3.3.TomcatæœåŠ¡å™¨çš„å¯åŠ¨ä¸åœæ­¢</h3><ul>
<li>å¯åŠ¨TomcatæœåŠ¡å™¨</li>
<li>Startup.batï¼šwindowsä¸‹çš„æ‰¹å¤„ç†æ–‡ä»¶</li>
<li>Startup.shï¼šLinuxä¸‹çš„shellè„šæœ¬æ–‡ä»¶</li>
<li>åœæ­¢TomcatæœåŠ¡å™¨</li>
<li>Shutdown.bat</li>
<li>Shutdown.sh</li>
</ul>
<h3 id="9-3-4-æµ‹è¯•"><a href="#9-3-4-æµ‹è¯•" class="headerlink" title="9.3.4.æµ‹è¯•"></a>9.3.4.æµ‹è¯•</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y16.png"></p>
<h2 id="9-4-Webé¡¹ç›®"><a href="#9-4-Webé¡¹ç›®" class="headerlink" title="9.4.Webé¡¹ç›®"></a>9.4.Webé¡¹ç›®</h2><h3 id="9-4-1-åˆ›å»ºwebé¡¹ç›®"><a href="#9-4-1-åˆ›å»ºwebé¡¹ç›®" class="headerlink" title="9.4.1.åˆ›å»ºwebé¡¹ç›®"></a>9.4.1.åˆ›å»ºwebé¡¹ç›®</h3><p>1)æ‰“å¼€ç³»ç»Ÿèœå•<br>File&#x3D;&#x3D;&gt;New&#x3D;&#x3D;&gt;Project<br>2)é€‰æ‹©é¡¹ç›®ç±»å‹<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y17.png"><br>3)é…ç½®Jdkç‰ˆæœ¬<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y18.png"><br>4)é›†æˆTomcatæœåŠ¡å™¨<br>é€šè¿‡newæŒ‰é’®æ‰“å¼€æœåŠ¡å™¨é€‰æ‹©çª—å£<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y19.png"><br>é€‰æ‹©æœåŠ¡å™¨<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y20.png"><br>æœåŠ¡å™¨è·¯å¾„é€‰æ‹©çª—å£<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y21.png"><br>é€‰æ‹©TomcatæœåŠ¡å™¨çš„ç›®å½•<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y22.png"><br>5)æ·»åŠ ä¾èµ–å’Œæ¡†æ¶æ”¯æŒ<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y23.png"><br>6)ç›®å½•ç»“æ„<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y24.png"></p>
<h3 id="9-4-2-å¯åŠ¨webåº”ç”¨ç¨‹åº"><a href="#9-4-2-å¯åŠ¨webåº”ç”¨ç¨‹åº" class="headerlink" title="9.4.2.å¯åŠ¨webåº”ç”¨ç¨‹åº"></a>9.4.2.å¯åŠ¨webåº”ç”¨ç¨‹åº</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y25.png"></p>
<h1 id="10-ç»ƒä¹ "><a href="#10-ç»ƒä¹ " class="headerlink" title="10.ç»ƒä¹ "></a>10.ç»ƒä¹ </h1><h2 id="10-1-éœ€æ±‚"><a href="#10-1-éœ€æ±‚" class="headerlink" title="10.1.éœ€æ±‚"></a>10.1.éœ€æ±‚</h2><p>å®ç°å­¦ç”ŸåŸºæœ¬ä¿¡æ¯ç»´æŠ¤åŠŸèƒ½ã€‚</p>
<h2 id="10-2-åŠŸèƒ½æ¨¡å—"><a href="#10-2-åŠŸèƒ½æ¨¡å—" class="headerlink" title="10.2.åŠŸèƒ½æ¨¡å—"></a>10.2.åŠŸèƒ½æ¨¡å—</h2><ul>
<li>æ–°å¢å­¦ç”Ÿä¿¡æ¯(å§“åã€æ€§åˆ«ã€å¹´é¾„ã€ç”µè¯ã€å®¶åº­ä½å€ã€æ‰€å±å¹´çº§ã€çŠ¶æ€)</li>
<li>ä¿®æ”¹å­¦ç”Ÿä¿¡æ¯</li>
<li>åˆ é™¤å­¦ç”Ÿä¿¡æ¯</li>
<li>æ˜¾ç¤ºå­¦ç”Ÿåˆ—è¡¨</li>
<li>å¤šæ¡ä»¶ç»„åˆæŸ¥è¯¢</li>
</ul>
<h2 id="10-3-åº“è¡¨è®¾è®¡"><a href="#10-3-åº“è¡¨è®¾è®¡" class="headerlink" title="10.3.åº“è¡¨è®¾è®¡"></a>10.3.åº“è¡¨è®¾è®¡</h2><h3 id="10-3-1-æ•°æ®åº“"><a href="#10-3-1-æ•°æ®åº“" class="headerlink" title="10.3.1.æ•°æ®åº“"></a>10.3.1.æ•°æ®åº“</h3><p>æ•°æ®åº“åç§°ï¼šschool_db</p>
<h3 id="10-3-2-è¡¨"><a href="#10-3-2-è¡¨" class="headerlink" title="10.3.2.è¡¨"></a>10.3.2.è¡¨</h3><blockquote>
<p>è¡¨åï¼šå¹´çº§ä¿¡æ¯è¡¨(sys_grade)<br>å­—æ®µå	ç±»å‹	ç‰¹å¾	æè¿°<br>Grade_id	Int(4)	PKã€è‡ªå¢	è®°å½•ID<br>Grade_name	Varchar(50)	Not Null	å¹´çº§åç§°<br>Memo	Varchar(200)		å¤‡æ³¨</p>
</blockquote>
<blockquote>
<p>è¡¨åï¼šå­¦ç”Ÿä¿¡æ¯è¡¨(sys_student)<br>å­—æ®µå	ç±»å‹	ç‰¹å¾	æè¿°<br>Stu_no	Int(4)	PKã€è‡ªå¢	å­¦å·<br>Stu_name	Varchar(20)	Not Null	å§“å<br>Gender	Bit(1)		æ€§åˆ«<br>Age	Int(4)		å¹´é¾„<br>Tel	Varchar(15)		ç”µè¯<br>Address	Varchar(50)		å®¶åº­ä½å€<br>Grade_id	Int(4)	FK	æ‰€å±å¹´çº§ID<br>State	Int(4)		çŠ¶æ€(1-åœ¨æ ¡;2-ä¼‘å­¦;3-é€€å­¦;4-å…¥ä¼;5-ç¦»æ ¡)</p>
</blockquote>
<h2 id="10-4-ä»£ç å®ç°"><a href="#10-4-ä»£ç å®ç°" class="headerlink" title="10.4.ä»£ç å®ç°"></a>10.4.ä»£ç å®ç°</h2><h3 id="10-4-1-åˆ›å»ºé¡¹ç›®"><a href="#10-4-1-åˆ›å»ºé¡¹ç›®" class="headerlink" title="10.4.1.åˆ›å»ºé¡¹ç›®"></a>10.4.1.åˆ›å»ºé¡¹ç›®</h3><p>1)åˆ›å»ºé¡¹ç›®<br>ç•¥<br>2)æ·»åŠ æ¡†æ¶ä¾èµ–(å¦‚æœæœ‰webç›®å½•åˆ™ä¸éœ€è¦è¿›è¡Œæ“ä½œ)<br>ç•¥<br>3)æ·»åŠ å­ç›®å½•<br>åœ¨web&#x2F;WEB-INFä¸‹æ·»åŠ å­ç›®å½•ï¼š</p>
<ul>
<li>Classesï¼šç”¨äºä¿å­˜ç”Ÿæˆåçš„å­—èŠ‚ç æ–‡ä»¶(å¯ä»¥ç¼ºçœ)</li>
<li>Libï¼šç”¨äºä¿å­˜é¡¹ç›®çš„ä¾èµ–<br>4)è®¾ç½®å­ç›®å½•<br>è®¾ç½®classesç›®å½•ï¼šFile&#x3D;&#x3D;ã€‹Project Stuctureâ€¦â€¦<br>ç¬¬ä¸€æ­¥ï¼šé€‰æ‹©æ“ä½œçš„å†…å®¹<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y26.png"><br>ç¬¬äºŒæ­¥ï¼šè®¾ç½®Classes<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y27.png"><br>ç¬¬ä¸‰æ­¥ï¼šè®¾ç½®libç›®å½•<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y28.png"></li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y29.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y30.png"></p>
<h3 id="10-4-2-è¿è¡Œwebé¡¹ç›®"><a href="#10-4-2-è¿è¡Œwebé¡¹ç›®" class="headerlink" title="10.4.2.è¿è¡Œwebé¡¹ç›®"></a>10.4.2.è¿è¡Œwebé¡¹ç›®</h3><p>ç•¥</p>
<h3 id="10-4-3-å®ç°å­¦ç”Ÿåˆ—è¡¨"><a href="#10-4-3-å®ç°å­¦ç”Ÿåˆ—è¡¨" class="headerlink" title="10.4.3.å®ç°å­¦ç”Ÿåˆ—è¡¨"></a>10.4.3.å®ç°å­¦ç”Ÿåˆ—è¡¨</h3><p>1)ç¼–å†™jspé¡µé¢</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;$Title$&lt;/title&gt;</span><br><span class="line">    &lt;style type=&quot;text/css&quot;&gt;</span><br><span class="line">      .grid&#123;</span><br><span class="line">        width:100%;</span><br><span class="line">        border-collapse: collapse;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      .grid th,td&#123;</span><br><span class="line">        padding: 4px 5px;</span><br><span class="line">        border:solid 1px cadetblue;</span><br><span class="line">      &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;a href=&quot;#&quot;&gt;æ–°å¢å­¦ç”Ÿä¿¡æ¯&lt;/a&gt;</span><br><span class="line">    &lt;table class=&quot;grid&quot;&gt;</span><br><span class="line">      &lt;tr&gt;</span><br><span class="line">        &lt;th&gt;å­¦å·&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;å§“å&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;æ€§åˆ«&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;å¹´é¾„&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;ç”µè¯&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;æ‰€å±å¹´çº§&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;å®¶åº­ä½å€&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;çŠ¶æ€&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;&amp;nbsp;&lt;/th&gt;</span><br><span class="line">      &lt;/tr&gt;</span><br><span class="line"></span><br><span class="line">      &lt;tr&gt;</span><br><span class="line">        &lt;td&gt;1&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;Tom&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;ç”·&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;20&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;8907664&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;äºŒå¹´1ç­&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;å—é˜³å¸‚å§é¾™åŒº78å·&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;åœ¨æ ¡&lt;/td&gt;</span><br><span class="line">        &lt;td&gt;</span><br><span class="line">          &lt;a href=&quot;#&quot;&gt;ä¿®æ”¹&lt;/a&gt;</span><br><span class="line">          &lt;a href=&quot;#&quot;&gt;åˆ é™¤&lt;/a&gt;</span><br><span class="line">        &lt;/td&gt;</span><br><span class="line">      &lt;/tr&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/table&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>2)å®ç°æ€è·¯<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y31.png"><br>3)åˆ›å»ºPojoç±»</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * å®ä½“ç±»</span><br><span class="line"> */</span><br><span class="line">public class Student &#123;</span><br><span class="line">    //ç§æœ‰æˆå‘˜å­—æ®µ</span><br><span class="line">    private int stuNo;</span><br><span class="line">    private String stuName;</span><br><span class="line">    private boolean gender;</span><br><span class="line">    private int age;</span><br><span class="line">    private String tel;</span><br><span class="line">    private int gradeId;</span><br><span class="line">    private String address;</span><br><span class="line">    private int state;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4)åˆ›å»ºMapperæ˜ å°„</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * æ˜ å°„æ¥å£</span><br><span class="line"> */</span><br><span class="line">public interface StudentMapper &#123;</span><br><span class="line">    /**</span><br><span class="line">     * æŸ¥è¯¢å…¨éƒ¨å­¦ç”Ÿä¿¡æ¯åˆ—è¡¨</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    List&lt;Student&gt; findAll();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ã€æ˜ å°„æ–‡ä»¶ã€‘</span><br><span class="line">&lt;mapper namespace=&quot;edu.shifan.mapper.StudentMapper&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- æŸ¥è¯¢å…¨éƒ¨å­¦ç”Ÿä¿¡æ¯åˆ—è¡¨ --&gt;</span><br><span class="line">    &lt;select id=&quot;findAll&quot; resultType=&quot;edu.shifan.pojo.Student&quot;&gt;</span><br><span class="line">        select  * from  sys_students</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>
<p>5)æ³¨å†Œæ˜ å°„æ¥å£</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;mappers&gt;</span><br><span class="line">    &lt;mapper class=&quot;edu.shifan.mapper.StudentMapper&quot; /&gt;</span><br><span class="line">&lt;/mappers&gt;</span><br></pre></td></tr></table></figure>
<p>6)åˆ›å»ºServletç±»</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Servlet</span><br><span class="line"> *  ä¸€ä¸ªç»§æ‰¿äº†HttpServletçš„Javaç±»</span><br><span class="line"> *</span><br><span class="line"> *  å®ç°æ­¥éª¤</span><br><span class="line"> *      1ã€åˆ›å»ºç±»å¹¶ç»§æ‰¿äºHttpServlet</span><br><span class="line"> *      2ã€ä½¿ç”¨@WebServletæ³¨è§£è¿›è¡Œæ ‡æ³¨</span><br><span class="line"> *      3ã€é‡å†™çˆ¶ç±»çš„serviceæ–¹æ³•</span><br><span class="line"> *      4ã€ç¼–å†™ä¸šåŠ¡ä»£ç </span><br><span class="line"> *</span><br><span class="line"> */</span><br><span class="line">@WebServlet(&quot;/list&quot;)</span><br><span class="line">public class ListServlet extends HttpServlet &#123;</span><br><span class="line">    @Override</span><br><span class="line">    protected void service(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123;</span><br><span class="line">        //è°ƒç”¨Mapperæ˜ å°„çš„ç›¸å…³æ–¹æ³•</span><br><span class="line">        //è·å–Sessionå¯¹è±¡</span><br><span class="line">        SqlSession session = SessionUtil.getSession(false);</span><br><span class="line">        //è·å–Mapperå¯¹è±¡</span><br><span class="line">        StudentMapper mapper = session.getMapper(StudentMapper.class);</span><br><span class="line">        //è°ƒç”¨æ¥å£æ–¹æ³•</span><br><span class="line">        List&lt;Student&gt; list = mapper.findAll();</span><br><span class="line"></span><br><span class="line">        //System.out.println(list);</span><br><span class="line">        //å°†æ•°æ®ä¼ é€’ç»™Jspé¡µé¢</span><br><span class="line">        //å°†æ•°æ®æ”¾åˆ°ä½œç”¨åŸŸä¸­(ä¸€å—å…¬å…±çš„å†…å­˜ç©ºé—´)</span><br><span class="line">        req.setAttribute(&quot;list&quot;,list);</span><br><span class="line"></span><br><span class="line">        //è·³è½¬åˆ°index.jspé¡µé¢</span><br><span class="line">        req.getRequestDispatcher(&quot;index.jsp&quot;).forward(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>7)Jspç»‘å®šæ•°æ®</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line">&lt;!-- å¼•å…¥ä¾èµ– --&gt;</span><br><span class="line">&lt;%@taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;$Title$&lt;/title&gt;</span><br><span class="line">    &lt;style type=&quot;text/css&quot;&gt;</span><br><span class="line">      .grid&#123;</span><br><span class="line">        width:100%;</span><br><span class="line">        border-collapse: collapse;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      .grid th,td&#123;</span><br><span class="line">        padding: 4px 5px;</span><br><span class="line">        border:solid 1px cadetblue;</span><br><span class="line">      &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;a href=&quot;#&quot;&gt;æ–°å¢å­¦ç”Ÿä¿¡æ¯&lt;/a&gt;</span><br><span class="line">    &lt;table class=&quot;grid&quot;&gt;</span><br><span class="line">      &lt;tr&gt;</span><br><span class="line">        &lt;th&gt;å­¦å·&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;å§“å&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;æ€§åˆ«&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;å¹´é¾„&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;ç”µè¯&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;æ‰€å±å¹´çº§&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;å®¶åº­ä½å€&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;çŠ¶æ€&lt;/th&gt;</span><br><span class="line">        &lt;th&gt;&amp;nbsp;&lt;/th&gt;</span><br><span class="line">      &lt;/tr&gt;</span><br><span class="line"></span><br><span class="line">      &lt;c:forEach items=&quot;$&#123;list&#125;&quot; var=&quot;l&quot;&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">          &lt;td&gt;$&#123;l.stuNo&#125;&lt;/td&gt;</span><br><span class="line">          &lt;td&gt;$&#123;l.stuName&#125;&lt;/td&gt;</span><br><span class="line">          &lt;td&gt;$&#123;l.gender&#125;&lt;/td&gt;</span><br><span class="line">          &lt;td&gt;$&#123;l.age&#125;&lt;/td&gt;</span><br><span class="line">          &lt;td&gt;$&#123;l.tel&#125;&lt;/td&gt;</span><br><span class="line">          &lt;td&gt;$&#123;l.gradeId&#125;&lt;/td&gt;</span><br><span class="line">          &lt;td&gt;$&#123;l.address&#125;&lt;/td&gt;</span><br><span class="line">          &lt;td&gt;$&#123;l.state&#125;&lt;/td&gt;</span><br><span class="line">          &lt;td&gt;</span><br><span class="line">            &lt;a href=&quot;#&quot;&gt;ä¿®æ”¹&lt;/a&gt;</span><br><span class="line">            &lt;a href=&quot;#&quot;&gt;åˆ é™¤&lt;/a&gt;</span><br><span class="line">          &lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">      &lt;/c:forEach&gt;</span><br><span class="line">    &lt;/table&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h3 id="10-4-4-æ·»åŠ å­¦ç”Ÿä¿¡æ¯"><a href="#10-4-4-æ·»åŠ å­¦ç”Ÿä¿¡æ¯" class="headerlink" title="10.4.4.æ·»åŠ å­¦ç”Ÿä¿¡æ¯"></a>10.4.4.æ·»åŠ å­¦ç”Ÿä¿¡æ¯</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">1)ç¼–å†™Jspé¡µé¢</span><br><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;æ–°å¢å­¦ç”Ÿä¿¡æ¯&lt;/title&gt;</span><br><span class="line">    &lt;style type=&quot;text/css&quot;&gt;</span><br><span class="line">        .grid&#123;</span><br><span class="line">            width: 600px;</span><br><span class="line">            margin:0px auto;</span><br><span class="line">            border-collapse: collapse;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        .grid th,td&#123;</span><br><span class="line">            padding: 6px 7px;</span><br><span class="line">            border:solid 1px cadetblue;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        .grid th&#123;</span><br><span class="line">            text-align: right;</span><br><span class="line">            background: lightgray;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;table class=&quot;grid&quot;&gt;</span><br><span class="line">        &lt;caption&gt;æ–°å¢å­¦ç”Ÿä¿¡æ¯&lt;/caption&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;th&gt;å§“åï¼š&lt;/th&gt;</span><br><span class="line">            &lt;td&gt;</span><br><span class="line">                &lt;input type=&quot;text&quot; name=&quot;stuName&quot; /&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;th&gt;æ€§åˆ«ï¼š&lt;/th&gt;</span><br><span class="line">            &lt;td&gt;</span><br><span class="line">                &lt;input type=&quot;radio&quot; name=&quot;gender&quot; value=&quot;1&quot; /&gt;ç”·</span><br><span class="line">                &lt;input type=&quot;radio&quot; name=&quot;gender&quot; value=&quot;0&quot; /&gt;å¥³</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;th&gt;å¹´é¾„ï¼š&lt;/th&gt;</span><br><span class="line">            &lt;td&gt;</span><br><span class="line">                &lt;input type=&quot;text&quot; name=&quot;age&quot; /&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;th&gt;è”ç³»ç”µè¯ï¼š&lt;/th&gt;</span><br><span class="line">            &lt;td&gt;</span><br><span class="line">                &lt;input type=&quot;text&quot; name=&quot;tel&quot; /&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;th&gt;æ‰€å±å¹´çº§ï¼š&lt;/th&gt;</span><br><span class="line">            &lt;td&gt;</span><br><span class="line">                &lt;select name=&quot;gradeId&quot;&gt;</span><br><span class="line">                    &lt;option value=&quot;0&quot;&gt;---è¯·é€‰æ‹©---&lt;/option&gt;</span><br><span class="line">                &lt;/select&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;th&gt;å®¶åº­ä½å€ï¼š&lt;/th&gt;</span><br><span class="line">            &lt;td&gt;</span><br><span class="line">                &lt;input type=&quot;text&quot; name=&quot;address&quot; /&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;th&gt;&lt;/th&gt;</span><br><span class="line">            &lt;td&gt;</span><br><span class="line">                &lt;input type=&quot;submit&quot; value=&quot;æäº¤&quot; /&gt;</span><br><span class="line">                &lt;input type=&quot;reset&quot; value=&quot;é‡ç½®&quot; /&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">    &lt;/table&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>2)å®ç°æ€è·¯<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y32.png"><br>3)ç¼–å†™Mapperæ˜ å°„</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * æ˜ å°„æ¥å£</span><br><span class="line"> */</span><br><span class="line">public interface StudentMapper &#123;</span><br><span class="line">    /**</span><br><span class="line">     * å°†å­¦ç”Ÿä¿¡æ¯æ·»åŠ åˆ°æ•°æ®åº“ä¸­</span><br><span class="line">     * @param student</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    int add(Student student);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * æŸ¥è¯¢å…¨éƒ¨å­¦ç”Ÿä¿¡æ¯åˆ—è¡¨</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    List&lt;Student&gt; findAll();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;mapper namespace=&quot;edu.shifan.mapper.StudentMapper&quot;&gt;</span><br><span class="line">    &lt;!-- å°†å­¦ç”Ÿä¿¡æ¯å†™å…¥åˆ°æ•°æ®åº“ä¸­ --&gt;</span><br><span class="line">    &lt;insert id=&quot;add&quot; parameterType=&quot;edu.shifan.pojo.Student&quot;&gt;</span><br><span class="line">        insert into sys_students(stu_name,gender,age,tel,grade_id,address)</span><br><span class="line">           values(#&#123;stuName&#125;,#&#123;gender&#125;,#&#123;age&#125;,#&#123;tel&#125;,#&#123;gradeId&#125;,#&#123;address&#125;)</span><br><span class="line">    &lt;/insert&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- æŸ¥è¯¢å…¨éƒ¨å­¦ç”Ÿä¿¡æ¯åˆ—è¡¨ --&gt;</span><br><span class="line">    &lt;select id=&quot;findAll&quot; resultType=&quot;edu.shifan.pojo.Student&quot;&gt;</span><br><span class="line">        select  * from  sys_students</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>
<p>4)ç¼–å†™Jspé¡µé¢</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;!--</span><br><span class="line">        methodï¼šæäº¤æ–¹å¼</span><br><span class="line">            getï¼šé€šè¿‡URLåœ°å€è¿›è¡Œå‚æ•°ä¼ é€’</span><br><span class="line">            postï¼šé€šè¿‡æŠ¥æ–‡è¿›è¡Œå‚æ•°ä¼ é€’</span><br><span class="line">        actionï¼šè¯·æ±‚çš„å“åº”è€…(è°æ¥å¤„ç†è¯·æ±‚)</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;form method=&quot;post&quot; action=&quot;add&quot;&gt;</span><br><span class="line">        &lt;table class=&quot;grid&quot;&gt;</span><br><span class="line">            &lt;caption&gt;æ–°å¢å­¦ç”Ÿä¿¡æ¯&lt;/caption&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;th&gt;å§“åï¼š&lt;/th&gt;</span><br><span class="line">                &lt;td&gt;</span><br><span class="line">                    &lt;input type=&quot;text&quot; name=&quot;stuName&quot; /&gt;</span><br><span class="line">                &lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;th&gt;æ€§åˆ«ï¼š&lt;/th&gt;</span><br><span class="line">                &lt;td&gt;</span><br><span class="line">                    &lt;input type=&quot;radio&quot; name=&quot;gender&quot; value=&quot;1&quot; /&gt;ç”·</span><br><span class="line">                    &lt;input type=&quot;radio&quot; name=&quot;gender&quot; value=&quot;0&quot; /&gt;å¥³</span><br><span class="line">                &lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;th&gt;å¹´é¾„ï¼š&lt;/th&gt;</span><br><span class="line">                &lt;td&gt;</span><br><span class="line">                    &lt;input type=&quot;text&quot; name=&quot;age&quot; /&gt;</span><br><span class="line">                &lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;th&gt;è”ç³»ç”µè¯ï¼š&lt;/th&gt;</span><br><span class="line">                &lt;td&gt;</span><br><span class="line">                    &lt;input type=&quot;text&quot; name=&quot;tel&quot; /&gt;</span><br><span class="line">                &lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;th&gt;æ‰€å±å¹´çº§ï¼š&lt;/th&gt;</span><br><span class="line">                &lt;td&gt;</span><br><span class="line">                    &lt;select name=&quot;gradeId&quot;&gt;</span><br><span class="line">                        &lt;option value=&quot;0&quot;&gt;---è¯·é€‰æ‹©---&lt;/option&gt;</span><br><span class="line">                    &lt;/select&gt;</span><br><span class="line">                &lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;th&gt;å®¶åº­ä½å€ï¼š&lt;/th&gt;</span><br><span class="line">                &lt;td&gt;</span><br><span class="line">                    &lt;input type=&quot;text&quot; name=&quot;address&quot; /&gt;</span><br><span class="line">                &lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;th&gt;&lt;/th&gt;</span><br><span class="line">                &lt;td&gt;</span><br><span class="line">                    &lt;input type=&quot;submit&quot; value=&quot;æäº¤&quot; /&gt;</span><br><span class="line">                    &lt;input type=&quot;reset&quot; value=&quot;é‡ç½®&quot; /&gt;</span><br><span class="line">                &lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">        &lt;/table&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>
<p>5)ç¼–å†™Servlet</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Servlet--å“åº”ç”¨æˆ·çš„è¯·æ±‚(å°†ç”¨æˆ·æäº¤çš„ä¿¡æ¯å†™å…¥åˆ°æ•°æ®åº“ä¸­)</span><br><span class="line"> *  1ã€åˆ›å»ºç±»å¹¶ç»§æ‰¿HttpServletç±»</span><br><span class="line"> *  2ã€ä½¿ç”¨@WebServletæ³¨è§£è¿›è¡Œæ ‡æ³¨</span><br><span class="line"> *  3ã€é‡å†™Service()æ–¹æ³•</span><br><span class="line"> *  4ã€ç¼–å†™ä¸šåŠ¡ä»£ç </span><br><span class="line"> */</span><br><span class="line">@WebServlet(&quot;/add&quot;)</span><br><span class="line">public class AddServlet extends HttpServlet &#123;</span><br><span class="line">    @Override</span><br><span class="line">    protected void service(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123;</span><br><span class="line">        //è®¾ç½®è¯·æ±‚çš„ç¼–ç æ ¼å¼(è§£å†³ä¸­æ–‡ä¹±ç é—®é¢˜)</span><br><span class="line">        req.setCharacterEncoding(&quot;UTF-8&quot;);</span><br><span class="line">        //1ã€è·å–ç”¨æˆ·æäº¤çš„æ•°æ®</span><br><span class="line">        //ç”¨äºå°è£…ç”¨æˆ·æäº¤çš„è¯·æ±‚æ•°æ®</span><br><span class="line">        Student stu = new Student();</span><br><span class="line">        //getParaemeter()ï¼šç”¨äºè·å–ç”¨æˆ·æäº¤çš„è¯·æ±‚å‚æ•°ï¼Œè¿”å›ç»“æœä¸ºå­—ç¬¦ä¸²ç±»å‹æ•°æ®</span><br><span class="line">        stu.setStuName(req.getParameter(&quot;stuName&quot;));</span><br><span class="line">        stu.setGender(&quot;1&quot;.equals(req.getParameter(&quot;gender&quot;)));</span><br><span class="line">        stu.setAge(Integer.parseInt(req.getParameter(&quot;age&quot;)));</span><br><span class="line">        stu.setTel(req.getParameter(&quot;tel&quot;));</span><br><span class="line">        stu.setAddress(req.getParameter(&quot;address&quot;));</span><br><span class="line">        stu.setGradeId(1);</span><br><span class="line">        System.out.println(stu);</span><br><span class="line"></span><br><span class="line">        //2ã€è°ƒç”¨Mapperçš„æ–¹æ³•å°†æ•°æ®å†™å…¥åˆ°æ•°æ®åº“</span><br><span class="line">        //è·å–SqlSessionå¯¹è±¡</span><br><span class="line">        SqlSession session = SessionUtil.getSession();</span><br><span class="line">        //è·å–Mapperå¯¹è±¡</span><br><span class="line">        StudentMapper mapper = session.getMapper(StudentMapper.class);</span><br><span class="line">        //è°ƒç”¨mapperçš„æ–¹æ³•å°†æ•°æ®å†™å…¥åˆ°æ•°æ®åº“ä¸­</span><br><span class="line">        mapper.add(stu);</span><br><span class="line">        //å…³é—­Sessionå¯¹è±¡</span><br><span class="line">        SessionUtil.close();</span><br><span class="line"></span><br><span class="line">        //3ã€è·³è½¬åˆ°index.jspé¡µé¢</span><br><span class="line">        req.getRequestDispatcher(&quot;list&quot;).forward(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="10-4-5-ä¸‹æ‹‰åˆ—è¡¨ç»‘å®šæ•°æ®"><a href="#10-4-5-ä¸‹æ‹‰åˆ—è¡¨ç»‘å®šæ•°æ®" class="headerlink" title="10.4.5.ä¸‹æ‹‰åˆ—è¡¨ç»‘å®šæ•°æ®"></a>10.4.5.ä¸‹æ‹‰åˆ—è¡¨ç»‘å®šæ•°æ®</h3><p>1)å®ç°æ€è·¯<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y33.png"><br>2)ç¼–å†™Mapperæ˜ å°„</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">ã€mapperæ¥å£ã€‘</span><br><span class="line">public interface GradeMapper &#123;</span><br><span class="line">    /**</span><br><span class="line">     * æŸ¥è¯¢æ‰€æœ‰å¹´çº§ä¿¡æ¯</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    List&lt;Grade&gt; findAll();</span><br><span class="line">&#125;</span><br><span class="line">ã€mapperæ˜ å°„ã€‘</span><br><span class="line">&lt;mapper namespace=&quot;edu.shifan.mapper.GradeMapper&quot;&gt;</span><br><span class="line">    &lt;!-- æŸ¥è¯¢æ‰€æœ‰å¹´çº§ä¿¡æ¯ --&gt;</span><br><span class="line">    &lt;select id=&quot;findAll&quot; resultType=&quot;edu.shifan.pojo.Grade&quot;&gt;</span><br><span class="line">        SELECT * FROM sys_grade ORDER BY grade_id</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>
<p>3)ç¼–å†™Servlet</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Servlet</span><br><span class="line"> */</span><br><span class="line">@WebServlet(&quot;/init&quot;)</span><br><span class="line">public class InitServlet extends HttpServlet &#123;</span><br><span class="line">    @Override</span><br><span class="line">    protected void service(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123;</span><br><span class="line">        //1ã€è°ƒç”¨Mapperå¯¹è±¡çš„æ–¹æ³•è·å–æ•°æ®</span><br><span class="line">        //aã€è·å–Sessionå¯¹è±¡</span><br><span class="line">        SqlSession session = SessionUtil.getSession(false);</span><br><span class="line">        //bã€è·å–Mapperå¯¹è±¡</span><br><span class="line">        GradeMapper mapper = session.getMapper(GradeMapper.class);</span><br><span class="line">        //cã€è°ƒç”¨æ–¹æ³•</span><br><span class="line">        List&lt;Grade&gt; list= mapper.findAll();</span><br><span class="line">        //dã€å…³é—­session</span><br><span class="line">        SessionUtil.close();</span><br><span class="line"></span><br><span class="line">        //2ã€å°†æ•°æ®ä¼ é€’ç»™add.jspé¡µé¢</span><br><span class="line">        req.setAttribute(&quot;list&quot;,list);</span><br><span class="line"></span><br><span class="line">        //3ã€è·³è½¬åˆ°add.jspé¡µé¢</span><br><span class="line">        req.getRequestDispatcher(&quot;add.jsp&quot;).forward(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4)ä¿®æ”¹Jspæ–‡ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line">ã€index.jspã€‘</span><br><span class="line">&lt;a href=&quot;init&quot;&gt;æ–°å¢å­¦ç”Ÿä¿¡æ¯&lt;/a&gt;</span><br><span class="line">ã€add.jspã€‘</span><br><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line">&lt;!-- å¼•å…¥ä¾èµ– --&gt;</span><br><span class="line">&lt;%@taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;</span><br><span class="line"></span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;æ–°å¢å­¦ç”Ÿä¿¡æ¯&lt;/title&gt;</span><br><span class="line">    &lt;style type=&quot;text/css&quot;&gt;</span><br><span class="line">        .grid&#123;</span><br><span class="line">            width: 600px;</span><br><span class="line">            margin:0px auto;</span><br><span class="line">            border-collapse: collapse;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        .grid th,td&#123;</span><br><span class="line">            padding: 6px 7px;</span><br><span class="line">            border:solid 1px cadetblue;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        .grid th&#123;</span><br><span class="line">            text-align: right;</span><br><span class="line">            background: lightgray;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;!--</span><br><span class="line">        methodï¼šæäº¤æ–¹å¼</span><br><span class="line">            getï¼šé€šè¿‡URLåœ°å€è¿›è¡Œå‚æ•°ä¼ é€’</span><br><span class="line">            postï¼šé€šè¿‡æŠ¥æ–‡è¿›è¡Œå‚æ•°ä¼ é€’</span><br><span class="line">        actionï¼šè¯·æ±‚çš„å“åº”è€…(è°æ¥å¤„ç†è¯·æ±‚)</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;form method=&quot;post&quot; action=&quot;add&quot;&gt;</span><br><span class="line">        &lt;table class=&quot;grid&quot;&gt;</span><br><span class="line">            &lt;caption&gt;æ–°å¢å­¦ç”Ÿä¿¡æ¯&lt;/caption&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;th&gt;å§“åï¼š&lt;/th&gt;</span><br><span class="line">                &lt;td&gt;</span><br><span class="line">                    &lt;input type=&quot;text&quot; name=&quot;stuName&quot; /&gt;</span><br><span class="line">                &lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;th&gt;æ€§åˆ«ï¼š&lt;/th&gt;</span><br><span class="line">                &lt;td&gt;</span><br><span class="line">                    &lt;input type=&quot;radio&quot; name=&quot;gender&quot; value=&quot;1&quot; /&gt;ç”·</span><br><span class="line">                    &lt;input type=&quot;radio&quot; name=&quot;gender&quot; value=&quot;0&quot; /&gt;å¥³</span><br><span class="line">                &lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;th&gt;å¹´é¾„ï¼š&lt;/th&gt;</span><br><span class="line">                &lt;td&gt;</span><br><span class="line">                    &lt;input type=&quot;text&quot; name=&quot;age&quot; /&gt;</span><br><span class="line">                &lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;th&gt;è”ç³»ç”µè¯ï¼š&lt;/th&gt;</span><br><span class="line">                &lt;td&gt;</span><br><span class="line">                    &lt;input type=&quot;text&quot; name=&quot;tel&quot; /&gt;</span><br><span class="line">                &lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;th&gt;æ‰€å±å¹´çº§ï¼š&lt;/th&gt;</span><br><span class="line">                &lt;td&gt;</span><br><span class="line">                    &lt;select name=&quot;gradeId&quot;&gt;</span><br><span class="line">                        &lt;option value=&quot;0&quot;&gt;---è¯·é€‰æ‹©---&lt;/option&gt;</span><br><span class="line"></span><br><span class="line">                        &lt;c:forEach items=&quot;$&#123;list&#125;&quot; var=&quot;g&quot;&gt;</span><br><span class="line">                            &lt;option value=&quot;$&#123;g.gradeId&#125;&quot;&gt;$&#123;g.gradeName&#125;&lt;/option&gt;</span><br><span class="line">                        &lt;/c:forEach&gt;</span><br><span class="line">                    &lt;/select&gt;</span><br><span class="line">                &lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;th&gt;å®¶åº­ä½å€ï¼š&lt;/th&gt;</span><br><span class="line">                &lt;td&gt;</span><br><span class="line">                    &lt;input type=&quot;text&quot; name=&quot;address&quot; /&gt;</span><br><span class="line">                &lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;th&gt;&lt;/th&gt;</span><br><span class="line">                &lt;td&gt;</span><br><span class="line">                    &lt;input type=&quot;submit&quot; value=&quot;æäº¤&quot; /&gt;</span><br><span class="line">                    &lt;input type=&quot;reset&quot; value=&quot;é‡ç½®&quot; /&gt;</span><br><span class="line">                &lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">        &lt;/table&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h3 id="10-4-6-åˆå§‹åŒ–æ›´æ–°æ•°æ®"><a href="#10-4-6-åˆå§‹åŒ–æ›´æ–°æ•°æ®" class="headerlink" title="10.4.6.åˆå§‹åŒ–æ›´æ–°æ•°æ®"></a>10.4.6.åˆå§‹åŒ–æ›´æ–°æ•°æ®</h3><p>1)å®ç°æ€è·¯<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y34.png"><br>2)ç¼–å†™Mapperæ˜ å°„</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">ã€æ˜ å°„æ¥å£ã€‘</span><br><span class="line">/**</span><br><span class="line"> * æ˜ å°„æ¥å£</span><br><span class="line"> */</span><br><span class="line">public interface StudentMapper &#123;</span><br><span class="line">    /**</span><br><span class="line">     * å°†å­¦ç”Ÿä¿¡æ¯æ·»åŠ åˆ°æ•°æ®åº“ä¸­</span><br><span class="line">     * @param student</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    int add(Student student);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * æŸ¥è¯¢å…¨éƒ¨å­¦ç”Ÿä¿¡æ¯åˆ—è¡¨</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    List&lt;Student&gt; findAll();</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * æŒ‰IdæŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯</span><br><span class="line">     */</span><br><span class="line">    Student findById(int id);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ã€æ˜ å°„æ–‡ä»¶ã€‘</span><br><span class="line">&lt;mapper namespace=&quot;edu.shifan.mapper.StudentMapper&quot;&gt;</span><br><span class="line">    &lt;!-- å°†å­¦ç”Ÿä¿¡æ¯å†™å…¥åˆ°æ•°æ®åº“ä¸­ --&gt;</span><br><span class="line">    &lt;insert id=&quot;add&quot; parameterType=&quot;edu.shifan.pojo.Student&quot;&gt;</span><br><span class="line">        insert into sys_students(stu_name,gender,age,tel,grade_id,address)</span><br><span class="line">           values(#&#123;stuName&#125;,#&#123;gender&#125;,#&#123;age&#125;,#&#123;tel&#125;,#&#123;gradeId&#125;,#&#123;address&#125;)</span><br><span class="line">    &lt;/insert&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- æŸ¥è¯¢å…¨éƒ¨å­¦ç”Ÿä¿¡æ¯åˆ—è¡¨ --&gt;</span><br><span class="line">    &lt;select id=&quot;findAll&quot; resultType=&quot;edu.shifan.pojo.Student&quot;&gt;</span><br><span class="line">        select  * from  sys_students</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- æŒ‰idæŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯--&gt;</span><br><span class="line">    &lt;select id=&quot;findById&quot; parameterType=&quot;int&quot; resultType=&quot;edu.shifan.pojo.Student&quot;&gt;</span><br><span class="line">        SELECT * FROM sys_students where stu_no=#&#123;id&#125;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>
<p>3)ç¼–å†™Servlet</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">@WebServlet(&quot;/load&quot;)</span><br><span class="line">public class LoadServlet extends HttpServlet &#123;</span><br><span class="line">    @Override</span><br><span class="line">    protected void service(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123;</span><br><span class="line">        //1ã€è·å–å®¢æˆ·ç«¯ä¼ é€’çš„Idæ•°æ®</span><br><span class="line">        int id = Integer.parseInt(req.getParameter(&quot;id&quot;));</span><br><span class="line"></span><br><span class="line">        //2ã€è°ƒç”¨mapperå¯¹è±¡çš„æ–¹æ³•æŸ¥è¯¢æ•°æ®</span><br><span class="line">        //aã€è·å–Sessionå¯¹è±¡</span><br><span class="line">        SqlSession session = SessionUtil.getSession(false);</span><br><span class="line">        //bã€è·å–Mapperå¯¹è±¡</span><br><span class="line">        StudentMapper mapper = session.getMapper(StudentMapper.class);</span><br><span class="line">        //cã€è°ƒç”¨mapperå¯¹è±¡çš„æ–¹æ³•</span><br><span class="line">        Student student=mapper.findById(id);</span><br><span class="line"></span><br><span class="line">        //3ã€å°†æ•°æ®æ”¾åˆ°ä½œç”¨åŸŸä¸­(ä¾›é¡µé¢è¯»å–)</span><br><span class="line">        req.setAttribute(&quot;data&quot;,student);</span><br><span class="line"></span><br><span class="line">        //4ã€è·³è½¬åˆ°update.jspé¡µé¢</span><br><span class="line">        req.getRequestDispatcher(&quot;update.jsp&quot;).forward(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4)ä¿®æ”¹Jspé¡µé¢</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">ã€index.jspã€‘</span><br><span class="line">&lt;a href=&quot;load?id=$&#123;l.stuNo&#125;&quot;&gt;ä¿®æ”¹&lt;/a&gt;</span><br><span class="line">ã€update.jspã€‘</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;!--</span><br><span class="line">        methodï¼šæäº¤æ–¹å¼</span><br><span class="line">            getï¼šé€šè¿‡URLåœ°å€è¿›è¡Œå‚æ•°ä¼ é€’</span><br><span class="line">            postï¼šé€šè¿‡æŠ¥æ–‡è¿›è¡Œå‚æ•°ä¼ é€’</span><br><span class="line">        actionï¼šè¯·æ±‚çš„å“åº”è€…(è°æ¥å¤„ç†è¯·æ±‚)</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;form method=&quot;post&quot; action=&quot;add&quot;&gt;</span><br><span class="line">        &lt;table class=&quot;grid&quot;&gt;</span><br><span class="line">            &lt;caption&gt;æ›´æ–°å­¦ç”Ÿä¿¡æ¯&lt;/caption&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;th&gt;å§“åï¼š&lt;/th&gt;</span><br><span class="line">                &lt;td&gt;</span><br><span class="line">                    &lt;input type=&quot;text&quot; name=&quot;stuName&quot; value=&quot;$&#123;data.stuName&#125;&quot;/&gt;</span><br><span class="line">                &lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;th&gt;æ€§åˆ«ï¼š&lt;/th&gt;</span><br><span class="line">                &lt;td&gt;</span><br><span class="line">                    &lt;input type=&quot;radio&quot; name=&quot;gender&quot; value=&quot;1&quot; /&gt;ç”·</span><br><span class="line">                    &lt;input type=&quot;radio&quot; name=&quot;gender&quot; value=&quot;0&quot; /&gt;å¥³</span><br><span class="line">                &lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;th&gt;å¹´é¾„ï¼š&lt;/th&gt;</span><br><span class="line">                &lt;td&gt;</span><br><span class="line">                    &lt;input type=&quot;text&quot; name=&quot;age&quot; value=&quot;$&#123;data.age&#125;&quot;/&gt;</span><br><span class="line">                &lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;th&gt;è”ç³»ç”µè¯ï¼š&lt;/th&gt;</span><br><span class="line">                &lt;td&gt;</span><br><span class="line">                    &lt;input type=&quot;text&quot; name=&quot;tel&quot; value=&quot;$&#123;data.tel&#125;&quot;/&gt;</span><br><span class="line">                &lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;th&gt;æ‰€å±å¹´çº§ï¼š&lt;/th&gt;</span><br><span class="line">                &lt;td&gt;</span><br><span class="line">                    &lt;select name=&quot;gradeId&quot;&gt;</span><br><span class="line">                        &lt;option value=&quot;0&quot;&gt;---è¯·é€‰æ‹©---&lt;/option&gt;</span><br><span class="line">                    &lt;/select&gt;</span><br><span class="line">                &lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;th&gt;å®¶åº­ä½å€ï¼š&lt;/th&gt;</span><br><span class="line">                &lt;td&gt;</span><br><span class="line">                    &lt;input type=&quot;text&quot; name=&quot;address&quot; value=&quot;$&#123;data.address&#125;&quot;/&gt;</span><br><span class="line">                &lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;th&gt;&lt;/th&gt;</span><br><span class="line">                &lt;td&gt;</span><br><span class="line">                    &lt;input type=&quot;submit&quot; value=&quot;æäº¤&quot; /&gt;</span><br><span class="line">                    &lt;input type=&quot;reset&quot; value=&quot;é‡ç½®&quot; /&gt;</span><br><span class="line">                &lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">        &lt;/table&gt;</span><br><span class="line">    &lt;/form&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>
<h3 id="10-4-7-ä¿®æ”¹radioçš„é€‰ä¸­çŠ¶æ€"><a href="#10-4-7-ä¿®æ”¹radioçš„é€‰ä¸­çŠ¶æ€" class="headerlink" title="10.4.7.ä¿®æ”¹radioçš„é€‰ä¸­çŠ¶æ€"></a>10.4.7.ä¿®æ”¹radioçš„é€‰ä¸­çŠ¶æ€</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- æ ¹æ®å­¦ç”Ÿçš„æ€§åˆ«ï¼Œè®¾ç½®radioçš„checkedå±æ€§--&gt;</span><br><span class="line">&lt;c:if test=&quot;$&#123;data.gender&#125;&quot; var=&quot;flag&quot;&gt;</span><br><span class="line">    &lt;input type=&quot;radio&quot; name=&quot;gender&quot; value=&quot;1&quot; checked=&quot;checked&quot;/&gt;ç”·</span><br><span class="line">    &lt;input type=&quot;radio&quot; name=&quot;gender&quot; value=&quot;0&quot; /&gt;å¥³</span><br><span class="line">&lt;/c:if&gt;</span><br><span class="line">&lt;c:if test=&quot;$&#123;!flag&#125;&quot;&gt;</span><br><span class="line">    &lt;input type=&quot;radio&quot; name=&quot;gender&quot; value=&quot;1&quot; /&gt;ç”·</span><br><span class="line">    &lt;input type=&quot;radio&quot; name=&quot;gender&quot; value=&quot;0&quot;  checked=&quot;checked&quot;/&gt;å¥³</span><br><span class="line">&lt;/c:if&gt;</span><br></pre></td></tr></table></figure>
<h3 id="10-4-8-ä¿®æ”¹ä¸‹æ‹‰åˆ—è¡¨çš„é€‰ä¸­çŠ¶æ€"><a href="#10-4-8-ä¿®æ”¹ä¸‹æ‹‰åˆ—è¡¨çš„é€‰ä¸­çŠ¶æ€" class="headerlink" title="10.4.8.ä¿®æ”¹ä¸‹æ‹‰åˆ—è¡¨çš„é€‰ä¸­çŠ¶æ€"></a>10.4.8.ä¿®æ”¹ä¸‹æ‹‰åˆ—è¡¨çš„é€‰ä¸­çŠ¶æ€</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">protected void service(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123;</span><br><span class="line">    //1ã€è·å–å®¢æˆ·ç«¯ä¼ é€’çš„Idæ•°æ®</span><br><span class="line">    int id = Integer.parseInt(req.getParameter(&quot;id&quot;));</span><br><span class="line"></span><br><span class="line">    //2ã€è°ƒç”¨mapperå¯¹è±¡çš„æ–¹æ³•æŸ¥è¯¢æ•°æ®</span><br><span class="line">    //aã€è·å–Sessionå¯¹è±¡</span><br><span class="line">    SqlSession session = SessionUtil.getSession(false);</span><br><span class="line">    //bã€è·å–Mapperå¯¹è±¡</span><br><span class="line">    StudentMapper mapper = session.getMapper(StudentMapper.class);</span><br><span class="line">    //cã€è°ƒç”¨mapperå¯¹è±¡çš„æ–¹æ³•</span><br><span class="line">    Student student=mapper.findById(id);</span><br><span class="line"></span><br><span class="line">    //è·å–GradeMapperå¯¹è±¡</span><br><span class="line">    GradeMapper gradeMapper = session.getMapper(GradeMapper.class);</span><br><span class="line">    //è°ƒç”¨gradeMapperå¯¹è±¡çš„æ–¹æ³•</span><br><span class="line">    List&lt;Grade&gt; gradeList=gradeMapper.findAll();</span><br><span class="line"></span><br><span class="line">    //3ã€å°†æ•°æ®æ”¾åˆ°ä½œç”¨åŸŸä¸­(ä¾›é¡µé¢è¯»å–)</span><br><span class="line">    req.setAttribute(&quot;data&quot;,student);</span><br><span class="line">    req.setAttribute(&quot;grades&quot;,gradeList);</span><br><span class="line"></span><br><span class="line">    //4ã€è·³è½¬åˆ°update.jspé¡µé¢</span><br><span class="line">    req.getRequestDispatcher(&quot;update.jsp&quot;).forward(req,resp);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;select name=&quot;gradeId&quot;&gt;</span><br><span class="line">    &lt;option value=&quot;0&quot;&gt;---è¯·é€‰æ‹©---&lt;/option&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- ç»‘å®šä¸‹æ‹‰åˆ—è¡¨çš„æ•°æ® --&gt;</span><br><span class="line">    &lt;c:forEach items=&quot;$&#123;grades&#125;&quot; var=&quot;g&quot;&gt;</span><br><span class="line">        &lt;!-- ç»‘å®šæ¯ä¸€ä¸ªä¸‹æ‹‰é¡¹æ—¶ï¼Œåˆ¤æ–­å¹´çº§IDä¸å­¦ç”Ÿçš„å¹´çº§IDæ˜¯å¦ä¸€è‡´ã€‚å¦‚æœä¸€è‡´åˆ™é€‰ä¸­--&gt;</span><br><span class="line">        &lt;c:if test=&quot;$&#123;g.gradeId==data.gradeId&#125;&quot; var=&quot;flag&quot;&gt;</span><br><span class="line">            &lt;option value=&quot;$&#123;g.gradeId&#125;&quot; selected=&quot;selected&quot;&gt;$&#123;g.gradeName&#125;&lt;/option&gt;</span><br><span class="line">        &lt;/c:if&gt;</span><br><span class="line">        &lt;c:if test=&quot;$&#123;!flag&#125;&quot;&gt;</span><br><span class="line">            &lt;option value=&quot;$&#123;g.gradeId&#125;&quot;&gt;$&#123;g.gradeName&#125;&lt;/option&gt;</span><br><span class="line">        &lt;/c:if&gt;</span><br><span class="line">    &lt;/c:forEach&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>
<h3 id="10-4-9-æ›´æ–°è¡¨ä¸­æ•°æ®"><a href="#10-4-9-æ›´æ–°è¡¨ä¸­æ•°æ®" class="headerlink" title="10.4.9.æ›´æ–°è¡¨ä¸­æ•°æ®"></a>10.4.9.æ›´æ–°è¡¨ä¸­æ•°æ®</h3><p>1)å®ç°æ€è·¯<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y35.png"><br>2)ç¼–å†™Mapper</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">ã€Mapperæ¥å£ã€‘</span><br><span class="line">/**</span><br><span class="line"> * æ˜ å°„æ¥å£</span><br><span class="line"> */</span><br><span class="line">public interface StudentMapper &#123;</span><br><span class="line">    /**</span><br><span class="line">     * å°†å­¦ç”Ÿä¿¡æ¯æ·»åŠ åˆ°æ•°æ®åº“ä¸­</span><br><span class="line">     * @param student</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    int add(Student student);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * æŒ‰IDæ›´æ–°å­¦ç”Ÿä¿¡æ¯</span><br><span class="line">     * @param student</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    int update(Student student);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * æŸ¥è¯¢å…¨éƒ¨å­¦ç”Ÿä¿¡æ¯åˆ—è¡¨</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    List&lt;Student&gt; findAll();</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * æŒ‰IdæŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯</span><br><span class="line">     */</span><br><span class="line">    Student findById(int id);</span><br><span class="line">&#125;</span><br><span class="line">ã€Mapperæ˜ å°„ã€‘</span><br><span class="line">&lt;mapper namespace=&quot;edu.shifan.mapper.StudentMapper&quot;&gt;</span><br><span class="line">    &lt;!-- å°†å­¦ç”Ÿä¿¡æ¯å†™å…¥åˆ°æ•°æ®åº“ä¸­ --&gt;</span><br><span class="line">    &lt;insert id=&quot;add&quot; parameterType=&quot;edu.shifan.pojo.Student&quot;&gt;</span><br><span class="line">        insert into sys_students(stu_name,gender,age,tel,grade_id,address)</span><br><span class="line">           values(#&#123;stuName&#125;,#&#123;gender&#125;,#&#123;age&#125;,#&#123;tel&#125;,#&#123;gradeId&#125;,#&#123;address&#125;)</span><br><span class="line">    &lt;/insert&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- æŒ‰IDæ›´æ–°å­¦ç”Ÿä¿¡æ¯--&gt;</span><br><span class="line">    &lt;update id=&quot;update&quot; parameterType=&quot;edu.shifan.pojo.Student&quot;&gt;</span><br><span class="line">        update sys_students set stu_name=#&#123;stuName&#125;,gender=#&#123;gender&#125;,age=#&#123;age&#125;,tel=#&#123;tel&#125;,grade_id=#&#123;gradeId&#125;,address=#&#123;address&#125;</span><br><span class="line">            where stu_no=#&#123;stuNo&#125;</span><br><span class="line">    &lt;/update&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- æŸ¥è¯¢å…¨éƒ¨å­¦ç”Ÿä¿¡æ¯åˆ—è¡¨ --&gt;</span><br><span class="line">    &lt;select id=&quot;findAll&quot; resultType=&quot;edu.shifan.pojo.Student&quot;&gt;</span><br><span class="line">        select  * from  sys_students</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- æŒ‰idæŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯--&gt;</span><br><span class="line">    &lt;select id=&quot;findById&quot; parameterType=&quot;int&quot; resultType=&quot;edu.shifan.pojo.Student&quot;&gt;</span><br><span class="line">        SELECT * FROM sys_students where stu_no=#&#123;id&#125;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>

<p>3)ç¼–å†™Servlet</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">@WebServlet(&quot;/update&quot;)</span><br><span class="line">public class UpdateServlet extends HttpServlet &#123;</span><br><span class="line">    @Override</span><br><span class="line">    protected void service(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123;</span><br><span class="line">        //è®¾ç½®è¯·æ±‚çš„ç¼–ç æ ¼å¼(è§£å†³ä¸­æ–‡ä¹±ç é—®é¢˜)</span><br><span class="line">        req.setCharacterEncoding(&quot;UTF-8&quot;);</span><br><span class="line">        //1ã€è·å–ç”¨æˆ·æäº¤çš„æ•°æ®</span><br><span class="line">        //ç”¨äºå°è£…ç”¨æˆ·æäº¤çš„è¯·æ±‚æ•°æ®</span><br><span class="line">        Student stu = new Student();</span><br><span class="line">        //getParaemeter()ï¼šç”¨äºè·å–ç”¨æˆ·æäº¤çš„è¯·æ±‚å‚æ•°ï¼Œè¿”å›ç»“æœä¸ºå­—ç¬¦ä¸²ç±»å‹æ•°æ®</span><br><span class="line">        stu.setStuName(req.getParameter(&quot;stuName&quot;));</span><br><span class="line">        stu.setGender(&quot;1&quot;.equals(req.getParameter(&quot;gender&quot;)));</span><br><span class="line">        stu.setAge(Integer.parseInt(req.getParameter(&quot;age&quot;)));</span><br><span class="line">        stu.setTel(req.getParameter(&quot;tel&quot;));</span><br><span class="line">        stu.setAddress(req.getParameter(&quot;address&quot;));</span><br><span class="line">        stu.setGradeId(Integer.parseInt(req.getParameter(&quot;gradeId&quot;)));</span><br><span class="line">        stu.setStuNo(Integer.parseInt(req.getParameter(&quot;stuNo&quot;)));</span><br><span class="line">        System.out.println(stu);</span><br><span class="line"></span><br><span class="line">        //2ã€è°ƒç”¨Mapperçš„æ–¹æ³•å°†æ•°æ®å†™å…¥åˆ°æ•°æ®åº“</span><br><span class="line">        //è·å–SqlSessionå¯¹è±¡</span><br><span class="line">        SqlSession session = SessionUtil.getSession();</span><br><span class="line">        //è·å–Mapperå¯¹è±¡</span><br><span class="line">        StudentMapper mapper = session.getMapper(StudentMapper.class);</span><br><span class="line">        //è°ƒç”¨mapperçš„æ–¹æ³•å°†æ•°æ®å†™å…¥åˆ°æ•°æ®åº“ä¸­</span><br><span class="line">        mapper.update(stu);</span><br><span class="line">        //å…³é—­Sessionå¯¹è±¡</span><br><span class="line">        SessionUtil.close();</span><br><span class="line"></span><br><span class="line">        //3ã€è·³è½¬åˆ°index.jspé¡µé¢</span><br><span class="line">        req.getRequestDispatcher(&quot;list&quot;).forward(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4)ä¿®æ”¹Jspé¡µé¢</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">&lt;form method=&quot;post&quot; action=&quot;update&quot;&gt;</span><br><span class="line">    &lt;input type=&quot;hidden&quot; name=&quot;stuNo&quot; value=&quot;$&#123;data.stuNo&#125;&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;table class=&quot;grid&quot;&gt;</span><br><span class="line">        &lt;caption&gt;æ›´æ–°å­¦ç”Ÿä¿¡æ¯&lt;/caption&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;th&gt;å§“åï¼š&lt;/th&gt;</span><br><span class="line">            &lt;td&gt;</span><br><span class="line">                &lt;input type=&quot;text&quot; name=&quot;stuName&quot; value=&quot;$&#123;data.stuName&#125;&quot;/&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;th&gt;æ€§åˆ«ï¼š&lt;/th&gt;</span><br><span class="line">            &lt;td&gt;</span><br><span class="line">                &lt;!-- æ ¹æ®å­¦ç”Ÿçš„æ€§åˆ«ï¼Œè®¾ç½®radioçš„checkedå±æ€§--&gt;</span><br><span class="line">                &lt;c:if test=&quot;$&#123;data.gender&#125;&quot; var=&quot;flag&quot;&gt;</span><br><span class="line">                    &lt;input type=&quot;radio&quot; name=&quot;gender&quot; value=&quot;1&quot; checked=&quot;checked&quot;/&gt;ç”·</span><br><span class="line">                    &lt;input type=&quot;radio&quot; name=&quot;gender&quot; value=&quot;0&quot; /&gt;å¥³</span><br><span class="line">                &lt;/c:if&gt;</span><br><span class="line">                &lt;c:if test=&quot;$&#123;!flag&#125;&quot;&gt;</span><br><span class="line">                    &lt;input type=&quot;radio&quot; name=&quot;gender&quot; value=&quot;1&quot; /&gt;ç”·</span><br><span class="line">                    &lt;input type=&quot;radio&quot; name=&quot;gender&quot; value=&quot;0&quot;  checked=&quot;checked&quot;/&gt;å¥³</span><br><span class="line">                &lt;/c:if&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;th&gt;å¹´é¾„ï¼š&lt;/th&gt;</span><br><span class="line">            &lt;td&gt;</span><br><span class="line">                &lt;input type=&quot;text&quot; name=&quot;age&quot; value=&quot;$&#123;data.age&#125;&quot;/&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;th&gt;è”ç³»ç”µè¯ï¼š&lt;/th&gt;</span><br><span class="line">            &lt;td&gt;</span><br><span class="line">                &lt;input type=&quot;text&quot; name=&quot;tel&quot; value=&quot;$&#123;data.tel&#125;&quot;/&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;th&gt;æ‰€å±å¹´çº§ï¼š&lt;/th&gt;</span><br><span class="line">            &lt;td&gt;</span><br><span class="line">                &lt;select name=&quot;gradeId&quot;&gt;</span><br><span class="line">                    &lt;option value=&quot;0&quot;&gt;---è¯·é€‰æ‹©---&lt;/option&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;!-- ç»‘å®šä¸‹æ‹‰åˆ—è¡¨çš„æ•°æ® --&gt;</span><br><span class="line">                    &lt;c:forEach items=&quot;$&#123;grades&#125;&quot; var=&quot;g&quot;&gt;</span><br><span class="line">                        &lt;!-- ç»‘å®šæ¯ä¸€ä¸ªä¸‹æ‹‰é¡¹æ—¶ï¼Œåˆ¤æ–­å¹´çº§IDä¸å­¦ç”Ÿçš„å¹´çº§IDæ˜¯å¦ä¸€è‡´ã€‚å¦‚æœä¸€è‡´åˆ™é€‰ä¸­--&gt;</span><br><span class="line">                        &lt;c:if test=&quot;$&#123;g.gradeId==data.gradeId&#125;&quot; var=&quot;flag&quot;&gt;</span><br><span class="line">                            &lt;option value=&quot;$&#123;g.gradeId&#125;&quot; selected=&quot;selected&quot;&gt;$&#123;g.gradeName&#125;&lt;/option&gt;</span><br><span class="line">                        &lt;/c:if&gt;</span><br><span class="line">                        &lt;c:if test=&quot;$&#123;!flag&#125;&quot;&gt;</span><br><span class="line">                            &lt;option value=&quot;$&#123;g.gradeId&#125;&quot;&gt;$&#123;g.gradeName&#125;&lt;/option&gt;</span><br><span class="line">                        &lt;/c:if&gt;</span><br><span class="line">                    &lt;/c:forEach&gt;</span><br><span class="line">                &lt;/select&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;th&gt;å®¶åº­ä½å€ï¼š&lt;/th&gt;</span><br><span class="line">            &lt;td&gt;</span><br><span class="line">                &lt;input type=&quot;text&quot; name=&quot;address&quot; value=&quot;$&#123;data.address&#125;&quot;/&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">        &lt;tr&gt;</span><br><span class="line">            &lt;th&gt;&lt;/th&gt;</span><br><span class="line">            &lt;td&gt;</span><br><span class="line">                &lt;input type=&quot;submit&quot; value=&quot;æäº¤&quot; /&gt;</span><br><span class="line">                &lt;input type=&quot;reset&quot; value=&quot;é‡ç½®&quot; /&gt;</span><br><span class="line">            &lt;/td&gt;</span><br><span class="line">        &lt;/tr&gt;</span><br><span class="line">    &lt;/table&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>
<p>10.4.10.åˆ é™¤æ•°æ®<br>1)å®ç°æ€è·¯<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y36.png"><br>2)ç¼–å†™Mapperæ˜ å°„</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * æ˜ å°„æ¥å£</span><br><span class="line"> */</span><br><span class="line">public interface StudentMapper &#123;</span><br><span class="line">    /**</span><br><span class="line">     * å°†å­¦ç”Ÿä¿¡æ¯æ·»åŠ åˆ°æ•°æ®åº“ä¸­</span><br><span class="line">     * @param student</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    int add(Student student);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * æŒ‰ç…§IDåˆ é™¤å­¦ç”Ÿä¿¡æ¯</span><br><span class="line">     */</span><br><span class="line">    int delById(int id);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * æŒ‰IDæ›´æ–°å­¦ç”Ÿä¿¡æ¯</span><br><span class="line">     * @param student</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    int update(Student student);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * æŸ¥è¯¢å…¨éƒ¨å­¦ç”Ÿä¿¡æ¯åˆ—è¡¨</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    List&lt;Student&gt; findAll();</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * æŒ‰IdæŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯</span><br><span class="line">     */</span><br><span class="line">    Student findById(int id);</span><br><span class="line">&#125;</span><br><span class="line">ã€Mapperæ˜ å°„ã€‘</span><br><span class="line">&lt;mapper namespace=&quot;edu.shifan.mapper.StudentMapper&quot;&gt;</span><br><span class="line">    &lt;!-- å°†å­¦ç”Ÿä¿¡æ¯å†™å…¥åˆ°æ•°æ®åº“ä¸­ --&gt;</span><br><span class="line">    &lt;insert id=&quot;add&quot; parameterType=&quot;edu.shifan.pojo.Student&quot;&gt;</span><br><span class="line">        insert into sys_students(stu_name,gender,age,tel,grade_id,address)</span><br><span class="line">           values(#&#123;stuName&#125;,#&#123;gender&#125;,#&#123;age&#125;,#&#123;tel&#125;,#&#123;gradeId&#125;,#&#123;address&#125;)</span><br><span class="line">    &lt;/insert&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- æŒ‰IDåˆ é™¤å­¦ç”Ÿä¿¡æ¯--&gt;</span><br><span class="line">    &lt;delete id=&quot;delById&quot; parameterType=&quot;int&quot;&gt;</span><br><span class="line">        delete from sys_students where stu_no=#&#123;id&#125;</span><br><span class="line">    &lt;/delete&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- æŒ‰IDæ›´æ–°å­¦ç”Ÿä¿¡æ¯--&gt;</span><br><span class="line">    &lt;update id=&quot;update&quot; parameterType=&quot;edu.shifan.pojo.Student&quot;&gt;</span><br><span class="line">        update sys_students set stu_name=#&#123;stuName&#125;,gender=#&#123;gender&#125;,age=#&#123;age&#125;,tel=#&#123;tel&#125;,grade_id=#&#123;gradeId&#125;,address=#&#123;address&#125;</span><br><span class="line">            where stu_no=#&#123;stuNo&#125;</span><br><span class="line">    &lt;/update&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- æŸ¥è¯¢å…¨éƒ¨å­¦ç”Ÿä¿¡æ¯åˆ—è¡¨ --&gt;</span><br><span class="line">    &lt;select id=&quot;findAll&quot; resultType=&quot;edu.shifan.pojo.Student&quot;&gt;</span><br><span class="line">        select  * from  sys_students</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- æŒ‰idæŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯--&gt;</span><br><span class="line">    &lt;select id=&quot;findById&quot; parameterType=&quot;int&quot; resultType=&quot;edu.shifan.pojo.Student&quot;&gt;</span><br><span class="line">        SELECT * FROM sys_students where stu_no=#&#123;id&#125;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>
<p>3)ç¼–å†™Servlet</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">@WebServlet(&quot;/del&quot;)</span><br><span class="line">public class DeleteServlet extends HttpServlet &#123;</span><br><span class="line">    @Override</span><br><span class="line">    protected void service(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123;</span><br><span class="line">        //1ã€è·å–IDå‚æ•°å€¼</span><br><span class="line">        int id = Integer.parseInt(req.getParameter(&quot;id&quot;));</span><br><span class="line"></span><br><span class="line">        //2ã€è°ƒç”¨mapperæ–¹æ³•åˆ é™¤æ•°æ®</span><br><span class="line">        //aã€è·å–Sessionå¯¹è±¡</span><br><span class="line">        SqlSession session = SessionUtil.getSession();</span><br><span class="line">        //bã€è·å–Mapperå¯¹è±¡</span><br><span class="line">        StudentMapper mapper = session.getMapper(StudentMapper.class);</span><br><span class="line">        //cã€è°ƒç”¨Mapperå¯¹è±¡çš„æ–¹æ³•</span><br><span class="line">        mapper.delById(id);</span><br><span class="line">        //dã€å…³é—­sessionå¯¹è±¡</span><br><span class="line">        SessionUtil.close();</span><br><span class="line"></span><br><span class="line">        //3ã€è·³è½¬åˆ°index.jspé¡µé¢</span><br><span class="line">        req.getRequestDispatcher(&quot;list&quot;).forward(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4)ä¿®æ”¹Jspé¡µé¢</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=&quot;del?id=$&#123;l.stuNo&#125;&quot;&gt;åˆ é™¤&lt;/a&gt;</span><br></pre></td></tr></table></figure>
<h3 id="10-4-11-å¤šæ¡ä»¶æŸ¥è¯¢"><a href="#10-4-11-å¤šæ¡ä»¶æŸ¥è¯¢" class="headerlink" title="10.4.11.å¤šæ¡ä»¶æŸ¥è¯¢"></a>10.4.11.å¤šæ¡ä»¶æŸ¥è¯¢</h3><p>1)Jspé¡µé¢</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">.box&#123;</span><br><span class="line">  border: solid 1px cadetblue;</span><br><span class="line">  background: gainsboro;</span><br><span class="line">  padding: 15px;</span><br><span class="line">  margin-bottom: 30px;</span><br><span class="line">&#125;</span><br><span class="line">ã€Htmlã€‘</span><br><span class="line">&lt;!-- å¤šæ¡ä»¶æŸ¥è¯¢ --&gt;</span><br><span class="line">&lt;form method=&quot;get&quot; action=&quot;find&quot;&gt;</span><br><span class="line">  &lt;div class=&quot;box&quot;&gt;</span><br><span class="line">    å§“åï¼š</span><br><span class="line">    &lt;input type=&quot;text&quot; name=&quot;stuName&quot; /&gt;&amp;nbsp;&amp;nbsp;</span><br><span class="line">    æ€§åˆ«ï¼š</span><br><span class="line">    &lt;select name=&quot;gender&quot;&gt;</span><br><span class="line">      &lt;option value=&quot;-1&quot;&gt;---è¯·é€‰æ‹©---&lt;/option&gt;</span><br><span class="line">      &lt;option value=&quot;1&quot;&gt;ç”·&lt;/option&gt;</span><br><span class="line">      &lt;option value=&quot;0&quot;&gt;å¥³&lt;/option&gt;</span><br><span class="line">    &lt;/select&gt;&amp;nbsp;&amp;nbsp;</span><br><span class="line">    æ‰€å±å¹´çº§ï¼š</span><br><span class="line">    &lt;select name=&quot;gradeId&quot;&gt;</span><br><span class="line">      &lt;option value=&quot;0&quot;&gt;---è¯·é€‰æ‹©---&lt;/option&gt;</span><br><span class="line">      &lt;option value=&quot;1&quot;&gt;20çº§å¤§æ•°æ®1ç­&lt;/option&gt;</span><br><span class="line">      &lt;option value=&quot;2&quot;&gt;20çº§å¤§æ•°æ®2ç­&lt;/option&gt;</span><br><span class="line">      &lt;option value=&quot;3&quot;&gt;20çº§æ”»é˜²1ç­&lt;/option&gt;</span><br><span class="line">      &lt;option value=&quot;4&quot;&gt;21çº§åœŸæœ¨3ç­&lt;/option&gt;</span><br><span class="line">    &lt;/select&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;</span><br><span class="line">    &lt;input type=&quot;submit&quot; value=&quot;æŸ¥è¯¢&quot; /&gt;</span><br><span class="line">    &lt;input type=&quot;reset&quot; value=&quot;é‡ç½®&quot; /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>
<p>2)ä¿®æ”¹å®ä½“ç±»</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * å®ä½“ç±»</span><br><span class="line"> */</span><br><span class="line">public class Student &#123;</span><br><span class="line">    //ç§æœ‰æˆå‘˜å­—æ®µ</span><br><span class="line">    private int stuNo;</span><br><span class="line">    private String stuName;</span><br><span class="line">    private Boolean gender;     //å°†å±æ€§çš„ç±»å‹ä¿®æ”¹ä¸ºå¼•ç”¨ç±»å‹(åŒ…è£…ç±»å‹)</span><br><span class="line">    private int age;</span><br><span class="line">    private String tel;</span><br><span class="line">    private Integer gradeId;    //å°†å±æ€§çš„ç±»å‹ä¿®æ”¹ä¸ºå¼•ç”¨ç±»å‹(åŒ…è£…ç±»å‹)</span><br><span class="line">    private String address;</span><br><span class="line">    private int state;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3)ç¼–å†™Mapperæ˜ å°„</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">ã€æ˜ å°„æ¥å£ã€‘</span><br><span class="line">/**</span><br><span class="line"> * æ˜ å°„æ¥å£</span><br><span class="line"> */</span><br><span class="line">public interface StudentMapper &#123;</span><br><span class="line">    /**</span><br><span class="line">     * å°†å­¦ç”Ÿä¿¡æ¯æ·»åŠ åˆ°æ•°æ®åº“ä¸­</span><br><span class="line">     * @param student</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    int add(Student student);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * æŒ‰ç…§IDåˆ é™¤å­¦ç”Ÿä¿¡æ¯</span><br><span class="line">     */</span><br><span class="line">    int delById(int id);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * æŒ‰IDæ›´æ–°å­¦ç”Ÿä¿¡æ¯</span><br><span class="line">     * @param student</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    int update(Student student);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * æŸ¥è¯¢å…¨éƒ¨å­¦ç”Ÿä¿¡æ¯åˆ—è¡¨</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    List&lt;Student&gt; findAll();</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * å®ç°å¤šæ¡ä»¶æŸ¥è¯¢</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    List&lt;Student&gt; findAll2(Student student);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * æŒ‰IdæŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯</span><br><span class="line">     */</span><br><span class="line">    Student findById(int id);</span><br><span class="line">&#125;</span><br><span class="line">ã€æ˜ å°„é…ç½®ã€‘</span><br><span class="line">&lt;!-- å¤šæ¡ä»¶æŸ¥è¯¢ --&gt;</span><br><span class="line">&lt;select id=&quot;findAll2&quot; parameterType=&quot;edu.shifan.pojo.Student&quot; resultType=&quot;edu.shifan.pojo.Student&quot;&gt;</span><br><span class="line">    select  * from  sys_students</span><br><span class="line"></span><br><span class="line">    &lt;!-- æ‹¼æ¥æ¡ä»¶æŸ¥è¯¢è¯­å¥--&gt;</span><br><span class="line">    &lt;where&gt;</span><br><span class="line">        &lt;if test=&quot;stuName!=null and stuName!=&#x27;&#x27;&quot;&gt;</span><br><span class="line">            &lt;!-- æ•°æ®è¡¨ä¸­åˆ—å | å®ä½“ç±»å±æ€§å--&gt;</span><br><span class="line">            and stu_name like &quot;%&quot;#&#123;stuName&#125;&quot;%&quot;</span><br><span class="line">        &lt;/if&gt;</span><br><span class="line"></span><br><span class="line">        &lt;if test=&quot;gender!=null&quot;&gt;</span><br><span class="line">            and gender = #&#123;gender&#125;</span><br><span class="line">        &lt;/if&gt;</span><br><span class="line"></span><br><span class="line">        &lt;if test=&quot;gradeId!=null and gradeId!=0&quot;&gt;</span><br><span class="line">            and grade_id=#&#123;gradeId&#125;</span><br><span class="line">        &lt;/if&gt;</span><br><span class="line">    &lt;/where&gt;</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>
<p>4)ç¼–å†™Servlet</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Servlet</span><br><span class="line"> */</span><br><span class="line">@WebServlet(&quot;/find&quot;)</span><br><span class="line">public class FindServlet extends HttpServlet &#123;</span><br><span class="line">    @Override</span><br><span class="line">    protected void service(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123;</span><br><span class="line">        //1ã€è®¾ç½®ç¼–ç æ ¼å¼</span><br><span class="line">        req.setCharacterEncoding(&quot;utf-8&quot;);</span><br><span class="line">        resp.setCharacterEncoding(&quot;utf-8&quot;);</span><br><span class="line"></span><br><span class="line">        //2ã€è·å–è¯·æ±‚å‚æ•°</span><br><span class="line">        Student student = new Student();</span><br><span class="line"></span><br><span class="line">        //åˆ¤æ–­å­¦ç”Ÿå§“åæ˜¯å¦ä¸ä¸ºç©º</span><br><span class="line">        if(req.getParameter(&quot;stuName&quot;).length()&gt;0)</span><br><span class="line">            student.setStuName(req.getParameter(&quot;stuName&quot;));</span><br><span class="line"></span><br><span class="line">        //åˆ¤æ–­æ€§åˆ«æ˜¯å¦ä¸ºé»˜è®¤å€¼</span><br><span class="line">        if(!&quot;-1&quot;.equals(req.getParameter(&quot;gender&quot;)))</span><br><span class="line">            student.setGender(&quot;1&quot;.equals(req.getParameter(&quot;gender&quot;)));</span><br><span class="line"></span><br><span class="line">        student.setGradeId(Integer.parseInt(req.getParameter(&quot;gradeId&quot;)));</span><br><span class="line"></span><br><span class="line">        //3ã€è°ƒç”¨mapperå¯¹è±¡çš„æ–¹æ³•æŸ¥è¯¢æ•°æ®</span><br><span class="line">        //aã€è·å–Sessionå¯¹è±¡</span><br><span class="line">        SqlSession session = SessionUtil.getSession(false);</span><br><span class="line">        //bã€è·å–Mapperå¯¹è±¡</span><br><span class="line">        StudentMapper mapper = session.getMapper(StudentMapper.class);</span><br><span class="line">        //cã€è°ƒç”¨æ–¹æ³•</span><br><span class="line">        List&lt;Student&gt; list = mapper.findAll2(student);</span><br><span class="line">        //dã€å…³é—­session</span><br><span class="line">        SessionUtil.close();</span><br><span class="line"></span><br><span class="line">        //4ã€å°†æŸ¥è¯¢ç»“æœå†™å…¥åˆ°ä½œç”¨åŸŸ</span><br><span class="line">        //å°†æ•°æ®æ”¾åˆ°ä½œç”¨åŸŸä¸­(ä¸€å—å…¬å…±çš„å†…å­˜ç©ºé—´)</span><br><span class="line">        req.setAttribute(&quot;list&quot;,list);</span><br><span class="line"></span><br><span class="line">        //5ã€è·³è½¬åˆ°index.jspé¡µé¢</span><br><span class="line">        req.getRequestDispatcher(&quot;index.jsp&quot;).forward(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="10-4-12-ä¸¤è¡¨è”æŸ¥"><a href="#10-4-12-ä¸¤è¡¨è”æŸ¥" class="headerlink" title="10.4.12.ä¸¤è¡¨è”æŸ¥"></a>10.4.12.ä¸¤è¡¨è”æŸ¥</h3><p>1)ä¿®æ”¹å®ä½“ç±»</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * å®ä½“ç±»</span><br><span class="line"> */</span><br><span class="line">public class Student &#123;</span><br><span class="line">    //ç§æœ‰æˆå‘˜å­—æ®µ</span><br><span class="line">    private int stuNo;</span><br><span class="line">    private String stuName;</span><br><span class="line">    private Boolean gender;     //å°†å±æ€§çš„ç±»å‹ä¿®æ”¹ä¸ºå¼•ç”¨ç±»å‹(åŒ…è£…ç±»å‹)</span><br><span class="line">    private int age;</span><br><span class="line">    private String tel;</span><br><span class="line">    private Integer gradeId;    //å°†å±æ€§çš„ç±»å‹ä¿®æ”¹ä¸ºå¼•ç”¨ç±»å‹(åŒ…è£…ç±»å‹)</span><br><span class="line">    private String address;</span><br><span class="line">    private int state;</span><br><span class="line"></span><br><span class="line">    //å¼•å…¥å…¶ä»–ç±»å‹(å­¦ç”Ÿæ˜¯ä¸»ä½“ï¼Œå­¦ç”Ÿå’Œå¹´çº§æ˜¯ä¸€å¯¹ä¸€å…³ç³»)</span><br><span class="line">    private Grade grade;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2)ç¼–å†™Mapperæ˜ å°„</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line">ã€æ˜ å°„æ¥å£ã€‘</span><br><span class="line">/**</span><br><span class="line"> * æ˜ å°„æ¥å£</span><br><span class="line"> */</span><br><span class="line">public interface StudentMapper &#123;</span><br><span class="line">    /**</span><br><span class="line">     * å°†å­¦ç”Ÿä¿¡æ¯æ·»åŠ åˆ°æ•°æ®åº“ä¸­</span><br><span class="line">     * @param student</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    int add(Student student);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * æŒ‰ç…§IDåˆ é™¤å­¦ç”Ÿä¿¡æ¯</span><br><span class="line">     */</span><br><span class="line">    int delById(int id);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * æŒ‰IDæ›´æ–°å­¦ç”Ÿä¿¡æ¯</span><br><span class="line">     * @param student</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    int update(Student student);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * æŸ¥è¯¢å…¨éƒ¨å­¦ç”Ÿä¿¡æ¯åˆ—è¡¨</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    List&lt;Student&gt; findAll();</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * å®ç°å¤šæ¡ä»¶æŸ¥è¯¢</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    List&lt;Student&gt; findAll2(Student student);</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * å®ç°ä¸¤è¡¨è”æŸ¥</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    List&lt;Student&gt; findAll3();</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * æŒ‰IdæŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯</span><br><span class="line">     */</span><br><span class="line">    Student findById(int id);</span><br><span class="line">&#125;</span><br><span class="line">ã€æ˜ å°„é…ç½®--GradeMapperã€‘</span><br><span class="line">&lt;mapper namespace=&quot;edu.shifan.mapper.GradeMapper&quot;&gt;</span><br><span class="line">    &lt;resultMap id=&quot;gradeMap&quot; type=&quot;edu.shifan.pojo.Grade&quot;&gt;</span><br><span class="line">        &lt;id property=&quot;gradeId&quot; column=&quot;grade_Id&quot; /&gt;</span><br><span class="line">        &lt;result property=&quot;gradeName&quot; column=&quot;grade_Name&quot; /&gt;</span><br><span class="line">        &lt;result property=&quot;memo&quot; column=&quot;memo&quot; /&gt;</span><br><span class="line">    &lt;/resultMap&gt;</span><br><span class="line">    &lt;!-- æŸ¥è¯¢æ‰€æœ‰å¹´çº§ä¿¡æ¯ --&gt;</span><br><span class="line">    &lt;select id=&quot;findAll&quot; resultType=&quot;edu.shifan.pojo.Grade&quot;&gt;</span><br><span class="line">        SELECT * FROM sys_grade ORDER BY grade_id</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br><span class="line">ã€æ˜ å°„é…ç½®--StudentMapperã€‘</span><br><span class="line">&lt;mapper namespace=&quot;edu.shifan.mapper.StudentMapper&quot;&gt;</span><br><span class="line">    &lt;resultMap id=&quot;studentMap&quot; type=&quot;edu.shifan.pojo.Student&quot;&gt;</span><br><span class="line">        &lt;id property=&quot;stuNo&quot; column=&quot;stu_No&quot; /&gt;</span><br><span class="line">        &lt;result property=&quot;stuName&quot; column=&quot;stu_Name&quot; /&gt;</span><br><span class="line">        &lt;result property=&quot;gender&quot; column=&quot;gender&quot; /&gt;</span><br><span class="line">        &lt;result property=&quot;age&quot; column=&quot;age&quot; /&gt;</span><br><span class="line">        &lt;result property=&quot;tel&quot; column=&quot;tel&quot; /&gt;</span><br><span class="line">        &lt;result property=&quot;gradeId&quot; column=&quot;grade_Id&quot; /&gt;</span><br><span class="line">        &lt;result property=&quot;address&quot; column=&quot;address&quot; /&gt;</span><br><span class="line">        &lt;result property=&quot;state&quot; column=&quot;state&quot; /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!-- å¼•å…¥å¦ä¸€ä¸ªæŸ¥è¯¢--&gt;</span><br><span class="line">        &lt;association property=&quot;grade&quot;</span><br><span class="line">                     javaType=&quot;edu.shifan.pojo.Grade&quot;</span><br><span class="line">                     select=&quot;getGrade&quot;</span><br><span class="line">                     column=&quot;grade_id&quot; /&gt;</span><br><span class="line">    &lt;/resultMap&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- å®ç°å¤šè¡¨è¿æ¥æŸ¥è¯¢ --&gt;</span><br><span class="line">    &lt;select id=&quot;findAll3&quot; resultMap=&quot;studentMap&quot;&gt;</span><br><span class="line">        select  * from  sys_students</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">    &lt;!-- æŸ¥è¯¢å¹´çº§ä¿¡æ¯ --&gt;</span><br><span class="line">    &lt;select id=&quot;getGrade&quot; parameterType=&quot;int&quot; resultMap=&quot;edu.shifan.mapper.GradeMapper.gradeMap&quot;&gt;</span><br><span class="line">        SELECT * FROM sys_grade where grade_id=#&#123;id&#125;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- æŒ‰idæŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯--&gt;</span><br><span class="line">    &lt;select id=&quot;findById&quot; parameterType=&quot;int&quot; resultType=&quot;edu.shifan.pojo.Student&quot;&gt;</span><br><span class="line">        SELECT * FROM sys_students where stu_no=#&#123;id&#125;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">&lt;/mapper&gt;</span><br></pre></td></tr></table></figure>
<p>3)ä¿®æ”¹Servlet</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Servlet</span><br><span class="line"> *  ä¸€ä¸ªç»§æ‰¿äº†HttpServletçš„Javaç±»</span><br><span class="line"> *</span><br><span class="line"> *  å®ç°æ­¥éª¤</span><br><span class="line"> *      1ã€åˆ›å»ºç±»å¹¶ç»§æ‰¿äºHttpServlet</span><br><span class="line"> *      2ã€ä½¿ç”¨@WebServletæ³¨è§£è¿›è¡Œæ ‡æ³¨</span><br><span class="line"> *      3ã€é‡å†™çˆ¶ç±»çš„serviceæ–¹æ³•</span><br><span class="line"> *      4ã€ç¼–å†™ä¸šåŠ¡ä»£ç </span><br><span class="line"> *</span><br><span class="line"> */</span><br><span class="line">@WebServlet(&quot;/list&quot;)</span><br><span class="line">public class ListServlet extends HttpServlet &#123;</span><br><span class="line">    @Override</span><br><span class="line">    protected void service(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException &#123;</span><br><span class="line">        //è°ƒç”¨Mapperæ˜ å°„çš„ç›¸å…³æ–¹æ³•</span><br><span class="line">        //è·å–Sessionå¯¹è±¡</span><br><span class="line">        SqlSession session = SessionUtil.getSession(false);</span><br><span class="line">        //è·å–Mapperå¯¹è±¡</span><br><span class="line">        StudentMapper mapper = session.getMapper(StudentMapper.class);</span><br><span class="line">        //è°ƒç”¨æ¥å£æ–¹æ³•</span><br><span class="line">        List&lt;Student&gt; list = mapper.findAll3();//mapper.findAll();</span><br><span class="line"></span><br><span class="line">        //System.out.println(list);</span><br><span class="line">        //å°†æ•°æ®ä¼ é€’ç»™Jspé¡µé¢</span><br><span class="line">        //å°†æ•°æ®æ”¾åˆ°ä½œç”¨åŸŸä¸­(ä¸€å—å…¬å…±çš„å†…å­˜ç©ºé—´)</span><br><span class="line">        req.setAttribute(&quot;list&quot;,list);</span><br><span class="line"></span><br><span class="line">        //è·³è½¬åˆ°index.jspé¡µé¢</span><br><span class="line">        req.getRequestDispatcher(&quot;index.jsp&quot;).forward(req,resp);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4)ä¿®æ”¹Jspé¡µé¢</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;c:forEach items=&quot;$&#123;list&#125;&quot; var=&quot;l&quot;&gt;</span><br><span class="line">  &lt;tr&gt;</span><br><span class="line">    &lt;td&gt;$&#123;l.stuNo&#125;&lt;/td&gt;</span><br><span class="line">    &lt;td&gt;$&#123;l.stuName&#125;&lt;/td&gt;</span><br><span class="line">    &lt;td&gt;$&#123;l.gender?&quot;ç”·&quot;:&quot;å¥³&quot;&#125;&lt;/td&gt;</span><br><span class="line">    &lt;td&gt;$&#123;l.age&#125;&lt;/td&gt;</span><br><span class="line">    &lt;td&gt;$&#123;l.tel&#125;&lt;/td&gt;</span><br><span class="line">    &lt;td&gt;$&#123;l.grade.gradeName&#125;&lt;/td&gt;</span><br><span class="line">    &lt;td&gt;$&#123;l.address&#125;&lt;/td&gt;</span><br><span class="line">    &lt;td&gt;$&#123;l.state&#125;&lt;/td&gt;</span><br><span class="line">    &lt;td&gt;</span><br><span class="line">      &lt;a href=&quot;del?id=$&#123;l.stuNo&#125;&quot;&gt;åˆ é™¤&lt;/a&gt;</span><br><span class="line">      &lt;a href=&quot;load?id=$&#123;l.stuNo&#125;&quot;&gt;ä¿®æ”¹&lt;/a&gt;</span><br><span class="line">    &lt;/td&gt;</span><br><span class="line">  &lt;/tr&gt;</span><br><span class="line">&lt;/c:forEach&gt;</span><br></pre></td></tr></table></figure>
<h1 id="11-ç¼“å­˜"><a href="#11-ç¼“å­˜" class="headerlink" title="11.ç¼“å­˜"></a>11.ç¼“å­˜</h1><h2 id="11-1-æ¦‚è¿°"><a href="#11-1-æ¦‚è¿°" class="headerlink" title="11.1.æ¦‚è¿°"></a>11.1.æ¦‚è¿°</h2><p>ä¸ºäº†æé«˜ç›¸åŒæŸ¥è¯¢è¯­å¥çš„é‡å¤æ‰§è¡Œï¼ŒMyBatisæä¾›äº†æŸ¥è¯¢ç¼“å­˜åŠŸèƒ½ã€‚åœ¨MyBatisä¸­æä¾›äº†ä¸€çº§ç¼“å­˜ã€äºŒçº§ç¼“å­˜ã€å‚ç…§ç¼“å­˜å’Œè‡ªå®šä¹‰ç¼“å­˜ã€‚MyBatisçš„ç¼“å­˜æ˜¯ä¸€ä¸ªPurpertralCacheå’ŒHashMapä¸ºåŸºç¡€è¿›è¡Œå®ç°çš„ã€‚</p>
<h2 id="11-2-ä½œç”¨"><a href="#11-2-ä½œç”¨" class="headerlink" title="11.2.ä½œç”¨"></a>11.2.ä½œç”¨</h2><p>ä¸ºäº†æé«˜ç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ï¼Œé¿å…ç›¸åŒæŸ¥è¯¢è¯­å¥çš„é‡å¤æ‰§è¡Œã€‚</p>
<h2 id="11-3-ä¸€çº§ç¼“å­˜"><a href="#11-3-ä¸€çº§ç¼“å­˜" class="headerlink" title="11.3.ä¸€çº§ç¼“å­˜"></a>11.3.ä¸€çº§ç¼“å­˜</h2><h3 id="11-3-1-æ¦‚è¿°"><a href="#11-3-1-æ¦‚è¿°" class="headerlink" title="11.3.1.æ¦‚è¿°"></a>11.3.1.æ¦‚è¿°</h3><p>ä¸€çº§ç¼“å­˜é»˜è®¤æ˜¯å¼€å¯çš„ï¼Œä¸€çº§ç¼“å­˜é€šå¸¸ä¹Ÿæˆä¸ºSessionç¼“å­˜ã€‚<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y37.png"></p>
<h3 id="11-3-2-ç‰¹ç‚¹"><a href="#11-3-2-ç‰¹ç‚¹" class="headerlink" title="11.3.2.ç‰¹ç‚¹"></a>11.3.2.ç‰¹ç‚¹</h3><p>1)åŒä¸€ä¸ªSessionå¯¹è±¡çš„æŸ¥è¯¢è¯­å¥åªè¢«æ‰§è¡Œ1æ¬¡</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 1ã€åŒä¸€ä¸ªSessionå¯¹è±¡çš„æŸ¥è¯¢è¯­å¥åªè¢«æ‰§è¡Œ1æ¬¡</span><br><span class="line"> */</span><br><span class="line">private static void method01() &#123;</span><br><span class="line">    //2ã€è°ƒç”¨Mapperå¯¹è±¡çš„æ–¹æ³•æŸ¥è¯¢æ•°æ®</span><br><span class="line">    //aã€è·å–Sessionå¯¹è±¡</span><br><span class="line">    SqlSession session1 = SessionUtil.getSession(false);</span><br><span class="line">    SqlSession session2 = SessionUtil.getSession(false);</span><br><span class="line"></span><br><span class="line">    System.out.println(session1);</span><br><span class="line">    System.out.println(session2);</span><br><span class="line"></span><br><span class="line">    //bã€è·å–Mapperå¯¹è±¡</span><br><span class="line">    StudentMapper mapper1 = session1.getMapper(StudentMapper.class);</span><br><span class="line">    StudentMapper mapper2 = session2.getMapper(StudentMapper.class);</span><br><span class="line">    //cã€è°ƒç”¨mapperå¯¹è±¡çš„æ–¹æ³•</span><br><span class="line">    List&lt;Student&gt; list1 = mapper1.findAll();</span><br><span class="line">    List&lt;Student&gt; list2 = mapper2.findAll();</span><br><span class="line">    //dã€å…³é—­Session</span><br><span class="line">    SessionUtil.close();</span><br><span class="line"></span><br><span class="line">    //3ã€å¤„ç†æŸ¥è¯¢ç»“æœ</span><br><span class="line">    System.out.println(list1);</span><br><span class="line">    System.out.println(&quot;-----------------------------------------------------&quot;);</span><br><span class="line">    System.out.println(list2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y38.png"></p>
<p>2)ä¸åŒSessionå¯¹è±¡ä¹‹é—´æ— æ³•å…±äº«ç¼“å­˜</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 2ã€ä¸åŒSessionå¯¹è±¡ä¹‹é—´æ— æ³•å…±äº«ç¼“å­˜</span><br><span class="line"> */</span><br><span class="line">private static void method02() &#123;</span><br><span class="line">    //ä»¥æµæ–¹å¼è¯»å–MyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶</span><br><span class="line">    InputStream is = SessionUtil.class.getClassLoader().getResourceAsStream(&quot;mybatis-config.xml&quot;);</span><br><span class="line">    //é€šè¿‡SqlSessionFactoryBuilderå¯¹è±¡æ„å»ºfacotryå¯¹è±¡</span><br><span class="line">    SqlSessionFactory factory  = new SqlSessionFactoryBuilder().build(is);</span><br><span class="line">    //2ã€è°ƒç”¨Mapperå¯¹è±¡çš„æ–¹æ³•æŸ¥è¯¢æ•°æ®</span><br><span class="line">    //aã€è·å–Sessionå¯¹è±¡</span><br><span class="line">    SqlSession session1 = factory.openSession();</span><br><span class="line">    SqlSession session2 = factory.openSession();</span><br><span class="line"></span><br><span class="line">    System.out.println(session1);</span><br><span class="line">    System.out.println(session2);</span><br><span class="line"></span><br><span class="line">    //bã€è·å–Mapperå¯¹è±¡</span><br><span class="line">    StudentMapper mapper1 = session1.getMapper(StudentMapper.class);</span><br><span class="line">    StudentMapper mapper2 = session2.getMapper(StudentMapper.class);</span><br><span class="line">    //cã€è°ƒç”¨mapperå¯¹è±¡çš„æ–¹æ³•</span><br><span class="line">    List&lt;Student&gt; list1 = mapper1.findAll();</span><br><span class="line">    List&lt;Student&gt; list2 = mapper2.findAll();</span><br><span class="line"></span><br><span class="line">    //dã€å…³é—­Session</span><br><span class="line">    session1.close();</span><br><span class="line">    session2.close();</span><br><span class="line"></span><br><span class="line">    //3ã€å¤„ç†æŸ¥è¯¢ç»“æœ</span><br><span class="line">    System.out.println(list1);</span><br><span class="line">    System.out.println(&quot;-----------------------------------------------------&quot;);</span><br><span class="line">    System.out.println(list2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y39.png"></p>
<p>3)åœ¨ä¸¤ä¸ªæŸ¥è¯¢è¯­å¥ä¹‹é—´å¦‚æœæ‰§è¡ŒCUDæ“ä½œå°†å¯¼è‡´ç¼“å­˜å¤±æ•ˆ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 3ã€åœ¨ä¸¤ä¸ªæŸ¥è¯¢è¯­å¥ä¹‹é—´å¦‚æœæ‰§è¡ŒCUDæ“ä½œå°†å¯¼è‡´ç¼“å­˜å¤±æ•ˆ</span><br><span class="line"> */</span><br><span class="line">private static void method03() &#123;</span><br><span class="line">    //2ã€è°ƒç”¨Mapperå¯¹è±¡çš„æ–¹æ³•æŸ¥è¯¢æ•°æ®</span><br><span class="line">    //aã€è·å–Sessionå¯¹è±¡</span><br><span class="line">    SqlSession session1 = SessionUtil.getSession(false);</span><br><span class="line">    SqlSession session2 = SessionUtil.getSession(false);</span><br><span class="line"></span><br><span class="line">    System.out.println(session1);</span><br><span class="line">    System.out.println(session2);</span><br><span class="line"></span><br><span class="line">    //bã€è·å–Mapperå¯¹è±¡</span><br><span class="line">    StudentMapper mapper1 = session1.getMapper(StudentMapper.class);</span><br><span class="line">    StudentMapper mapper2 = session2.getMapper(StudentMapper.class);</span><br><span class="line">    //cã€è°ƒç”¨mapperå¯¹è±¡çš„æ–¹æ³•</span><br><span class="line">    List&lt;Student&gt; list1 = mapper1.findAll();</span><br><span class="line"></span><br><span class="line">    //æ‰§è¡Œåˆ é™¤æ“ä½œ</span><br><span class="line">    mapper1.delById();</span><br><span class="line"></span><br><span class="line">    List&lt;Student&gt; list2 = mapper2.findAll();</span><br><span class="line">    //dã€å…³é—­Session</span><br><span class="line">    SessionUtil.close();</span><br><span class="line"></span><br><span class="line">    //3ã€å¤„ç†æŸ¥è¯¢ç»“æœ</span><br><span class="line">    System.out.println(list1);</span><br><span class="line">    System.out.println(&quot;-----------------------------------------------------&quot;);</span><br><span class="line">    System.out.println(list2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y40.png"></p>
<p>4)å¦‚æœåœ¨ä¸¤æ¬¡æŸ¥è¯¢ä¹‹é—´è°ƒç”¨äº†clearCache()æ–¹æ³•å°†å¯¼è‡´ç¼“å­˜å¤±æ•ˆ(é‡å»º)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 4ã€å¦‚æœåœ¨ä¸¤æ¬¡æŸ¥è¯¢ä¹‹é—´è°ƒç”¨äº†clearCache()æ–¹æ³•å°†å¯¼è‡´ç¼“å­˜å¤±æ•ˆ(é‡å»º)</span><br><span class="line"> */</span><br><span class="line">private static void method04() &#123;</span><br><span class="line">    //2ã€è°ƒç”¨Mapperå¯¹è±¡çš„æ–¹æ³•æŸ¥è¯¢æ•°æ®</span><br><span class="line">    //aã€è·å–Sessionå¯¹è±¡</span><br><span class="line">    SqlSession session1 = SessionUtil.getSession(false);</span><br><span class="line">    SqlSession session2 = SessionUtil.getSession(false);</span><br><span class="line"></span><br><span class="line">    System.out.println(session1);</span><br><span class="line">    System.out.println(session2);</span><br><span class="line"></span><br><span class="line">    //bã€è·å–Mapperå¯¹è±¡</span><br><span class="line">    StudentMapper mapper1 = session1.getMapper(StudentMapper.class);</span><br><span class="line">    StudentMapper mapper2 = session2.getMapper(StudentMapper.class);</span><br><span class="line">    //cã€è°ƒç”¨mapperå¯¹è±¡çš„æ–¹æ³•</span><br><span class="line">    List&lt;Student&gt; list1 = mapper1.findAll();</span><br><span class="line"></span><br><span class="line">    //æ¸…é™¤ç¼“å­˜</span><br><span class="line">    session1.clearCache();</span><br><span class="line"></span><br><span class="line">    List&lt;Student&gt; list2 = mapper2.findAll();</span><br><span class="line">    //dã€å…³é—­Session</span><br><span class="line">    SessionUtil.close();</span><br><span class="line"></span><br><span class="line">    //3ã€å¤„ç†æŸ¥è¯¢ç»“æœ</span><br><span class="line">    System.out.println(list1);</span><br><span class="line">    System.out.println(&quot;-----------------------------------------------------&quot;);</span><br><span class="line">    System.out.println(list2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y41.png"></p>
<h2 id="11-4-äºŒçº§ç¼“å­˜"><a href="#11-4-äºŒçº§ç¼“å­˜" class="headerlink" title="11.4.äºŒçº§ç¼“å­˜"></a>11.4.äºŒçº§ç¼“å­˜</h2><h3 id="11-4-1-æ¦‚è¿°"><a href="#11-4-1-æ¦‚è¿°" class="headerlink" title="11.4.1.æ¦‚è¿°"></a>11.4.1.æ¦‚è¿°</h3><p>ä¸€çº§ç¼“å­˜çš„æœ€å¤§èŒƒå›´æ˜¯Session(æ‰€ä»¥ä¹Ÿæˆä¸ºSessionç¼“å­˜)ã€‚å¦‚æœç¼“å­˜éœ€è¦è¢«å¤šä¸ªSessionæ‰€å…±äº«ï¼Œåˆ™å¯ä»¥è€ƒè™‘ä½¿ç”¨äºŒçº§ç¼“å­˜ã€‚äºŒçº§ç¼“å­˜æ˜¯namespaceçº§åˆ«çš„ç¼“å­˜ã€‚<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y42.png"></p>
<h3 id="11-4-2-å®ç°"><a href="#11-4-2-å®ç°" class="headerlink" title="11.4.2.å®ç°"></a>11.4.2.å®ç°</h3><p>1)æ ¸å¿ƒé…ç½®æ–‡ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- å¼€å¯è‡ªåŠ¨æ˜ å°„é…ç½®--&gt;</span><br><span class="line">&lt;settings&gt;</span><br><span class="line">    &lt;setting name=&quot;mapUnderscoreToCamelCase&quot; value=&quot;true&quot;/&gt;</span><br><span class="line">    &lt;!--</span><br><span class="line">        å¼€å¯äºŒçº§ç¼“å­˜</span><br><span class="line">            trueï¼šå¼€å¯äºŒçº§ç¼“å­˜</span><br><span class="line">            falseï¼šå…³é—­äºŒçº§ç¼“å­˜</span><br><span class="line">    --&gt;</span><br><span class="line">    &lt;setting name=&quot;cacheEnabled&quot; value=&quot;true&quot; /&gt;</span><br><span class="line">&lt;/settings&gt;</span><br></pre></td></tr></table></figure>
<p>2)Mapperæ˜ å°„</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--</span><br><span class="line">    é…ç½®äºŒçº§ç¼“å­˜</span><br><span class="line">        evictionï¼šè®¾ç½®ç¼“å­˜çš„å›æ”¶ç­–ç•¥</span><br><span class="line">            LRU â€”â€” æœ€å°‘ä½¿ç”¨çš„ä¼˜å…ˆå›æ”¶</span><br><span class="line">            FIFO â€”â€” å…ˆè¿›å…ˆå‡º</span><br><span class="line">            SOFT â€”â€” è½¯ç§»é™¤</span><br><span class="line">            WEAK â€”â€” å¼±å¼•ç”¨</span><br><span class="line">       flushIntervalï¼šè®¾ç½®ç¼“å­˜çš„åˆ·æ–°æ—¶é—´</span><br><span class="line">       sizeï¼šé…ç½®å†…å­˜èµ„æºçš„å¤§å°</span><br><span class="line">       readOnly:æ˜¯å¦è®¾ç½®ä¸ºåªè¯»</span><br><span class="line">--&gt;</span><br><span class="line">&lt;cache eviction=&quot;LRU&quot; flushInterval=&quot;60000&quot; size=&quot;512&quot; readOnly=&quot;true&quot;/&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;!-- æŸ¥è¯¢æ‰€æœ‰å­¦ç”Ÿä¿¡æ¯ --&gt;</span><br><span class="line">&lt;select id=&quot;findAll&quot; resultType=&quot;edu.shifan.pojo.Student&quot;&gt;</span><br><span class="line">    select * from  sys_students</span><br><span class="line">&lt;/select&gt;</span><br></pre></td></tr></table></figure>
<p>3)æµ‹è¯•</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * æµ‹è¯•äºŒçº§ç¼“å­˜</span><br><span class="line"> *  å¿…é¡»ç­‰å¾…Sessionå…³é—­æˆ–æ‰§è¡Œäº†commit()æäº¤äº‹åŠ¡åæ‰èƒ½ä½¿äºŒçº§ç¼“å­˜ç”Ÿæ•ˆ</span><br><span class="line"> */</span><br><span class="line">private static void method05() &#123;</span><br><span class="line">    //ä»¥æµæ–¹å¼è¯»å–MyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶</span><br><span class="line">    InputStream is = SessionUtil.class.getClassLoader().getResourceAsStream(&quot;mybatis-config.xml&quot;);</span><br><span class="line">    //é€šè¿‡SqlSessionFactoryBuilderå¯¹è±¡æ„å»ºfacotryå¯¹è±¡</span><br><span class="line">    SqlSessionFactory factory  = new SqlSessionFactoryBuilder().build(is);</span><br><span class="line">    //2ã€è°ƒç”¨Mapperå¯¹è±¡çš„æ–¹æ³•æŸ¥è¯¢æ•°æ®</span><br><span class="line">    //aã€è·å–Sessionå¯¹è±¡</span><br><span class="line">    SqlSession session1 = factory.openSession();</span><br><span class="line">    SqlSession session2 = factory.openSession();</span><br><span class="line"></span><br><span class="line">    System.out.println(session1);</span><br><span class="line">    System.out.println(session2);</span><br><span class="line"></span><br><span class="line">    //bã€è·å–Mapperå¯¹è±¡</span><br><span class="line">    StudentMapper mapper1 = session1.getMapper(StudentMapper.class);</span><br><span class="line">    StudentMapper mapper2 = session2.getMapper(StudentMapper.class);</span><br><span class="line">    //cã€è°ƒç”¨mapperå¯¹è±¡çš„æ–¹æ³•</span><br><span class="line">    List&lt;Student&gt; list1 = mapper1.findAll();</span><br><span class="line">    //æäº¤äº‹åŠ¡</span><br><span class="line">    session1.commit();</span><br><span class="line"></span><br><span class="line">    List&lt;Student&gt; list2 = mapper2.findAll();</span><br><span class="line"></span><br><span class="line">    //dã€å…³é—­Session</span><br><span class="line">    session1.close();</span><br><span class="line">    session2.close();</span><br><span class="line"></span><br><span class="line">    //3ã€å¤„ç†æŸ¥è¯¢ç»“æœ</span><br><span class="line">    System.out.println(list1);</span><br><span class="line">    System.out.println(&quot;-----------------------------------------------------&quot;);</span><br><span class="line">    System.out.println(list2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="11-4-3-ç‰¹ç‚¹"><a href="#11-4-3-ç‰¹ç‚¹" class="headerlink" title="11.4.3.ç‰¹ç‚¹"></a>11.4.3.ç‰¹ç‚¹</h3><ul>
<li>äºŒå»ºç¼“å­˜åªåœ¨ç¬¬ä¸€ä¸ªSessionè°ƒç”¨äº†commit() (æˆ–close()æ–¹æ³•) æäº¤åæ‰èƒ½ç”Ÿæ•ˆ</li>
<li>æ‰§è¡ŒCUDæ“ä½œå¯èƒ½ä¼šå¯¹ç¼“å­˜äº§ç”Ÿå½±å“</li>
</ul>
<h1 id="Mybatis"><a href="#Mybatis" class="headerlink" title="Mybatis"></a>Mybatis</h1><h2 id="æ¡†æ¶æ¦‚è¿°"><a href="#æ¡†æ¶æ¦‚è¿°" class="headerlink" title="æ¡†æ¶æ¦‚è¿°"></a>æ¡†æ¶æ¦‚è¿°</h2><p><strong>è½¯ä»¶æ¡†æ¶</strong>æ˜¯ä¸€ç§é€šç”¨çš„ã€å¯å¤ç”¨çš„<strong>è½¯ä»¶ç¯å¢ƒ</strong>ï¼Œå®ƒæä¾›ç‰¹å®šçš„åŠŸèƒ½ï¼Œä¿ƒè¿›è½¯ä»¶åº”ç”¨ã€äº§å“å’Œè§£å†³æ–¹æ¡ˆçš„å¼€å‘å·¥ä½œã€‚è½¯ä»¶æ¡†æ¶ä¼šåŒ…å«æ”¯æ’‘ç¨‹åºã€ç¼–è¯‘å™¨ã€ä»£ç ã€åº“ã€å·¥å…·é›†ä»¥åŠAPIï¼Œå®ƒæŠŠæ‰€æœ‰è¿™äº›éƒ¨ä»¶æ±‡é›†åœ¨ä¸€èµ·ï¼Œä»¥æ”¯æŒé¡¹ç›®æˆ–ç³»ç»Ÿçš„å¼€å‘ã€‚<br>è½¯ä»¶æ¡†æ¶å¯ä»¥å½¢è±¡åœ°æ¯”å–»æˆæˆ‘ä»¬åœ¨ç›–æ¥¼æˆ¿æ—¶ï¼Œç”¨æ¢+æŸ±å­+æ‰¿é‡å¢™æ­å»ºèµ·æ¥çš„é’¢ç­‹æ··å‡åœŸç»“æ„çš„<strong>å»ºç­‘æ¡†æ¶</strong>ï¼Œå®ƒæ˜¯æ•´ä¸ªå»ºç­‘çš„éª¨æ¶ã€‚è€Œå®ç°çš„è½¯ä»¶åŠŸèƒ½ï¼Œä¹Ÿå°±åƒåœ¨è¿™ä¸ªå»ºç­‘æ¡†æ¶ä¸­æ‰€è¦å®ç°çš„ä¸åŒç±»å‹ã€åŠŸèƒ½çš„æˆ¿å­ï¼Œæ¯”å¦‚å¥èº«æˆ¿ã€å•†åœºã€é…’åº—ã€é¥­åº—ç­‰ã€‚</p>
<h2 id="æ¡†æ¶çš„ä¼˜åŠ¿"><a href="#æ¡†æ¶çš„ä¼˜åŠ¿" class="headerlink" title="æ¡†æ¶çš„ä¼˜åŠ¿"></a>æ¡†æ¶çš„ä¼˜åŠ¿</h2><p>1ï¼**æé«˜å¼€å‘æ•ˆç‡:<strong>å¦‚æœé‡‡ç”¨æˆç†Ÿã€ç¨³å¥çš„æ¡†æ¶ï¼Œé‚£ä¹ˆä¸€äº›é€šç”¨çš„åŸºç¡€å·¥ä½œï¼Œå¦‚äº‹åŠ¡å¤„ç†ã€å®‰å…¨æ€§ã€æ•°æ®æµæ§åˆ¶ç­‰éƒ½å¯ä»¥äº¤ç»™æ¡†æ¶å¤„ç†ï¼Œç¨‹åºå‘˜åªéœ€è¦é›†ä¸­ç²¾åŠ›å®Œæˆç³»ç»Ÿçš„ä¸šåŠ¡é€»è¾‘è®¾è®¡ï¼Œé™ä½äº†å¼€å‘éš¾åº¦ã€‚<br>2ï¼</strong>æé«˜ä»£ç è§„èŒƒæ€§å’Œå¯ç»´æŠ¤æ€§:<strong>å½“å¤šäººååŒè¿›è¡Œå¼€å‘æ—¶ï¼Œä»£ç çš„è§„èŒƒæ€§å’Œå¯ç»´æŠ¤æ€§å°±å˜å¾—éå¸¸é‡è¦ã€‚æˆç†Ÿçš„æ¡†æ¶éƒ½æœ‰ä¸¥æ ¼çš„ä»£ç è§„èŒƒï¼Œèƒ½ä¿è¯å›¢é˜Ÿæ•´ä½“çš„å¼€å‘é£æ ¼ç»Ÿä¸€ã€‚<br>3ï¼</strong>æé«˜è½¯ä»¶æ€§èƒ½:**ä½¿ç”¨æ¡†æ¶è¿›è¡Œè½¯ä»¶å¼€å‘ï¼Œå¯ä»¥å‡å°‘ç¨‹åºä¸­çš„å†—ä½™ä»£ç ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨Springæ¡†æ¶å¼€å‘æ—¶ï¼Œé€šè¿‡Springçš„IOCç‰¹æ€§ï¼Œå¯ä»¥å°†å¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»äº¤ç»™Springæ§åˆ¶ï¼Œæ–¹ä¾¿è§£è€¦ï¼Œç®€åŒ–å¼€å‘;ä½¿ç”¨MyBatisæ¡†æ¶å¼€å‘æ—¶ï¼ŒMyBatisæä¾›äº†XMLæ ‡ç­¾ï¼Œæ”¯æŒåŠ¨æ€çš„SQLï¼Œå¼€å‘äººå‘˜æ— éœ€åœ¨ç±»ä¸­ç¼–å†™å¤§é‡çš„SQLè¯­å¥ï¼Œåªéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œé…ç½®å³å¯ã€‚</p>
<h2 id="å½“å‰ä¸»æµæ¡†æ¶"><a href="#å½“å‰ä¸»æµæ¡†æ¶" class="headerlink" title="å½“å‰ä¸»æµæ¡†æ¶"></a>å½“å‰ä¸»æµæ¡†æ¶</h2><p><strong>Springæ¡†æ¶</strong><br>Springæ˜¯ä¸€ä¸ªå¼€æºæ¡†æ¶ï¼Œæ˜¯ä¸ºäº†è§£å†³ä¼ä¸šåº”ç”¨ç¨‹åºå¼€å‘å¤æ‚æ€§è€Œåˆ›å»ºçš„ï¼Œå…¶ä¸»è¦ä¼˜åŠ¿ä¹‹ä¸€å°±æ˜¯åˆ†å±‚æ¶æ„ã€‚Springæä¾›äº†æ›´å®Œå–„çš„å¼€å‘ç¯å¢ƒï¼Œå¯ä»¥ä¸ºPOJOï¼ˆPlainOrdinary Java Objectï¼Œæ™®é€šJavaå¯¹è±¡ï¼‰å¯¹è±¡æä¾›ä¼ä¸šçº§çš„æœåŠ¡ã€‚<br><strong>Spring MVCæ¡†æ¶</strong><br>Spring MVCæ˜¯ä¸€ä¸ªWebå¼€å‘æ¡†æ¶ï¼Œå¯ä»¥å°†å®ƒç†è§£ä¸ºServletã€‚åœ¨MVCæ¨¡å¼ä¸­ï¼ŒSpring MVCä½œä¸ºæ§åˆ¶å™¨ï¼ˆControllerï¼‰ç”¨äºå®ç°æ¨¡å‹ä¸è§†å›¾çš„æ•°æ®äº¤äº’ï¼Œæ˜¯ç»“æ„æœ€æ¸…æ™°çš„ã€‚<br>Spring MVCæ¡†æ¶é‡‡ç”¨æ¾è€¦åˆã€å¯æ’æ‹”çš„ç»„ä»¶ç»“æ„ï¼Œå…·æœ‰é«˜åº¦å¯é…ç½®æ€§ï¼Œä¸å…¶ä»–çš„MVCæ¡†æ¶ç›¸æ¯”ï¼Œå…·æœ‰æ›´å¼ºçš„æ‰©å±•æ€§å’Œçµæ´»æ€§ã€‚<br><strong>MyBatisæ¡†æ¶</strong><br>MyBatis æ˜¯Apacheçš„ä¸€ä¸ªå¼€æºé¡¹ç›®iBatisï¼Œ2010å¹´è¿™ä¸ªé¡¹ç›®ç”±Apache SoftwareFoundationè¿ç§»åˆ°äº†Google Codeï¼Œå¹¶ä¸”æ”¹åä¸ºMyBatis , 2013å¹´11æœˆMyBatisåˆè¢«è¿ç§»åˆ°Githubã€‚<br>MyBatisæ˜¯ä¸€ä¸ªä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶ï¼Œå®ƒå¯ä»¥åœ¨å®ä½“ç±»å’ŒSQLè¯­å¥ä¹‹é—´å»ºç«‹æ˜ å°„å…³ç³»ï¼Œæ˜¯ä¸€ç§åŠè‡ªåŠ¨åŒ–çš„ORM ï¼ˆObject&#x2F;Relation Mappingï¼Œå³å¯¹è±¡å…³ç³»æ˜ å°„ï¼‰å®ç°ã€‚MyBatiså°è£…æ€§è¦ä½äºHibernateï¼Œä½†å®ƒæ€§èƒ½ä¼˜è¶Šã€ç®€å•æ˜“å­¦ï¼Œåœ¨äº’è”ç½‘åº”ç”¨çš„å¼€å‘ä¸­è¢«å¹¿æ³›ä½¿ç”¨ã€‚<br><strong>SpringBootæ¡†æ¶</strong><br>Spring Bootæ¡†æ¶æ˜¯Pivotalå›¢é˜ŸåŸºäºSpring å¼€å‘çš„å…¨æ–°æ¡†æ¶ï¼Œå…¶è®¾è®¡åˆè¡·æ˜¯ä¸ºäº†ç®€åŒ–Spring çš„é…ç½®ï¼Œä½¿ç”¨æˆ·èƒ½å¤Ÿæ„å»ºç‹¬ç«‹è¿è¡Œçš„ç¨‹åºï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚<br>Spring Bootæ¡†æ¶æœ¬èº«å¹¶ä¸æä¾›Spring æ¡†æ¶çš„æ ¸å¿ƒç‰¹æ€§åŠæ‰©å±•åŠŸèƒ½ï¼Œå®ƒåªæ˜¯ç”¨äºå¿«é€Ÿã€æ•æ·åœ°å¼€å‘æ–°ä¸€ä»£åŸºäºSpringæ¡†æ¶çš„åº”ç”¨ï¼ŒåŒæ—¶å®ƒè¿˜é›†æˆäº†å¤§é‡çš„ç¬¬ä¸‰æ–¹ç±»åº“(å¦‚Jackson.JDBCã€Redis ç­‰)ï¼Œä½¿ç”¨æˆ·åªéœ€å°‘é‡é…ç½®å°±èƒ½å®Œæˆç›¸åº”åŠŸèƒ½ã€‚<br><strong>Spring Couldæ¡†æ¶</strong><br>Spring Cloudæ˜¯ä¸€ç³»åˆ—æ¡†æ¶çš„æœ‰åºé›†åˆï¼Œä¸ºå¼€å‘äººå‘˜æ„å»ºå¾®æœåŠ¡æ¶æ„æä¾›äº†å®Œæ•´çš„è§£å†³æ–¹æ¡ˆï¼Œå®ƒåˆ©ç”¨Spring Bootçš„å¼€å‘ä¾¿åˆ©æ€§å·§å¦™åœ°ç®€åŒ–äº†åˆ†å¸ƒå¼ç³»ç»Ÿçš„å¼€å‘ã€‚ä¾‹å¦‚ï¼Œé…ç½®ç®¡ç†ã€æœåŠ¡å‘ç°ã€æ§åˆ¶æ€»çº¿ç­‰æ“ä½œï¼Œéƒ½å¯ä»¥ä½¿ç”¨Spring Bootåšåˆ°ä¸€é”®å¯åŠ¨å’Œéƒ¨ç½²ã€‚å¯ä»¥è¯´ï¼ŒSpring Cloudå°†Spring Bootæ¡†æ¶è¿›è¡Œäº†å†å°è£…ï¼Œå±è”½æ‰äº†å¤æ‚çš„é…ç½®å’Œå®ç°åŸç†ï¼Œå…·æœ‰ç®€å•æ˜“æ‡‚ã€æ˜“éƒ¨ç½²å’Œæ˜“ç»´æŠ¤ç­‰ç‰¹ç‚¹ã€‚</p>
<h2 id="ä¼ ç»ŸJDBCçš„åŠ£åŠ¿"><a href="#ä¼ ç»ŸJDBCçš„åŠ£åŠ¿" class="headerlink" title="ä¼ ç»ŸJDBCçš„åŠ£åŠ¿"></a>ä¼ ç»ŸJDBCçš„åŠ£åŠ¿</h2><p>JDBCæ˜¯Javaç¨‹åºå®ç°æ•°æ®è®¿é—®çš„åŸºç¡€ï¼ŒJDBCçš„åŠ£åŠ¿ä¸»è¦æœ‰ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ã€‚<br>ï¼ˆ1ï¼‰æ•°æ®åº“è¿æ¥åˆ›å»ºã€é‡Šæ”¾é¢‘ç¹ä¼šé€ æˆç³»ç»Ÿèµ„æºæµªè´¹ï¼Œä»è€Œå½±å“ç³»ç»Ÿæ€§èƒ½ã€‚<br>ï¼ˆ2ï¼‰ SQLè¯­å¥åœ¨ä»£ç ä¸­ç¡¬ç¼–ç ï¼Œé€ æˆä»£ç ä¸æ˜“ç»´æŠ¤ã€‚åœ¨å®é™…åº”ç”¨çš„å¼€å‘ä¸­ï¼ŒSQLå˜åŒ–çš„å¯èƒ½æ€§è¾ƒå¤§ã€‚åœ¨ä¼ ç»ŸJDBCç¼–ç¨‹ä¸­ï¼ŒSQLå˜åŠ¨éœ€è¦æ”¹å˜Javaä»£ç ï¼Œè¿åäº†å¼€é—­åŸåˆ™ã€‚<br>ï¼ˆ3ï¼‰ç”¨PreparedStatementå‘å æœ‰ä½ç¬¦å·ä¼ å‚æ•°å­˜åœ¨ç¡¬ç¼–ç ï¼Œå› ä¸ºSQLè¯­å¥çš„whereæ¡ä»¶ä¸ä¸€å®šï¼Œå¯èƒ½å¤šä¹Ÿå¯èƒ½å°‘ï¼Œä¿®æ”¹SQLéœ€è¦ä¿®æ”¹ä»£ç ï¼Œé€ æˆç³»ç»Ÿä¸æ˜“ç»´æŠ¤ã€‚<br>(4) JDBCå¯¹ç»“æœé›†è§£æå­˜åœ¨ç¡¬ç¼–ç (æŸ¥è¯¢åˆ—å)ï¼ŒSQLå˜åŒ–å¯¼è‡´è§£æä»£ç å˜åŒ–,é€ æˆç³»ç»Ÿä¸æ˜“ç»´æŠ¤ã€‚</p>
<h2 id="Mybatisæ¦‚è¿°"><a href="#Mybatisæ¦‚è¿°" class="headerlink" title="Mybatisæ¦‚è¿°"></a>Mybatisæ¦‚è¿°</h2><p>ä»€ä¹ˆæ˜¯Mybatis</p>
<p>MyBatisæ˜¯ä¸€ä¸ªæ”¯æŒæ™®é€šSQLæŸ¥è¯¢ã€å­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„çš„æŒä¹…å±‚æ¡†æ¶ï¼Œå®ƒæ¶ˆé™¤äº†å‡ ä¹æ‰€æœ‰çš„JDBCä»£ç å’Œå‚æ•°çš„æ‰‹åŠ¨è®¾ç½®ä»¥åŠå¯¹ç»“æœé›†çš„æ£€ç´¢ï¼Œä½¿ç”¨ç®€å•çš„<strong>XMLæˆ–æ³¨è§£</strong>è¿›è¡Œé…ç½®å’ŒåŸå§‹<strong>æ˜ å°„</strong>ï¼Œå°†æ¥å£å’ŒJavaçš„POJOæ˜ å°„æˆæ•°æ®åº“ä¸­çš„è®°å½•ï¼Œä½¿å¾—Javaå¼€å‘äººå‘˜å¯ä»¥ä½¿ç”¨é¢å‘å¯¹è±¡çš„ç¼–ç¨‹æ€æƒ³æ¥æ“ä½œæ•°æ®åº“ã€‚</p>
<p>ORMæ¡†æ¶å·¥ä½œåŸç†<br>MyBatisæ¡†æ¶æ˜¯ä¸€ä¸ªORM ï¼ˆObject&#x2F;Relation Mappingï¼Œå³<strong>å¯¹è±¡å…³ç³»æ˜ å°„</strong>ï¼‰æ¡†æ¶ã€‚æ‰€è°“çš„ORMå°±æ˜¯ä¸€ç§ä¸ºäº†è§£å†³é¢å‘å¯¹è±¡ä¸å…³ç³»å‹æ•°æ®åº“ä¸­æ•°æ®ç±»å‹ä¸åŒ¹é…çš„æŠ€æœ¯ï¼Œå®ƒé€šè¿‡æè¿°Javaå¯¹è±¡ä¸æ•°æ®åº“è¡¨ä¹‹é—´çš„æ˜ å°„å…³ç³»ï¼Œè‡ªåŠ¨å°†Javaåº”ç”¨ç¨‹åºä¸­çš„å¯¹è±¡æŒä¹…åŒ–åˆ°å…³ç³»å‹æ•°æ®åº“çš„è¡¨ä¸­ã€‚RMæ¡†æ¶çš„å·¥ä½œåŸç†å¯ä»¥é€šè¿‡ä¸€å¼ å›¾æ¥å±•ç¤ºã€‚</p>
<h2 id="Mybatisç¯å¢ƒæ­å»º"><a href="#Mybatisç¯å¢ƒæ­å»º" class="headerlink" title="Mybatisç¯å¢ƒæ­å»º"></a>Mybatisç¯å¢ƒæ­å»º</h2><p>ä½¿ç”¨MyBatisæ¡†æ¶è¿›è¡Œæ•°æ®åº“å¼€å‘ä¹‹å‰ï¼Œéœ€è¦å…ˆæ­å»ºMyBatisç¯å¢ƒï¼ŒMyBatisç¯å¢ƒæ­å»ºä¸»è¦æœ‰å¦‚ä¸‹åŸºæœ¬æ­¥éª¤ã€‚<br>(1)åˆ›å»ºå·¥ç¨‹;<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y43.png"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y44.png"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y45.png"><br>(2)å¼•å…¥ç›¸å…³ä¾èµ–;<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y46.png"><br>(3ï¼‰æ•°æ®åº“å‡†å¤‡;<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y47.png"><br>(4ï¼‰ç¼–å†™æ•°æ®åº“è¿æ¥ä¿¡æ¯é…ç½®æ–‡ä»¶;<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y48.png"><br>(5ï¼‰ç¼–å†™æ ¸å¿ƒé…ç½®æ–‡ä»¶å’Œæ˜ å°„æ–‡ä»¶ã€‚<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y49.png"></p>
<h2 id="Mybatiså…¥é—¨ç¨‹åº"><a href="#Mybatiså…¥é—¨ç¨‹åº" class="headerlink" title="Mybatiså…¥é—¨ç¨‹åº"></a>Mybatiså…¥é—¨ç¨‹åº</h2><ol>
<li>æ•°æ®å‡†å¤‡<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y50.png"></li>
<li>åˆ›å»ºPOJOå®ä½“<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y51.png"></li>
<li>åˆ›å»ºæ˜ å°„æ–‡ä»¶UserMapper.xml<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y52.png"></li>
<li>ä¿®æ”¹mybatis-config.xmlé…ç½®æ–‡ä»¶<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y53.png"></li>
<li>ç¼–å†™æµ‹è¯•ç±»<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y54.png"></li>
</ol>
<h2 id="Mybatiså·¥ä½œåŸç†"><a href="#Mybatiså·¥ä½œåŸç†" class="headerlink" title="Mybatiså·¥ä½œåŸç†"></a>Mybatiså·¥ä½œåŸç†</h2><p>mybatiså·¥ä½œåŸç†<br>MyBatisæ¡†æ¶åœ¨æ“ä½œæ•°æ®åº“æ—¶ï¼Œå¤§ä½“ç»è¿‡äº†8ä¸ªæ­¥éª¤ã€‚ä¸‹é¢ç»“åˆMyBatiså·¥ä½œåŸç†å›¾å¯¹æ¯ä¸€æ­¥æµç¨‹è¿›è¡Œè¯¦ç»†è®²è§£ï¼Œå…·ä½“å¦‚ä¸‹ã€‚</p>
<ol>
<li><p>MyBatisè¯»å–æ ¸å¿ƒé…ç½®æ–‡ä»¶mybatis-config.xml: mybatis-config.xmlæ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸»è¦é…ç½®äº†MyBatisçš„è¿è¡Œç¯å¢ƒç­‰ä¿¡æ¯ã€‚</p>
</li>
<li><p>åŠ è½½æ˜ å°„æ–‡ä»¶Mapper.xml: Mapper.xmlæ–‡ä»¶å³SQLæ˜ å°„æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶é…ç½®äº†æ“ä½œæ•°æ®åº“çš„SQLè¯­å¥ï¼Œéœ€è¦åœ¨mybatis-config.xmlä¸­åŠ è½½æ‰èƒ½æ‰§è¡Œã€‚</p>
</li>
<li><p>æ„é€ ä¼šè¯å·¥å‚:é€šè¿‡MyBatisçš„ç¯å¢ƒç­‰é…ç½®ä¿¡æ¯æ„å»ºä¼šè¯å·¥å‚SqlSessionFactoryï¼Œç”¨äºåˆ›å»ºSqlSessionã€‚</p>
</li>
<li><p>åˆ›å»ºä¼šè¯å¯¹è±¡:ç”±ä¼šè¯å·¥å‚SqlSessionFactoryåˆ›å»ºSqlSessionå¯¹è±¡ï¼Œè¯¥å¯¹è±¡ä¸­åŒ…å«äº†æ‰§è¡ŒSQLè¯­å¥çš„æ‰€æœ‰æ–¹æ³•ã€‚</p>
</li>
<li><p>åˆ›å»ºæ‰§è¡Œå™¨:ä¼šè¯å¯¹è±¡æœ¬èº«ä¸èƒ½ç›´æ¥æ“ä½œæ•°æ®åº“ï¼ŒMyBatisåº•å±‚å®šä¹‰äº†ä¸€ä¸ªExecutoræ¥å£ç”¨äºæ“ä½œæ•°æ®åº“ï¼Œæ‰§è¡Œå™¨ä¼šæ ¹æ®SqlSessionä¼ é€’çš„å‚æ•°åŠ¨æ€çš„ç”Ÿæˆéœ€è¦æ‰§è¡Œçš„SQLè¯­å¥ï¼ŒåŒæ—¶è´Ÿè´£æŸ¥è¯¢ç¼“å­˜åœ°ç»´æŠ¤ã€‚</p>
</li>
<li><p>å°è£…SQLä¿¡æ¯: SqlSessionå†…éƒ¨é€šè¿‡æ‰§è¡Œå™¨Executoræ“ä½œæ•°æ®åº“ï¼Œæ‰§è¡Œå™¨å°†å¾…å¤„ç†çš„SQLä¿¡æ¯å°è£…åˆ°MappedStatementå¯¹è±¡ä¸­ã€‚</p>
</li>
<li><p>æ“ä½œæ•°æ®åº“:æ ¹æ®åŠ¨æ€ç”Ÿæˆçš„SQLæ“ä½œæ•°æ®åº“ã€‚</p>
</li>
<li><p>è¾“å‡ºç»“æœæ˜ å°„:æ‰§è¡ŒSQLè¯­å¥ä¹‹åï¼Œé€šè¿‡MappedStatementå¯¹è±¡å°†è¾“å‡ºç»“æœæ˜ å°„è‡³Javaå¯¹è±¡ä¸­ã€‚<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y55.png"></p>
</li>
</ol>
<h2 id="SqlSessionFactoryBuilderå¯¹è±¡"><a href="#SqlSessionFactoryBuilderå¯¹è±¡" class="headerlink" title="SqlSessionFactoryBuilderå¯¹è±¡"></a>SqlSessionFactoryBuilderå¯¹è±¡</h2><ol>
<li>å½¢å¼ä¸€: SqlSessionFactoryBuilderæ„å»ºbuild()æ–¹æ³•</li>
</ol>
<ul>
<li>build(InputStream inputStream,String environment,Properties properties)<br>ä¸Šè¿°build()æ–¹æ³•ä¸­ï¼Œå‚æ•°inputStreamæ˜¯å­—èŠ‚æµï¼Œå®ƒå°è£…äº†XMLæ–‡ä»¶å½¢å¼çš„é…ç½®ä¿¡æ¯;å‚æ•°environmentå’Œå‚æ•°propertiesä¸ºå¯é€‰å‚æ•°ã€‚å…¶ä¸­ï¼Œå‚æ•°environmentå†³å®šå°†è¦åŠ è½½çš„ç¯å¢ƒï¼ŒåŒ…æ‹¬æ•°æ®æºå’Œäº‹åŠ¡ç®¡ç†å™¨;å‚æ•°propertieså†³å®šå°†è¦åŠ è½½çš„propertiesæ–‡ä»¶ã€‚</li>
</ul>
<ol start="2">
<li>å½¢å¼äºŒ:SqlSessionFactoryBuilderæ„å»ºbuild()æ–¹æ³•</li>
</ol>
<ul>
<li>build(Reader reader,String environment,Properties properties)<br>ç”±ä¸Šè¿°build()æ–¹æ³•å¯çŸ¥ï¼Œç¬¬äºŒç§å½¢å¼çš„build()æ–¹æ³•å‚æ•°ä½œç”¨ä¸ç¬¬ä¸€ç§å½¢å¼å¤§ä½“ä¸€è‡´ï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯ï¼Œç¬¬ä¸€ç§å½¢å¼çš„build()æ–¹æ³•ä½¿ç”¨InputStreamå­—èŠ‚æµå°è£…äº†XMLæ–‡ä»¶å½¢å¼çš„é…ç½®ä¿¡æ¯ï¼Œè€Œç¬¬äºŒç§å½¢å¼çš„build()æ–¹æ³•ä½¿ç”¨Readerå­—ç¬¦æµå°è£…äº†xmlæ–‡ä»¶å½¢å¼çš„é…ç½®ä¿¡æ¯ã€‚</li>
</ul>
<ol start="3">
<li>å½¢å¼ä¸‰:SqlSessionFactoryBuilderæ„å»ºbuild()æ–¹æ³•</li>
</ol>
<ul>
<li>build(Configuration config)<br>é€šè¿‡ä»¥ä¸Šä»£ç å¯çŸ¥ï¼Œé…ç½®ä¿¡æ¯å¯ä»¥é€šè¿‡**InputStream(å­—èŠ‚æµ)ã€Reader(å­—ç¬¦æµ)Configuration(ç±»)**ä¸‰ç§å½¢å¼æä¾›ç»™SqlSessionFactoryBuilderçš„build()æ–¹æ³•ã€‚</li>
</ul>
<blockquote>
<p>ä»¥è¯»å–XMLæ–‡ä»¶çš„æ–¹å¼æ„é€ SqlSessionFactoryå¯¹è±¡<br>é€šè¿‡è¿‡è¯»å–XMLé…ç½®æ–‡ä»¶çš„æ–¹å¼æ„é€ SqlSessionFactoryå¯¹è±¡çš„å…³é”®ä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//è¯»å–é…ç½®æ–‡ä»¶</span><br><span class="line">InputStream inputStream = Resources.getResourceAsStream(&quot;é…ç½®æ–‡ä»¶ä½ç½®&quot;);</span><br><span class="line">//æ ¹æ®é…ç½®æ–‡ä»¶æ„å»ºSqlSessionFactory</span><br><span class="line">SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream);</span><br></pre></td></tr></table></figure>
<h2 id="SqlSessionFactoryå¯¹è±¡"><a href="#SqlSessionFactoryå¯¹è±¡" class="headerlink" title="SqlSessionFactoryå¯¹è±¡"></a>SqlSessionFactoryå¯¹è±¡</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y56.png"></p>
<p><strong>openSession(ExecutorType execType)å‚æ•°å€¼</strong><br>å‚æ•°execTypeæœ‰ä¸‰ä¸ªå¯é€‰å€¼:</p>
<ul>
<li>ExecutorType.SIMPLE:è¡¨ç¤ºä¸ºæ¯æ¡è¯­å¥åˆ›å»ºä¸€æ¡æ–°çš„é¢„å¤„ç†è¯­å¥ã€‚</li>
<li>ExecutorType.REUSE:è¡¨ç¤ºä¼šå¤ç”¨é¢„å¤„ç†è¯­å¥ã€‚</li>
<li>ExecutorType.BATCH:è¡¨ç¤ºä¼šæ‰¹é‡æ‰§è¡Œæ‰€æœ‰æ›´æ–°è¯­å¥ã€‚</li>
</ul>
<p><strong>openSession(ExecutorType execTypeï¼ŒConnection connection)å‚æ•°å€¼</strong></p>
<ul>
<li>å‚æ•°execTypeæœ‰ä¸‰ä¸ªå¯é€‰å€¼ï¼ŒåŒopenSession(ExecutorType execType)çš„å‚æ•°</li>
<li>å‚æ•°connectionå¯æä¾›è‡ªå®šä¹‰è¿æ¥ã€‚</li>
</ul>
<h2 id="SqlSessionå¯¹è±¡"><a href="#SqlSessionå¯¹è±¡" class="headerlink" title="SqlSessionå¯¹è±¡"></a>SqlSessionå¯¹è±¡</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y57.png"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y58.png"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y59.png"></p>
<blockquote>
<p>SqlSessionå¯¹è±¡çš„ä½¿ç”¨èŒƒå›´<br>æ¯ä¸€ä¸ªçº¿ç¨‹éƒ½åº”è¯¥æœ‰ä¸€ä¸ªè‡ªå·±çš„SqlSessionå¯¹è±¡ï¼Œå¹¶ä¸”è¯¥å¯¹è±¡ä¸èƒ½å…±äº«ã€‚SqlSessionå¯¹è±¡æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œå› æ­¤å…¶ä½¿ç”¨èŒƒå›´æœ€å¥½åœ¨ä¸€æ¬¡è¯·æ±‚æˆ–ä¸€ä¸ªæ–¹æ³•ä¸­ï¼Œç»ä¸èƒ½å°†å…¶æ”¾åœ¨ç±»çš„é™æ€å­—æ®µã€å¯¹è±¡å­—æ®µæˆ–ä»»ä½•ç±»å‹çš„ç®¡ç†èŒƒå›´(å¦‚Servletçš„HttpSession)ä¸­ä½¿ç”¨ã€‚SqlSessionå¯¹è±¡ä½¿ç”¨å®Œä¹‹åï¼Œè¦åŠæ—¶çš„å…³é—­ï¼ŒSqlSessionå¯¹è±¡é€šå¸¸æ”¾åœ¨finallyå—ä¸­å…³é—­ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SqlSession sqlSession = sqlSessionFactory.openSession();</span><br><span class="line">try &#123;</span><br><span class="line">//æ­¤å¤„æ‰§è¡ŒæŒä¹…åŒ–æ“ä½œ</span><br><span class="line">&#125;finally &#123;</span><br><span class="line">    sqlSession.close();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h2 id="Mybatisé…ç½®æ–‡ä»¶çš„ä¸»è¦å…ƒç´ "><a href="#Mybatisé…ç½®æ–‡ä»¶çš„ä¸»è¦å…ƒç´ " class="headerlink" title="Mybatisé…ç½®æ–‡ä»¶çš„ä¸»è¦å…ƒç´ "></a>Mybatisé…ç½®æ–‡ä»¶çš„ä¸»è¦å…ƒç´ </h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y60.png"></p>
<blockquote>
<p><configuration>çš„å­å…ƒç´ çš„æ‰§è¡Œé¡ºåº<br><configuration>å…ƒç´ æ˜¯æ•´ä¸ªXMLé…ç½®æ–‡ä»¶çš„æ ¹å…ƒç´ ï¼Œç›¸å½“äºMyBatiså„å…ƒç´ çš„ç®¡ç†å‘˜ã€‚<configuration>æœ‰å¾ˆå¤šå­å…ƒç´ ï¼ŒMyBatisçš„æ ¸å¿ƒé…ç½®å°±æ˜¯é€šè¿‡è¿™äº›å­å…ƒç´ å®Œæˆçš„ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­ï¼Œ<configuration>çš„å­å…ƒç´ å¿…é¡»æŒ‰ç…§ä¸Šå›¾ç”±ä¸Šåˆ°ä¸‹çš„é¡ºåºè¿›è¡Œé…ç½®ã€‚å¦åˆ™MyBatisåœ¨è§£æXMLé…ç½®æ–‡ä»¶çš„æ—¶å€™ä¼šæŠ¥é”™ã€‚</p>
</blockquote>
<h2 id="propertieså…ƒç´ "><a href="#propertieså…ƒç´ " class="headerlink" title="propertieså…ƒç´ "></a>propertieså…ƒç´ </h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y61.png"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y62.png"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y63.png"></p>
<h2 id="settingå…ƒç´ "><a href="#settingå…ƒç´ " class="headerlink" title="settingå…ƒç´ "></a>settingå…ƒç´ </h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y64.png"></p>
<blockquote>
<p><settings>å…ƒç´ ä¸­å¸¸è§é…ç½®å‚æ•°çš„ä½¿ç”¨æ–¹å¼</p>
</blockquote>
<settings>
<!--æ˜¯å¦å¼€å¯ç¼“å­˜-->
<setting name="cacheEnabled" value="true"/>
<!--æ˜¯å¦å¼€å¯å»¶è¿ŸåŠ è½½,å¦‚æœå¼€å¯,æ‰€æœ‰å…³è”å¯¹è±¡éƒ½ä¼šå»¶è¿ŸåŠ è½½-->
<setting name="lazyLoadingEnabled" value= "true" />
<!--æ˜¯å¦å¼€å¯å…³è”å¯¹è±¡å±æ€§çš„å»¶è¿ŸåŠ è½½,å¦‚æœå¼€å¯,å¯¹ä»»æ„å»¶è¿Ÿå±æ€§çš„è°ƒç”¨éƒ½ä¼šä½¿ç”¨å¸¦æœ‰å»¶è¿ŸåŠ è½½å±æ€§çš„å¯¹è±¡å‘å®Œæ•´åŠ è½½,å¦åˆ™æ¯ç§å±æ€§éƒ½æŒ‰éœ€åŠ è½½-->
<setting name="aggressiveLazyLoading" value="true"/>
...
</settings>

<h2 id="typeAliaseså…ƒç´ "><a href="#typeAliaseså…ƒç´ " class="headerlink" title="typeAliaseså…ƒç´ "></a>typeAliaseså…ƒç´ </h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y65.png"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y66.png"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y67.png"></p>
<h2 id="environmentså…ƒç´ "><a href="#environmentså…ƒç´ " class="headerlink" title="environmentså…ƒç´ "></a>environmentså…ƒç´ </h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y68.png"></p>
<blockquote>
<p><environments>å„å…ƒç´ é…ç½®è¿è¡Œç¯å¢ƒ<br>MyBatisçš„è¿è¡Œç¯å¢ƒä¿¡æ¯åŒ…æ‹¬äº‹åŠ¡ç®¡ç†å™¨å’Œæ•°æ®æºã€‚åœ¨MyBatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­ï¼ŒMyBatisé€šè¿‡<environment>å…ƒç´ å®šä¹‰ä¸€ä¸ªè¿è¡Œç¯å¢ƒã€‚<environment>å…ƒç´ æœ‰ä¸¤ä¸ªå­å…ƒç´ ï¼Œ<transactionManager>å…ƒç´ å’Œ<dataSource>å…ƒç´ ã€‚<transactionManager>å…ƒç´ ç”¨äºé…ç½®è¿è¡Œç¯å¢ƒçš„äº‹åŠ¡ç®¡ç†å™¨;<dataSource>å…ƒç´ ç”¨äºé…ç½®è¿è¡Œç¯å¢ƒçš„æ•°æ®æºä¿¡æ¯ã€‚</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y69.png"></p>
<blockquote>
<p><transcationManager>å…ƒç´ é…ç½®äº‹åŠ¡ç®¡ç†å™¨<br>åœ¨MyBatisä¸­,<transcationManager>å…ƒç´ å¯ä»¥é…ç½®ä¸¤ç§ç±»å‹çš„äº‹åŠ¡ç®¡ç†å™¨ï¼Œåˆ†åˆ«æ˜¯JDBCå’ŒMANAGEDã€‚</p>
</blockquote>
<ul>
<li>JDBC;æ­¤é…ç½®ç›´æ¥ä½¿ç”¨JDBCçš„æäº¤å’Œå›æ»šè®¾ç½®ï¼Œå®ƒä¾èµ–äºä»æ•°æ®æºå¾—åˆ°çš„è¿æ¥æ¥ç®¡ç†äº‹åŠ¡çš„ä½œç”¨åŸŸã€‚</li>
<li>MANAGED:æ­¤é…ç½®ä¸æäº¤æˆ–å›æ»šä¸€ä¸ªè¿æ¥ï¼Œè€Œæ˜¯è®©å®¹å™¨æ¥ç®¡ç†äº‹åŠ¡çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä¼šå…³é—­è¿æ¥ï¼Œä½†å¯ä»¥å°†<transcationManager>å…ƒç´ çš„closeConnectionå±æ€§è®¾ç½®ä¸ºfalseæ¥é˜»æ­¢å®ƒé»˜è®¤çš„å…³é—­è¡Œä¸ºã€‚<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y70.png"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y71.png"></li>
</ul>
<h2 id="mapperså…ƒç´ "><a href="#mapperså…ƒç´ " class="headerlink" title="mapperså…ƒç´ "></a>mapperså…ƒç´ </h2><ol>
<li><p>ä½¿ç”¨ç±»è·¯å¾„å¼•å…¥<br>ä½¿ç”¨ç±»è·¯å¾„å¼•å…¥æ˜ å°„æ–‡ä»¶çš„ç¤ºä¾‹ä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<mappers>
 <mapper resource="com/itheima/mapper/UserMapper.xml" />
</mappers>
</li>
<li><p>ä½¿ç”¨æœ¬åœ°æ–‡ä»¶è·¯å¾„å¼•å…¥<br>ä½¿ç”¨æœ¬åœ°æ–‡ä»¶è·¯å¾„å¼•å…¥æ˜ å°„æ–‡ä»¶çš„ç¤ºä¾‹ä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<mappers>
 <mapper url="file:///D:/com/itheima/mapper/UserMapper.xml" />
</mappers>
</li>
<li><p>ä½¿ç”¨æ¥å£ç±»å¼•å…¥<br>ä½¿ç”¨æ¥å£ç±»å¼•å…¥æ˜ å°„æ–‡ä»¶çš„ç¤ºä¾‹ä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<mappers>
 <mapper class="com.itheima.mapper.UserMapper" />
</mappers>
</li>
<li><p>ä½¿ç”¨åŒ…åå¼•å…¥<br>ä½¿ç”¨åŒ…åå¼•å…¥æ˜ å°„æ–‡ä»¶çš„ç¤ºä¾‹ä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚</p>
<mappers>
 <package name="com.itheima.mapper" />
</mappers></li>
</ol>
<h2 id="Mybatisæ˜ å°„æ–‡ä»¶ä¸­çš„å¸¸ç”¨å…ƒç´ "><a href="#Mybatisæ˜ å°„æ–‡ä»¶ä¸­çš„å¸¸ç”¨å…ƒç´ " class="headerlink" title="Mybatisæ˜ å°„æ–‡ä»¶ä¸­çš„å¸¸ç”¨å…ƒç´ "></a>Mybatisæ˜ å°„æ–‡ä»¶ä¸­çš„å¸¸ç”¨å…ƒç´ </h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y72.png"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y73.png"></p>
<h2 id="selectå…ƒç´ "><a href="#selectå…ƒç´ " class="headerlink" title="selectå…ƒç´ "></a>selectå…ƒç´ </h2><blockquote>
<p><select>å…ƒç´ çš„æŸ¥è¯¢ä½¿ç”¨<br><select>å…ƒç´ ç”¨æ¥æ˜ å°„æŸ¥è¯¢è¯­å¥ï¼Œå®ƒå¯ä»¥ä»æ•°æ®åº“ä¸­æŸ¥è¯¢æ•°æ®å¹¶è¿”å›ã€‚ä½¿ç”¨<select>å…ƒç´ æ‰§è¡ŒæŸ¥è¯¢æ“ä½œéå¸¸ç®€å•ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹:</p>
</blockquote>
<!--æŸ¥è¯¢æ“ä½œ-->
<p><select id="findUserByld" parameterType="Integer"
resultType="com.itheima.pojo.User"><br>select * from users where id &#x3D; #{id}<br></select><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y74.png"></p>
<h2 id="insertå…ƒç´ "><a href="#insertå…ƒç´ " class="headerlink" title="insertå…ƒç´ "></a>insertå…ƒç´ </h2><blockquote>
<p><insert>å…ƒç´ çš„æ’å…¥ä½¿ç”¨<br><insert>å…ƒç´ ç”¨äºæ˜ å°„æ’å…¥è¯­å¥ï¼Œåœ¨æ‰§è¡Œå®Œ<insert>å…ƒç´ ä¸­å®šä¹‰çš„SQLè¯­å¥åï¼Œä¼šè¿”å›æ’å…¥è®°å½•çš„æ•°é‡ã€‚ä½¿ç”¨<insert >å…ƒç´ æ‰§è¡Œæ’å…¥æ“ä½œéå¸¸ç®€å•ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹:</p>
</blockquote>
<!--æ’å…¥æ“ä½œ-->
<p><insert id="addUser"
parameterType="com.itheima.pojo.User"><br>insert into users(uid,uname,uage)values(#{uid}, #{uname},#{uage})<br></insert></p>
<blockquote>
<p>a.ä½¿ç”¨æ”¯æŒä¸»é”®è‡ªåŠ¨å¢é•¿çš„æ•°æ®åº“è·å–ä¸»é”®å€¼<br>å¦‚æœä½¿ç”¨çš„æ•°æ®åº“æ”¯æŒä¸»é”®è‡ªåŠ¨å¢é•¿(å¦‚MySQLå’ŒSQL Server)ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡keyPropertyå±æ€§æŒ‡å®šPOJOç±»çš„æŸä¸ªå±æ€§æ¥æ”¶ä¸»é”®è¿”å›å€¼ï¼ˆé€šå¸¸ä¼šè®¾ç½®åˆ°idå±æ€§ä¸Š)ï¼Œç„¶åå°†useGeneratedKeysçš„å±æ€§å€¼è®¾ç½®ä¸ºtrueã€‚<br><insert id="addUser" parameterType="com.itheima.pojo.User"
keyProperty="uid" useGeneratedKeys="true" ><br>insert into users(uid,uname,uage)values(#{uid},#{uname},#{uage})<br></insert></p>
</blockquote>
<blockquote>
<p>b.ä½¿ç”¨ä¸æ”¯æŒä¸»é”®è‡ªåŠ¨å¢é•¿çš„æ•°æ®åº“è·å–ä¸»é”®å€¼<br>ä½¿ç”¨MyBatisæä¾›çš„<selectKey>å…ƒç´ æ¥è‡ªå®šä¹‰ä¸»é”®ã€‚<br><selectKey
keyProperty="id"
resultType="Integer"
order="BEFORE"
statementType="PREPARED"><br>åœ¨ä¸Šè¿°<selectKey>å…ƒç´ çš„å±æ€§ä¸­ï¼Œorderå±æ€§å¯ä»¥è¢«è®¾ç½®ä¸ºBEFOREæˆ–AFTERã€‚å¦‚æœè®¾ç½®ä¸ºBEFOREï¼Œé‚£ä¹ˆå®ƒä¼šé¦–å…ˆæ‰§è¡Œ<selectKey>å…ƒç´ ä¸­çš„é…ç½®æ¥è®¾ç½®ä¸»é”®ï¼Œç„¶åæ‰§è¡Œæ’å…¥è¯­å¥;å¦‚æœè®¾ç½®ä¸ºAFTERï¼Œé‚£ä¹ˆå®ƒå…ˆæ‰§è¡Œæ’å…¥è¯­å¥ï¼Œç„¶åæ‰§è¡Œ<selectKey>å…ƒç´ ä¸­çš„é…ç½®å†…å®¹ã€‚</p>
</blockquote>
<h2 id="updateå…ƒç´ "><a href="#updateå…ƒç´ " class="headerlink" title="updateå…ƒç´ "></a>updateå…ƒç´ </h2><blockquote>
<p><update>å…ƒç´ çš„æ›´æ–°ä½¿ç”¨<br><update>å…ƒç´ ç”¨äºæ˜ å°„æ›´æ–°è¯­å¥ï¼Œå®ƒå¯ä»¥æ›´æ–°æ•°æ®åº“ä¸­çš„æ•°æ®ã€‚åœ¨æ‰§è¡Œå®Œå…ƒç´ ä¸­å®šä¹‰çš„SQLè¯­å¥åï¼Œä¼šè¿”å›æ›´æ–°çš„è®°å½•æ•°é‡ã€‚ä½¿ç”¨<update>å…ƒç´ æ‰§è¡Œæ›´æ–°æ“ä½œéå¸¸ç®€å•ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹:</p>
</blockquote>
<!--æ›´æ–°æ“ä½œ-->
<p><update id="updateUser"
parameterType="com.itheima.pojo.User"><br>update users set uname&#x3D; #{uname},uage &#x3D; #{uage} whereuid &#x3D; #{uid}<br></update></p>
<h2 id="deleteå…ƒç´ "><a href="#deleteå…ƒç´ " class="headerlink" title="deleteå…ƒç´ "></a>deleteå…ƒç´ </h2><blockquote>
<p><delete>å…ƒç´ çš„åˆ é™¤ä½¿ç”¨<br><delete>å…ƒç´ ç”¨äºæ˜ å°„åˆ é™¤è¯­å¥ï¼Œåœ¨æ‰§è¡Œå®Œ<delete>å…ƒç´ ä¸­çš„SQLè¯­å¥ä¹‹åï¼Œä¼šè¿”å›åˆ é™¤çš„è®°å½•æ•°é‡ã€‚ä½¿ç”¨<delete>å…ƒç´ æ‰§è¡Œåˆ é™¤æ“ä½œéå¸¸ç®€å•ï¼Œç¤ºä¾‹ä»£ç å¦‚ä¸‹æ‰€ç¤º:</p>
</blockquote>
<!--åˆ é™¤æ“ä½œ-->
<p>&lt;delete id&#x3D;â€deleteUserâ€ parameterType&#x3D;â€Integert&gt;<br>    delete from users where uid&#x3D;#{uid}<br></delete></p>
<p><delete>å…ƒç´ ä¸­ï¼Œé™¤äº†ä¸Šè¿°ç¤ºä¾‹ä»£ç ä¸­çš„å‡ ä¸ªå±æ€§å¤–ï¼Œè¿˜æœ‰å…¶ä»–ä¸€äº›å¯ä»¥é…ç½®çš„å±æ€§ï¼Œå¦‚flushCacheã€timeoutç­‰ã€‚<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y75.png"></p>
<h2 id="sqlå…ƒç´ "><a href="#sqlå…ƒç´ " class="headerlink" title="sqlå…ƒç´ "></a>sqlå…ƒç´ </h2><blockquote>
<p><sql>å…ƒç´ çš„ä½œç”¨<br>åœ¨ä¸€ä¸ªæ˜ å°„æ–‡ä»¶ä¸­ï¼Œé€šå¸¸éœ€è¦å®šä¹‰å¤šæ¡SQLè¯­å¥ï¼Œè¿™äº›SQLè¯­å¥çš„ç»„æˆå¯èƒ½æœ‰ä¸€éƒ¨åˆ†æ˜¯ç›¸åŒçš„(å¦‚å¤šæ¡selectè¯­å¥ä¸­éƒ½æŸ¥è¯¢ç›¸åŒçš„idã€usernameå­—æ®µ)ï¼Œå¦‚æœæ¯ä¸€ä¸ªSQLè¯­å¥éƒ½é‡å†™ä¸€éç›¸åŒçš„éƒ¨åˆ†ï¼ŒåŠ¿å¿…ä¼šå¢åŠ ä»£ç é‡ã€‚é’ˆå¯¹æ­¤é—®é¢˜ï¼Œå¯ä»¥åœ¨æ˜ å°„æ–‡ä»¶ä¸­ä½¿ç”¨MyBatisæ‰€æä¾›çš„<sql>å…ƒç´ ï¼Œå°†è¿™äº›SQLè¯­å¥ä¸­ç›¸åŒçš„ç»„æˆéƒ¨åˆ†æŠ½å–å‡ºæ¥ï¼Œç„¶ååœ¨éœ€è¦çš„åœ°æ–¹å¼•ç”¨ã€‚<br><sql>å…ƒç´ çš„ä½œç”¨æ˜¯å®šä¹‰å¯é‡ç”¨çš„SQLä»£ç ç‰‡æ®µï¼Œå®ƒå¯ä»¥è¢«åŒ…å«åœ¨å…¶ä»–è¯­å¥ä¸­ã€‚<sql>å…ƒç´ å¯ä»¥è¢«é™æ€åœ°(åœ¨åŠ è½½å‚æ•°æ—¶ï¼‰å‚æ•°åŒ–ï¼Œ<sql>å…ƒç´ ä¸åŒçš„å±æ€§å€¼é€šè¿‡åŒ…å«çš„å¯¹è±¡å‘ç”Ÿå˜åŒ–ã€‚</p>
</blockquote>
<blockquote>
<p>å®ç°ä¸€ä¸ªæ ¹æ®å®¢æˆ·idæŸ¥è¯¢å®¢æˆ·ä¿¡æ¯çš„SQLç‰‡æ®µ</p>
</blockquote>
<!--å®šä¹‰è¦æŸ¥è¯¢çš„è¡¨-->
<p><sql id= "someinclude">from <include refid="${include_target)"/></sql></p>
<!--å®šä¹‰æŸ¥è¯¢åˆ—--><sql id= "userColumns"> uid,uname,uage</sql>
<!--æ ¹æ®å®¢æˆ·idæŸ¥è¯¢å®¢æˆ·ä¿¡æ¯-->
<p><select id="findUserByld" parameterType="Integer"
resultType="com.itheima.pojo.User"> select<br><include refid="userColumns" /><br><include refid="someinclude"><br><property name="include_target" value="users" /></include><br>where uid &#x3D; #{uid}<br></select></p>
<h2 id="resultMapå…ƒç´ "><a href="#resultMapå…ƒç´ " class="headerlink" title="resultMapå…ƒç´ "></a>resultMapå…ƒç´ </h2><blockquote>
<p><resultMap>å…ƒç´ çš„ä½œç”¨<br><resultMap>å…ƒç´ è¡¨ç¤ºç»“æœæ˜ å°„é›†ï¼Œæ˜¯MyBatisä¸­æœ€é‡è¦ä¹Ÿæ˜¯åŠŸèƒ½æœ€å¼ºå¤§çš„å…ƒç´ ã€‚<resultMap>å…ƒç´ ä¸»è¦ä½œç”¨æ˜¯å®šä¹‰æ˜ å°„è§„åˆ™ã€æ›´æ–°çº§è”ä»¥åŠå®šä¹‰ç±»å‹è½¬åŒ–å™¨ç­‰ã€‚<br>é»˜è®¤æƒ…å†µä¸‹ï¼ŒMyBatisç¨‹åºåœ¨è¿è¡Œæ—¶ä¼šè‡ªåŠ¨å°†æŸ¥è¯¢åˆ°çš„æ•°æ®ä¸éœ€è¦è¿”å›çš„å¯¹è±¡çš„å±æ€§è¿›è¡ŒåŒ¹é…èµ‹å€¼ï¼ˆæ•°æ®è¡¨ä¸­çš„åˆ—åä¸å¯¹è±¡çš„å±æ€§åç§°å®Œå…¨ä¸€è‡´æ‰èƒ½åŒ¹é…æˆåŠŸå¹¶èµ‹å€¼)ã€‚ç„¶è€Œå®é™…å¼€å‘æ—¶ï¼Œæ•°æ®è¡¨ä¸­çš„åˆ—å’Œéœ€è¦è¿”å›çš„å¯¹è±¡çš„å±æ€§å¯èƒ½ä¸ä¼šå®Œå…¨ä¸€è‡´ï¼Œè¿™ç§æƒ…å†µä¸‹MyBatisä¸ä¼šè‡ªåŠ¨èµ‹å€¼ï¼Œè¿™æ—¶å°±éœ€è¦ä½¿ç”¨<resultMap>å…ƒç´ è¿›è¡Œç»“æœé›†æ˜ å°„ã€‚</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y76.png"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y77.png"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y78.png"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y79.png"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y80.png"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y81.png"></p>
<blockquote>
<p>å¤šå­¦ä¸€æ‹›:ä½¿ç”¨å·¥å…·ç±»åˆ›å»ºSqlSessionå¯¹è±¡</p>
</blockquote>
<p>åœ¨ä¸Šè¿°æ¡ˆä¾‹ä¸­ï¼Œç”±äºæ¯ä¸ªæ–¹æ³•æ‰§è¡Œæ—¶éƒ½éœ€è¦è¯»å–é…ç½®æ–‡ä»¶ï¼Œå¹¶æ ¹æ®é…ç½®æ–‡ä»¶çš„ä¿¡æ¯æ„å»ºSqlSessionFactoryå¯¹è±¡ã€åˆ›å»ºSqlSessionå¯¹è±¡ã€é‡Šæ”¾èµ„æºï¼Œè¿™å¯¼è‡´äº†å¤§é‡çš„é‡å¤ä»£ç ã€‚ä¸ºäº†ç®€åŒ–å¼€å‘ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¯»å–é…ç½®æ–‡ä»¶å’Œé‡Šæ”¾èµ„æºçš„ä»£ç å°è£…åˆ°ä¸€ä¸ªå·¥å…·ç±»ä¸­ï¼Œç„¶åé€šè¿‡å·¥å…·ç±»åˆ›å»ºSqlSessionå¯¹è±¡ã€‚</p>
<h2 id="æ¡ˆä¾‹ï¼šå‘˜å·¥ç®¡ç†ç³»ç»Ÿ"><a href="#æ¡ˆä¾‹ï¼šå‘˜å·¥ç®¡ç†ç³»ç»Ÿ" class="headerlink" title="æ¡ˆä¾‹ï¼šå‘˜å·¥ç®¡ç†ç³»ç»Ÿ"></a>æ¡ˆä¾‹ï¼šå‘˜å·¥ç®¡ç†ç³»ç»Ÿ</h2><ol>
<li>é¡¹ç›®æ­å»º:å»ºä¸€ä¸ªåç§°ä¸ºmybatisdemoçš„é¡¹ç›®ï¼Œé¡¹ç›®çš„å…·ä½“æ­å»ºè¿‡ç¨‹è¯·å‚è€ƒ1.3èŠ‚ã€‚</li>
<li>æ•°æ®å‡†å¤‡:åœ¨mybatisæ•°æ®åº“ä¸­åˆ›å»ºemployeeè¡¨ï¼Œå¹¶åœ¨employeeè¡¨ä¸­æ’å…¥å‡ æ¡æ•°æ®ã€‚<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">use mybatis;</span><br><span class="line">create table employee(</span><br><span class="line">id int primary key auto_increment,name varchar(20) not null,</span><br><span class="line">age int not null,</span><br><span class="line">position varchar(20) );</span><br><span class="line">insert into employee(id,name,age,position) values(null,&quot;å¼ ä¸‰&#x27;,20,å‘˜å·¥â€˜),</span><br><span class="line">(null,&#x27;æå››&#x27;,18, &#x27;å‘˜å·¥&#x27;),.(null,&#x27;ç‹äº”&#x27;,35,&#x27;ç»ç†&#x27;);</span><br></pre></td></tr></table></figure></li>
<li>POJOç±»å‡†å¤‡:åœ¨é¡¹ç›®src&#x2F;main&#x2F;javaç›®å½•ä¸‹åˆ›å»ºcom.itheima.pojoåŒ…ï¼Œåœ¨è¯¥åŒ…ä¸‹åˆ›å»ºæŒä¹…åŒ–ç±»Employeeï¼Œå¹¶åœ¨ç±»ä¸­å£°æ˜id(ç¼–å·ï¼‰.name(å§“å) ã€ age (å¹´é¾„ï¼‰å’Œposition(èŒä½)å±æ€§ï¼Œä»¥åŠå±æ€§å¯¹åº”çš„getter&#x2F;setteræ–¹æ³•ã€‚<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class Employee &#123;</span><br><span class="line">private Integer id;</span><br><span class="line">private String name;</span><br><span class="line">private Integer age;</span><br><span class="line">private String position;</span><br><span class="line">//çœç•¥getter/setteræ–¹æ³•</span><br><span class="line">@Override</span><br><span class="line">public String toString() &#123;</span><br><span class="line">return &quot;Employee&#123;&quot; + &quot;id=&quot; + id + &quot;, name=&quot; + name +</span><br><span class="line">&quot; , age=&quot; + age + &quot;, position=&quot; + position +&#x27;&#125;&#x27; ;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>ç¼–å†™æ˜ å°„æ–‡ä»¶:åœ¨é¡¹ç›®src&#x2F;main&#x2F;javaç›®å½•ä¸‹åˆ›å»ºcom.itheima.mapperåŒ…ï¼Œåœ¨com.itheima.mapperåŒ…ä¸‹åˆ›å»ºæ˜ å°„æ–‡ä»¶EmployeeMapper.xmlï¼Œè¯¥æ–‡ä»¶ä¸»è¦ç”¨äºå®ç°SQLè¯­å¥å’ŒJavaå¯¹è±¡ä¹‹é—´çš„æ˜ å°„ï¼Œéƒ¨åˆ†æ–‡ä»¶å†…å®¹å¦‚ä¸‹ã€‚</li>
</ol>
<p><mapper namespace="com.itheima.mapper.EmployeeMapper">&lt;select id&#x3D;â€findByldâ€parameterType&#x3D;â€Integerâ€<br>resultType&#x3D;â€com.itheima.pojo.Employeeâ€&gt; select * fromemployee where id &#x3D; #{id}<br></select><br><insert id="addEmployee"
parameterType="com.itheima.pojo.Employee">insert into employee(id,name,age,position)values<br>(#{id},#{name},#{age},#{position})<br></insert> </mapper></p>
<ol start="5">
<li>ä¿®æ”¹mybatis-config.xmlæ ¸å¿ƒé…ç½®æ–‡ä»¶:åœ¨mybatis-config.xmlæ˜ å°„æ–‡ä»¶çš„<mappers>å…ƒç´ ä¸‹æ·»åŠ EmployeeMapper.xmlæ˜ å°„æ–‡ä»¶è·¯å¾„çš„é…ç½®ï¼Œç”¨äºå°†EmployeeMapper.xmlæ˜ å°„æ–‡ä»¶åŠ è½½åˆ°ç¨‹åºä¸­ã€‚</li>
</ol>
<p><mapper
resource="com/itheima/mapper/EmployeeMapper.xml" ><br></mapper></p>
<ol start="6">
<li>ç¼–å†™MyBatisUtilså·¥å…·ç±»:åœ¨é¡¹ç›®src&#x2F;main&#x2F;javaç›®å½•ä¸‹åˆ›å»ºcom.itheima.utilsåŒ…ï¼Œåœ¨è¯¥åŒ…ä¸‹åˆ›å»ºMyBatisUtilså·¥å…·ç±»ï¼Œè¯¥ç±»ç”¨äºå°è£…è¯»å–é…ç½®æ–‡ä»¶ä¿¡æ¯çš„ä»£ç ã€‚<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public class MyBatisUtils </span><br><span class="line">private static SqlSessionFactory sqlSessionFactory = null;</span><br><span class="line">static &#123; try &#123;</span><br><span class="line">//ä½¿ç”¨MyBatisæä¾›çš„Resourcesç±»åŠ è½½MyBatisçš„é…ç½®æ–‡ä»¶</span><br><span class="line">Reader reader = Resources.getResourceAsReader(&quot;mybatis-</span><br><span class="line">config.xml&quot;);&#125;</span><br><span class="line">//æ„å»ºSqlSessionFactoryå·¥å‚</span><br><span class="line">sqlSessionFactory = new SqlSessionFactoryBuilder().build(reader);</span><br><span class="line">&#125; catch (Exception e) &#123; e.printStackTrace();&#125;</span><br><span class="line">public static SqlSession getSession)&#123;//è·å–SqlSessionå¯¹è±¡çš„é™æ€æ–¹æ³•</span><br><span class="line">return sqlSessionFactory.openSession();&#125;</span><br></pre></td></tr></table></figure></li>
<li>ç¼–å†™æµ‹è¯•ç±»<br>(1ï¼‰åœ¨é¡¹ç›®src&#x2F;test&#x2F;javaç›®å½•ä¸‹åˆ›å»ºTeståŒ…ï¼Œåœ¨TeståŒ…ä¸‹åˆ›å»ºMyBatisTestæµ‹è¯•ç±»ï¼Œç”¨äºç¨‹åºæµ‹è¯•ã€‚åœ¨MyBatisTestæµ‹è¯•ç±»ä¸­æ·»åŠ findByldTest()æ–¹æ³•ï¼Œç”¨äºæ ¹æ®idæŸ¥è¯¢å‘˜å·¥ä¿¡æ¯ã€‚<br>(2ï¼‰åœ¨MyBatisTestæµ‹è¯•ç±»ä¸­æ·»åŠ insertEmployeeTest()æ–¹æ³•ï¼Œç”¨äºæ’å…¥å‘˜å·¥ä¿¡æ¯ã€‚<br>(3)åœ¨MyBatisTestæµ‹è¯•ç±»ä¸­æ·»åŠ updateEmployeeTest()æ–¹æ³•ï¼Œç”¨äºæ›´æ–°å‘˜å·¥ä¿¡æ¯ã€‚<br>(4)ï¼‰åœ¨MyBatisTestæµ‹è¯•ç±»ä¸­æ·»åŠ deleteEmployeeTest()æ–¹æ³•ï¼Œç”¨äºåˆ é™¤å‘˜å·¥ä¿¡æ¯ã€‚</li>
</ol>
<h2 id="åŠ¨æ€SQLä¸­çš„å…ƒç´ "><a href="#åŠ¨æ€SQLä¸­çš„å…ƒç´ " class="headerlink" title="åŠ¨æ€SQLä¸­çš„å…ƒç´ "></a>åŠ¨æ€SQLä¸­çš„å…ƒç´ </h2><p>åœ¨å®é™…é¡¹ç›®çš„å¼€å‘ä¸­ï¼Œå¼€å‘äººå‘˜åœ¨ä½¿ç”¨JDBCæˆ–å…¶ä»–æŒä¹…å±‚æ¡†æ¶è¿›è¡Œå¼€å‘æ—¶ï¼Œç»å¸¸éœ€è¦æ ¹æ®ä¸åŒçš„æ¡ä»¶æ‹¼æ¥SQLè¯­å¥ï¼Œæ‹¼æ¥SQLè¯­å¥æ—¶è¿˜è¦ç¡®ä¿ä¸èƒ½é—æ¼å¿…è¦çš„ç©ºæ ¼ã€æ ‡ç‚¹ç¬¦å·ç­‰ï¼Œè¿™ç§ç¼–ç¨‹æ–¹å¼ç»™å¼€å‘äººå‘˜å¸¦æ¥äº†éå¸¸å¤§çš„ä¸ä¾¿ï¼Œè€ŒMyBatisæä¾›çš„SQLè¯­å¥åŠ¨æ€ç»„è£…åŠŸèƒ½ï¼Œæ°èƒ½å¾ˆå¥½çš„è§£å†³è¿™ä¸€é—®é¢˜ã€‚æœ¬ç« å°†å¯¹MyBatisæ¡†æ¶çš„åŠ¨æ€SQLè¿›è¡Œè¯¦ç»†è®²è§£ã€‚<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y82.png"></p>
<h2 id="ifå…ƒç´ "><a href="#ifå…ƒç´ " class="headerlink" title="ifå…ƒç´ "></a>ifå…ƒç´ </h2><blockquote>
<p><if>å…ƒç´ çš„åº”ç”¨<br>åœ¨MyBatisä¸­ï¼Œ<if>å…ƒç´ æ˜¯æœ€å¸¸ç”¨çš„åˆ¤æ–­å…ƒç´ ï¼Œå®ƒç±»ä¼¼äºJavaä¸­çš„ifè¯­å¥ï¼Œä¸»è¦ç”¨äºå®ç°æŸäº›ç®€å•çš„æ¡ä»¶åˆ¤æ–­ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šé€šè¿‡æŸä¸ªæ¡ä»¶æŸ¥è¯¢æŸä¸ªæ•°æ®ã€‚ä¾‹å¦‚ï¼Œè¦æŸ¥æ‰¾æŸä¸ªå®¢æˆ·çš„ä¿¡æ¯ï¼Œå¯ä»¥é€šè¿‡å§“åæˆ–è€…å¹´é¾„æ¥æŸ¥æ‰¾å®¢æˆ·ï¼Œä¹Ÿå¯ä»¥ä¸å¡«å†™å¹´é¾„ç›´æ¥é€šè¿‡å§“åæ¥æŸ¥æ‰¾å®¢æˆ·ï¼Œè¿˜å¯ä»¥éƒ½ä¸å¡«å†™è€ŒæŸ¥è¯¢å‡ºæ‰€æœ‰å®¢æˆ·ï¼Œæ­¤æ—¶å§“åå’Œå¹´é¾„å°±æ˜¯éå¿…é¡»æ¡ä»¶ã€‚ç±»ä¼¼äºè¿™ç§æƒ…å†µï¼Œåœ¨MyBatisä¸­å°±å¯ä»¥é€šè¿‡<if>å…ƒç´ æ¥å®ç°ã€‚</p>
</blockquote>
<ol>
<li><p>é€šè¿‡ä¸€ä¸ªå…·ä½“çš„æ¡ˆä¾‹æ¼”ç¤ºå•æ¡ä»¶åˆ¤æ–­ä¸‹<if>å…ƒç´ çš„ä½¿ç”¨ï¼Œæ¡ˆä¾‹å…·ä½“å®ç°æ­¥éª¤å¦‚ä¸‹ã€‚<br>æ•°æ®åº“å‡†å¤‡:åœ¨åç§°ä¸ºmybatisçš„æ•°æ®åº“ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªt_customerè¡¨ï¼Œå¹¶æ’å…¥å‡ æ¡æµ‹è¯•æ•°æ®ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">USE mybatis;</span><br><span class="line">CREATE TABLE t_customer (</span><br><span class="line">id int(32)PRIMARY KEY AUTO_INCREMENT,username varchar(50),</span><br><span class="line">jobs varchar(50),</span><br><span class="line">phone varchar(16));</span><br><span class="line">INSERT INTO t_customer VALUES (&#x27;1&#x27;, &#x27;joy&#x27;, &#x27;teacher&quot;, &#x27;13733333333&#x27;);</span><br><span class="line">INSERT INTO t_customer VALUES (2&#x27;, &#x27;jack&#x27;, &#x27;teacher&#x27;, &#x27;13522222222&#x27;);</span><br><span class="line">INSERT INTO t_customer VALUES (&#x27;3&#x27;, &#x27;tom&#x27;, &#x27;worker&#x27;, &#x27;15111111111&#x27;);</span><br></pre></td></tr></table></figure></li>
<li><p>POJOç±»å‡†å¤‡:åœ¨com.itheima.pojoåŒ…ä¸‹åˆ›å»ºæŒä¹…åŒ–ç±»Customerï¼Œåœ¨ç±»ä¸­å£°æ˜idã€usernameã€jobså’Œphoneå±æ€§ï¼ŒåŠå±æ€§å¯¹åº”çš„getter&#x2F;setteræ–¹æ³•ã€‚<br>public class Customer<br>private Integer id; private String username;l&#x2F;ä¸»é”®IDã€å®¢æˆ·åç§°private String jobs; private String phone;&#x2F;èŒä¸šã€ç”µè¯<br>&#x2F;çœç•¥getter&#x2F;setteræ–¹æ³•<br>@Override<br>public String toString() {<br>return â€œCustomer [id&#x3D;â€ + id + â€œ, username&#x3D;â€ + username + â€œ, jobs&#x3D;â€+ jobs + â€œ, phone&#x3D;â€ + phone + â€œ]â€;}</p>
</li>
<li><p>åˆ›å»ºæ˜ å°„æ–‡ä»¶:åœ¨é¡¹ç›®com.itheima.mapperåŒ…ä¸‹åˆ›å»ºæ˜ å°„æ–‡ä»¶CustomerMapper.xml,åœ¨æ˜ å°„æ–‡ä»¶ä¸­ï¼Œæ ¹æ®å®¢æˆ·å§“åå’Œå¹´é¾„ç»„åˆæ¡ä»¶æŸ¥è¯¢å®¢æˆ·ä¿¡æ¯ï¼Œä½¿ç”¨<if>å…ƒç´ ç¼–å†™è¯¥ç»„åˆæ¡ä»¶çš„åŠ¨æ€SQLã€‚</p>
</li>
</ol>
<p>&lt;!-è¯¥xmlæ–‡ä»¶ä¸­åªåˆ—å‡ºäº†ifå…ƒç´ çš„åŠ¨æ€SQLâ€“&gt;<br>&lt;if test&#x3D;â€username !&#x3D;null and username !&#x3D; â€œâ€œ&gt;<br>and username like concat(â€˜%â€™,#{username}, â€œâ€˜%â€™)</if><br>&lt;if test&#x3D;â€jobs !&#x3D;null and jobs !&#x3D; â€œâ€œ&gt;and jobs&#x3D; #{jobs}<br></if></p>
<ol start="4">
<li><p>ä¿®æ”¹æ ¸å¿ƒé…ç½®æ–‡ä»¶:åœ¨é…ç½®æ–‡ä»¶mybatis-config.xmlä¸­ï¼Œå¼•å…¥CustomerMapper.xmlæ˜ å°„æ–‡ä»¶ï¼Œå°†CustomerMapper.xmlæ˜ å°„æ–‡ä»¶åŠ è½½åˆ°ç¨‹åºä¸­ã€‚<br><mapper
resource="com/itheima/mapper/CustomerMapper.xml"></p>
</mapper>
</li>
<li><p>åˆ›å»ºè·å–SqlSessionå¯¹è±¡çš„å·¥å…·ç±»:æœ¬æ¡ˆä¾‹ä½¿ç”¨2.3.7èŠ‚çš„MyBatisUtilsç±»ä½œä¸ºè·å–SqlSessionå¯¹è±¡çš„å·¥å…·ç±»ã€‚é¦–å…ˆåœ¨é¡¹ç›®çš„src&#x2F;main&#x2F;javaç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªcom.itheima.utilsåŒ…ï¼Œç„¶åå°†2.3.7èŠ‚çš„MyBatisUtilsç±»å¤åˆ¶åˆ°è¯¥åŒ…ä¸‹å³å¯ã€‚</p>
</li>
<li><p>ç¼–å†™æµ‹è¯•ç±»:åœ¨æµ‹è¯•ç±»MyBatisTestä¸­ï¼Œç¼–å†™æµ‹è¯•æ–¹æ³•findCustomerByNameAndJobsTest()ï¼Œè¯¥æ–¹æ³•ç”¨äºæ ¹æ®å®¢æˆ·å§“åå’ŒèŒä¸šç»„åˆæ¡ä»¶æŸ¥è¯¢å®¢æˆ·ä¿¡æ¯åˆ—è¡¨ã€‚</p>
</li>
</ol>
<p>public class MyBatisTest {<br>@Test<br>public void findCustomerByNameAndJobsTest(){SqlSession session &#x3D;<br>MyBatisUtils.getSession();Customer customer &#x3D; new Customer();customer.setUsername(â€œjackâ€); customer.setJobs(â€œteacherâ€);<br>List<Customer> customers &#x3D; session.selectList(â€œ com.itheima.mapperâ€</p>
<ul>
<li>â€œ.CustomerMapper.findCustomerByNameAndJobsâ€,customer);for (Customer customer2 : customers) { System.out.printIn(customer2);}session.close();}<br>}</li>
</ul>
<h2 id="chooseã€whenã€otherwiseå…ƒç´ "><a href="#chooseã€whenã€otherwiseå…ƒç´ " class="headerlink" title="chooseã€whenã€otherwiseå…ƒç´ "></a>chooseã€whenã€otherwiseå…ƒç´ </h2><blockquote>
<p><choose> <when>otherwise&gt;ä½¿ç”¨åœºæ™¯<br>åœ¨ä½¿ç”¨<if>å…ƒç´ æ—¶ï¼Œåªè¦testå±æ€§ä¸­çš„è¡¨è¾¾å¼ä¸ºtrueï¼Œå°±ä¼šæ‰§è¡Œå…ƒç´ ä¸­çš„æ¡ä»¶è¯­å¥ï¼Œä½†æ˜¯åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæœ‰æ—¶åªéœ€è¦ä»å¤šä¸ªé€‰é¡¹ä¸­é€‰æ‹©ä¸€ä¸ªå»æ‰§è¡Œã€‚<br>ä¾‹å¦‚ä¸‹é¢çš„åœºæ™¯:â€œå½“å®¢æˆ·åç§°ä¸ä¸ºç©ºï¼Œåˆ™åªæ ¹æ®å®¢æˆ·åç§°è¿›è¡Œå®¢æˆ·ç­›é€‰;å½“å®¢æˆ·åç§°ä¸ºç©ºï¼Œè€Œå®¢æˆ·èŒä¸šä¸ä¸ºç©ºï¼Œåˆ™åªæ ¹æ®å®¢æˆ·èŒä¸šè¿›è¡Œå®¢æˆ·ç­›é€‰ã€‚å½“å®¢æˆ·åç§°å’Œå®¢æˆ·èŒä¸šéƒ½ä¸ºç©ºï¼Œåˆ™è¦æ±‚æŸ¥è¯¢å‡ºæ‰€æœ‰ç”µè¯ä¸ä¸ºç©ºçš„å®¢æˆ·ä¿¡æ¯ã€‚â€<br>é’ˆå¯¹ä¸Šé¢æƒ…å†µï¼Œä½¿ç”¨<if>å…ƒç´ è¿›è¡Œå¤„ç†æ˜¯ä¸åˆé€‚çš„ã€‚MyBatisæä¾›äº†<choose>.<when>ã€<otherwise>å…ƒç´ è¿›è¡Œå¤„ç†ï¼Œè¿™ä¸‰ä¸ªå…ƒç´ å¾€å¾€ç»„åˆåœ¨ä¸€èµ·ä½¿ç”¨ï¼Œä½œç”¨ç›¸å½“äºJavaè¯­è¨€ä¸­çš„ifâ€¦else ifâ€¦elseã€‚<br>ä½¿ç”¨<choose>ã€ <when>ã€<otherwise>å…ƒç´ ç»„åˆæ¼”ç¤ºä¸Šé¢åœºæ™¯çš„æƒ…å†µã€‚</p>
</blockquote>
<ol>
<li><p>åœ¨æ˜ å°„æ–‡ä»¶CustomerMapper.xmlä¸­ï¼Œæ·»åŠ ä½¿ç”¨<choose>ã€<when>ã€<otherwise>å…ƒç´ <br>æ‰§è¡Œä¸Šè¿°æƒ…å†µçš„åŠ¨æ€SQLã€‚</p>
<!--åªå±•ç¤ºä¸‰ä¸ªç»„åˆå…ƒç´ çš„éƒ¨åˆ†-->
<choose>
<when test="username !=null and username !=''">and username like concat('%',#{username}, "%')</when>
<when test="jobs !=null and jobs !=''">and jobs= #{jobs}</when>
<otherwise>and phone is not null</otherwise>
</choose>
</li>
<li><p>åœ¨æµ‹è¯•ç±»MyBatisTestä¸­ï¼Œç¼–å†™æµ‹è¯•æ–¹æ³•findCustomerByNameOrJobsTest()ï¼Œè¯¥æ–¹æ³•ç”¨äºæ ¹æ®å®¢æˆ·å§“åæˆ–èŒä¸šæŸ¥è¯¢å®¢æˆ·ä¿¡æ¯åˆ—è¡¨ã€‚</p>
</li>
</ol>
<p>public void findCustomerByNameOrJobsTest() {sqlSession session&#x3D;MyBatisUtils.getSession();<br>Customer customer&#x3D;new Customer();<br>customer.setUsername(â€œtomâ€);customer.setJobs(â€œteacherâ€);<br>List<Customer> customers&#x3D;session.selectList(â€œ com.itheima.mapperâ€+ â€œ.CustomerMapper.findCustomerByNameOrJobsâ€ ,customer);<br>for (Customer customer2 : customers) {<br>System.out.printIn(customer2);}<br>session.close();<br>}</p>
<h2 id="whereå…ƒç´ å’Œtrimå…ƒç´ "><a href="#whereå…ƒç´ å’Œtrimå…ƒç´ " class="headerlink" title="whereå…ƒç´ å’Œtrimå…ƒç´ "></a>whereå…ƒç´ å’Œtrimå…ƒç´ </h2><blockquote>
<p><where><trim>ä½¿ç”¨åœºæ™¯<br>åœ¨æ˜ å°„æ–‡ä»¶ä¸­ï¼Œç¼–å†™çš„SQLåé¢åŠ å…¥äº†â€œwhere 1&#x3D;1â€çš„æ¡ä»¶çš„è¯ï¼Œæ—¢ä¿è¯äº†whereåé¢çš„æ¡ä»¶æˆç«‹ï¼Œåˆé¿å…äº†whereåé¢ç¬¬ä¸€ä¸ªè¯æ˜¯andæˆ–è€…orä¹‹ç±»çš„å…³é”®å­—ã€‚<br>ä¾‹å¦‚ä¸‹é¢è¿™æ¡Mybatisæ‹¼æ¥å‡ºçš„SQLè¯­å¥æ˜¯ä¸æ­£ç¡®çš„ã€‚<br>select * from t_customer where and username like concat(â€˜%â€™,?ï¼Œâ€™%â€™) and jobs &#x3D; #{jobs}<br>ä¸Šè¿°SQLè¯­å¥ä¸­,whereåç›´æ¥è·Ÿçš„æ˜¯andï¼Œè¿™åœ¨è¿è¡Œæ—¶ä¼šæŠ¥SQLè¯­æ³•é”™è¯¯ï¼Œé’ˆå¯¹è¿™ç§æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨MyBatisæä¾›çš„<where>å…ƒç´ å’Œ<trim>å…ƒç´ è¿›è¡Œå¤„ç†ã€‚</p>
</blockquote>
<blockquote>
<p><where>å…ƒç´ <br><select id="findCustomerByNameAndJobs"
parameterType="com.itheima.pojo.Customer"
resultType="com.itheima.pojo.Customer"><br>select * from t_customer<br><where><br><if test="username !=null and username !=''"><br>and username like concat(â€˜%â€™ ,#{username}, â€˜%â€™)<br></if>&lt;if test&#x3D;â€â€jobs !&#x3D;null and jobs !&#x3D;â€â€&gt;<br>and jobs&#x3D; #{jobs}</if><br></where> </select></p>
</blockquote>
<blockquote>
<p><trim>å…ƒç´ <br><trim>å…ƒç´ ç”¨äºåˆ é™¤å¤šä½™çš„å…³é”®å­—ï¼Œå®ƒå¯ä»¥ç›´æ¥å®ç°<where>å…ƒç´ çš„åŠŸèƒ½ã€‚<trim>å…ƒç´ åŒ…å«4ä¸ªå±æ€§ã€‚<br>å±æ€§                                è¯´æ˜<br>prefix                     æŒ‡å®šç»™SQLè¯­å¥å¢åŠ çš„å‰ç¼€<br>prefixOverrides            æŒ‡å®šSQLè¯­å¥ä¸­è¦å»æ‰çš„å‰ç¼€å­—ç¬¦ä¸²<br>suffix                     æŒ‡å®šç»™SQLè¯­å¥å¢åŠ çš„åç¼€<br>suffixOverrides            æŒ‡å®šSQLè¯­å¥ä¸­è¦å»æ‰çš„åç¼€å­—ç¬¦ä¸²</p>
</blockquote>
<p><trim>å…ƒç´ <br>&lt;select id&#x3D;â€findCustomerByNameAndJobsâ€<br>parameterType&#x3D;â€com.itheima.pojo.Customerâ€resultType&#x3D;â€com.itheima.pojo.Customerâ€&gt;select * from t_customer<br><trim prefix="where" prefixOverrides="and" ><br><if test="username !=null and username !=''"><br>and username like concat(â€˜%â€™ ,#{username}, â€˜%â€™)</if><if test="jobs !=null and jobs !=''"><br>and jobs&#x3D; #{jobs}</if></trim><br></select></p>
<h2 id="æ›´æ–°å…ƒç´ "><a href="#æ›´æ–°å…ƒç´ " class="headerlink" title="æ›´æ–°å…ƒç´ "></a>æ›´æ–°å…ƒç´ </h2><blockquote>
<p><set>å…ƒç´ ä½¿ç”¨åœºæ™¯<br>åœ¨Hibernateæ¡†æ¶ä¸­ï¼Œå¦‚æœæƒ³è¦æ›´æ–°æŸä¸€ä¸ªå¯¹è±¡ï¼Œå°±éœ€è¦å‘é€æ‰€æœ‰çš„å­—æ®µç»™æŒä¹…åŒ–å¯¹è±¡ï¼Œç„¶è€Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹éƒ½æ˜¯æ›´æ–°æŸä¸€ä¸ªæˆ–å‡ ä¸ªå­—æ®µã€‚å¦‚æœæ›´æ–°çš„æ¯ä¸€æ¡æ•°æ®éƒ½è¦å°†å…¶æ‰€æœ‰çš„å±æ€§éƒ½æ›´æ–°ä¸€éï¼Œé‚£ä¹ˆæ‰§è¡Œæ•ˆç‡æ˜¯éå¸¸å·®çš„ã€‚ä¸ºäº†è§£å†³æ›´æ–°æ•°æ®çš„æ•ˆç‡é—®é¢˜ï¼ŒMyBatisæä¾›äº†<set>å…ƒç´ ã€‚<set>å…ƒç´ ä¸»è¦ç”¨äºæ›´æ–°æ“ä½œï¼Œå®ƒå¯ä»¥åœ¨åŠ¨æ€SQLè¯­å¥å‰è¾“å‡ºä¸€ä¸ªSETå…³é”®å­—ï¼Œå¹¶å°†SQLè¯­å¥ä¸­æœ€åä¸€ä¸ªå¤šä½™çš„é€—å·å»é™¤ã€‚<set>å…ƒç´ ä¸<if>å…ƒç´ ç»“åˆå¯ä»¥åªæ›´æ–°éœ€è¦æ›´æ–°çš„å­—æ®µã€‚</p>
</blockquote>
<ol>
<li>é€šè¿‡ä¸€ä¸ªæ¡ˆä¾‹æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨<set>å…ƒç´ æ›´æ–°æ•°æ®åº“çš„ä¿¡æ¯ï¼Œæ¡ˆä¾‹å…·ä½“æ­¥éª¤å¦‚ä¸‹ã€‚<br>åœ¨æ˜ å°„æ–‡ä»¶CustomerMapper.xmlä¸­ï¼Œæ·»åŠ ä½¿ç”¨<set>å…ƒç´ æ‰§è¡Œæ›´æ–°æ“ä½œçš„åŠ¨æ€SQLã€‚</li>
</ol>
<p><update id="updateCustomerBySet"
parameterType="com.itheima.pojo.Customer" >update t_customer<set><br><if test="username !=null and username !=''">username&#x3D;#{usernaime},</if><br><if test="jobs !=null and jobs !=''"> jobs&#x3D;#{jobs},</if><br><if test="phone !=null and phone !=''">phone&#x3D;#{phone},</if><br></set> where id&#x3D;#{id}<br></update></p>
<ol start="2">
<li>ç¼–å†™æµ‹è¯•æ–¹æ³•updateCustomerBySetTest()ã€‚<br>public void updateCustomerBySetTest()<br>SqlSession sqlSession &#x3D; MyBatisUtils.getSession);<br>Customer customer &#x3D; new Customer();<br>customer.setld(3);<br>customer.setPhone(â€œ13311111234â€);<br>int rows &#x3D; sqlSession.update(â€œcom.itheima.mapperâ€</li>
</ol>
<ul>
<li>â€œ.CustomerMapper.updateCustomerBySetâ€ ,customer);<br>if(rows &gt; 0) {System.out.println(â€œæ‚¨æˆåŠŸä¿®æ”¹äº†â€+rows+â€æ¡æ•°æ®!â€);}else { System.out.printIn(â€œæ‰§è¡Œä¿®æ”¹æ“ä½œå¤±è´¥!!! â€œ);<br>}sqlSession.commit();sqlSession.close();</li>
</ul>
<h2 id="foreachå…ƒç´ ä¸­çš„å±æ€§"><a href="#foreachå…ƒç´ ä¸­çš„å±æ€§" class="headerlink" title="foreachå…ƒç´ ä¸­çš„å±æ€§"></a>foreachå…ƒç´ ä¸­çš„å±æ€§</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y83.png"></p>
<ol>
<li><collection>å±æ€§çš„å–å€¼<br>åœ¨éå†å‚æ•°æ—¶ï¼Œcollection&gt;å±æ€§çš„å€¼æ˜¯å¿…é¡»æŒ‡å®šçš„ã€‚ä¸åŒæƒ…å†µä¸‹ï¼Œè¯¥å±æ€§çš„å–å€¼ä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ï¼Œä¸»è¦æœ‰ä»¥ä¸‹ä¸‰ç§æƒ…å†µã€‚</li>
<li>Listç±»å‹<br>è‹¥å…¥å‚ä¸ºå•å‚æ•°ä¸”å‚æ•°ç±»å‹æ˜¯ä¸€ä¸ªList,collectionå±æ€§å€¼ä¸ºlistã€‚</li>
<li>æ•°ç»„ç±»å‹<br>è‹¥å…¥å‚ä¸ºå•å‚æ•°ä¸”å‚æ•°ç±»å‹æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œcollectionå±æ€§å€¼ä¸ºarrayã€‚</li>
<li>Mapç±»å‹<br>è‹¥ä¼ å…¥å‚æ•°ä¸ºå¤šå‚æ•°ï¼Œå°±éœ€è¦æŠŠå‚æ•°å°è£…ä¸ºä¸€ä¸ªMapè¿›è¡Œå¤„ç†ï¼Œcollectionå±æ€§å€¼ä¸ºMapã€‚</li>
</ol>
<h2 id="foreachå…ƒç´ è¿­ä»£æ•°ç»„"><a href="#foreachå…ƒç´ è¿­ä»£æ•°ç»„" class="headerlink" title="foreachå…ƒç´ è¿­ä»£æ•°ç»„"></a>foreachå…ƒç´ è¿­ä»£æ•°ç»„</h2><p><foreach>å®ç°å…¥å‚ä¸ºæ•°ç»„ç±»å‹çš„éå†<br>ä¾‹å¦‚ï¼Œè¦ä»æ•°æ®è¡¨t_customerä¸­æŸ¥è¯¢å‡ºidä¸º1ã€2ã€3çš„å®¢æˆ·ä¿¡æ¯ï¼Œå°±å¯ä»¥åˆ©ç”¨æ•°ç»„ä½œä¸ºå‚æ•°ï¼Œå­˜å‚¨idçš„å±æ€§å€¼1ã€2ã€3ï¼Œå¹¶é€šè¿‡<foreach>å…ƒç´ è¿­ä»£æ•°ç»„å®Œæˆå®¢æˆ·ä¿¡æ¯çš„æ‰¹é‡æŸ¥è¯¢æ“ä½œã€‚</p>
<p><foreach>å…ƒç´ è¿­ä»£æ•°ç»„çš„å®ç°å…·ä½“å¦‚ä¸‹ã€‚</p>
<ol>
<li><p>åœ¨æ˜ å°„æ–‡ä»¶CustomerMapper.xmlä¸­ï¼Œæ·»åŠ ä½¿ç”¨<foreach>å…ƒç´ è¿­ä»£æ•°ç»„æ‰§è¡Œæ‰¹é‡æŸ¥è¯¢æ“ä½œçš„åŠ¨æ€SQLã€‚<br><select id="findByArray" parameterType="java.util.Arrays"
resultType="com.itheima.pojo.Customer">select * from t_customer whereid in<br><foreach item="id" index="index" collection="array"
open="(" separator="," close=")">#{id}</foreach><br>select&gt;</p>
</li>
<li><p>åœ¨æµ‹è¯•ç±»MyBatisTestä¸­ï¼Œç¼–å†™æµ‹è¯•æ–¹æ³•findByArrayTest()æ–¹æ³•ï¼Œå®ç°å®¢æˆ·ä¿¡æ¯çš„æ‰¹é‡æŸ¥è¯¢ã€‚<br>public void findByArrayTest() {<br>SqlSession session &#x3D; MyBatisUtils.getSession();&#x2F;&#x2F;è·å–SqlSessionInteger[]rolelds &#x3D; {2,3};&#x2F;&#x2F;åˆ›å»ºæ•°ç»„ï¼Œå°è£…æŸ¥è¯¢id<br>æ‰§è¡ŒSqlSessionçš„æŸ¥è¯¢æ–¹æ³•ï¼Œè¿”å›ç»“æœé›†<br>List<Customer> customers &#x3D; session.selectList(â€œ com.itheima.mapperâ€</p>
</li>
</ol>
<ul>
<li>â€œ.CustomerMapper.findByArrayâ€, rolelds);<br>for (Customer customer : customers) {System.out.printIn(customer);}session.close();<br>}</li>
</ul>
<h2 id="foreachå…ƒç´ è¿­ä»£List"><a href="#foreachå…ƒç´ è¿­ä»£List" class="headerlink" title="foreachå…ƒç´ è¿­ä»£List"></a>foreachå…ƒç´ è¿­ä»£List</h2><ol>
<li><foreach>å…ƒç´ è¿­ä»£Listçš„å®ç°æ­¥éª¤å…·ä½“å¦‚ä¸‹ã€‚<br>åœ¨æ˜ å°„æ–‡ä»¶CustomerMapper.xmlä¸­ï¼Œæ·»åŠ ä½¿ç”¨<foreach>å…ƒç´ è¿­ä»£Listé›†åˆæ‰§è¡Œæ‰¹é‡æŸ¥è¯¢æ“ä½œçš„åŠ¨æ€SQLã€‚<br><select id="findByList" parameterType="java.util.Arrays"
resultType="com.itheima.pojo.Customer"><br>select * from t_customer where id in<br>&lt;foreach item&#x3D;â€idâ€index&#x3D;â€indexâ€ collection&#x3D;â€listâ€<br>open&#x3D;â€(â€œ separator&#x3D;â€,â€ close&#x3D;â€)â€&gt;</li>
</ol>
<p>#{id}<br></foreach><br></select></p>
<ol start="2">
<li>åœ¨æµ‹è¯•ç±»MyBatisTestä¸­ï¼Œç¼–å†™æµ‹è¯•æ–¹æ³•findByListTest()ï¼Œç”¨äºæ‰¹é‡æŸ¥è¯¢å®¢æˆ·ä¿¡æ¯ã€‚<br>public void findByListTest() {<br>sqlSession session &#x3D; MyBatisUtils.getSession(;List<Integer> ids&#x3D;new ArrayList<Integer>();ids.add(1); ids.add(2);<br>List<Customer> customers &#x3D; session.selectList(â€œcom.itheima.mapperâ€</li>
</ol>
<ul>
<li>â€œ.CustomerMapper.findByListâ€â€,ids);<br>for (Customer customer : customers){System.out.println(customer);} session.close());}</li>
</ul>
<ol start="3">
<li>æ‰§è¡ŒMyBatisTestæµ‹è¯•ç±»çš„findByListTest()æ–¹æ³•ï¼Œæ§åˆ¶å°ä¼šè¾“å‡ºç»“æœã€‚</li>
</ol>
<h2 id="foreachå…ƒç´ è¿­ä»£Map"><a href="#foreachå…ƒç´ è¿­ä»£Map" class="headerlink" title="foreachå…ƒç´ è¿­ä»£Map"></a>foreachå…ƒç´ è¿­ä»£Map</h2><ol>
<li><p>ä¸‹é¢é€šè¿‡ä¸€ä¸ªæ¡ˆä¾‹æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨<foreach>å…ƒç´ è¿­ä»£Mapé›†åˆï¼Œå®ç°å¤šå‚æ•°å…¥å‚æŸ¥è¯¢æ“ä½œï¼Œæ¡ˆä¾‹å…·ä½“å®ç°æ­¥éª¤å¦‚ä¸‹ã€‚<br>åœ¨æ˜ å°„æ–‡ä»¶CustomerMapper.xmlä¸­ï¼Œæ·»åŠ ä½¿ç”¨<foreach>å…ƒç´ è¿­ä»£Mapé›†åˆæ‰§è¡Œæ‰¹é‡æŸ¥è¯¢æ“ä½œçš„åŠ¨æ€SQLã€‚<br><select id="findByMap" parameterType="java.util.Map"
resultType="com.itheima.pojo.Customer"><br>select * from t_customer where jobs&#x3D;#{jobs} and id in<br><foreach item="roleMap" index="index" collection="id" open="("
separator="," close=")">#{roleMap}</p>
</foreach>
</select>
</li>
<li><p>åœ¨æµ‹è¯•ç±»MyBatisTestä¸­ï¼Œç¼–å†™æµ‹è¯•æ–¹æ³•findByMapTest()ï¼Œç”¨äºæ‰¹é‡æŸ¥è¯¢å®¢æˆ·ä¿¡æ¯ã€‚<br>public void findByMapTest()<br>SqlSession session &#x3D; MyBatisUtils.getSession);List<Integer> ids&#x3D;new ArrayList<Integer>();ids.add(1); ids.add(2); ids.add(3);<br>Map&lt;String,Object&gt; conditionMap &#x3D; new HashMap&lt;String, Object&gt;);conditionMap.put(â€œidâ€ ,ids); conditionMap.put(â€œjobsâ€ ,â€teacherâ€);<br>List<Customer> customers &#x3D; session.selectList(â€œcom.itheima.mapperâ€+ â€œ.CustomerMapper.findByMapâ€ , conditionMap);<br>for (Customer customer : customers) { System.out.println(customer);}<br>session.close();</p>
</li>
</ol>
<h2 id="æ¡ˆä¾‹ï¼šå­¦ç”Ÿä¿¡æ¯æŸ¥è¯¢ç³»ç»Ÿ"><a href="#æ¡ˆä¾‹ï¼šå­¦ç”Ÿä¿¡æ¯æŸ¥è¯¢ç³»ç»Ÿ" class="headerlink" title="æ¡ˆä¾‹ï¼šå­¦ç”Ÿä¿¡æ¯æŸ¥è¯¢ç³»ç»Ÿ"></a>æ¡ˆä¾‹ï¼šå­¦ç”Ÿä¿¡æ¯æŸ¥è¯¢ç³»ç»Ÿ</h2><blockquote>
<p>å¤šæ¡ä»¶æŸ¥è¯¢<br>å½“ç”¨æˆ·è¾“å…¥çš„å­¦ç”Ÿå§“åä¸ä¸ºç©ºï¼Œåˆ™åªæ ¹æ®å­¦ç”Ÿå§“åè¿›è¡Œå­¦ç”Ÿä¿¡æ¯çš„æŸ¥è¯¢;<br>å½“ç”¨æˆ·è¾“å…¥çš„å­¦ç”Ÿå§“åä¸ºç©ºï¼Œè€Œå­¦ç”Ÿä¸“ä¸šä¸ä¸ºç©ºï¼Œåˆ™åªæ ¹æ®å­¦ç”Ÿä¸“ä¸šè¿›è¡Œå­¦ç”Ÿçš„æŸ¥è¯¢;<br>å•æ¡ä»¶æŸ¥è¯¢<br>æŸ¥è¯¢å‡ºæ‰€æœ‰idå€¼å°äº5çš„å­¦ç”Ÿçš„ä¿¡æ¯;</p>
</blockquote>
<ol>
<li>é¡¹ç›®æ­å»º:åˆ›å»ºä¸€ä¸ªåç§°ä¸ºmybatis-demo03çš„é¡¹ç›®ï¼Œé¡¹ç›®çš„å…·ä½“æ­å»ºè¿‡ç¨‹è¯·å‚è€ƒ1.3èŠ‚ã€‚</li>
<li>æ•°æ®å‡†å¤‡:åœ¨åç§°ä¸ºmybatisçš„æ•°æ®åº“ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªdm_studentè¡¨ï¼Œå¹¶æ’å…¥å‡ æ¡æµ‹è¯•æ•°æ®ã€‚</li>
</ol>
<p>USE mybatis;<br>CREATE TABLE dm_student(<br>id int(32)PRIMARY KEY AUTO_INCREMENT,name varchar(50),<br>major varchar(50),sno varchar(16) );#æ’å…¥7æ¡æ•°æ®ï¼Œå…¶ä»–çœç•¥<br>INSERT INTO dm_student VALUES (â€˜1â€™, å¼ ä¸‰â€™ï¼Œâ€™æ•°å­¦â€™ï¼Œâ€™10001â€™);</p>
<ol start="3">
<li><p>POJOç±»å‡†å¤‡:åœ¨é¡¹ç›®src&#x2F;main&#x2F;javaç›®å½•ä¸‹åˆ›å»ºcom.itheima.pojoåŒ…ï¼Œåœ¨è¯¥åŒ…ä¸‹åˆ›å»ºæŒä¹…åŒ–ç±»Studentï¼Œåœ¨ç±»ä¸­å£°æ˜idã€nameã€majorå’Œsnoå±æ€§ï¼Œä»¥åŠå±æ€§å¯¹åº”çš„getter&#x2F;setteræ–¹æ³•ã€‚<br>public class Student{&#x2F;&#x2F;å®šä¹‰å˜é‡ä¸»é”®idï¼Œå§“ånameï¼Œä¸“ä¸šmajorï¼Œå­¦å·sno<br>private Integer id; private String name;<br>private String major;<br>private String sno;&#x2F;çœç•¥getter&#x2F;setteræ–¹æ³•@Override<br>public String toString0 {<br>returnâ€Studentâ€ +â€œid&#x3D;â€ + id + â€œ, name&#x3D; â€œâ€+ name + â€œâ€ï¼Œmajor&#x3D;â€ + major + â€œ, sno&#x3D;â€ + sno + }â€™;ã€‹}</p>
</li>
<li><p>åˆ›å»ºæ˜ å°„æ–‡ä»¶:åœ¨é¡¹ç›®src&#x2F;main&#x2F;javaç›®å½•ä¸‹åˆ›å»ºcom.itheima.mapperåŒ…ï¼Œåœ¨è¯¥åŒ…ä¸‹åˆ›å»ºæ˜ å°„æ–‡ä»¶StudentMapper.xmlï¼Œç¼–å†™æ ¹æ®å­¦ç”Ÿå§“åå’Œä¸“ä¸šç»„åˆæˆçš„æ¡ä»¶æŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯çš„åŠ¨æ€SQLã€‚<br><mapper namespace="com.itheima.mapper.StudentMapper"><select id= "findStudentByNameAndMajor"
parameterType= â€œcom.itheima.pojo.Studentâ€ resultType="com.itheima.pojo.Student"><br>select * from dm_student where 1&#x3D;1<choose></p>
<when test="name !=null and name !=''">
and name like concat(%' ,#{name}, '%')</when>
<when test="major !=null and major !=''"> and major= #{major}</when><otherwise> and sno is not null</otherwise> </choose>
</select>
</mapper>
</li>
<li><p>ä¿®æ”¹mybatis-config.xmlæ ¸å¿ƒé…ç½®æ–‡ä»¶:åœ¨mybatis-config.xmlæ˜ å°„æ–‡ä»¶çš„<mappers>å…ƒç´ ä¸‹æ·»åŠ StudentMapper.xmlæ˜ å°„æ–‡ä»¶è·¯å¾„çš„é…ç½®ï¼Œç”¨äºå°†<br>StudentMapper.xmlæ˜ å°„æ–‡ä»¶åŠ è½½åˆ°ç¨‹åºä¸­ã€‚å…·ä½“é…ç½®ä»£ç å¦‚ä¸‹ã€‚</p>
<mapper resource="com/itheima/mapper/StudentMapper.xml" />
</li>
<li><p>ç¼–å†™MyBatisUtilså·¥å…·ç±»:åœ¨é¡¹ç›®src&#x2F;main&#x2F;javaç›®å½•ä¸‹åˆ›å»ºcom.itheima.utilsåŒ…ï¼Œåœ¨com.itheima.utilsåŒ…ä¸‹åˆ›å»ºMyBatisUtilså·¥å…·ç±»ï¼Œè¯¥ç±»ç”¨äºå°è£…è¯»å–é…ç½®æ–‡ä»¶ä¿¡æ¯çš„ä»£ç ã€‚</p>
<!-- public class MyBatisUtils {
private static SqlSessionFactory sqlSessionFactory = null;static {
try {
Reader reader = Resources.getResourceAsReader(â€œmybatis-config.xmlâ€);SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(reader);
}catch (Exception e) {e.printStackTrace);}
public static SqlSession getSession() {
return sqlSessionFactory.openSession();} -->
</li>
<li><p>ç¼–å†™æµ‹è¯•æ–¹æ³•:åœ¨æµ‹è¯•ç±»MyBatisTestä¸­ï¼Œç¼–å†™æµ‹è¯•æ–¹æ³•<br>findStudentByNameOrMajorTest()ï¼Œè¯¥æ–¹æ³•ç”¨äºæ ¹æ®å­¦ç”Ÿå§“åæˆ–ä¸“ä¸šæŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯ã€‚<br>public void findStudentByNameOrMajorTest() {<br>SqlSession session&#x3D;MyBatisUtils.getSession();Student student&#x3D;new Student();<br>student.setName(â€œå¼ ä¸‰â€);<br>student.setMajor(â€œè‹±è¯­â€);<br>List<Student> students &#x3D; session.selectList(â€œcom.itheima.mapperâ€</p>
</li>
</ol>
<ul>
<li>â€œ.StudentMapper.findStudentByNameAndMajorâ€,student);for (Student student2 : students) {System.out.printIn(student2);}session.close();}</li>
</ul>
<ol start="8">
<li>æŸ¥çœ‹è¿è¡Œç»“æœ:æ‰§è¡Œæµ‹è¯•ç±»MyBatisTestçš„findStudentByNameOrMajorTest()æ–¹æ³•ï¼Œæ§åˆ¶å°ä¼šè¾“å‡ºç»“æœã€‚</li>
</ol>
<h2 id="å…³è”æ˜ å°„æ¦‚è¿°"><a href="#å…³è”æ˜ å°„æ¦‚è¿°" class="headerlink" title="å…³è”æ˜ å°„æ¦‚è¿°"></a>å…³è”æ˜ å°„æ¦‚è¿°</h2><ul>
<li>ä¸€å¯¹ä¸€å…³ç³»<br>ä¸€ä¸ªæ•°æ®è¡¨ä¸­çš„ä¸€æ¡è®°å½•æœ€å¤šå¯ä»¥å’Œå¦ä¸€ä¸ªæ•°æ®è¡¨ä¸­çš„ä¸€æ¡è®°å½•ç›¸å…³ã€‚ä¾‹å¦‚ï¼Œç°å®ç”Ÿæ´»ä¸­å­¦ç”Ÿä¸æ ¡å›­å¡å°±å±äºä¸€å¯¹ä¸€çš„å…³ç³»ï¼Œä¸€ä¸ªå­¦ç”Ÿåªèƒ½æ‹¥æœ‰ä¸€å¼ æ ¡å›­å¡ï¼Œä¸€å¼ æ ¡å›­å¡åªèƒ½å±äºä¸€ä¸ªå­¦ç”Ÿã€‚</li>
<li>ä¸€å¯¹å¤šå…³ç³»<br>ä¸»é”®æ•°æ®è¡¨ä¸­çš„ä¸€æ¡è®°å½•å¯ä»¥å’Œå¦å¤–ä¸€ä¸ªæ•°æ®è¡¨çš„å¤šæ¡è®°å½•ç›¸å…³ã€‚ä½†å¦å¤–ä¸€ä¸ªæ•°æ®è¡¨ä¸­çš„è®°å½•åªèƒ½ä¸ä¸»é”®æ•°æ®è¡¨ä¸­çš„æŸä¸€æ¡è®°å½•ç›¸å…³ã€‚ä¾‹å¦‚ï¼Œç°å®ä¸­ç­çº§ä¸å­¦ç”Ÿçš„å…³ç³»å°±å±äºä¸€å¯¹å¤šçš„å…³ç³»ï¼Œä¸€ä¸ªç­çº§å¯ä»¥æœ‰å¾ˆå¤šå­¦ç”Ÿï¼Œä½†ä¸€ä¸ªå­¦ç”Ÿåªèƒ½å±äºä¸€ä¸ªç­çº§ã€‚</li>
<li>å¤šå¯¹å¤šå…³ç³»<br>ä¸€ä¸ªæ•°æ®è¡¨ä¸­çš„ä¸€æ¡è®°å½•å¯ä»¥ä¸å¦å¤–ä¸€ä¸ªæ•°æ®è¡¨ä»»æ„æ•°é‡çš„è®°å½•ç›¸å…³ï¼Œå¦å¤–ä¸€ä¸ªæ•°æ®è¡¨ä¸­çš„ä¸€æ¡è®°å½•ä¹Ÿå¯ä»¥ä¸æœ¬æ•°æ®è¡¨ä¸­ä»»æ„æ•°é‡çš„è®°å½•ç›¸å…³ã€‚ä¾‹å¦‚ï¼Œç°å®ä¸­å­¦ç”Ÿä¸æ•™å¸ˆå±äºå¤šå¯¹å¤šçš„å…³ç³»ï¼Œä¸€åå­¦ç”Ÿå¯ä»¥ç”±å¤šåæ•™å¸ˆæˆè¯¾ï¼Œä¸€åæ•™å¸ˆå¯ä»¥ä¸ºå¤šåå­¦ç”Ÿæˆè¯¾ã€‚<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y84.png"></li>
</ul>
<h2 id="ä¸€å¯¹ä¸€æŸ¥è¯¢"><a href="#ä¸€å¯¹ä¸€æŸ¥è¯¢" class="headerlink" title="ä¸€å¯¹ä¸€æŸ¥è¯¢"></a>ä¸€å¯¹ä¸€æŸ¥è¯¢</h2><p><association>å…ƒç´ <br>åœ¨MyBatisä¸­ï¼Œé€šè¿‡<association>å…ƒç´ æ¥å¤„ç†ä¸€å¯¹ä¸€å…³è”å…³ç³»ã€‚<association>å…ƒç´ æä¾›äº†ä¸€ç³»åˆ—å±æ€§ç”¨äºç»´æŠ¤æ•°æ®è¡¨ä¹‹é—´çš„å…³ç³»ã€‚<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y85.png"><br><association>å…ƒç´ çš„é…ç½®æ–¹å¼<br><association>å…ƒç´ æ˜¯<resultMap>å…ƒç´ çš„å­å…ƒç´ ï¼Œå®ƒæœ‰ä¸¤ç§é…ç½®æ–¹å¼ï¼ŒåµŒå¥—æŸ¥è¯¢æ–¹å¼å’ŒåµŒå¥—ç»“æœæ–¹å¼ï¼Œä¸‹é¢å¯¹è¿™ä¸¤ç§é…ç½®æ–¹å¼åˆ†åˆ«è¿›è¡Œä»‹ç»ã€‚</p>
<ol>
<li>åµŒå¥—æŸ¥è¯¢æ–¹å¼<br>åµŒå¥—æŸ¥è¯¢æ˜¯æŒ‡é€šè¿‡æ‰§è¡Œå¦å¤–ä¸€æ¡SQLæ˜ å°„è¯­å¥æ¥è¿”å›é¢„æœŸçš„å¤æ‚ç±»å‹ã€‚<br><association property="card" column="card_id"
javaType="com.itheima.pojo.ldCard"
select="com.itheima.mapper.ldCardMapper.findCodeByld" /></li>
</ol>
<p>2.åµŒå¥—ç»“æœæ–¹å¼<br>åµŒå¥—ç»“æœæ˜¯ä½¿ç”¨åµŒå¥—ç»“æœæ˜ å°„æ¥å¤„ç†é‡å¤çš„è”åˆç»“æœçš„å­é›†ã€‚<br><association property="card"
javaType="com.itheima.pojo.ldCard"><id property="id" column="card_id" /><result property="code" column="code" /></association></p>
<p>æ¥ä¸‹æ¥å°±ä»¥ä¸ªäººå’Œèº«ä»½è¯ä¹‹é—´çš„ä¸€å¯¹ä¸€å…³è”å…³ç³»ä¸ºä¾‹ï¼Œå¯¹MyBatisä¸­ä¸€å¯¹ä¸€å…³è”å…³ç³»çš„å¤„ç†è¿›è¡Œè¯¦ç»†è®²è§£ã€‚æ¡ˆä¾‹å…·ä½“å®ç°æ­¥éª¤å¦‚ä¸‹ã€‚</p>
<ul>
<li>STEP 01 åˆ›å»ºæ•°æ®è¡¨:åœ¨mybatisæ•°æ®åº“ä¸­åˆ†åˆ«åˆ›å»ºåä¸ºtb_idcardçš„èº«ä»½è¯æ•°æ®è¡¨å’Œåç§°ä¸ºtb personçš„ä¸ªäººæ•°æ®è¡¨ï¼ŒåŒæ—¶é¢„å…ˆæ’å…¥å‡ æ¡æ•°æ®ã€‚<br>USE mybatis;</li>
</ul>
<p>#åˆ›å»ºä¸€ä¸ªåç§°ä¸ºtb_idcardçš„è¡¨CREATE TABLE tb_idcard(<br>id INT PRIMARY KEY AUTO_INCREMENT,CODE VARCHAR(18));<br>#æ’å…¥2æ¡æ•°æ®<br>INSERT INTO tb_idcard(CODE)VALUES(152221198711020624â€™);<br>#åˆ›å»ºä¸€ä¸ªåç§°ä¸ºtb_personçš„è¡¨ï¼ŒåŒç†</p>
<ul>
<li><p>STEP 02<br>æŒä¹…åŒ–ç±»IDCardç±»:åœ¨é¡¹ç›®çš„com.itheima.pojoåŒ…ä¸‹åˆ›å»ºæŒä¹…åŒ–ç±»ldCardï¼Œç”¨äºå°è£…èº«ä»½è¯å±æ€§ã€‚<br>public class ldCard {<br>private lnteger id;<br>&#x2F;&#x2F;ä¸»é”®id<br>private String code;<br>&#x2F;&#x2F;èº«ä»½è¯å·ç <br>&#x2F;çœç•¥getter&#x2F;setteræ–¹æ³•}<br>@Override<br>public String toString0) {<br>return â€œldCard [id&#x3D;â€ + id + â€œ , code&#x3D;â€ + code + â€œ]â€;<br>}</p>
</li>
<li><p>STEP 03<br>æŒä¹…åŒ–ç±»Personç±»:åœ¨é¡¹ç›®çš„com.itheima.pojoåŒ…ä¸‹åˆ›å»ºæŒä¹…åŒ–ç±»Personï¼Œç”¨äºå°è£…ä¸ªäººå±æ€§ã€‚<br>public class Person {<br>private Integer id;<br>ä¸»é”®id<br>private String name;<br>&#x2F;å§“å<br>private Integer age;<br>&#x2F;å¹´é¾„<br>private String sex;<br>&#x2F;æ€§åˆ«<br>private ldCard card;<br>&#x2F;äººå‘˜å…³è”çš„è¯ä»¶<br>&#x2F;çœç•¥getter&#x2F;setteræ–¹æ³•ï¼Œé‡å†™çš„toString()æ–¹æ³•}</p>
</li>
<li><p>STEP 04<br>ç¼–å†™ldCardMapper.xmlæ–‡ä»¶:åœ¨com.itheima.mapperåŒ…ä¸­ï¼Œåˆ›å»ºèº«ä»½è¯æ˜ å°„æ–‡ä»¶ldCardMapper.xmlï¼Œå¹¶åœ¨æ˜ å°„æ–‡ä»¶ä¸­ç¼–å†™ä¸€å¯¹ä¸€å…³è”æ˜ å°„æŸ¥è¯¢çš„é…ç½®ä¿¡æ¯ã€‚</p>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN""http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<p><mapper namespace="com.itheima.mapper.IdCardMapper"><!--æ ¹æ®idæŸ¥è¯¢è¯ä»¶ä¿¡æ¯--><br>&lt;select id&#x3D;â€findCodeByldâ€ parameterType&#x3D;â€Integerâ€resultType&#x3D;â€IdCardâ€&gt;<br>SELECT * from tb_idcard where id&#x3D;#{id}</p>
</select>
</mapper>
</li>
<li><p>STEP 05<br>ç¼–å†™PersonMapper.xmlæ–‡ä»¶:åœ¨com.itheima.mapperåŒ…ä¸­ï¼Œåˆ›å»ºäººå‘˜æ˜ å°„æ–‡ä»¶PersonMapper.xmlï¼Œå¹¶åœ¨æ˜ å°„æ–‡ä»¶ä¸­ç¼–å†™ä¸€å¯¹ä¸€å…³è”æ˜ å°„æŸ¥è¯¢çš„é…ç½®ä¿¡æ¯ã€‚<br><select id="findPersonByld" parameterType="Integer"
resultMap="IdCardWithPersonResult"><br>SELECT * from tb_person where id&#x3D;#{id}</select></p>
<resultMap type="Person" id="ldCardWithPersonResult">
<id property="id" column="id"/>
<result property="name" column="name" /><result property="age" column="age"/><result property="sex" column="sex"/>
<association property="card" column="card_id" javaType="IdCard"
select="com.itheima.mapper.ldCardMapper.findCodeByld" /></resultMap>
</li>
<li><p>STEP 06<br>å¼•å…¥æ˜ å°„æ–‡ä»¶:åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶mybatis-config.xmlä¸­ï¼Œå¼•å…¥ldCardMapper.xmlå’ŒPersonMapper.xmlæ˜ å°„æ–‡ä»¶ï¼Œå¹¶ä¸ºcom.itheima.pojoåŒ…ä¸‹çš„æ‰€æœ‰å®ä½“ç±»å®šä¹‰åˆ«åã€‚</p>
<!--åªå±•ç¤ºäº†å®šä¹‰åˆ«åå’Œmappingæ–‡ä»¶ä¸­é…ç½®æ–°æ·»åŠ çš„éƒ¨åˆ†-->
<!--ä½¿ç”¨æ‰«æåŒ…çš„å½¢å¼å®šä¹‰åˆ«å-->
<typeAliases>
<package name="com.itheima.pojo"/>
</typeAliases>
<mappers>
<mapper
resource="com/itheima/mapper/ldCardMapper.xml"/>
<mapper
resource="com/itheima/mapper/PersonMapper.xml"/></mappers>
</li>
<li><p>STEP 07<br>ç¼–å†™æµ‹è¯•ç±»:åœ¨æµ‹è¯•ç±»MyBatisTestä¸­ï¼Œç¼–å†™æµ‹è¯•æ–¹æ³•findPersonByldTest()ã€‚<br>public void findPersonByldTest() {<br>l&#x2F;1ã€é€šè¿‡å·¥å…·ç±»è·å–SqlSessionå¯¹è±¡<br>SqlSession session &#x3D; MyBatisUtils.getSession();&#x2F;&#x2F;â’‰.ä½¿ç”¨MyBatisåµŒå¥—æŸ¥è¯¢çš„æ–¹å¼æŸ¥è¯¢idä¸º1çš„äººçš„ä¿¡æ¯<br>Person person &#x3D; session.selectOne(â€œ com.itheima.mapper.â€<br>+â€PersonMapper.findPersonByldâ€,1);<br>l&#x2F;3ã€è¾“å‡ºæŸ¥è¯¢ç»“æœä¿¡æ¯<br>System.out.println(person);&#x2F;&#x2F;4ã€å…³é—­SqlSession<br>session.close();}</p>
</li>
<li><p>å¤šå­¦ä¸€æ‹›:MyBatiså»¶è¿ŸåŠ è½½çš„é…ç½®<br>åœ¨ä½¿ç”¨MyBatisåµŒå¥—æŸ¥è¯¢æ–¹å¼è¿›è¡ŒMyBatiså…³è”æ˜ å°„æŸ¥è¯¢æ—¶ï¼Œä½¿ç”¨MyBatisçš„å»¶è¿ŸåŠ è½½åœ¨ä¸€å®šç¨‹åº¦ä¸Šå¯ä»¥é™ä½è¿è¡Œæ¶ˆè€—å¹¶æé«˜æŸ¥è¯¢æ•ˆç‡ã€‚MyBatisé»˜è®¤æ²¡æœ‰å¼€å¯å»¶è¿ŸåŠ è½½ï¼Œéœ€è¦åœ¨mybatis-config.xmlä¸­çš„<settings>å…ƒç´ å†…è¿›è¡Œé…ç½®ã€‚</p>
<settings>
<!--æ‰“å¼€å»¶è¿ŸåŠ è½½çš„å¼€å…³-->
<setting name="lazyLoadingEnabled" value="true"/><!--å°†ç§¯æåŠ è½½æ”¹ä¸ºæ¶ˆæ¯åŠ è½½ï¼Œå³æŒ‰éœ€åŠ è½½-->
<setting name="aggressiveLazyLoading" value="false" /></settinas></li>
</ul>
<h2 id="ä¸€å¯¹å¤šæŸ¥è¯¢"><a href="#ä¸€å¯¹å¤šæŸ¥è¯¢" class="headerlink" title="ä¸€å¯¹å¤šæŸ¥è¯¢"></a>ä¸€å¯¹å¤šæŸ¥è¯¢</h2><p><collection>å…ƒç´ <br>åœ¨MyBatisä¸­ï¼Œé€šè¿‡<collection>å…ƒç´ æ¥å¤„ç†ä¸€å¯¹å¤šå…³è”å…³ç³»ã€‚<collection>å…ƒç´ çš„å±æ€§å¤§éƒ¨åˆ†ä¸<association>å…ƒç´ ç›¸åŒï¼Œä½†å…¶è¿˜åŒ…å«ä¸€ä¸ªç‰¹æ®Šå±æ€§ä¸€ofType.ofTypeå±æ€§ä¸javaTypeå±æ€§å¯¹åº”ï¼Œå®ƒç”¨äºæŒ‡å®šå®ä½“ç±»å¯¹è±¡ä¸­é›†åˆç±»å±æ€§æ‰€åŒ…å«çš„å…ƒç´ çš„ç±»å‹ã€‚<br>a.åµŒå¥—æŸ¥è¯¢æ–¹å¼<br><collection property="ordersList"
column="id"
ofType="com.itheima.pojo.Orders"
select=" com.itheima.mapper.OrdersMapper.selectOrders" /><br>b.åµŒå¥—ç»“æœæ–¹å¼<br><collection property="ordersList" ofType="com.itheima.pojo.Orders"><br><id property="id" column="orders_id" /><br><result property="number" column="number" /><br></collection></p>
<p>æ¥ä¸‹æ¥ä»¥ç”¨æˆ·å’Œè®¢å•ä¹‹é—´çš„ä¸€å¯¹å¤šå…³è”å…³ç³»ä¸ºä¾‹ï¼Œè¯¦ç»†è®²è§£å¦‚ä½•åœ¨MyBatisä¸­å¤„ç†ä¸€å¯¹å¤šå…³è”å…³ç³»ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ã€‚<br>åœ¨åä¸ºmybatisçš„æ•°æ®åº“ä¸­ï¼Œåˆ›å»ºä¸¤ä¸ªæ•°æ®è¡¨ï¼Œåˆ†åˆ«ä¸ºtb_user(ç”¨æˆ·æ•°æ®è¡¨)å’Œ</p>
<ul>
<li>STEP 01<br>tb_orders(è®¢å•è¡¨)ï¼ŒåŒæ—¶åœ¨è¡¨ä¸­é¢„å…ˆæ’å…¥å‡ æ¡æµ‹è¯•æ•°æ®ã€‚<br>uSE mybatis;</li>
</ul>
<p>#åˆ›å»ºä¸€ä¸ªåç§°ä¸ºtb_userçš„è¡¨CREATE TABLE tb_user (<br>id int(32)PRIMARY KEY AUTO_INCREMENT,username varchar(32),<br>address varchar(256));#æ’å…¥3æ¡æ•°æ®ï¼Œå…¶ä»–è¯­å¥çœç•¥<br>INSERT INTO tb_user VALUES (â€˜1â€™, â€œå°æ˜â€,â€™åŒ—äº¬â€™);#åˆ›å»ºä¸€ä¸ªåç§°ä¸ºtb_ordersçš„è¡¨ï¼ŒåŒç†</p>
<ul>
<li><p>STEP 02<br>åœ¨com.itheima.pojoåŒ…ä¸­ï¼Œåˆ›å»ºæŒä¹…åŒ–ç±»Ordersï¼Œå¹¶åœ¨ç±»ä¸­å®šä¹‰è®¢å•idå’Œè®¢å•ç¼–å·ç­‰å±æ€§ã€‚<br>public class Orders {<br>private lnteger id;<br>&#x2F;&#x2F;è®¢å•id<br>private String number;<br>&#x2F;&#x2F;è®¢å•ç¼–å·<br>&#x2F;çœç•¥getter&#x2F;setteræ–¹æ³•}<br>@Override<br>public String toString0 {<br>return â€œOrders [id&#x3D;â€ + id + â€œ, number&#x3D;â€ + number + â€œ]â€;}</p>
</li>
<li><p>STEP 03<br>åœ¨com.itheima.pojoåŒ…ä¸­ï¼Œåˆ›å»ºæŒä¹…åŒ–ç±»Usersï¼Œå¹¶åœ¨ç±»ä¸­å®šä¹‰ç”¨æˆ·ç¼–å·ã€ç”¨æˆ·å§“åã€ç”¨æˆ·åœ°å€ä»¥åŠç”¨æˆ·å…³è”çš„è®¢å•ç­‰å±æ€§ã€‚<br>public class Users {<br>private Integer id;<br>&#x2F;ç”¨æˆ·ç¼–å·<br>private String username;<br>&#x2F;&#x2F;ç”¨æˆ·å§“å<br>private String address;<br>&#x2F;ç”¨æˆ·åœ°å€<br>private List<Orders> ordersList;&#x2F;&#x2F;ç”¨æˆ·å…³è”çš„è®¢å•&#x2F;çœç•¥getter&#x2F;setteræ–¹æ³•}<br>@Override<br>public String toString) {<br>return â€œUser [id&#x3D;â€ + id + â€œ, username&#x3D;â€ + username+ â€œ , address&#x3D;â€+ address + â€œ , ordersList&#x3D;â€ + ordersList + â€œ]â€;}</p>
</li>
<li><p>STEP 04<br>åœ¨com.itheima.mapperåŒ…ä¸­ï¼Œåˆ›å»ºç”¨æˆ·å®ä½“æ˜ å°„æ–‡ä»¶UsersMapper.xmlï¼Œå¹¶åœ¨æ–‡ä»¶ä¸­ç¼–å†™ä¸€å¯¹å¤šå…³è”æ˜ å°„æŸ¥è¯¢çš„é…ç½®ã€‚</p>
<mapper namespace="com.itheima.mapper.UsersMapper">
<resultMap type="Users" id="UserWithOrdersResult"><!--åªå±•ç¤ºäº†éƒ¨åˆ†æ ‡ç­¾å†…å®¹ï¼Œä¸€å¯¹å¤šå…³è”æ˜ å°„-->
<collection property="ordersList" ofType="Orders">
<id property="id" column="orders_id" />
<result property="number" column="number" />
</collection>
</resultMap></mapper>
</li>
<li><p>STEP 05<br>åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶mybatis-config.xmlä¸­ï¼Œå¼•å…¥UsersMapper.xmlï¼Œå°†UsersMapper.xmlæ˜ å°„æ–‡ä»¶åŠ è½½åˆ°ç¨‹åºä¸­ã€‚</p>
<mapper resource="com/itheima/mapper/UsersMapper.xml">
</mapper>
</li>
<li><p>STEP 06<br>åœ¨æµ‹è¯•ç±»MyBatisTestä¸­ï¼Œç¼–å†™æµ‹è¯•æ–¹æ³•findUserTest()ã€‚<br>public void findUserTest() {<br>1&#x2F;1.é€šè¿‡å·¥å…·ç±»ç”ŸæˆSqlSessionå¯¹è±¡<br>SqlSession session &#x3D; MyBatisUtils.getSession();&#x2F;â’‰æŸ¥è¯¢idä¸º1çš„ç”¨æˆ·ä¿¡æ¯<br>Users users &#x3D; session.sglectOne(â€œcom.itheima.mapper.â€<br>+â€UsersMapper.findUserWithOrdersâ€,1);<br>&#x2F;3.è¾“å‡ºæŸ¥è¯¢ç»“æœä¿¡æ¯<br>System.out.println(users);&#x2F;&#x2F;4.å…³é—­SqlSession<br>session.close();}</p>
</li>
</ul>
<h2 id="å¤šå¯¹å¤šæŸ¥è¯¢"><a href="#å¤šå¯¹å¤šæŸ¥è¯¢" class="headerlink" title="å¤šå¯¹å¤šæŸ¥è¯¢"></a>å¤šå¯¹å¤šæŸ¥è¯¢</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y86.png"></p>
<p>ä¸‹é¢ä»¥è®¢å•è¡¨ä¸å•†å“è¡¨ä¹‹é—´çš„å¤šå¯¹å¤šå…³ç³»ä¸ºä¾‹ï¼Œè®²è§£å¦‚ä½•ä½¿ç”¨MyBatiså¤„ç†å¤šå¯¹å¤šçš„å…³ç³»</p>
<ul>
<li>STEP 01<br>åœ¨åä¸ºmybatisçš„æ•°æ®åº“ä¸­åˆ›å»ºåç§°ä¸ºtb_productçš„å•†å“è¡¨å’Œåç§°ä¸ºtb_ordersitem çš„ä¸­é—´è¡¨ï¼ŒåŒæ—¶åœ¨è¡¨ä¸­é¢„å…ˆæ’å…¥å‡ æ¡æ•°æ®ã€‚<br>CREATE TABLE tb_product (<br>id INT(32)PRIMARY KEY AUTO_INCREMENT,NAME VARCHAR(32), price DOUBLE );</li>
</ul>
<p>#æ’å…¥1æ¡æ•°æ®ï¼Œå…¶ä»–çœç•¥<br>INSERT INTO tb_product VALUES (â€˜1â€™,â€™JavaåŸºç¡€å…¥é—¨â€™ï¼Œâ€™44.5â€™);</p>
<!-- tb_ordersitemè¡¨çš„åˆ›å»ºçœç•¥-->

<ul>
<li>STEP 02<br>åœ¨com.itheima.pojoåŒ…ä¸­ï¼Œåˆ›å»ºæŒä¹…åŒ–ç±»Productï¼Œå¹¶åœ¨ç±»ä¸­å®šä¹‰å•†å“idã€å•†å“åç§°ã€å•†å“å•ä»·ç­‰å±æ€§ï¼Œä»¥åŠä¸è®¢å•å…³è”çš„å±æ€§ã€‚<br>public class Product {<br>private lnteger id; private String name;<br>private Double price;<br>private List<Orders> arders;&#x2F;&#x2F;å…³è”è®¢å•å±æ€§<br>&#x2F;&#x2F;çœç•¥getter&#x2F;setteræ–¹æ³•}<br>@Override<br>public String toString() {<br>return â€œProduct [id&#x3D;â€ +id + â€œ, name&#x3D;â€ + name</li>
</ul>
<ul>
<li>â€œ, price&#x3D;â€ + price + â€œ]â€;}</li>
</ul>
<ul>
<li><p>STEP 03<br>åœ¨å•†å“æŒä¹…åŒ–ç±»ä¸­ï¼Œé™¤äº†éœ€è¦æ·»åŠ è®¢å•çš„é›†åˆå±æ€§å¤–ï¼Œè¿˜éœ€è¦åœ¨è®¢å•æŒä¹…åŒ–ç±»<br>Orders.javaï¼‰ä¸­å¢åŠ å•†å“é›†åˆçš„å±æ€§åŠå…¶å¯¹åº”çš„getter&#x2F;setteræ–¹æ³•ï¼ŒOrdersç±»ä¸­æ·»åŠ çš„ä»£ç å¦‚ä¸‹ã€‚<br>å…³è”å•†å“é›†åˆå±æ€§<br>private List<Prodtct> productList;<br>&#x2F;çœç•¥getter&#x2F;setteræ–¹æ³•ï¼Œä»¥åŠé‡å†™çš„toStringæ–¹æ³•</p>
</li>
<li><p>STEP 04<br>åœ¨com.itheima.mapperåŒ…ä¸­ï¼Œåˆ›å»ºè®¢å•å®ä½“æ˜ å°„æ–‡ä»¶OrdersMapper.xmlï¼Œç”¨äºç¼–å†™è®¢å•ä¿¡æ¯çš„æŸ¥è¯¢SQLè¯­å¥ï¼Œå¹¶åœ¨æ˜ å°„æ–‡ä»¶ä¸­ç¼–å†™å¤šå¯¹å¤šå…³è”æ˜ å°„æŸ¥è¯¢çš„é…ç½®ä¿¡æ¯ã€‚</p>
<mapper namespace="com.itheima.mapper.OrdersMapper">
<select id="findOrdersWithPorduct"parameterType="Integer"
resultMap="OrdersWithProductResult">
select * from tb_orders WHERE id=#{id}</select>
<resultMap type="Orders" id="OrdersWithProductResult">
<id property="id" column="id" /><result property="number" column="number"/>
<collection property="productList" column="id" ofType="Product"
select= "com.itheima.mapper.ProductMapper.findProductByld" ></collection>
</resultMap>
</mapper>
</li>
<li><p>STEP 05<br>åœ¨com.itheima.mapperåŒ…ä¸­ï¼Œåˆ›å»ºå•†å“å®ä½“æ˜ å°„æ–‡ä»¶ProductMapper.xmlï¼Œç”¨äºç¼–å†™è®¢å•ä¸å•†å“ä¿¡æ¯çš„å…³è”æŸ¥è¯¢SQLè¯­å¥ã€‚</p>
<mapper namespace="com.itheima.mapper.ProductMapper">
<select id="findProductByld" parameterType="Integer"
resultType="Product">
SELECT * from tb_product where id lN(SELECT product_id FROM tb_ordersitem
WHERE orders_id = #{id})
</select>
</mapper>
</li>
<li><p>STEP 06<br>å°†æ–°åˆ›å»ºçš„æ˜ å°„æ–‡ä»¶OrdersMapper.xmlå’ŒProductMapper.xmlçš„æ–‡ä»¶è·¯å¾„é…ç½®åˆ°æ ¸å¿ƒé…ç½®æ–‡ä»¶mybatis-config.xmlä¸­ã€‚<br><mapper
resource="com/itheima/mapper/OrdersMapper.xml"/>&lt;mapper<br>å…¬<br>resource&#x3D;â€com&#x2F;itheima&#x2F;mapper&#x2F;ProductMapper.xmlâ€&#x2F;&gt;</p>
</li>
<li><p>STEP 07<br>åœ¨æµ‹è¯•ç±»MyBatisTestä¸­ï¼Œç¼–å†™å¤šå¯¹å¤šå…³è”æŸ¥è¯¢çš„æµ‹è¯•æ–¹æ³•findOrdersTest()ã€‚<br>public void findOrdersTest() {<br>&#x2F;&#x2F;1.ç”ŸæˆSqlSessionå¯¹è±¡<br>SqlSession session &#x3D; MyBatisUtils.getSession();&#x2F;&#x2F;â’‰.æŸ¥è¯¢idä¸º1çš„è®¢å•ä¸­çš„å•†å“ä¿¡æ¯<br>Orders orders &#x3D; session.selectOne(â€œ com.itheima.mapper.â€</p>
</li>
</ul>
<ul>
<li>â€œOrdersMapper.findOrdersWithPorductâ€,1);<br>System.out.println(orders);&#x2F;&#x2F; 3.è¾“å‡ºæŸ¥è¯¢ç»“æœä¿¡æ¯<br>session.close();&#x2F;l&#x2F; 4.å…³é—­SqlSession}</li>
</ul>
<blockquote>
<p>æŸ¥è¯¢è®¢å•åŠå…³è”å•†å“çš„å¦ä¸€æ–¹å¼<br>é™¤äº†ä½¿ç”¨åµŒå¥—æŸ¥è¯¢çš„æ–¹å¼æŸ¥è¯¢è®¢å•åŠå…¶å…³è”çš„å•†å“ä¿¡æ¯å¤–ï¼Œè¿˜å¯ä»¥åœ¨OrdersMapper.xmlä¸­ä½¿ç”¨åµŒå¥—ç»“æœçš„æ–¹å¼è¿›è¡ŒæŸ¥è¯¢ã€‚</p>
</blockquote>
<h2 id="ä¸€çº§ç¼“å­˜"><a href="#ä¸€çº§ç¼“å­˜" class="headerlink" title="ä¸€çº§ç¼“å­˜"></a>ä¸€çº§ç¼“å­˜</h2><ul>
<li><p>MyBatisçš„ä¸€çº§ç¼“å­˜çº§åˆ«<br>MyBatisçš„ä¸€çº§ç¼“å­˜æ˜¯SqlSessionçº§åˆ«çš„ç¼“å­˜æ‰Œå¦‚æœåŒä¸€ä¸ªSqlSessionå¯¹è±¡å¤šæ¬¡æ‰§è¡Œå®Œå…¨ç›¸åŒçš„SQLè¯­å¥æ—¶ï¼Œåœ¨ç¬¬ä¸€æ¬¡æ‰§è¡Œå®Œæˆåï¼ŒMyBatisä¼šå°†æŸ¥è¯¢ç»“æœå†™å…¥åˆ°ä¸€çº§ç¼“å­˜ä¸­ï¼Œæ­¤åï¼Œå¦‚æœç¨‹åºæ²¡æœ‰æ‰§è¡Œæ’å…¥ã€æ›´æ–°ã€åˆ é™¤æ“ä½œï¼Œå½“ç¬¬äºŒæ¬¡æ‰§è¡Œç›¸åŒçš„æŸ¥è¯¢è¯­å¥æ—¶ï¼ŒMyBatisä¼šç›´æ¥è¯»å–ä¸€çº§ç¼“å­˜ä¸­çš„æ•°æ®ï¼Œè€Œä¸ç”¨å†å»æ•°æ®åº“æŸ¥è¯¢ï¼Œä»è€Œæé«˜äº†æ•°æ®åº“çš„æŸ¥è¯¢æ•ˆç‡ã€‚</p>
</li>
<li><p>ä¸¾ä¾‹è¯´æ˜MyBatisçš„ä¸€çº§ç¼“å­˜çº§åˆ«<br>ä¾‹å¦‚ï¼Œå­˜åœ¨æ•°æ®è¡¨tb_bookï¼Œä»è¡¨ä¸­å¤šæ¬¡æŸ¥è¯¢idä¸º1çš„å›¾ä¹¦ä¿¡æ¯ï¼Œå½“ç¨‹åºç¬¬ä¸€æ¬¡æŸ¥è¯¢idä¸º1çš„å›¾ä¹¦ä¿¡æ¯æ—¶ï¼Œç¨‹åºä¼šå°†æŸ¥è¯¢ç»“æœå†™å…¥MyBatisä¸€çº§ç¼“å­˜ï¼Œå½“ç¨‹åºç¬¬äºŒæ¬¡æŸ¥è¯¢idä¸º1çš„å›¾ä¹¦ä¿¡æ¯æ—¶ï¼ŒMyBatisç›´æ¥ä»ä¸€çº§ç¼“å­˜ä¸­è¯»å–ï¼Œä¸å†è®¿é—®æ•°æ®åº“è¿›è¡ŒæŸ¥è¯¢ã€‚å½“ç¨‹åºå¯¹æ•°æ®åº“æ‰§è¡Œäº†æ’å…¥ã€æ›´æ–°ã€åˆ é™¤æ“ä½œï¼ŒMyBatisä¼šæ¸…ç©ºä¸€çº§ç¼“å­˜ä¸­çš„å†…å®¹ä»¥é˜²æ­¢ç¨‹åºè¯¯è¯»ã€‚<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y87.png"></p>
</li>
</ul>
<p>é€šè¿‡ä¸€ä¸ªæ¡ˆä¾‹æ¥å¯¹MyBatisä¸€çº§ç¼“å­˜çš„åº”ç”¨è¿›è¡Œè¯¦ç»†è®²è§£ï¼Œè¯¥æ¡ˆä¾‹è¦æ±‚æ ¹æ®å›¾ä¹¦idæŸ¥è¯¢å›¾ä¹¦ä¿¡æ¯ã€‚æ¡ˆä¾‹å…·ä½“æ­¥éª¤å¦‚ä¸‹ã€‚</p>
<ul>
<li>STEP 01<br>åœ¨mybatisæ•°æ®åº“ä¸­åˆ›å»ºåä¸ºtb_bookçš„æ•°æ®è¡¨ï¼ŒåŒæ—¶é¢„å…ˆæ’å…¥å‡ æ¡æµ‹è¯•æ•°æ®ã€‚<br>USE mybatis;</li>
</ul>
<p>#åˆ›å»ºä¸€ä¸ªåç§°ä¸ºtb_bookçš„è¡¨ï¼Œå¹¶æ’å…¥æ•°æ®ï¼Œè¿™é‡Œåªå±•ç¤ºä¸€æ¡CREATE TABLE tb_book(<br>id INT PRIMARY KEY AUTO_INCREMENT,bookName VARCHAR(255),<br>price double,<br>author VARCHAR(40) );<br>INSERT INTO tb book(bookName,price,author)<br>VALUES(â€œJavaåŸºç¡€å…¥é—¨â€,45.0,ä¼ æ™ºæ’­å®¢é«˜æ•™äº§å“ç ”å‘éƒ¨â€™);</p>
<ul>
<li><p>STEP 02<br>åœ¨é¡¹ç›®çš„com.itheima.pojoåŒ…ä¸‹åˆ›å»ºæŒä¹…åŒ–ç±»Bookï¼Œåœ¨Bookç±»ä¸­å®šä¹‰å›¾ä¹¦idã€å›¾ä¹¦åç§°.å›¾ä¹¦ä»·æ ¼ã€å›¾ä¹¦ä½œè€…å±æ€§ï¼Œä»¥åŠå±æ€§å¯¹åº”çš„getter&#x2F;setteræ–¹æ³•ã€‚<br>public class Book implements Serializable {<br>private Integer id;<br>&#x2F;ä¸»é”®<br>private String bookName;1&#x2F;å›¾ä¹¦åç§°<br>private double price; private String author;&#x2F;ä»·æ ¼ã€ä½œè€…&#x2F;çœç•¥getter&#x2F;setteræ–¹æ³•}<br>@Override<br>public String toString0 return â€œBook{â€œ+<br>â€œid&#x3D;â€ + id + â€œ, bookName&#x3D;â€â€ + bookName +â€, price&#x3D;â€ + price + â€œ , author&#x3D;â€™â€ + author+ Y ; }</p>
</li>
<li><p>STEP 03<br>åœ¨com.itheima.mapperåŒ…ä¸­ï¼Œåˆ›å»ºå›¾ä¹¦æ˜ å°„æ–‡ä»¶BookMapper.xmlï¼Œå¹¶åœ¨è¯¥æ–‡ä»¶ä¸­ç¼–å†™æ ¹æ®å›¾ä¹¦idæŸ¥è¯¢å›¾ä¹¦ä¿¡æ¯çš„SQLè¯­å¥ã€‚<br><mapper namespace="com.itheima.mapper.BookMapper"><!--æ ¹æ®idæŸ¥è¯¢å›¾ä¹¦ä¿¡æ¯--><br><select id="findBookByld" parameterType="Integer"
resultType="com.itheima.pojo.Book"><br>SELECT * from tb_book where id&#x3D;#{id}</select><!--æ ¹æ®idæ›´æ–°å›¾ä¹¦ä¿¡æ¯--><br><update id="updateBook"
parameterType="com.itheima.pojo.Book"><br>update tb_book set bookName&#x3D;#{bookName},price&#x3D;#{price}<br>where id&#x3D;#{id}</p>
</update>
</mapper>
</li>
<li><p>STEP 04<br>åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶mybatis-config.xmlä¸­çš„<mappers>æ ‡ç­¾ä¸‹ï¼Œå¼•å…¥BookMapper.xmlæ˜ å°„æ–‡ä»¶ã€‚</p>
<mapper resource="com/itheima/mapper/BookMapper.xml">
</mapper>
</li>
<li><p>STEP 05<br>ç”±äºéœ€è¦é€šè¿‡log4jæ—¥å¿—ç»„ä»¶æŸ¥çœ‹ä¸€çº§ç¼“å­˜çš„å·¥ä½œçŠ¶æ€ï¼Œå› æ­¤éœ€è¦åœ¨pom.xmlä¸­å¼•å…¥log4jçš„ç›¸å…³ä¾èµ–ã€‚</p>
<dependency>
<groupld>log4j</groupld><artifactld>log4j</artifactld><version>1.2.17</version></dependency>
</li>
<li><p>STEP 06<br>åœ¨å·¥ç¨‹çš„src&#x2F;main&#x2F;resourcesç›®å½•ä¸‹åˆ›å»ºlog4jpropertiesæ–‡ä»¶ï¼Œç”¨äºé…ç½®MyBatiså’Œæ§åˆ¶å°çš„ã€‚</p>
</li>
</ul>
<p>#å…¨å±€æ—¥å¿—é…ç½®<br>log4j.rootLogger&#x3D;DEBUG, Console#æ§åˆ¶å°è¾“å‡ºé…ç½®<br>log4j.appender.Console&#x3D;org.apache.log4j.ConsoleAppenderlog4j.appender.Console.layout&#x3D;org.apache.log4j.PatternLayoutlog4j.appender.Console.layout.ConversionPattern&#x3D;%d [%t] %-5p [%c]- %m%n<br>#æ—¥å¿—è¾“å‡ºçº§åˆ«ï¼Œåªå±•ç¤ºäº†ä¸€ä¸ª<br>log4j.logger.java.sql.PreparedStatement&#x3D;DEBUG</p>
<ul>
<li>STEP 07<br>åœ¨æµ‹è¯•ç±»MyBatisTestä¸­ï¼Œç¼–å†™æµ‹è¯•æ–¹æ³•findBookByldTest1()ã€‚<br>public void findBookByldTest10 {<br>&#x2F;&#x2F;1.é€šè¿‡å·¥å…·ç±»ç”ŸæˆSqIlSessionå¯¹è±¡<br>SqlSession session1 &#x3D; MyBatisUtils.getSession();&#x2F;&#x2F;2.ä½¿ç”¨session1æŸ¥è¯¢idä¸º1çš„å›¾ä¹¦çš„ä¿¡æ¯<br>Book book1 &#x3D; session.selectOne(â€œcom.itheima.mapper.â€<br>+â€BookMapper.findBookByldâ€,1);<br>System.out.printIn(book1.toStringO);&#x2F;&#x2F; 3.è¾“å‡ºæŸ¥è¯¢ç»“æœä¿¡æ¯&#x2F;å†æ¬¡ä½¿ç”¨session1æŸ¥è¯¢idä¸º1çš„å›¾ä¹¦çš„ä¿¡æ¯ï¼ŒåŒ2ã€3æ­¥1&#x2F;4.å…³é—­SqlSession<br>session1.close();}</li>
</ul>
<h2 id="äºŒçº§ç¼“å­˜"><a href="#äºŒçº§ç¼“å­˜" class="headerlink" title="äºŒçº§ç¼“å­˜"></a>äºŒçº§ç¼“å­˜</h2><ul>
<li><p>ä½¿ç”¨äºŒçº§ç¼“å­˜çš„å¥½å¤„<br>ç”±4.5.1èŠ‚çš„å†…å®¹å¯çŸ¥ï¼Œç›¸åŒçš„Mapperç±»ï¼Œç›¸åŒçš„SQLè¯­å¥ï¼Œå¦‚æœSqlSessionä¸åŒï¼Œåˆ™ä¸¤ä¸ªSqlSessionæŸ¥è¯¢æ•°æ®åº“æ—¶ï¼Œä¼šæŸ¥è¯¢æ•°æ®åº“ä¸¤æ¬¡ï¼Œè¿™æ ·ä¹Ÿä¼šé™ä½æ•°æ®åº“çš„æŸ¥è¯¢æ•ˆç‡ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå°±éœ€è¦ç”¨åˆ°MyBatisçš„äºŒçº§ç¼“å­˜ã€‚MyBatisçš„äºŒçº§ç¼“å­˜æ˜¯Mapperçº§åˆ«çš„ç¼“å­˜ï¼Œä¸ä¸€çº§ç¼“å­˜ç›¸æ¯”ï¼ŒäºŒçº§ç¼“å­˜çš„èŒƒå›´æ›´å¤§ï¼Œå¤šä¸ªSqlSessionå¯ä»¥å…±ç”¨äºŒçº§ç¼“å­˜ï¼Œå¹¶ä¸”äºŒçº§ç¼“å­˜å¯ä»¥è‡ªå®šä¹‰ç¼“å­˜èµ„æºã€‚</p>
</li>
<li><p>MyBatisäºŒçº§ç¼“å­˜çš„æ‰§è¡Œè¿‡ç¨‹<br>åœ¨MyBatisä¸­ï¼Œä¸€ä¸ªMapper.xmlæ–‡ä»¶é€šå¸¸ç§°ä¸ºä¸€ä¸ªMapperï¼ŒMyBatisä»¥namespaceåŒºåˆ†Mapperï¼Œå¦‚æœå¤šä¸ªSqlSessionå¯¹è±¡ä½¿ç”¨åŒä¸€ä¸ªMapperçš„ç›¸åŒæŸ¥è¯¢è¯­å¥å»æ“ä½œæ•°æ®åº“ï¼Œåœ¨ç¬¬ä¸€ä¸ªSqlSessionå¯¹è±¡æ‰§è¡Œå®Œåï¼ŒMyBatisä¼šå°†æŸ¥è¯¢ç»“æœå†™å…¥äºŒçº§ç¼“å­˜ï¼Œæ­¤åï¼Œå¦‚æœç¨‹åºæ²¡æœ‰æ‰§è¡Œæ’å…¥ã€æ›´æ–°ã€åˆ é™¤æ“ä½œï¼Œå½“ç¬¬äºŒä¸ªSqlSessionå¯¹è±¡æ‰§è¡Œç›¸åŒçš„æŸ¥è¯¢è¯­å¥æ—¶ï¼ŒMyBatisä¼šç›´æ¥è¯»å–äºŒçº§ç¼“å­˜ä¸­çš„æ•°æ®ã€‚<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y88.png"></p>
</li>
<li><p>äºŒçº§ç¼“å­˜ä¸ä¸€çº§ç¼“å­˜çš„ä¸åŒç‚¹<br>ä¸MyBatisçš„ä¸€çº§ç¼“å­˜ä¸åŒçš„æ˜¯ï¼ŒMyBatisçš„äºŒçº§ç¼“å­˜éœ€è¦æ‰‹åŠ¨å¼€å¯ï¼Œå¼€å¯äºŒçº§ç¼“å­˜é€šå¸¸è¦å®Œæˆä»¥ä¸‹ä¸¤ä¸ªæ­¥éª¤ã€‚</p>
</li>
<li><p>a.å¼€å¯äºŒçº§ç¼“å­˜çš„å…¨å±€é…ç½®<br>ä¸ä½¿ç”¨äºŒçº§ç¼“å­˜å‰ï¼Œéœ€è¦åœ¨MyBatisçš„æ ¸å¿ƒé…ç½®mybatis-config.xmlæ–‡ä»¶ä¸­é€šè¿‡<settings>å…ƒç´ å¼€å¯äºŒçº§ç¼“å­˜çš„å…¨å±€é…ç½®ã€‚<br>åˆ†</p>
<settings>
<setting name="cacheEnabled" value="true"/></settings></li>
<li><p>b.å¼€å¯å½“å‰Mapperçš„namespaceä¸‹çš„äºŒçº§ç¼“å­˜<br>å¼€å¯å½“å‰Mapperçš„namespaceä¸‹çš„äºŒçº§ç¼“å­˜ï¼Œå¯ä»¥é€šè¿‡MyBatisæ˜ å°„æ–‡ä»¶ä¸­çš„<cache>å…ƒç´ æ¥å®Œæˆã€‚</p>
<!--å¼€å¯å½“å‰Mapperçš„namespaceä¸‹çš„äºŒçº§ç¼“å­˜--><cache>
</cache></li>
<li><p>é»˜è®¤çŠ¶æ€çš„äºŒçº§ç¼“å­˜å¯å®ç°çš„åŠŸèƒ½<br>(1)æ˜ å°„æ–‡ä»¶ä¸­æ‰€æœ‰selectè¯­å¥å°†ä¼šè¢«ç¼“å­˜ã€‚<br>(2)æ˜ å°„æ–‡ä»¶ä¸­çš„æ‰€æœ‰jinsertã€updateå’Œdeleteè¯­å¥éƒ½ä¼šåˆ·æ–°ç¼“å­˜ã€‚<br>(3)ç¼“å­˜ä¼šä½¿ç”¨LRUç®—æ³•å›æ”¶!<br>(4)æŠ•æœ‰åˆ·æ–°é—´éš”ï¼Œç¼“å­˜ä¸ä¼šä»¥ä»»ä½•æ—¶é—´é¡ºåºæ¥åˆ·æ–°ã€‚<br>(5)ç¼“å­˜ä¼šå­˜å‚¨åˆ—è¡¨é›†åˆæˆ–å¯¹è±¡çš„1024ä¸ªå¼•ç”¨ã€‚<br>(6ï¼‰ç¼“å­˜æ˜¯å¯è¯»&#x2F;å›èº«çš„ç¼“å­˜ï¼Œè¿™æ„å‘³ç€å¯¹è±¡æ£€ç´¢ä¸æ˜¯å…±äº«çš„ï¼Œç¼“å­˜å¯ä»¥å®‰å…¨çš„è¢«è°ƒç”¨è€…ä¿®æ”¹ï¼Œè€Œä¸å¹²æ‰°å…¶ä»–è°ƒç”¨è€…æˆ–çº¿ç¨‹æ‰€åšçš„æ½œåœ¨ä¿®æ”¹ã€‚<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y89.png"></p>
</li>
</ul>
<p>æ¥ä¸‹æ¥é€šè¿‡ä¸€ä¸ªæ¡ˆä¾‹æ¼”ç¤ºMyBatisäºŒçº§ç¼“å­˜çš„åº”ç”¨ï¼Œè¯¥æ¡ˆä¾‹ä»æ—§æ ¹æ®idæŸ¥è¯¢å›¾ä¹¦ä¿¡æ¯ï¼Œæ¡ˆä¾‹å…·ä½“æ­¥éª¤å¦‚ä¸‹ã€‚<br>ä¿®æ”¹æ˜ å°„æ–‡ä»¶BookMapper.xmlï¼Œåœ¨æ˜ å°„æ–‡ä»¶çš„<mapper>å…ƒç´ ä¸‹è¿½åŠ ç¼–å†™<cache>å…ƒ</p>
<ul>
<li><p>STEP 01<br>ç´ å¼€å¯å½“å‰Mapperçš„namespaceçš„äºŒçº§ç¼“å­˜ã€‚<br>&lt;!â€”å¼€å¯å½“å‰BookMapperçš„namespaceä¸‹çš„äºŒçº§ç¼“ä»”â€“&gt;<cache></p>
</cache>
</li>
<li><p>STEP 02<br>åœ¨æµ‹è¯•ç±»MyBatisTestä¸­ï¼Œç¼–å†™æµ‹è¯•æ–¹æ³•findBookByldTest1().<br>public void findBookByldTest3() {<br>&#x2F;1.é€šè¿‡å·¥å…·ç±»ç”Ÿæˆä¸¤ä¸ªSqlSessionå¯¹è±¡ï¼Œè¿™é‡Œåªå±•ç¤ºäº†ä¸€ä¸ªSqlSession session1 &#x3D; MyBatisUtils.getSession();<br>&#x2F;&#x2F;â’‰.ä½¿ç”¨session1æŸ¥è¯¢idä¸º1çš„å›¾ä¹¦çš„ä¿¡æ¯<br>Book book1 &#x3D; session1.selectOne(â€œcom.itheima.mapper.â€</p>
</li>
</ul>
<ul>
<li>â€œBookMapper.findBookByldâ€ï¼Œ1);<br>System.out.printIn(book1.toString());&#x2F;&#x2F; 3.è¾“å‡ºæŸ¥è¯¢ç»“æœä¿¡æ¯&#x2F;&#x2F;4.å…³é—­SqlSession1<br>session1.close();}</li>
</ul>
<ul>
<li><p>STEP 03<br>æ‰§è¡ŒMyBatisTestæµ‹è¯•ç±»çš„findBookByldTest3()æ–¹æ³•ï¼Œæ§åˆ¶å°ä¼šè¾“å‡ºç»“æœã€‚</p>
</li>
<li><p>å¯¹MyBatisäºŒçº§ç¼“å­˜çš„åº”ç”¨æ¡ˆä¾‹çš„è¿è¡Œç»“æœåˆ†æ<br>æ§åˆ¶å°è¾“å‡ºäº†æ‰§è¡ŒSQLè¯­å¥çš„æ—¥å¿—ä¿¡æ¯ä»¥åŠæŸ¥è¯¢ç»“æœã€‚é€šè¿‡åˆ†æSQLè¯­å¥æ—¥å¿—ä¿¡æ¯å¯ä»¥å‘ç°ï¼Œå½“ç¬¬ä¸€ä¸ªSqlSessionå¯¹è±¡session1æ‰§è¡ŒæŸ¥è¯¢æ—¶ï¼ŒCache Hit Ratio (ç¼“å­˜å‘½ä¸­ç‡)ä¸º0ï¼Œç¨‹åºå‘é€äº†SQLè¯­å¥;å½“ç¬¬äºŒä¸ªSqlSessionå¯¹è±¡session2æ‰§è¡Œç›¸åŒçš„æŸ¥è¯¢æ—¶ï¼ŒCache Hit Ratioä¸º0.5ï¼Œç¨‹åºæ²¡æœ‰å‘å‡ºSQLè¯­å¥ï¼Œè¿™å°±è¯´æ˜ç¨‹åºç›´æ¥ä»äºŒçº§ç¼“å­˜ä¸­è·å–äº†æ•°æ®ã€‚</p>
</li>
<li><p>å¤šä¸ªSqlSessionåœ¨åŒä¸€ä¸ªMapperä¸­æ‰§è¡Œ<br>åœ¨å®é™…å¼€å‘ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°å¤šä¸ªSqlSessionåœ¨åŒä¸€ä¸ªMapperä¸­æ‰§è¡Œæ“ä½œï¼Œä¾‹å¦‚ï¼ŒSqlSession1æ‰§è¡ŒæŸ¥è¯¢æ“ä½œï¼ŒSqlSession2æ‰§è¡Œæ’å…¥ã€æ›´æ–°ã€åˆ é™¤æ“ä½œï¼Œ<br>SqlSession3åˆæ‰§è¡Œå’ŒSqlSession1ç›¸åŒçš„æŸ¥è¯¢æ“ä½œã€‚å½“SqlSession1æ‰§è¡ŒæŸ¥è¯¢æ“ä½œæ—¶ï¼Œç¨‹åºä¼šå°†æŸ¥è¯¢ç»“æœå†™å…¥MyBatisäºŒçº§ç¼“å­˜ï¼Œå½“SqlSession2å¯¹æ•°æ®åº“æ‰§è¡Œäº†æ’å…¥ã€æ›´æ–°ã€åˆ é™¤æ“ä½œåï¼ŒMyBatisä¼šæ¸…ç©ºäºŒçº§ç¼“å­˜ä¸­çš„å†…å®¹ï¼Œä»¥é˜²æ­¢ç¨‹åºè¯¯è¯»<br>å½“<br>SqlSession3æ‰§è¡Œå’ŒSqlSession1ç›¸åŒçš„æŸ¥è¯¢æ“ä½œæ—¶ï¼ŒMyBatisä¼šé‡æ–°è®¿é—®æ•°æ®åº“ã€‚</p>
</li>
<li><p>å¤šå­¦ä¸€æ‹›: Cache Hit Ratio(ç¼“å­˜å‘½ä¸­ç‡)<br>ç»ˆç«¯ç”¨æˆ·è®¿é—®ç¼“å­˜æ—¶ï¼Œå¦‚æœåœ¨ç¼“å­˜ä¸­æŸ¥æ‰¾åˆ°äº†è¦è¢«è®¿é—®çš„æ•°æ®ï¼Œå°±å«åšå‘½ä¸­ã€‚å¦‚æœç¼“å­˜ä¸­æ²¡æœ‰æŸ¥æ‰¾åˆ°è¦è¢«è®¿é—®çš„æ•°æ®ï¼Œå°±æ˜¯æ²¡æœ‰å‘½ä¸­ã€‚å½“å¤šæ¬¡æ‰§è¡ŒæŸ¥è¯¢æ“ä½œæ—¶ï¼Œç¼“å­˜å‘½ä¸­æ¬¡æ•°ä¸æ€»çš„æŸ¥è¯¢æ¬¡æ•°ï¼ˆç¼“å­˜å‘½ä¸­æ¬¡æ•°+ç¼“å­˜æ²¡æœ‰å‘½ä¸­æ¬¡æ•°)çš„æ¯”ï¼Œå°±å«ä½œç¼“å­˜å‘½ä¸­ç‡ï¼Œå³ç¼“å­˜å‘½ä¸­ç‡&#x3D;ç¼“å­˜å‘½ä¸­æ¬¡æ•°&#x2F;æ€»çš„æŸ¥è¯¢æ¬¡æ•°ã€‚å½“MyBatiså¼€å¯äºŒçº§ç¼“å­˜åï¼Œç¬¬ä¸€æ¬¡æŸ¥è¯¢æ•°æ®æ—¶ï¼Œç”±äºæ•°æ®è¿˜æ²¡æœ‰è¿›å…¥ç¼“å­˜ï¼Œæ‰€ä»¥éœ€è¦åœ¨æ•°æ®åº“ä¸­æŸ¥è¯¢è€Œä¸æ˜¯åœ¨ç¼“å­˜ä¸­æŸ¥è¯¢ï¼Œæ­¤æ—¶ï¼Œç¼“å­˜å‘½ä¸­ç‡ä¸º0ã€‚ç¬¬ä¸€æ¬¡æŸ¥è¯¢è¿‡åï¼ŒMyBatisä¼šå°†æŸ¥è¯¢åˆ°çš„æ•°æ®å†™å…¥ç¼“å­˜ä¸­ï¼Œå½“ç¬¬äºŒæ¬¡å†æŸ¥è¯¢ç›¸åŒçš„æ•°æ®æ—¶ï¼ŒMyBatisä¼šç›´æ¥ä»ç¼“å­˜ä¸­è·å–è¿™æ¡æ•°æ®ï¼Œç¼“å­˜å°†å‘½ä¸­ï¼Œæ­¤æ—¶çš„ç¼“å­˜å‘½ä¸­ç‡ä¸º0.5(1&#x2F;2)ã€‚å½“ç¬¬ä¸‰æ¬¡æŸ¥è¯¢ç›¸åŒçš„æ•°æ®ï¼Œåˆ™ç¼“å­˜å‘½ä¸­ç‡ä¸º0.66666 (2&#x2F;3)ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p>
</li>
</ul>
<h2 id="æ¡ˆä¾‹ï¼šå•†å“çš„ç±»åˆ«"><a href="#æ¡ˆä¾‹ï¼šå•†å“çš„ç±»åˆ«" class="headerlink" title="æ¡ˆä¾‹ï¼šå•†å“çš„ç±»åˆ«"></a>æ¡ˆä¾‹ï¼šå•†å“çš„ç±»åˆ«</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y90.png"></p>
<ul>
<li>STEP 01 é¡¹ç›®æ­å»º:åˆ›å»ºä¸€ä¸ªåç§°ä¸ºmybatis-demo04çš„é¡¹ç›®ï¼Œé¡¹ç›®çš„å…·ä½“æ­å»ºè¿‡ç¨‹è¯·å‚è€ƒ1.3èŠ‚ã€‚<br>æ•°æ®åº“å‡†å¤‡:åœ¨åä¸ºmybatisçš„æ•°æ®åº“ä¸­ï¼Œåˆ›å»ºä¸¤ä¸ªæ•°æ®è¡¨ï¼Œåˆ†åˆ«ä¸ºproductå’Œcategoryï¼ŒåŒæ—¶åœ¨è¡¨ä¸­é¢„å…ˆæ’å…¥å‡ æ¡æµ‹è¯•æ•°æ®ã€‚</li>
<li>STEP 02</li>
</ul>
<p>USE mybatis;<br>#åˆ›å»ºä¸€ä¸ªåç§°ä¸ºcategoryçš„è¡¨CREATE TABLE category (<br>id int(32)PRIMARY KEY AUTO_INCREMENT,<br>typename varchar(40)<br>);<br>#æ’å…¥2æ¡æ•°æ®<br>INSERT INTO category VALUES (1, â€˜é»‘è‰²å®¶ç”µâ€™);<br>INSERT INTO category VALUES (2,â€™ç™½è‰²å®¶ç”µâ€™);#åˆ›å»ºä¸€ä¸ªåç§°ä¸ºproductçš„è¡¨ï¼ŒåŒç†</p>
<ul>
<li><p>STEP 03<br>POJOç±»å‡†å¤‡:(1)åœ¨com.itheima.pojoåŒ…ä¸­ï¼Œåˆ›å»ºæŒä¹…åŒ–ç±»Categoryï¼Œå¹¶åœ¨ç±»ä¸­å®šä¹‰å•†å“ç±»åˆ«çš„ç›¸å…³å±æ€§å’Œæ–¹æ³•ã€‚<br>public class Category {private Integer id;<br>ä¸»é”®id<br>private String typename;<br>&#x2F;ç±»åˆ«åç§°<br>private List<Product> productList;&#x2F;å•†å“é›†åˆçœç•¥getter&#x2F;etteræ–¹æ³•}<br>@Override<br>public String toString() {<br>return â€œCategory{â€œ+â€id&#x3D;â€ + id + â€œ , typename&#x3D;â€™â€ +<br>typename +â€, productList&#x3D;â€ + productList + â€˜};}</p>
</li>
<li><p>STEP 04<br>ç¼–å†™æ˜ å°„æ–‡ä»¶:åœ¨com.itheima.mapperåŒ…ä¸­ï¼Œåˆ›å»ºå•†å“ç±»åˆ«å®ä½“æ˜ å°„æ–‡ä»¶CategoryMapper.xmlï¼Œå¹¶åœ¨æ–‡ä»¶ä¸­ç¼–å†™ä¸€å¯¹å¤šå…³è”æ˜ å°„æŸ¥è¯¢çš„é…ç½®</p>
<!--åªå±•ç¤ºäº†selectæ ‡ç­¾çš„å†…å®¹-->
<!--â€”å¯¹å¤š:æŸ¥çœ‹æŸä¸€å•†å“ç±»åˆ«åŠå…¶å…³è”çš„å•†å“ä¿¡æ¯
æ³¨æ„:å½“å…³è”æŸ¥è¯¢å‡ºçš„åˆ—åç›¸åŒï¼Œåˆ™éœ€è¦ä½¿ç”¨åˆ«ååŒºåˆ†-->
<p><select id="findCategoryWithProduct"
parameterType="Integer"
resultMap="CategoryWithProductResult"><br>SELECT c.*,p.id as category_id,p.goodsname,p.pricefrom category c,product p<br>WHERE c.id&#x3D;p.category_id<br>and c.id&#x3D;#{id}</p>
</select>
</li>
<li><p>STEP 05<br>ä¿®æ”¹mybatis-config.xmlæ ¸å¿ƒé…ç½®æ–‡ä»¶:åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶mybatis-config.xmlä¸­ï¼Œå¼•å…¥CategoryMapper.xmlï¼Œå°†CategoryMapper.xmlæ˜ å°„æ–‡ä»¶åŠ è½½åˆ°ç¨‹åºä¸­ã€‚</p>
<mapper>
resource="com/itheima/mapper/CategoryMapper.xml"
</mapper>
</li>
<li><p>STEP 06<br>ç¼–å†™æµ‹è¯•æ–¹æ³•:åœ¨æµ‹è¯•ç±»MyBatisTestä¸­ï¼Œç¼–å†™æµ‹è¯•æ–¹æ³•findCategoryTest()ã€‚<br>public void findCategoryTest() {<br>&#x2F;&#x2F;1.é€šè¿‡å·¥å…·ç±»ç”ŸæˆSqlSessionå¯¹è±¡<br>SqlSession session &#x3D; MyBatisUtils.getSession();&#x2F;&#x2F;â’‰.æŸ¥è¯¢idä¸º2çš„å•†å“ç±»åˆ«ä¿¡æ¯<br>Category category &#x3D;<br>session.selectOne(â€œcom.itheima.mapper.â€</p>
</li>
</ul>
<ul>
<li>â€œCategoryMapper.findCategoryWithProductâ€ï¼Œ2);System.out.printIn(category);<br>&#x2F;&#x2F; 3.è¾“å‡ºæŸ¥è¯¢ç»“æœä¿¡æ¯session.close();<br>&#x2F;&#x2F;4.å…³é—­SqlSession}</li>
</ul>
<h2 id="Selectæ³¨è§£"><a href="#Selectæ³¨è§£" class="headerlink" title="@Selectæ³¨è§£"></a>@Selectæ³¨è§£</h2><p>ä¸‹é¢é€šè¿‡ä¸€ä¸ªæ¡ˆä¾‹æ¼”ç¤º@Selectä¸»è§£çš„ä½¿ç”¨ï¼Œè¯¥æ¡ˆä¾‹è¦æ±‚æ ¹æ®å‘˜å·¥çš„idæŸ¥æ‰¾å‘˜å·¥ä¿¡æ¯ï¼Œæ¡ˆä¾‹å…·ä½“å®ç°æ­¥éª¤å¦‚ä¸‹ã€‚</p>
<ul>
<li>STEP 01<br>å»ºè¡¨:åœ¨mybatisæ•°æ®åº“ä¸­åˆ›å»ºåä¸ºtb_workerçš„æ•°æ®è¡¨ï¼ŒåŒæ—¶é¢„å…ˆæ’å…¥å‡ æ¡æµ‹è¯•æ•°æ®ã€‚<br>CREATE TABLE tb_worker(<br>id INT PRIMARY KEY AUTO_INCREMENT,<br>name VARCHAR(32),age INT, sex VARCHAR(8),worker_id lNT UNIQUE);<br>INSERT INTO tb_worker(name,age,sex,worker_id)VALUES(â€˜å¼ ä¸‰â€™,32,â€™å¥³â€™,1001);</li>
</ul>
<p>åˆ›å»ºç±»:åœ¨é¡¹ç›®çš„com.itheima.pojoåŒ…ä¸‹åˆ›å»ºæŒä¹…åŒ–ç±»Workerï¼Œåœ¨Workerç±»ä¸­å®šä¹‰idã€å‘˜</p>
<ul>
<li>STEP 02<br>å·¥å§“åã€å¹´é¾„ã€æ€§åˆ«ã€å·¥å·ç­‰å±æ€§ä»¥åŠå±æ€§å¯¹åº”çš„getter&#x2F;setteræ–¹æ³•ã€‚<br>public class Worker {<br>private lnteger id; private String name; private Integer age;private String sex;<br>private String worker_id;çœç•¥getter&#x2F;setteræ–¹æ³•}@Override<br>public String toString() {<br>return â€œWorker{â€œ+ â€œid&#x3D;â€ +id + â€œ, name&#x3D;â€ + name +<br>â€œ, age&#x3D;â€ + age + â€œ , sex&#x3D;â€ + sex + â€œ, worker_id&#x3D;â€ + worker_id + â€˜};}</li>
</ul>
<p>ç¼–å†™æŸ¥è¯¢æ–¹æ³•:åœ¨é¡¹ç›®çš„src&#x2F;main&#x2F;javaç›®å½•ä¸‹åˆ›å»ºcom.itheima.daoåŒ…ï¼Œå¹¶åœ¨è¯¥åŒ…ä¸‹åˆ›å»º</p>
<ul>
<li>STEP 03<br>WorkerMapperæ¥å£ï¼Œç”¨äºç¼–å†™@Selectæ³¨è§£æ˜ å°„çš„selectæŸ¥è¯¢æ–¹æ³•ã€‚<br>package com.itheima.dao;<br>import com.itheima.pojo.Worker;<br>import org.apache.ibatis.annotations.Select;public interface WorkerMapper {<br>Select(â€œselect * from tb_worker where id &#x3D; #{id}â€)Worker selectWorker(int id);<br>}</li>
</ul>
<p>åŠ è½½é…ç½®æ–‡ä»¶:åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶mybatis-config.xmlä¸­çš„<mappers>å…ƒç´ ä¸‹å¼•å…¥</p>
<ul>
<li>STEP 04<br>WorkerMapperæ¥å£ï¼Œå°†WorkerMapper.javaæ¥å£åŠ è½½åˆ°æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­ã€‚<mapper class="com.itheima.dao.WorkerMapper" /></li>
</ul>
<p>ç¼–å†™æµ‹è¯•æ–¹æ³•:åœ¨æµ‹è¯•ç±»MyBatisTestä¸­ï¼Œç¼–å†™æµ‹è¯•æ–¹æ³•findWorkerByldTest()ã€‚</p>
<ul>
<li>STEP 05<br>public void findWorkerByldTest() {&#x2F;&#x2F;1.è·å–SqlSessionå¯¹è±¡<br>SqlSession session &#x3D; MyBatisUtils.getSession();<br>WorkerMapper mapper &#x3D; session.getMapper(WorkerMapper.class);&#x2F;&#x2F;â’‰.æŸ¥è¯¢idä¸º1çš„å‘˜å·¥ä¿¡æ¯<br>Worker worker &#x3D; mapper.selectWorker(1);System.out.println(worker.toString());&#x2F;&#x2F;3.å…³é—­SqlSession<br>session.close();}</li>
</ul>
<h2 id="Insertæ³¨è§£"><a href="#Insertæ³¨è§£" class="headerlink" title="@Insertæ³¨è§£"></a>@Insertæ³¨è§£</h2><p>ä¸‹é¢é€šè¿‡ä¸€ä¸ªæ¡ˆä¾‹æ¼”ç¤º@Insertæ³¨è§£çš„ä½¿ç”¨ï¼Œè¦æ±‚å®ç°å‘˜å·¥ä¿¡æ¯çš„æ’å…¥ï¼Œæ¡ˆä¾‹å…·ä½“å®ç°æ­¥éª¤å¦‚ä¸‹ã€‚<br>æ·»åŠ æ³¨è§£:åœ¨WorkerMapperæ¥å£ä¸­æ·»åŠ å‘tb_workeræ•°æ®è¡¨æ’å…¥æ•°æ®çš„æ–¹æ³•</p>
<ul>
<li>STEP 01<br>insertWorker()ï¼Œå¹¶åœ¨æ–¹æ³•ä¸Šæ·»åŠ @Insertæ³¨è§£ã€‚<br>lnsert(â€œinsert into tb_worker(name,age,sex,worker_id)â€</li>
</ul>
<ul>
<li>â€œvalues(#{name},#{age},#{sex},#{worker_id})â€)int insertWorker(Worker worker);</li>
</ul>
<p>ç¼–å†™æµ‹è¯•ç±»:åœ¨æµ‹è¯•ç±»MyBatisTestä¸­ï¼Œç¼–å†™æµ‹è¯•æ–¹æ³•insertWorkerTest()ã€‚</p>
<ul>
<li>STEP 02<br>public void insertWorkerTest() {<br>  &#x2F;&#x2F;1.ç”ŸæˆSqlSessionå¯¹è±¡<br>SqlSession session &#x3D; MyBatisUtils.getSession();Worker worker &#x3D; new Worker();<br>worker.setld(4); worker.setName(â€œèµµå…­â€); worker.setAge(36);worker.setSex(â€œå¥³â€);worker.setWorker_id(â€œ1004â€);<br>WorkerMapper mapper &#x3D; session.getMapper(WorkerMapper.class);&#x2F;â’‰æ’å…¥å‘˜å·¥ä¿¡æ¯<br>int result &#x3D; mapper.insertWorker(worker);&#x2F;è¾“å‡ºè¯­å¥çœç•¥..<br>session.commit();<br>session.close(); &#x2F;&#x2F; 3.å…³é—­SqlSession}</li>
</ul>
<h2 id="Updateæ³¨è§£"><a href="#Updateæ³¨è§£" class="headerlink" title="@Updateæ³¨è§£"></a>@Updateæ³¨è§£</h2><p>ä¸‹é¢é€šè¿‡ä¸€ä¸ªæ¡ˆä¾‹æ¼”ç¤º@Updateæ³¨è§£çš„ä½¿ç”¨ï¼Œè¯¥æ¡ˆä¾‹è¦æ±‚å®ç°å‘˜å·¥ä¿¡æ¯çš„ä¿®æ”¹ï¼Œæ¡ˆä¾‹å…·ä½“å®ç°æ­¥éª¤å¦‚ä¸‹ã€‚</p>
<ul>
<li>STEP 01<br>æ·»åŠ æ³¨è§£:åœ¨WorkerMapperæ¥å£ä¸­æ·»åŠ æ›´æ–°tb_workerè¡¨ä¸­æ•°æ®çš„æ–¹æ³•ï¼Œå¹¶åœ¨æ–¹æ³•ä¸Šæ·»åŠ @Updateæ³¨è§£ã€‚<br>@Update(â€œupdate tb_worker set name &#x3D; #{name},age &#x3D; #{age} â€œ+ â€œwhere id &#x3D; #{id}â€)<br>int updateWorker(Worker worker);</li>
</ul>
<p>ç¼–å†™æµ‹è¯•ç±»:æµ‹è¯•ç±»MyBatisTestä¸­ï¼Œç¼–å†™æµ‹è¯•æ–¹æ³•updateWorkerTest()ã€‚</p>
<ul>
<li>STEP 02<br>public void updateWorkerTest() {&#x2F;&#x2F;1.ç”ŸæˆSqlSessionå¯¹è±¡<br>SqlSession session &#x3D; MyBatisUtils.getSession();Worker worker &#x3D; new Worker();<br>worker.setld(4); worker.setName(â€œæåâ€); worker.setAge(28);WorkerMapper mapper &#x3D; session.getMapper(WorkerMapper.class);&#x2F;&#x2F;â’‰.æ›´æ–°å‘˜å·¥ä¿¡æ¯<br>int result &#x3D; mapper.updateWorker(worker);&#x2F;è¾“å‡ºè¯­å¥çœç•¥â€¦<br>session.commit();<br>session.close();&#x2F;&#x2F; 3.å…³é—­SqlSession}</li>
</ul>
<h2 id="Deleteæ³¨è§£"><a href="#Deleteæ³¨è§£" class="headerlink" title="@Deleteæ³¨è§£"></a>@Deleteæ³¨è§£</h2><p>ä¸‹é¢é€šè¿‡ä¸€ä¸ªæ¡ˆä¾‹æ¼”ç¤º@Deleteæ³¨è§£çš„ä½¿ç”¨ï¼Œè¯¥æ¡ˆä¾‹è¦æ±‚å®ç°å‘˜å·¥ä¿¡æ¯çš„åˆ é™¤<br>æ¡ˆä¾‹å…·ä½“å®ç°æ­¥éª¤å¦‚ä¸‹ã€‚<br>æ·»åŠ æ³¨è§£:åœ¨WorkerMapperæ¥å£ä¸­æ·»åŠ åˆ é™¤æ•°æ®åº“ä¸­æ•°æ®çš„æ–¹æ³•ï¼Œå¹¶åœ¨æ–¹æ³•ä¸Šæ·»åŠ </p>
<ul>
<li>STEP 01<br>@Deleteæ³¨è§£ã€‚<br>@Delete(â€œdelete from tb_worker where id &#x3D; #{id}â€)int deleteWorker(int id);<br>å…¬</li>
</ul>
<p>ç¼–å†™æµ‹è¯•ç±»:åœ¨æµ‹è¯•ç±»MyBatisTestä¸­ï¼Œç¼–å†™æµ‹è¯•æ–¹æ³•deleteWorkerTest()ã€‚</p>
<ul>
<li>STEP 02<br>public void deleteWorkerTest() {<br>SqlSession session &#x3D; MyBatisUtils.getSession();l&#x2F; 1.ç”ŸæˆSqlSessionå¯¹è±¡WorkerMapper mapper &#x3D; session.getMapper(WorkerMapper.class);&#x2F;â’‰åˆ é™¤å‘˜å·¥ä¿¡æ¯<br>int result &#x3D; mapper.deleteWorker(4);if result&gt;o{<br>System.out.println(â€œæˆåŠŸåˆ é™¤â€+result+â€æ¡æ•°æ®â€);}else { System.out.println(â€œåˆ é™¤æ•°æ®å¤±è´¥â€);}<br>session.commit();<br>session.close();&#x2F;&#x2F; 3.å…³é—­SqlSession<br>}</li>
</ul>
<h2 id="Paramæ³¨è§£"><a href="#Paramæ³¨è§£" class="headerlink" title="@Paramæ³¨è§£"></a>@Paramæ³¨è§£</h2><p>ä¸‹é¢é€šè¿‡ä¸€ä¸ªæ¡ˆä¾‹æ¼”ç¤º@Paramæ³¨è§£çš„ä½¿ç”¨ï¼Œè¯¥æ¡ˆä¾‹è¦æ±‚æ ¹æ®å‘˜å·¥çš„idå’Œå§“åæŸ¥è¯¢å‘˜å·¥ä¿¡æ¯ï¼Œæ¡ˆä¾‹å…·ä½“å®ç°æ­¥éª¤å¦‚ä¸‹ã€‚</p>
<ul>
<li>STEP 01<br>æ·»åŠ æ³¨è§£:åœ¨WorkerMapperæ¥å£ä¸­æ·»åŠ å¤šæ¡ä»¶æŸ¥è¯¢çš„æ–¹æ³•ã€‚<br>@Select(â€œselect * from tb_worker where id &#x3D; #{param01}<br>and name &#x3D; #{param02}â€)<br>Worker selectWorkerByldAndName(@Param(â€œparam01â€) int id,<br>Param(â€œparam02â€) String name);</li>
</ul>
<p>ç¼–å†™æµ‹è¯•ç±»:åœ¨æµ‹è¯•ç±»MyBatisTestä¸­ï¼Œç¼–å†™æµ‹è¯•æ–¹æ³•selectWorkerByldAndNameTest()ã€‚</p>
<ul>
<li>STEP 02<br>public void selectWorkerByldAndNameTest() {&#x2F;&#x2F;1.é€šè¿‡å·¥å…·ç±»ç”ŸæˆSqlSessionå¯¹è±¡<br>SqlSession session &#x3D; MyBatisUtils.getSession();<br>WorkerMapper mapper &#x3D; session.getMapper(WorkerMapper<br>.class);<br>&#x2F;&#x2F;â’‰æŸ¥è¯¢idä¸º3å§“åä¸ºç‹äº”çš„å‘˜å·¥çš„ä¿¡æ¯<br>Worker worker &#x3D; mapperselectWorkerByldAndName(3,â€ç‹äº”â€);System.out.println(worker.toString());<br>session.close();<br>}</li>
</ul>
<h2 id="ä¸€å¯¹ä¸€æŸ¥è¯¢-1"><a href="#ä¸€å¯¹ä¸€æŸ¥è¯¢-1" class="headerlink" title="ä¸€å¯¹ä¸€æŸ¥è¯¢"></a>ä¸€å¯¹ä¸€æŸ¥è¯¢</h2><p>æ¥ä¸‹æ¥ï¼Œä»¥4.2èŠ‚ä¸­ä½¿ç”¨çš„tb_idcardå’Œtb_personæ•°æ®è¡¨ä¸ºä¾‹ï¼Œè¯¦ç»†è®²è§£åŸºäºæ³¨è§£@Oneå®ç°tb_idcardå’Œtb_personæ•°æ®è¡¨ä¹‹é—´çš„ä¸€å¯¹ä¸€å…³è”æŸ¥è¯¢ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ã€‚</p>
<ul>
<li><p>STEP 01 åˆ›å»ºæŒä¹…åŒ–ç±»:æœ¬æ¡ˆä¾‹ä½¿ç”¨4.2èŠ‚ä¸­çš„ldCardç±»å’ŒPersonç±»ä½œä¸ºæŒä¹…ç±»ã€‚</p>
</li>
<li><p>@Resultæ³¨è§£çš„ä¸‰ä¸ªå±æ€§åŠå«ä¹‰<br>(1) propertyå±æ€§ç”¨æ¥æŒ‡å®šå…³è”å±æ€§ï¼Œè¿™é‡Œä¸ºcardã€‚<br>(2) columnå±æ€§ç”¨æ¥æŒ‡å®šå…³è”çš„æ•°æ®åº“è¡¨ä¸­çš„å­—æ®µï¼Œè¿™é‡Œä¸ºcard_idã€‚<br>(3) oneå±æ€§ç”¨æ¥æŒ‡å®šæ•°æ®è¡¨ä¹‹é—´å±äºå“ªç§å…³è”å…³ç³»ï¼Œé€šè¿‡@Oneæ³¨è§£è¡¨æ˜æ•°æ®è¡¨tb_idcardå’Œtb_personä¹‹é—´æ˜¯ä¸€å¯¹ä¸€å…³è”å…³ç³»ã€‚</p>
</li>
</ul>
<p>å¼•å…¥æ¥å£:åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶mybatis-config.xmlä¸­çš„<mappers>å…ƒç´ ä¸‹å¼•å…¥</p>
<ul>
<li>STEP 03<br>ldCardMapperå’ŒPersonMapperæ¥å£ã€‚<br><mapper class="com.itheima.dao.ldCardMapper" /><mapper class="com.itheima.dao.PersonMapper" /></li>
</ul>
<p>ç¼–å†™æµ‹è¯•ç±»:åœ¨æµ‹è¯•ç±»MyBatisTestä¸­ï¼Œç¼–å†™æµ‹è¯•æ–¹æ³•selectPersonByldTest()ã€‚</p>
<ul>
<li>STEP 04<br>public void selectPersonByldTest() {&#x2F;&#x2F;1.é€šè¿‡å·¥å…·ç±»ç”ŸæˆSqlSessionå¯¹è±¡<br>SqlSession session &#x3D; MyBatisUtils.getSession();<br>PersonMapper mapper &#x3D; session.getMapper(PersonMapper.class);&#x2F;â’‰.æŸ¥è¯¢idä¸º1çš„äººå‘˜çš„ä¿¡æ¯<br>Person person &#x3D; mapper.selectPersonByld(2);System.out.println(person.toString());<br>session.close(); &#x2F;&#x2F;3.å…³é—­SqlSession}</li>
</ul>
<h2 id="ä¸€å¯¹å¤šæŸ¥è¯¢-1"><a href="#ä¸€å¯¹å¤šæŸ¥è¯¢-1" class="headerlink" title="ä¸€å¯¹å¤šæŸ¥è¯¢"></a>ä¸€å¯¹å¤šæŸ¥è¯¢</h2><ul>
<li>STEP 01 åˆ›å»ºæŒä¹…åŒ–ç±»:æœ¬æ¡ˆä¾‹ä½¿ç”¨4.3èŠ‚ä¸­çš„Usersç±»å’ŒOrdersç±»ä½œä¸ºæŒä¹…ç±»ã€‚</li>
</ul>
<p>ç¼–å†™æ¥å£æ–¹æ³•:(1)åœ¨é¡¹ç›®çš„com.itheima.daoåŒ…ä¸‹åˆ›å»ºOrdersMappè¯¥æ¥å£ä¸­ç¼–å†™selectOrdersByUserld()æ–¹æ³•ï¼Œé€šè¿‡user_idæŸ¥è¯¢ç”¨æˆ·å¯¹åº”çš„</p>
<ul>
<li>STEP 02<br>public interface OrdersMapper {<br>@Select(â€œselect * from tb_orders where user_id&#x3D;#{id} â€œ)@Results({@Result(id &#x3D; true,column &#x3D; â€œidâ€,property &#x3D; â€œidâ€),<br>Result(column &#x3D; â€œnumberâ€ ,property &#x3D; â€œnumberâ€) })List<Orders> selectOrdersByUserld(int user_id);<br>}</li>
</ul>
<p>ç¼–å†™æ¥å£æ–¹æ³•:(2ï¼‰åœ¨é¡¹ç›®çš„com.itheima.daoåŒ…ä¸‹åˆ›å»ºUsersMappe</p>
<ul>
<li>STEP 02<br>æ¥å£ä¸­ç¼–å†™selectUserByld()æ–¹æ³•ï¼Œé€šè¿‡idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯ã€‚<br>public interface UsersMapper {<br>Select(â€œselect * from tb_user where id&#x3D;#{id} â€œ)<br>@Results({@Result(id &#x3D; true,column &#x3D; â€œidâ€,property &#x3D; â€œidâ€),<br>@Result(column &#x3D; â€œusernameâ€ ,property &#x3D; â€œusernameâ€),@Result(column &#x3D; â€œaddressâ€,property &#x3D; â€œaddressâ€),@Result(column &#x3D; â€œidâ€,property &#x3D; â€œordersListâ€,<br>many &#x3D; @Many(select &#x3D;<br>â€œcom.itheima.dao.OrdersMapper.selectOrdersByUserldâ€))})Users selectUserByld(int id);}</li>
</ul>
<p>å¼•å…¥æ¥å£:åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶mybatis-config.xmlä¸­çš„<mappers>å…ƒç´ </p>
<ul>
<li>STEP 03<br>å’ŒOrdersMapperæ¥å£ã€‚<br><mapper class= "com.itheima.dao.UsersMapper" />lå¿ƒ<mapper class="com.itheima.dao.OrdersMapper" /></li>
</ul>
<p>ç¼–å†™æµ‹è¯•ç±»:åœ¨æµ‹è¯•ç±»MyBatisTestä¸­ï¼Œç¼–å†™æµ‹è¯•æ–¹æ³•selectUserByldT</p>
<ul>
<li>STEP 04<br>public void selectUserByldTest() &#x2F;&#x2F;1.é€šè¿‡å·¥å…·ç±»ç”ŸæˆSqlSessionå¯¹è±¡<br>SqlSession session &#x3D; MyBatisUtils.getSession();UsersMapper mapper &#x3D;<br>session.getMapper(UsersMapper.class);&#x2F;â’‰.æŸ¥è¯¢idä¸º1çš„äººçš„ä¿¡æ¯<br>Users users &#x3D; mapper.selectUserByld(1);<br>System.out.println(users.toString)); session.close();</li>
</ul>
<h2 id="å¤šå¯¹å¤šæŸ¥è¯¢-1"><a href="#å¤šå¯¹å¤šæŸ¥è¯¢-1" class="headerlink" title="å¤šå¯¹å¤šæŸ¥è¯¢"></a>å¤šå¯¹å¤šæŸ¥è¯¢</h2><ul>
<li>å¤šå¯¹å¤šå…³è”ä½¿ç”¨ä¸­é—´è¡¨<br>åœ¨æ•°æ®åº“ä¸­ï¼Œè¡¨ä¸è¡¨ä¹‹é—´çš„å¤šå¯¹å¤šå…³è”å…³ç³»é€šå¸¸ä½¿ç”¨ä¸€ä¸ªä¸­é—´è¡¨æ¥ç»´å¼€ä»¥4.4èŠ‚ä¸­ä½¿ç”¨çš„è®¢å•è¡¨tb_orderså’Œå•†å“è¡¨tb_productä¸ºä¾‹ï¼Œè¿™ç½‘ä¸ªè¡¨ä¹‹é—´çš„å¤§è”å¤§ç³»ä½¿ç”¨äº†ä¸€ä¸ªä¸­é—´è¡¨tb_ordersitemæ¥ç»´æŠ¤ï¼Œè®¢å•è¡¨tb_orderså’Œå•†å“è¡¨tb_productï¼Œéƒ½<br>ä¸ä¸­é—´è¡¨tb_ordersitemå½¢æˆäº†ä¸€å¯¹å¤šå…³è”å…³ç³»ï¼Œå³ä¸­é—´è¡¨tb_ordersitemå°†è®¢å•è¡¨tb_orderså’Œå•†å“è¡¨tb_productæ‹†åˆ†æˆäº†ä¸¤ä¸ªä¸€å¯¹å¤šçš„å…³è”å…³ç³»ã€‚</li>
</ul>
<p>æ¥ä¸‹æ¥ï¼Œä»¥4.4èŠ‚ä¸­ä½¿ç”¨çš„è®¢å•è¡¨tb_ordersã€å•†å“è¡¨tb_productå’Œä¸­é—´è¡¨tb_ordersitemä¸ºä¾‹,è¯¦ç»†è®²è§£å¤šå¯¹å¤šå…³è”æŸ¥è¯¢ï¼Œå…·ä½“æ­¥éª¤å¦‚ä¸‹ã€‚<br>åœ¨è®¢å•æŒä¹…åŒ–ç±»(Orders.jav)ä¸­å¢åŠ å•†å“é›†åˆçš„å±æ€§åŠå…¶å¯¹åº”çš„getter&#x2F;setteræ–¹æ³•,</p>
<ul>
<li>STEP 01<br>å¹¶ä¿®æ”¹Ordersç±»å’ŒProductç±»ä¸­çš„toString()æ–¹æ³•ã€‚<br>Override<br>public String toString() {return â€œOrders{â€œ +<br>â€œid&#x3D;â€ + id + â€œ, number&#x3D;â€ + number +<br>â€œ, productList&#x3D;â€ + productList + â€˜}â€™;}@Override<br>public String toString() {return â€œProduct{â€œ +<br>â€œid&#x3D;â€ + id + â€œ, name&#x3D;â€ + name + â€œ, price&#x3D;â€ + price + â€˜};}</li>
</ul>
<p>(2)åœ¨é¡¹ç›®çš„com.itheima.daoåŒ…ä¸‹çš„OrdersMapper<br>select * from tb_orders</p>
<ul>
<li><p>STEP 02<br>selectOrdersByld()æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ç”¨äºé€šè¿‡idæŸ¥è¯¢è®¢å•ä¿¡æ¯<br>select * from tb_product<br>selectproduct_ia fro<br>@Select(â€œselect * from tb_orders where id&#x3D;#{id}â€)<br>@Results({@Result(id &#x3D; true,column &#x3D; â€œidâ€,property &#x3D; â€œidâ€),<br>@Result(column &#x3D; â€œnumberâ€,property &#x3D; â€œnumberâ€),@Result(column &#x3D; â€œidâ€,property &#x3D; â€œproductListâ€,man&#x3D; @Many(select &#x3D;<br>â€œcom.itheima.dao.ProductMapper.selectProductByOrdersldâ€))})Orders selectOrdersByld(int id);</p>
</li>
<li><p>STEP 03<br><mapper class="com.itheima.dao.ProductMapper" /><mapper class="com.itheima.dao.OrdersMapper " /></p>
</li>
<li><p>STEP 04<br>public void selectOrdersByldTest() {&#x2F;&#x2F;1.é€šè¿‡å·¥å…·ç±»ç”ŸæˆSqlSessionå¯¹è±¡<br>SqlSession session &#x3D; MyBatisUtils.getSession();<br>OrdersMapper mapper &#x3D; session.getMapper(OrdersMapper.class);&#x2F;&#x2F;â’‰.æŸ¥è¯¢idä¸º3çš„è®¢å•çš„ä¿¡æ¯<br>Orders orders &#x3D; mapper.selectOrdersByld(3);System.out.printIn(orders.toString());<br>session.close();}</p>
</li>
</ul>
<h2 id="æ¡ˆä¾‹ï¼šåŸºäºMyBatisæ³¨è§£çš„å­¦ç”Ÿç®¡ç†ç¨‹åº"><a href="#æ¡ˆä¾‹ï¼šåŸºäºMyBatisæ³¨è§£çš„å­¦ç”Ÿç®¡ç†ç¨‹åº" class="headerlink" title="æ¡ˆä¾‹ï¼šåŸºäºMyBatisæ³¨è§£çš„å­¦ç”Ÿç®¡ç†ç¨‹åº"></a>æ¡ˆä¾‹ï¼šåŸºäºMyBatisæ³¨è§£çš„å­¦ç”Ÿç®¡ç†ç¨‹åº</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/y91.png"></p>
<p>ä½¿ç”¨MyBatisæ³¨è§£å®ç°ä¸‹åˆ—è¦æ±‚<br>(1) MyBatisæ³¨è§£å®ç°æŸ¥è¯¢æ“ä½œã€‚æ ¹æ®è¡¨1å’Œè¡¨2åœ¨æ•°æ®åº“åˆ†åˆ«åˆ›å»ºä¸€ä¸ªå­¦ç”Ÿè¡¨s_studentå’Œä¸€ä¸ªç­çº§è¡¨c_classï¼Œå¹¶æŸ¥è¯¢idä¸º2çš„å­¦ç”Ÿçš„ä¿¡æ¯ã€‚<br>(2)MyBatisæ³¨è§£å®ç°ä¿®æ”¹æ“ä½œã€‚ä¿®æ”¹idä¸º4çš„å­¦ç”Ÿçš„å§“åä¿®æ”¹ä¸ºæé›·ï¼Œå¹´é¾„ä¿®æ”¹ä¸º21ã€‚<br>(3)MyBatisæ³¨è§£å®ç°ä¸€å¯¹å¤šæŸ¥è¯¢ã€‚æŸ¥è¯¢å‡ºäºŒç­æ‰€æœ‰å­¦ç”Ÿçš„ä¿¡æ¯ã€‚</p>
<ul>
<li>STEP 02<br>æ•°æ®åº“å‡†å¤‡:åœ¨åä¸ºmybatisçš„æ•°æ®åº“ä¸­ï¼Œåˆ›å»ºä¸¤ä¸ªæ•°æ®è¡¨ï¼Œå’Œç­çº§è¡¨c_classï¼ŒåŒæ—¶åœ¨è¡¨ä¸­é¢„å…ˆæ’å…¥å‡ æ¡æµ‹è¯•æ•°æ®ã€‚<br>USE mybatis;</li>
</ul>
<p>#åˆ›å»ºä¸€ä¸ªåç§°ä¸ºc_classçš„è¡¨CREATE TABLE c_class<br>id int(32)PRIMARY KEY AUTO_INCREMENT,classname varchar(40);<br>INSERT INTO c_class VALUES (1,â€™ä¸€ç­â€™);INSERTINTO c_class VALUES (2,â€™äºŒç­â€™);#åˆ›å»ºs studentè¡¨åŒç†</p>
<ul>
<li>STEP 03<br>POJOç±»å‡†å¤‡:åœ¨é¡¹ç›®çš„src&#x2F;main&#x2F;javaç›®å½•ä¸‹åˆ›å»ºcom.itheima.poioåŒ….åœ¨com.itheima.pojoåŒ…ä¸­åˆ›å»ºæŒä¹…åŒ–ç±»IClassï¼Œå¹¶åœ¨ç±»ä¸­å®šä¹‰ç›¸å¤´ä»¥<br>å°è£…lClasså¯¹è±¡çš„idã€ç­çº§åç§°ä»¥åŠå…³è”çš„å­¦ç”Ÿé›†åˆç­‰å±æ€§ã€‚<br>public class lClass<br>private Integer id;private String classname;l&#x2F;ä¸»é”®idï¼Œç­çº§åç§°private List<lStudent> studentList;<br>@Override<br>public String toString() return â€œIClass{â€œ +â€id&#x3D;â€ + id +<br>â€œ , classname&#x3D;â€™â€ + classname +â€, studentList&#x3D;â€ + studentList + â€˜Y ;<br>}</li>
<li>STEP 04<br>åˆ›å»ºMapperæ¥å£:åœ¨é¡¹ç›®çš„src&#x2F;main&#x2F;javaç›®å½•ä¸‹åˆ›å»ºcom.itheincom.itheima.daoåŒ…ä¸‹åˆ›å»ºlStudentMapperæ¥å£ï¼Œç”¨äºç¼–ä¸@ vrec<br>æŸ¥è¯¢è¯­å¥ã€‚<br>package com.itheima.dao;<br>import com.itheima.pojo.IStudent;<br>import org.apache.ibatis.annotations.Select;public interface lStudentMapper {<br>@Select(â€œselect * from s_student where id &#x3D; #{id}â€)lStudent selectStudent(int id);}</li>
</ul>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="å¤´åƒ"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/d20f536c64d06e5fcf4bfe2ec5dc25d.jpg" title="å¤´åƒ" alt="å¤´åƒ"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/d20f536c64d06e5fcf4bfe2ec5dc25d.jpg" title="å¤´åƒ" alt="å¤´åƒ"></a><div class="post-copyright__author_name">Smith</div><div class="post-copyright__author_desc">äººç”Ÿå¤ªçŸ­ï¼Œè¦å¹²çš„äº‹å¤ªå¤šï¼Œæˆ‘è¦äº‰åˆ†å¤ºç§’</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="è¯¥æ–‡ç« ä¸ºåŸåˆ›æ–‡ç« ï¼Œæ³¨æ„ç‰ˆæƒåè®®" href="https://smithhs.cn/2024/05/27/2024-05-27-Mybatis%E7%AC%94%E8%AE%B0/">åŸåˆ›</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://smithhs.cn/2024/05/27/2024-05-27-Mybatis%E7%AC%94%E8%AE%B0/')">Mybatisç¬”è®°</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="èµèµä½œè€…"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>æ‰“èµä½œè€…</div><div class="reward-main"><div class="reward-all"><span class="reward-title">æ„Ÿè°¢ä½ èµäºˆæˆ‘å‰è¿›çš„åŠ›é‡</span><ul class="reward-group"><li class="reward-item"><a href="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/1.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/1.jpg" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/2.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/2.jpg" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">èµèµè€…åå•</div><div class="reward-dec">å› ä¸ºä½ ä»¬çš„æ”¯æŒè®©æˆ‘æ„è¯†åˆ°å†™æ–‡ç« çš„ä»·å€¼ğŸ™</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="ä½¿ç”¨æ‰‹æœºè®¿é—®è¿™ç¯‡æ–‡ç« "><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://smithhs.cn/2024/05/27/2024-05-27-Mybatis%E7%AC%94%E8%AE%B0/"></div><div class="reward-dec">ä½¿ç”¨æ‰‹æœºè®¿é—®è¿™ç¯‡æ–‡ç« </div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=Mybatisç¬”è®°&amp;url=https://smithhs.cn/2024/05/27/2024-05-27-Mybatis%E7%AC%94%E8%AE%B0/&amp;pic=https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/MyBatis-1.jpg" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="å¤åˆ¶é“¾æ¥" onclick="rm.copyPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="https://smithhs.cn" target="_blank">Smith</a>ï¼</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/MyBatis/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>MyBatis<span class="tagsPageCount">1</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/jupyter.webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://lib.baomitu.com/social-share.js/1.0.16/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://lib.baomitu.com/social-share.js/1.0.16/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/05/24/2024-05-24%E6%89%8B%E6%8A%8A%E6%89%8B%E5%B8%A6%E4%BD%A0%E9%B2%81Java%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%B7%A5%E5%85%B7/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/javeEE.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">æ‰‹æŠŠæ‰‹å¸¦ä½ é²Javaä»£ç ç”Ÿæˆå·¥å…·</div></div></a></div><div class="next-post pull-right"><a href="/2024/05/27/2024-05-27-Spring%E7%AC%94%E8%AE%B0/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/javaspring.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">Springç¬”è®°</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>æ–‡ç« ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-%E5%88%9D%E8%AF%86MyBatis%E6%A1%86%E6%9E%B6"><span class="toc-number">1.</span> <span class="toc-text">1.åˆè¯†MyBatisæ¡†æ¶</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-%E6%A1%86%E6%9E%B6-Framework"><span class="toc-number">1.1.</span> <span class="toc-text">1.1.æ¡†æ¶(Framework)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-Jdbc"><span class="toc-number">1.2.</span> <span class="toc-text">1.2.Jdbc</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-1-%E6%A6%82%E8%BF%B0"><span class="toc-number">1.2.1.</span> <span class="toc-text">1.2.1.æ¦‚è¿°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-2-%E7%BC%BA%E7%82%B9"><span class="toc-number">1.2.2.</span> <span class="toc-text">1.2.2.ç¼ºç‚¹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-3-%E8%A7%A3%E5%86%B3"><span class="toc-number">1.2.3.</span> <span class="toc-text">1.2.3.è§£å†³</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-MyBatis"><span class="toc-number">1.3.</span> <span class="toc-text">1.3.MyBatis</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-1-MyBatis%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">1.3.1.</span> <span class="toc-text">1.3.1.MyBatisæ˜¯ä»€ä¹ˆ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-2-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BF%E9%97%AE%E6%8A%80%E6%9C%AF%E7%9A%84%E5%8F%91%E5%B1%95%E5%8E%86%E7%A8%8B"><span class="toc-number">1.3.2.</span> <span class="toc-text">1.3.2.æ•°æ®åº“è®¿é—®æŠ€æœ¯çš„å‘å±•å†ç¨‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-3-MyBatis%E7%9A%84%E6%9C%AC%E8%B4%A8"><span class="toc-number">1.3.3.</span> <span class="toc-text">1.3.3.MyBatisçš„æœ¬è´¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-4-MyBatis%E7%9A%84%E7%9B%AE%E7%9A%84"><span class="toc-number">1.3.4.</span> <span class="toc-text">1.3.4.MyBatisçš„ç›®çš„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-5-%E7%AC%AC%E4%B8%80%E4%B8%AAMyBatis%E7%A4%BA%E4%BE%8B"><span class="toc-number">1.3.5.</span> <span class="toc-text">1.3.5.ç¬¬ä¸€ä¸ªMyBatisç¤ºä¾‹</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-MyBatis%E5%AE%9E%E7%8E%B0CRUD"><span class="toc-number">2.</span> <span class="toc-text">2.MyBatiså®ç°CRUD</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E5%B8%B8%E7%94%A8Sql%E8%AF%AD%E5%8F%A5"><span class="toc-number">2.1.</span> <span class="toc-text">2.1.å¸¸ç”¨Sqlè¯­å¥</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-MyBatis%E5%AE%9E%E7%8E%B0CRUD"><span class="toc-number">2.2.</span> <span class="toc-text">2.2.MyBatiså®ç°CRUD</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-1-%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="toc-number">2.2.1.</span> <span class="toc-text">2.2.1.åˆ›å»ºé¡¹ç›®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-2-%E6%B7%BB%E5%8A%A0%E4%BE%9D%E8%B5%96"><span class="toc-number">2.2.2.</span> <span class="toc-text">2.2.2.æ·»åŠ ä¾èµ–</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-3-%E6%B7%BB%E5%8A%A0MyBatis%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">2.2.3.</span> <span class="toc-text">2.2.3.æ·»åŠ MyBatisæ ¸å¿ƒé…ç½®æ–‡ä»¶</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-%E5%88%9B%E5%BB%BAPojo%E7%B1%BB"><span class="toc-number">2.3.</span> <span class="toc-text">2.3.åˆ›å»ºPojoç±»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-%E7%BC%96%E5%86%99Mapper%E6%98%A0%E5%B0%84"><span class="toc-number">2.4.</span> <span class="toc-text">2.4.ç¼–å†™Mapperæ˜ å°„</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-5-%E5%BC%95%E5%85%A5Mapper%E6%98%A0%E5%B0%84"><span class="toc-number">2.5.</span> <span class="toc-text">2.5.å¼•å…¥Mapperæ˜ å°„</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-6-%E4%BD%BF%E7%94%A8%E6%98%A0%E5%B0%84"><span class="toc-number">2.6.</span> <span class="toc-text">2.6.ä½¿ç”¨æ˜ å°„</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-MyBatis%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">3.</span> <span class="toc-text">3.MyBatisé…ç½®æ–‡ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-%E6%A0%B8%E5%BF%83%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">3.1.</span> <span class="toc-text">3.1.æ ¸å¿ƒé…ç½®æ–‡ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-1-%E6%A6%82%E8%BF%B0"><span class="toc-number">3.1.1.</span> <span class="toc-text">3.1.1.æ¦‚è¿°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-2-%E9%85%8D%E7%BD%AE%E9%A1%B9"><span class="toc-number">3.1.2.</span> <span class="toc-text">3.1.2.é…ç½®é¡¹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE"><span class="toc-number">3.2.</span> <span class="toc-text">.2.å¸¸ç”¨é…ç½®</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-1-Properties"><span class="toc-number">3.2.1.</span> <span class="toc-text">3.2.1.Properties</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-2-environments"><span class="toc-number">3.2.2.</span> <span class="toc-text">3.2.2.environments</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-%E5%B0%81%E8%A3%85Util%E5%B7%A5%E5%85%B7%E7%B1%BB"><span class="toc-number">4.</span> <span class="toc-text">4.å°è£…Utilå·¥å…·ç±»</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA"><span class="toc-number">4.1.</span> <span class="toc-text">4.1.é¡¹ç›®æ­å»º</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-1-%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="toc-number">4.1.1.</span> <span class="toc-text">4.1.1.åˆ›å»ºé¡¹ç›®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-2-%E6%B7%BB%E5%8A%A0%E4%BE%9D%E8%B5%96"><span class="toc-number">4.1.2.</span> <span class="toc-text">4.1.2.æ·»åŠ ä¾èµ–</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-3-%E7%BC%96%E5%86%99%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">4.1.3.</span> <span class="toc-text">4.1.3.ç¼–å†™é…ç½®æ–‡ä»¶</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-%E5%B0%81%E8%A3%85Util%E5%B7%A5%E5%85%B7%E7%B1%BB"><span class="toc-number">4.2.</span> <span class="toc-text">4.2.å°è£…Utilå·¥å…·ç±»</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-1-%E5%AF%B9%E8%B1%A1%E7%9A%84%E8%8C%83%E5%9B%B4"><span class="toc-number">4.2.1.</span> <span class="toc-text">4.2.1.å¯¹è±¡çš„èŒƒå›´</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-2-%E5%B0%81%E8%A3%85Util%E5%B7%A5%E5%85%B7%E7%B1%BB"><span class="toc-number">4.2.2.</span> <span class="toc-text">4.2.2.å°è£…Utilå·¥å…·ç±»</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-3-%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7%E7%B1%BB"><span class="toc-number">4.3.</span> <span class="toc-text">4.3.æµ‹è¯•å·¥å…·ç±»</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-1-%E9%9C%80%E6%B1%82"><span class="toc-number">4.3.1.</span> <span class="toc-text">4.3.1.éœ€æ±‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-2-%E5%AE%9E%E7%8E%B0"><span class="toc-number">4.3.2.</span> <span class="toc-text">4.3.2.å®ç°</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-%E5%88%97%E5%90%8D%E4%B8%8E%E5%AD%97%E6%AE%B5%E5%90%8D%E4%B8%8D%E4%B8%80%E8%87%B4"><span class="toc-number">5.</span> <span class="toc-text">5.åˆ—åä¸å­—æ®µåä¸ä¸€è‡´</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-%E9%97%AE%E9%A2%98"><span class="toc-number">5.1.</span> <span class="toc-text">5.1.é—®é¢˜</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">5.2.</span> <span class="toc-text">5.2.è§£å†³æ–¹æ¡ˆ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-1-%E5%AD%97%E6%AE%B5%E5%88%AB%E5%90%8D"><span class="toc-number">5.2.1.</span> <span class="toc-text">5.2.1.å­—æ®µåˆ«å</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-2-ResultMap%E6%8F%8F%E8%BF%B0%E6%98%A0%E5%B0%84%E5%85%B3%E7%B3%BB"><span class="toc-number">5.2.2.</span> <span class="toc-text">5.2.2.ResultMapæè¿°æ˜ å°„å…³ç³»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-3-%E5%90%AF%E7%94%A8mapUnderscoreToCamelCase"><span class="toc-number">5.2.3.</span> <span class="toc-text">5.2.3.å¯ç”¨mapUnderscoreToCamelCase</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-%E9%9D%A2%E5%90%91%E6%8E%A5%E5%8F%A3%E5%BC%80%E5%8F%91"><span class="toc-number">6.</span> <span class="toc-text">6.é¢å‘æ¥å£å¼€å‘</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1-%E5%B8%B8%E8%A7%81%E5%BC%82%E5%B8%B8"><span class="toc-number">6.1.</span> <span class="toc-text">6.1.å¸¸è§å¼‚å¸¸</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-1-%E9%94%99%E8%AF%AF1"><span class="toc-number">6.1.1.</span> <span class="toc-text">6.1.1.é”™è¯¯1</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-2-%E9%94%99%E8%AF%AF2"><span class="toc-number">6.1.2.</span> <span class="toc-text">6.1.2.é”™è¯¯2</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-3-%E9%94%99%E8%AF%AF3"><span class="toc-number">6.1.3.</span> <span class="toc-text">6.1.3.é”™è¯¯3</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-4-%E9%94%99%E8%AF%AF4"><span class="toc-number">6.1.4.</span> <span class="toc-text">6.1.4.é”™è¯¯4</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-5-%E9%94%99%E8%AF%AF5"><span class="toc-number">6.1.5.</span> <span class="toc-text">6.1.5.é”™è¯¯5</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-6-%E9%94%99%E8%AF%AF6"><span class="toc-number">6.1.6.</span> <span class="toc-text">6.1.6.é”™è¯¯6</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-7-%E9%94%99%E8%AF%AF7"><span class="toc-number">6.1.7.</span> <span class="toc-text">6.1.7.é”™è¯¯7</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-8-%E9%94%99%E8%AF%AF8"><span class="toc-number">6.1.8.</span> <span class="toc-text">6.1.8.é”™è¯¯8</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-9-%E9%94%99%E8%AF%AF9"><span class="toc-number">6.1.9.</span> <span class="toc-text">6.1.9.é”™è¯¯9</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2-%E9%9D%A2%E5%90%91%E6%8E%A5%E5%8F%A3%E5%BC%80%E5%8F%91"><span class="toc-number">6.2.</span> <span class="toc-text">6.2.é¢å‘æ¥å£å¼€å‘</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-1-%E9%9D%A2%E5%90%91%E6%8E%A5%E5%8F%A3%E5%BC%80%E5%8F%91%E7%9A%84%E5%8E%9F%E5%88%99"><span class="toc-number">6.2.1.</span> <span class="toc-text">6.2.1.é¢å‘æ¥å£å¼€å‘çš„åŸåˆ™</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-2-%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4"><span class="toc-number">6.2.2.</span> <span class="toc-text">6.2.2.å®ç°æ­¥éª¤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-3-%E5%AE%9E%E7%8E%B0"><span class="toc-number">6.2.3.</span> <span class="toc-text">6.2.3.å®ç°</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-%E5%8A%A8%E6%80%81SQL%E8%AF%AD%E5%8F%A5"><span class="toc-number">7.</span> <span class="toc-text">7.åŠ¨æ€SQLè¯­å¥</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#7-1-%E5%A4%9A%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2"><span class="toc-number">7.1.</span> <span class="toc-text">7.1.å¤šæ¡ä»¶æŸ¥è¯¢</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-1-%E9%9C%80%E6%B1%82"><span class="toc-number">7.1.1.</span> <span class="toc-text">7.1.1.éœ€æ±‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-2-SQL%E8%AF%AD%E5%8F%A5"><span class="toc-number">7.1.2.</span> <span class="toc-text">7.1.2.SQLè¯­å¥</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-3-%E6%9D%A1%E4%BB%B6%E7%BB%84%E5%90%88"><span class="toc-number">7.1.3.</span> <span class="toc-text">7.1.3.æ¡ä»¶ç»„åˆ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-2-%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F"><span class="toc-number">7.2.</span> <span class="toc-text">7.2.å®ç°æ–¹å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-1-%E4%BC%A0%E7%BB%9F%E6%96%B9%E5%BC%8F"><span class="toc-number">7.2.1.</span> <span class="toc-text">7.2.1.ä¼ ç»Ÿæ–¹å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-2-MyBatis%E6%96%B9%E5%BC%8F"><span class="toc-number">7.2.2.</span> <span class="toc-text">7.2.2.MyBatisæ–¹å¼</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-3-%E5%8A%A8%E6%80%81SQL%E8%AF%AD%E5%8F%A5"><span class="toc-number">7.3.</span> <span class="toc-text">7.3.åŠ¨æ€SQLè¯­å¥</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-4-If%E6%A0%87%E7%AD%BE"><span class="toc-number">7.4.</span> <span class="toc-text">7.4.Ifæ ‡ç­¾</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-4-1-%E9%9C%80%E6%B1%82"><span class="toc-number">7.4.1.</span> <span class="toc-text">7.4.1.éœ€æ±‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-4-2-%E5%AE%9E%E7%8E%B0"><span class="toc-number">7.4.2.</span> <span class="toc-text">7.4.2.å®ç°</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-5-Where%E6%A0%87%E7%AD%BE"><span class="toc-number">7.5.</span> <span class="toc-text">7.5.Whereæ ‡ç­¾</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-5-1-%E5%AE%9E%E7%8E%B0"><span class="toc-number">7.5.1.</span> <span class="toc-text">7.5.1.å®ç°</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-6-Foreach%E6%A0%87%E7%AD%BE"><span class="toc-number">7.6.</span> <span class="toc-text">7.6.Foreachæ ‡ç­¾</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-6-1-%E9%9C%80%E6%B1%82"><span class="toc-number">7.6.1.</span> <span class="toc-text">7.6.1.éœ€æ±‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-6-2-%E5%AE%9E%E7%8E%B0"><span class="toc-number">7.6.2.</span> <span class="toc-text">7.6.2.å®ç°</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-7-Choose%E6%A0%87%E7%AD%BE"><span class="toc-number">7.7.</span> <span class="toc-text">7.7.Chooseæ ‡ç­¾</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-7-1-%E9%9C%80%E6%B1%82"><span class="toc-number">7.7.1.</span> <span class="toc-text">7.7.1.éœ€æ±‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-7-2-%E5%AE%9E%E7%8E%B0"><span class="toc-number">7.7.2.</span> <span class="toc-text">7.7.2.å®ç°</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#8-%E5%A4%9A%E8%A1%A8%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="toc-number">8.</span> <span class="toc-text">8.å¤šè¡¨è¿æ¥æŸ¥è¯¢</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#8-1-%E8%A1%A8%E9%97%B4%E5%85%B3%E7%B3%BB"><span class="toc-number">8.1.</span> <span class="toc-text">8.1.è¡¨é—´å…³ç³»</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-1-%E4%B8%80%E5%AF%B9%E4%B8%80"><span class="toc-number">8.1.1.</span> <span class="toc-text">8.1.1.ä¸€å¯¹ä¸€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-2-%E4%B8%80%E5%AF%B9%E5%A4%9A"><span class="toc-number">8.1.2.</span> <span class="toc-text">8.1.2.ä¸€å¯¹å¤š</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-3-%E5%A4%9A%E5%AF%B9%E4%B8%80"><span class="toc-number">8.1.3.</span> <span class="toc-text">8.1.3.å¤šå¯¹ä¸€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-4-%E5%A4%9A%E5%AF%B9%E5%A4%9A"><span class="toc-number">8.1.4.</span> <span class="toc-text">8.1.4.å¤šå¯¹å¤š</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-%E5%A4%9A%E8%A1%A8%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="toc-number">8.1.5.</span> <span class="toc-text">8.2.å¤šè¡¨è¿æ¥æŸ¥è¯¢</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-1-%E4%B8%80%E5%AF%B9%E4%B8%80"><span class="toc-number">8.1.6.</span> <span class="toc-text">8.2.1.ä¸€å¯¹ä¸€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2-2-%E4%B8%80%E5%AF%B9%E5%A4%9A"><span class="toc-number">8.1.7.</span> <span class="toc-text">8.2.2.ä¸€å¯¹å¤š</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#9-Web%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F"><span class="toc-number">9.</span> <span class="toc-text">9.Webåº”ç”¨ç¨‹åº</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#9-1-%E5%88%86%E7%B1%BB"><span class="toc-number">9.1.</span> <span class="toc-text">9.1.åˆ†ç±»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-2-%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">9.2.</span> <span class="toc-text">9.2.æœåŠ¡å™¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-3-Tomcat%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">9.3.</span> <span class="toc-text">9.3.TomcatæœåŠ¡å™¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3-1-%E6%A6%82%E8%BF%B0"><span class="toc-number">9.3.1.</span> <span class="toc-text">9.3.1.æ¦‚è¿°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3-2-%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="toc-number">9.3.2.</span> <span class="toc-text">9.3.2.ç›®å½•ç»“æ„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3-3-Tomcat%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E5%90%AF%E5%8A%A8%E4%B8%8E%E5%81%9C%E6%AD%A2"><span class="toc-number">9.3.3.</span> <span class="toc-text">9.3.3.TomcatæœåŠ¡å™¨çš„å¯åŠ¨ä¸åœæ­¢</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3-4-%E6%B5%8B%E8%AF%95"><span class="toc-number">9.3.4.</span> <span class="toc-text">9.3.4.æµ‹è¯•</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-4-Web%E9%A1%B9%E7%9B%AE"><span class="toc-number">9.4.</span> <span class="toc-text">9.4.Webé¡¹ç›®</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-4-1-%E5%88%9B%E5%BB%BAweb%E9%A1%B9%E7%9B%AE"><span class="toc-number">9.4.1.</span> <span class="toc-text">9.4.1.åˆ›å»ºwebé¡¹ç›®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-4-2-%E5%90%AF%E5%8A%A8web%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F"><span class="toc-number">9.4.2.</span> <span class="toc-text">9.4.2.å¯åŠ¨webåº”ç”¨ç¨‹åº</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#10-%E7%BB%83%E4%B9%A0"><span class="toc-number">10.</span> <span class="toc-text">10.ç»ƒä¹ </span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#10-1-%E9%9C%80%E6%B1%82"><span class="toc-number">10.1.</span> <span class="toc-text">10.1.éœ€æ±‚</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-2-%E5%8A%9F%E8%83%BD%E6%A8%A1%E5%9D%97"><span class="toc-number">10.2.</span> <span class="toc-text">10.2.åŠŸèƒ½æ¨¡å—</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-3-%E5%BA%93%E8%A1%A8%E8%AE%BE%E8%AE%A1"><span class="toc-number">10.3.</span> <span class="toc-text">10.3.åº“è¡¨è®¾è®¡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-3-1-%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">10.3.1.</span> <span class="toc-text">10.3.1.æ•°æ®åº“</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-3-2-%E8%A1%A8"><span class="toc-number">10.3.2.</span> <span class="toc-text">10.3.2.è¡¨</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-4-%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-number">10.4.</span> <span class="toc-text">10.4.ä»£ç å®ç°</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-4-1-%E5%88%9B%E5%BB%BA%E9%A1%B9%E7%9B%AE"><span class="toc-number">10.4.1.</span> <span class="toc-text">10.4.1.åˆ›å»ºé¡¹ç›®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-4-2-%E8%BF%90%E8%A1%8Cweb%E9%A1%B9%E7%9B%AE"><span class="toc-number">10.4.2.</span> <span class="toc-text">10.4.2.è¿è¡Œwebé¡¹ç›®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-4-3-%E5%AE%9E%E7%8E%B0%E5%AD%A6%E7%94%9F%E5%88%97%E8%A1%A8"><span class="toc-number">10.4.3.</span> <span class="toc-text">10.4.3.å®ç°å­¦ç”Ÿåˆ—è¡¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-4-4-%E6%B7%BB%E5%8A%A0%E5%AD%A6%E7%94%9F%E4%BF%A1%E6%81%AF"><span class="toc-number">10.4.4.</span> <span class="toc-text">10.4.4.æ·»åŠ å­¦ç”Ÿä¿¡æ¯</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-4-5-%E4%B8%8B%E6%8B%89%E5%88%97%E8%A1%A8%E7%BB%91%E5%AE%9A%E6%95%B0%E6%8D%AE"><span class="toc-number">10.4.5.</span> <span class="toc-text">10.4.5.ä¸‹æ‹‰åˆ—è¡¨ç»‘å®šæ•°æ®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-4-6-%E5%88%9D%E5%A7%8B%E5%8C%96%E6%9B%B4%E6%96%B0%E6%95%B0%E6%8D%AE"><span class="toc-number">10.4.6.</span> <span class="toc-text">10.4.6.åˆå§‹åŒ–æ›´æ–°æ•°æ®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-4-7-%E4%BF%AE%E6%94%B9radio%E7%9A%84%E9%80%89%E4%B8%AD%E7%8A%B6%E6%80%81"><span class="toc-number">10.4.7.</span> <span class="toc-text">10.4.7.ä¿®æ”¹radioçš„é€‰ä¸­çŠ¶æ€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-4-8-%E4%BF%AE%E6%94%B9%E4%B8%8B%E6%8B%89%E5%88%97%E8%A1%A8%E7%9A%84%E9%80%89%E4%B8%AD%E7%8A%B6%E6%80%81"><span class="toc-number">10.4.8.</span> <span class="toc-text">10.4.8.ä¿®æ”¹ä¸‹æ‹‰åˆ—è¡¨çš„é€‰ä¸­çŠ¶æ€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-4-9-%E6%9B%B4%E6%96%B0%E8%A1%A8%E4%B8%AD%E6%95%B0%E6%8D%AE"><span class="toc-number">10.4.9.</span> <span class="toc-text">10.4.9.æ›´æ–°è¡¨ä¸­æ•°æ®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-4-11-%E5%A4%9A%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2"><span class="toc-number">10.4.10.</span> <span class="toc-text">10.4.11.å¤šæ¡ä»¶æŸ¥è¯¢</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-4-12-%E4%B8%A4%E8%A1%A8%E8%81%94%E6%9F%A5"><span class="toc-number">10.4.11.</span> <span class="toc-text">10.4.12.ä¸¤è¡¨è”æŸ¥</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#11-%E7%BC%93%E5%AD%98"><span class="toc-number">11.</span> <span class="toc-text">11.ç¼“å­˜</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#11-1-%E6%A6%82%E8%BF%B0"><span class="toc-number">11.1.</span> <span class="toc-text">11.1.æ¦‚è¿°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-2-%E4%BD%9C%E7%94%A8"><span class="toc-number">11.2.</span> <span class="toc-text">11.2.ä½œç”¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-3-%E4%B8%80%E7%BA%A7%E7%BC%93%E5%AD%98"><span class="toc-number">11.3.</span> <span class="toc-text">11.3.ä¸€çº§ç¼“å­˜</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-3-1-%E6%A6%82%E8%BF%B0"><span class="toc-number">11.3.1.</span> <span class="toc-text">11.3.1.æ¦‚è¿°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-3-2-%E7%89%B9%E7%82%B9"><span class="toc-number">11.3.2.</span> <span class="toc-text">11.3.2.ç‰¹ç‚¹</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-4-%E4%BA%8C%E7%BA%A7%E7%BC%93%E5%AD%98"><span class="toc-number">11.4.</span> <span class="toc-text">11.4.äºŒçº§ç¼“å­˜</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-4-1-%E6%A6%82%E8%BF%B0"><span class="toc-number">11.4.1.</span> <span class="toc-text">11.4.1.æ¦‚è¿°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-4-2-%E5%AE%9E%E7%8E%B0"><span class="toc-number">11.4.2.</span> <span class="toc-text">11.4.2.å®ç°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-4-3-%E7%89%B9%E7%82%B9"><span class="toc-number">11.4.3.</span> <span class="toc-text">11.4.3.ç‰¹ç‚¹</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Mybatis"><span class="toc-number">12.</span> <span class="toc-text">Mybatis</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%86%E6%9E%B6%E6%A6%82%E8%BF%B0"><span class="toc-number">12.1.</span> <span class="toc-text">æ¡†æ¶æ¦‚è¿°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%86%E6%9E%B6%E7%9A%84%E4%BC%98%E5%8A%BF"><span class="toc-number">12.2.</span> <span class="toc-text">æ¡†æ¶çš„ä¼˜åŠ¿</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BD%93%E5%89%8D%E4%B8%BB%E6%B5%81%E6%A1%86%E6%9E%B6"><span class="toc-number">12.3.</span> <span class="toc-text">å½“å‰ä¸»æµæ¡†æ¶</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BC%A0%E7%BB%9FJDBC%E7%9A%84%E5%8A%A3%E5%8A%BF"><span class="toc-number">12.4.</span> <span class="toc-text">ä¼ ç»ŸJDBCçš„åŠ£åŠ¿</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mybatis%E6%A6%82%E8%BF%B0"><span class="toc-number">12.5.</span> <span class="toc-text">Mybatisæ¦‚è¿°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mybatis%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA"><span class="toc-number">12.6.</span> <span class="toc-text">Mybatisç¯å¢ƒæ­å»º</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mybatis%E5%85%A5%E9%97%A8%E7%A8%8B%E5%BA%8F"><span class="toc-number">12.7.</span> <span class="toc-text">Mybatiså…¥é—¨ç¨‹åº</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mybatis%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">12.8.</span> <span class="toc-text">Mybatiså·¥ä½œåŸç†</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SqlSessionFactoryBuilder%E5%AF%B9%E8%B1%A1"><span class="toc-number">12.9.</span> <span class="toc-text">SqlSessionFactoryBuilderå¯¹è±¡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SqlSessionFactory%E5%AF%B9%E8%B1%A1"><span class="toc-number">12.10.</span> <span class="toc-text">SqlSessionFactoryå¯¹è±¡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SqlSession%E5%AF%B9%E8%B1%A1"><span class="toc-number">12.11.</span> <span class="toc-text">SqlSessionå¯¹è±¡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mybatis%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E4%B8%BB%E8%A6%81%E5%85%83%E7%B4%A0"><span class="toc-number">12.12.</span> <span class="toc-text">Mybatisé…ç½®æ–‡ä»¶çš„ä¸»è¦å…ƒç´ </span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#properties%E5%85%83%E7%B4%A0"><span class="toc-number">12.13.</span> <span class="toc-text">propertieså…ƒç´ </span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#setting%E5%85%83%E7%B4%A0"><span class="toc-number">12.14.</span> <span class="toc-text">settingå…ƒç´ </span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#typeAliases%E5%85%83%E7%B4%A0"><span class="toc-number">12.15.</span> <span class="toc-text">typeAliaseså…ƒç´ </span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#environments%E5%85%83%E7%B4%A0"><span class="toc-number">12.16.</span> <span class="toc-text">environmentså…ƒç´ </span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mappers%E5%85%83%E7%B4%A0"><span class="toc-number">12.17.</span> <span class="toc-text">mapperså…ƒç´ </span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mybatis%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6%E4%B8%AD%E7%9A%84%E5%B8%B8%E7%94%A8%E5%85%83%E7%B4%A0"><span class="toc-number">12.18.</span> <span class="toc-text">Mybatisæ˜ å°„æ–‡ä»¶ä¸­çš„å¸¸ç”¨å…ƒç´ </span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#select%E5%85%83%E7%B4%A0"><span class="toc-number">12.19.</span> <span class="toc-text">selectå…ƒç´ </span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#insert%E5%85%83%E7%B4%A0"><span class="toc-number">12.20.</span> <span class="toc-text">insertå…ƒç´ </span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#update%E5%85%83%E7%B4%A0"><span class="toc-number">12.21.</span> <span class="toc-text">updateå…ƒç´ </span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#delete%E5%85%83%E7%B4%A0"><span class="toc-number">12.22.</span> <span class="toc-text">deleteå…ƒç´ </span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sql%E5%85%83%E7%B4%A0"><span class="toc-number">12.23.</span> <span class="toc-text">sqlå…ƒç´ </span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#resultMap%E5%85%83%E7%B4%A0"><span class="toc-number">12.24.</span> <span class="toc-text">resultMapå…ƒç´ </span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E5%91%98%E5%B7%A5%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F"><span class="toc-number">12.25.</span> <span class="toc-text">æ¡ˆä¾‹ï¼šå‘˜å·¥ç®¡ç†ç³»ç»Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%A8%E6%80%81SQL%E4%B8%AD%E7%9A%84%E5%85%83%E7%B4%A0"><span class="toc-number">12.26.</span> <span class="toc-text">åŠ¨æ€SQLä¸­çš„å…ƒç´ </span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#if%E5%85%83%E7%B4%A0"><span class="toc-number">12.27.</span> <span class="toc-text">ifå…ƒç´ </span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#choose%E3%80%81when%E3%80%81otherwise%E5%85%83%E7%B4%A0"><span class="toc-number">12.28.</span> <span class="toc-text">chooseã€whenã€otherwiseå…ƒç´ </span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#where%E5%85%83%E7%B4%A0%E5%92%8Ctrim%E5%85%83%E7%B4%A0"><span class="toc-number">12.29.</span> <span class="toc-text">whereå…ƒç´ å’Œtrimå…ƒç´ </span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0%E5%85%83%E7%B4%A0"><span class="toc-number">12.30.</span> <span class="toc-text">æ›´æ–°å…ƒç´ </span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#foreach%E5%85%83%E7%B4%A0%E4%B8%AD%E7%9A%84%E5%B1%9E%E6%80%A7"><span class="toc-number">12.31.</span> <span class="toc-text">foreachå…ƒç´ ä¸­çš„å±æ€§</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#foreach%E5%85%83%E7%B4%A0%E8%BF%AD%E4%BB%A3%E6%95%B0%E7%BB%84"><span class="toc-number">12.32.</span> <span class="toc-text">foreachå…ƒç´ è¿­ä»£æ•°ç»„</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#foreach%E5%85%83%E7%B4%A0%E8%BF%AD%E4%BB%A3List"><span class="toc-number">12.33.</span> <span class="toc-text">foreachå…ƒç´ è¿­ä»£List</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#foreach%E5%85%83%E7%B4%A0%E8%BF%AD%E4%BB%A3Map"><span class="toc-number">12.34.</span> <span class="toc-text">foreachå…ƒç´ è¿­ä»£Map</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E5%AD%A6%E7%94%9F%E4%BF%A1%E6%81%AF%E6%9F%A5%E8%AF%A2%E7%B3%BB%E7%BB%9F"><span class="toc-number">12.35.</span> <span class="toc-text">æ¡ˆä¾‹ï¼šå­¦ç”Ÿä¿¡æ¯æŸ¥è¯¢ç³»ç»Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E8%81%94%E6%98%A0%E5%B0%84%E6%A6%82%E8%BF%B0"><span class="toc-number">12.36.</span> <span class="toc-text">å…³è”æ˜ å°„æ¦‚è¿°</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E5%AF%B9%E4%B8%80%E6%9F%A5%E8%AF%A2"><span class="toc-number">12.37.</span> <span class="toc-text">ä¸€å¯¹ä¸€æŸ¥è¯¢</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E5%AF%B9%E5%A4%9A%E6%9F%A5%E8%AF%A2"><span class="toc-number">12.38.</span> <span class="toc-text">ä¸€å¯¹å¤šæŸ¥è¯¢</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E5%AF%B9%E5%A4%9A%E6%9F%A5%E8%AF%A2"><span class="toc-number">12.39.</span> <span class="toc-text">å¤šå¯¹å¤šæŸ¥è¯¢</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E7%BA%A7%E7%BC%93%E5%AD%98"><span class="toc-number">12.40.</span> <span class="toc-text">ä¸€çº§ç¼“å­˜</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E7%BA%A7%E7%BC%93%E5%AD%98"><span class="toc-number">12.41.</span> <span class="toc-text">äºŒçº§ç¼“å­˜</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E5%95%86%E5%93%81%E7%9A%84%E7%B1%BB%E5%88%AB"><span class="toc-number">12.42.</span> <span class="toc-text">æ¡ˆä¾‹ï¼šå•†å“çš„ç±»åˆ«</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Select%E6%B3%A8%E8%A7%A3"><span class="toc-number">12.43.</span> <span class="toc-text">@Selectæ³¨è§£</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Insert%E6%B3%A8%E8%A7%A3"><span class="toc-number">12.44.</span> <span class="toc-text">@Insertæ³¨è§£</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Update%E6%B3%A8%E8%A7%A3"><span class="toc-number">12.45.</span> <span class="toc-text">@Updateæ³¨è§£</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Delete%E6%B3%A8%E8%A7%A3"><span class="toc-number">12.46.</span> <span class="toc-text">@Deleteæ³¨è§£</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Param%E6%B3%A8%E8%A7%A3"><span class="toc-number">12.47.</span> <span class="toc-text">@Paramæ³¨è§£</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E5%AF%B9%E4%B8%80%E6%9F%A5%E8%AF%A2-1"><span class="toc-number">12.48.</span> <span class="toc-text">ä¸€å¯¹ä¸€æŸ¥è¯¢</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E5%AF%B9%E5%A4%9A%E6%9F%A5%E8%AF%A2-1"><span class="toc-number">12.49.</span> <span class="toc-text">ä¸€å¯¹å¤šæŸ¥è¯¢</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E5%AF%B9%E5%A4%9A%E6%9F%A5%E8%AF%A2-1"><span class="toc-number">12.50.</span> <span class="toc-text">å¤šå¯¹å¤šæŸ¥è¯¢</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9A%E5%9F%BA%E4%BA%8EMyBatis%E6%B3%A8%E8%A7%A3%E7%9A%84%E5%AD%A6%E7%94%9F%E7%AE%A1%E7%90%86%E7%A8%8B%E5%BA%8F"><span class="toc-number">12.51.</span> <span class="toc-text">æ¡ˆä¾‹ï¼šåŸºäºMyBatisæ³¨è§£çš„å­¦ç”Ÿç®¡ç†ç¨‹åº</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2022 - 2024 By <a class="footer-bar-link" href="/" title="Smith" target="_blank">Smith</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/Smithhss/smithhs.github.io.git" title="Hexo">Hexo</a></div></div></div></footer></div></div></div><div id="sidebar"><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/d20f536c64d06e5fcf4bfe2ec5dc25d.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">æ–‡ç« </div><div class="length-num">77</div></a><a href="/tags/" title="tag"><div class="headline">æ ‡ç­¾</div><div class="length-num">55</div></a><a href="/categories/" title="category"><div class="headline">åˆ†ç±»</div><div class="length-num">6</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="javascript:void(0);"><span> æ–‡ç« </span></a><ul class="menus_item_child" style="left:-79px;"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> éš§é“</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> åˆ†ç±»</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> æ ‡ç­¾</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="javascript:void(0);"><span> æˆ‘çš„</span></a><ul class="menus_item_child" style="left:-31px;"><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> ç›¸å†Œé›†</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> éŸ³ä¹é¦†</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="javascript:void(0);"><span> å…³äº</span></a><ul class="menus_item_child" style="left:-79px;"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> å…³äºæˆ‘</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> é—²è¨€ç¢è¯­</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> éšä¾¿é€›é€›</span></a></li></ul></div></div></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="ç®€ç¹è½¬æ¢">ç¹</button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">æ’­æ”¾éŸ³ä¹</a><div id="console-music-bg"></div><meting-js id="8805965276" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>å¤åˆ¶é€‰ä¸­æ–‡æœ¬</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>ç²˜è´´æ–‡æœ¬</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>å¼•ç”¨åˆ°è¯„è®º</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>æ–°çª—å£æ‰“å¼€</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>å¤åˆ¶é“¾æ¥åœ°å€</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>å¤åˆ¶æ­¤å›¾ç‰‡</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>ä¸‹è½½æ­¤å›¾ç‰‡</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>æ–°çª—å£æ‰“å¼€å›¾ç‰‡</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>ç«™å†…æœç´¢</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>ç™¾åº¦æœç´¢</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>æ’­æ”¾éŸ³ä¹</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>åˆ‡æ¢åˆ°ä¸Šä¸€é¦–</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>åˆ‡æ¢åˆ°ä¸‹ä¸€é¦–</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://music.163.com/#/my/m/music/playlist?id=464586318&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>æŸ¥çœ‹æ‰€æœ‰æ­Œæ›²</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>å¤åˆ¶æ­Œå</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>éšä¾¿é€›é€›</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>åšå®¢åˆ†ç±»</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>æ–‡ç« æ ‡ç­¾</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>å¤åˆ¶åœ°å€</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">å…³é—­çƒ­è¯„</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">æ·±è‰²æ¨¡å¼</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>è½‰ç‚ºç¹é«”</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn1.tianli0.top/npm/js-heo@1.0.6/translate/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.14/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/vanilla-lazyload/17.3.1/lazyload.iife.min.js"></script><script src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/node-snackbar/0.1.16/snackbar.min.js"></script><script>var meting_api = "https://meting.qjqq.cn/?server=:server&type=:type&id=:id&auth=:auth&r=:r";
</script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// æ¶ˆé™¤æ§åˆ¶å°æ‰“å°
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //åœ¨æ¢å¤å‰è¾“å‡ºæ—¥å¿—
  const grt = new Date("07/01/2022 00:00:00"); //æ­¤å¤„ä¿®æ”¹ä½ çš„å»ºç«™æ—¶é—´æˆ–è€…ç½‘ç«™ä¸Šçº¿æ—¶é—´
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `æ¬¢è¿ä½¿ç”¨å®‰çŸ¥é±¼!`,
    `ç”Ÿæ´»æ˜æœ—, ä¸‡ç‰©å¯çˆ±`,
    `
        
       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•—  â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—
      â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘â•šâ•â•â–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘
      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•”â• â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘
      â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘ â–ˆâ–ˆâ–ˆâ•”â•  â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘  â•šâ–ˆâ–ˆâ•”â•  â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘
      â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•
      â•šâ•â•  â•šâ•â•â•šâ•â•  â•šâ•â•â•â•â•šâ•â•â•â•â•â•â•â•šâ•â•  â•šâ•â•â•šâ•â•   â•šâ•â•    â•šâ•â•â•â•â•â•
        
        `,
    "å·²ä¸Šçº¿",
    dnum,
    "å¤©",
    "Â©2022 By å®‰çŸ¥é±¼ V1.5.3",
  ];
  const ascll2 = [`NCC2-036`, `è°ƒç”¨å‰ç½®æ‘„åƒå¤´æ‹ç…§æˆåŠŸï¼Œè¯†åˆ«ä¸ºã€å°ç¬¨è›‹ã€‘.`, `Photo captured: `, `ğŸ¤ª`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#3b70fc",
      "",
      "color:#3b70fc",
      "color:#3b70fc",
      "",
      "color:#3b70fc",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c ä½ å¥½ï¼Œå°ç¬¨è›‹.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c âš¡ Powered by å®‰çŸ¥é±¼ %c ä½ æ­£åœ¨è®¿é—® Smith çš„åšå®¢.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c ä½ å·²æ‰“å¼€æ§åˆ¶å°.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c ä½ ç°åœ¨æ­£å¤„äºç›‘æ§ä¸­.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script>var visitorMail = "visitor@anheyu.com";</script><script>//åŠ¨æ€æ ‡é¢˜
let leaveTitle = 'å†çœ‹çœ‹å˜›ğŸŒˆï¼';
let backTitle = 'æ¬¢è¿å›æ¥âœŒï¸ï¼';
let OriginTitile = document.title
let titleTime
document.addEventListener('visibilitychange', function () {
  if (document.hidden) {
    //ç¦»å¼€å½“å‰é¡µé¢æ—¶æ ‡ç­¾æ˜¾ç¤ºå†…å®¹
    document.title = leaveTitle
    clearTimeout(titleTime)
  } else {
    //è¿”å›å½“å‰é¡µé¢æ—¶æ ‡ç­¾æ˜¾ç¤ºå†…å®¹
    document.title = backTitle + OriginTitile
    //ä¸¤ç§’åå˜å›æ­£å¸¸æ ‡é¢˜
    titleTime = setTimeout(function () {
      document.title = OriginTitile
    }, 2000)
  }
})</script><script async data-pjax src="https://lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/waterfall.js/1.1.0/waterfall.min.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script>// åˆå§‹åŒ–å‡½æ•°
let rm = {};

//ç¦æ­¢å›¾ç‰‡ä¸è¶…é“¾æ¥æ‹–æ‹½
let aElements = document.getElementsByTagName("a");
for (let i = 0; i < aElements.length; i++) {
  aElements[i].setAttribute("draggable", "false");
  let imgElements = aElements[i].getElementsByTagName("img");
  for (let j = 0; j < imgElements.length; j++) {
    imgElements[j].setAttribute("draggable", "false");
  }
}

// æ˜¾ç¤ºèœå•
rm.showRightMenu = function (isTrue, x = 0, y = 0) {
  console.info(x, y)
  let rightMenu = document.getElementById("rightMenu");
  rightMenu.style.top = x + "px";
  rightMenu.style.left = y + "px";
  if (isTrue) {
    rightMenu.style.display = "block";
    stopMaskScroll();
  } else {
    rightMenu.style.display = "none";
  }
};

// éšè—èœå•
rm.hideRightMenu = function () {
  rm.showRightMenu(false);
  let rightMenuMask = document.querySelector("#rightmenu-mask");
  rightMenuMask.style.display = "none";
};

// å°ºå¯¸
let rmWidth = document.getElementById("rightMenu").offsetWidth;
let rmHeight = document.getElementById("rightMenu").offsetHeight;

// é‡æ–°å®šä¹‰å°ºå¯¸
rm.reloadrmSize = function () {
  rightMenu.style.visibility = "hidden";
  rightMenu.style.display = "block";
  // è·å–å®½åº¦å’Œé«˜åº¦
  rmWidth = document.getElementById("rightMenu").offsetWidth;
  rmHeight = document.getElementById("rightMenu").offsetHeight;
  rightMenu.style.visibility = "visible";
};

// è·å–ç‚¹å‡»çš„href
let domhref = "";
let domImgSrc = "";
let globalEvent = null;

var oncontextmenuFunction = function (event) {
  if (document.body.clientWidth > 768) {
    let pageX = event.clientX + 10; //åŠ 10æ˜¯ä¸ºäº†é˜²æ­¢æ˜¾ç¤ºæ—¶é¼ æ ‡é®åœ¨èœå•ä¸Š
    let pageY = event.clientY;

    //å…¶ä»–é¢å¤–èœå•
    const $rightMenuOther = document.querySelector(".rightMenuOther");
    const $rightMenuPlugin = document.querySelector(".rightMenuPlugin");
    const $rightMenuCopyText = document.querySelector("#menu-copytext");
    const $rightMenuPasteText = document.querySelector("#menu-pastetext");
    const $rightMenuCommentText = document.querySelector("#menu-commenttext");
    const $rightMenuNewWindow = document.querySelector("#menu-newwindow");
    const $rightMenuNewWindowImg = document.querySelector("#menu-newwindowimg");
    const $rightMenuCopyLink = document.querySelector("#menu-copylink");
    const $rightMenuCopyImg = document.querySelector("#menu-copyimg");
    const $rightMenuDownloadImg = document.querySelector("#menu-downloadimg");
    const $rightMenuSearch = document.querySelector("#menu-search");
    const $rightMenuSearchBaidu = document.querySelector("#menu-searchBaidu");
    const $rightMenuMusicToggle = document.querySelector("#menu-music-toggle");
    const $rightMenuMusicBack = document.querySelector("#menu-music-back");
    const $rightMenuMusicForward = document.querySelector("#menu-music-forward");
    const $rightMenuMusicPlaylist = document.querySelector("#menu-music-playlist");
    const $rightMenuMusicCopyMusicName = document.querySelector("#menu-music-copyMusicName");

    let href = event.target.href;
    let imgsrc = event.target.currentSrc;

    // åˆ¤æ–­æ¨¡å¼ æ‰©å±•æ¨¡å¼ä¸ºæœ‰äº‹ä»¶
    let pluginMode = false;
    $rightMenuOther.style.display = "block";
    globalEvent = event;

    // æ£€æŸ¥æ˜¯å¦éœ€è¦å¤åˆ¶ æ˜¯å¦æœ‰é€‰ä¸­æ–‡æœ¬
    if (selectTextNow && window.getSelection()) {
      pluginMode = true;
      $rightMenuCopyText.style.display = "block";
      $rightMenuCommentText.style.display = "block";
      $rightMenuSearch.style.display = "block";
      $rightMenuSearchBaidu.style.display = "block";
    } else {
      $rightMenuCopyText.style.display = "none";
      $rightMenuCommentText.style.display = "none";
      $rightMenuSearchBaidu.style.display = "none";
      $rightMenuSearch.style.display = "none";
    }

    //æ£€æŸ¥æ˜¯å¦å³é”®ç‚¹å‡»äº†é“¾æ¥aæ ‡ç­¾
    if (href) {
      pluginMode = true;
      $rightMenuNewWindow.style.display = "block";
      $rightMenuCopyLink.style.display = "block";
      domhref = href;
    } else {
      $rightMenuNewWindow.style.display = "none";
      $rightMenuCopyLink.style.display = "none";
    }

    //æ£€æŸ¥æ˜¯å¦éœ€è¦å¤åˆ¶å›¾ç‰‡
    if (imgsrc) {
      pluginMode = true;
      $rightMenuCopyImg.style.display = "block";
      $rightMenuDownloadImg.style.display = "block";
      $rightMenuNewWindowImg.style.display = "block";
      document.getElementById("rightMenu").style.width="12rem"
      domImgSrc = imgsrc;
    } else {
      $rightMenuCopyImg.style.display = "none";
      $rightMenuDownloadImg.style.display = "none";
      $rightMenuNewWindowImg.style.display = "none";
    }

    // åˆ¤æ–­æ˜¯å¦ä¸ºè¾“å…¥æ¡†
    if (event.target.tagName.toLowerCase() === "input" || event.target.tagName.toLowerCase() === "textarea") {
      pluginMode = true;
      $rightMenuPasteText.style.display = "block";
    } else {
      $rightMenuPasteText.style.display = "none";
    }
    const navMusicEl = document.querySelector("#nav-music");
    //åˆ¤æ–­æ˜¯å¦æ˜¯éŸ³ä¹
    if (navMusicEl && navMusicEl.contains(event.target)) {
      pluginMode = true;
      $rightMenuMusicToggle.style.display = "block";
      $rightMenuMusicBack.style.display = "block";
      $rightMenuMusicForward.style.display = "block";
      $rightMenuMusicPlaylist.style.display = "block";
      $rightMenuMusicCopyMusicName.style.display = "block";
    } else {
      $rightMenuMusicToggle.style.display = "none";
      $rightMenuMusicBack.style.display = "none";
      $rightMenuMusicForward.style.display = "none";
      $rightMenuMusicPlaylist.style.display = "none";
      $rightMenuMusicCopyMusicName.style.display = "none";
    }

    // å¦‚æœä¸æ˜¯æ‰©å±•æ¨¡å¼åˆ™éšè—æ‰©å±•æ¨¡å—
    if (pluginMode) {
      $rightMenuOther.style.display = "none";
      $rightMenuPlugin.style.display = "block";
    } else {
      $rightMenuPlugin.style.display = "none";
    }

    rm.reloadrmSize();

    // é¼ æ ‡é»˜è®¤æ˜¾ç¤ºåœ¨é¼ æ ‡å³ä¸‹æ–¹ï¼Œå½“é¼ æ ‡é å³æˆ–é ä¸‹æ—¶ï¼Œå°†èœå•æ˜¾ç¤ºåœ¨é¼ æ ‡å·¦æ–¹\ä¸Šæ–¹
    if (pageX + rmWidth > window.innerWidth) {
      pageX -= rmWidth + 10;
    }
    if (pageY + rmHeight > window.innerHeight) {
      pageY -= pageY + rmHeight - window.innerHeight;
    }

    rm.showRightMenu(true, pageY, pageX);
    document.getElementById("rightmenu-mask").style.display = "flex";
    return false;
  }
};

// ç›‘å¬å³é”®åˆå§‹åŒ–
window.oncontextmenu = oncontextmenuFunction

// ä¸‹è½½å›¾ç‰‡çŠ¶æ€
rm.downloadimging = false;

// å¤åˆ¶å›¾ç‰‡åˆ°å‰ªè´´æ¿
rm.writeClipImg = function (imgsrc) {
  console.log("æŒ‰ä¸‹å¤åˆ¶");
  rm.hideRightMenu();
  anzhiyu.snackbarShow("æ­£åœ¨ä¸‹è½½ä¸­ï¼Œè¯·ç¨å", false, 10000);
  if (rm.downloadimging == false) {
    rm.downloadimging = true;
    setTimeout(function () {
      copyImage(imgsrc);
      anzhiyu.snackbarShow("å¤åˆ¶æˆåŠŸï¼å›¾ç‰‡å·²æ·»åŠ ç›²æ°´å°ï¼Œè¯·éµå®ˆç‰ˆæƒåè®®");
      rm.downloadimging = false;
    }, "10000");
  }
};

function imageToBlob(imageURL) {
  const img = new Image();
  const c = document.createElement("canvas");
  const ctx = c.getContext("2d");
  img.crossOrigin = "";
  img.src = imageURL;
  return new Promise(resolve => {
    img.onload = function () {
      c.width = this.naturalWidth;
      c.height = this.naturalHeight;
      ctx.drawImage(this, 0, 0);
      c.toBlob(
        blob => {
          // here the image is a blob
          resolve(blob);
        },
        "image/png",
        0.75
      );
    };
  });
}

async function copyImage(imageURL) {
  const blob = await imageToBlob(imageURL);
  const item = new ClipboardItem({ "image/png": blob });
  navigator.clipboard.write([item]);
}

rm.copyUrl = function (id) {
  const input = document.createElement("input"); // Create a new <input> element
  input.id = "copyVal"; // Set the id of the new element to "copyVal"
  document.body.appendChild(input); // Append the new element to the end of the <body> element
  
  const text = id;
  input.value = text;
  input.select();
  input.setSelectionRange(0, input.value.length);
  document.execCommand("copy");
  
  input.remove(); // Remove the <input> element from the DOM
};

function stopMaskScroll() {
  if (document.getElementById("rightmenu-mask")) {
    let xscroll = document.getElementById("rightmenu-mask");
    xscroll.addEventListener(
      "mousewheel",
      function (e) {
        //é˜»æ­¢æµè§ˆå™¨é»˜è®¤æ–¹æ³•
        rm.hideRightMenu();
        // e.preventDefault();
      },
      { passive: true }
    );
  }
  if (document.getElementById("rightMenu")) {
    let xscroll = document.getElementById("rightMenu");
    xscroll.addEventListener(
      "mousewheel",
      function (e) {
        //é˜»æ­¢æµè§ˆå™¨é»˜è®¤æ–¹æ³•
        rm.hideRightMenu();
        // e.preventDefault();
      },
      { passive: true }
    );
  }
}

rm.rightmenuCopyText = function (txt) {
  if (navigator.clipboard) {
    navigator.clipboard.writeText(txt);
  }
  rm.hideRightMenu();
};

rm.copyPageUrl = function (url) {
  if (!url) {
    url = window.location.href;
  }
  rm.copyUrl(url);
  anzhiyu.snackbarShow("å¤åˆ¶é“¾æ¥åœ°å€æˆåŠŸ", false, 2000);
  rm.hideRightMenu();
};

rm.sharePage = function () {
  var content = window.location.href;
  rm.copyUrl(url);
  anzhiyu.snackbarShow("å¤åˆ¶é“¾æ¥åœ°å€æˆåŠŸ", false, 2000);
  rm.hideRightMenu();
};

// å¤åˆ¶å½“å‰é€‰ä¸­æ–‡æœ¬
var selectTextNow = "";
document.onmouseup = document.ondblclick = selceText;

function selceText() {
  var txt;
  if (document.selection) {
    txt = document.selection.createRange().text;
  } else {
    txt = window.getSelection().toString();
  }
  selectTextNow = txt !== "" ? txt : "";
}

// è¯»å–å‰ªåˆ‡æ¿
rm.readClipboard = function () {
  if (navigator.clipboard) {
    navigator.clipboard.readText().then(clipText => rm.insertAtCaret(globalEvent.target, clipText));
  }
};

// ç²˜è´´æ–‡æœ¬åˆ°ç„¦ç‚¹
rm.insertAtCaret = function (elemt, value) {
  const startPos = elemt.selectionStart,
    endPos = elemt.selectionEnd;
  if (document.selection) {
    elemt.focus();
    var sel = document.selection.createRange();
    sel.text = value;
    elemt.focus();
  } else {
    if (startPos || startPos == "0") {
      var scrollTop = elemt.scrollTop;
      elemt.value = elemt.value.substring(0, startPos) + value + elemt.value.substring(endPos, elemt.value.length);
      elemt.focus();
      elemt.selectionStart = startPos + value.length;
      elemt.selectionEnd = startPos + value.length;
      elemt.scrollTop = scrollTop;
    } else {
      elemt.value += value;
      elemt.focus();
    }
  }
};

//ç²˜è´´æ–‡æœ¬
rm.pasteText = function () {
  const result = rm.readClipboard() || "";
  rm.hideRightMenu();
};

//å¼•ç”¨åˆ°è¯„è®º
rm.rightMenuCommentText = function (txt) {
  rm.hideRightMenu();
  const postCommentDom = document.getElementById("post-comment");
  var domTop = postCommentDom.offsetTop;
  window.scrollTo(0, domTop - 80);
  if (txt == "undefined" || txt == "null") txt = "å¥½æ£’ï¼";
  function setText() {
    setTimeout(() => {
      var input = document.getElementsByClassName("el-textarea__inner")[0];
      if (!input) setText();
      let evt = document.createEvent("HTMLEvents");
      evt.initEvent("input", true, true);
      let inputValue = replaceAll(txt, "\n", "\n> ");
      input.value = "> " + inputValue + "\n\n";
      input.dispatchEvent(evt);
      input.focus();
      input.setSelectionRange(-1, -1);
      if (document.getElementById("comment-tips")) {
        document.getElementById("comment-tips").classList.add("show");
      }
    }, 100);
  }
  setText();
};

//æ›¿æ¢æ‰€æœ‰å†…å®¹
function replaceAll(string, search, replace) {
  return string.split(search).join(replace);
}

// ç™¾åº¦æœç´¢
rm.searchBaidu = function () {
  anzhiyu.snackbarShow("å³å°†è·³è½¬åˆ°ç™¾åº¦æœç´¢", false, 2000);
  setTimeout(function () {
    window.open("https://www.baidu.com/s?wd=" + selectTextNow);
  }, "2000");
  rm.hideRightMenu();
};

//åˆ†äº«é“¾æ¥
rm.copyLink = function () {
  rm.rightmenuCopyText(domhref);
  anzhiyu.snackbarShow("å·²å¤åˆ¶é“¾æ¥åœ°å€");
};

function addRightMenuClickEvent() {
  // æ·»åŠ ç‚¹å‡»äº‹ä»¶
  document.getElementById("menu-backward").addEventListener("click", function () {
  window.history.back();
    rm.hideRightMenu();
  });

  document.getElementById("menu-forward").addEventListener("click", function () {
    window.history.forward();
    rm.hideRightMenu();
  });

  document.getElementById("menu-refresh").addEventListener("click", function () {
    window.location.reload();
  });

  document.getElementById("menu-top").addEventListener("click", function () {
    anzhiyu.scrollToDest(0, 500);
    rm.hideRightMenu();
  });

  const menuLinks = document.querySelectorAll(".menu-link");
  menuLinks.forEach(function (link) {
    link.addEventListener("click", rm.hideRightMenu);
  });

  document.getElementById("menu-darkmode").addEventListener("click", anzhiyu.switchDarkMode);

  document.getElementById("menu-home") && document.getElementById("menu-home").addEventListener("click", function () {
    window.location.href = window.location.origin;
  });

  document.getElementById("menu-randomPost").addEventListener("click", function () {
    toRandomPost();
  });

  document.getElementById("menu-commentBarrage").addEventListener("click", anzhiyu.switchCommentBarrage);

  document.getElementById("rightmenu-mask").addEventListener("click", rm.hideRightMenu);

  document.getElementById("rightmenu-mask").addEventListener("contextmenu", function (event) {
    rm.hideRightMenu();
    event.preventDefault(); // Prevent the default context menu from appearing
  });

  document.getElementById("menu-copy").addEventListener("click", rm.copyPageUrl);

  document.getElementById("menu-pastetext").addEventListener("click", rm.pasteText);

  document.getElementById("menu-copytext").addEventListener("click", function () {
    rm.rightmenuCopyText(selectTextNow);
    anzhiyu.snackbarShow("å¤åˆ¶æˆåŠŸï¼Œå¤åˆ¶å’Œè½¬è½½è¯·æ ‡æ³¨æœ¬æ–‡åœ°å€");
  });

  document.getElementById("menu-commenttext").addEventListener("click", function () {
    rm.rightMenuCommentText(selectTextNow);
  });

  document.getElementById("menu-newwindow").addEventListener("click", function () {
    window.open(domhref, "_blank");
    rm.hideRightMenu();
  });

  document.getElementById("menu-copylink").addEventListener("click", rm.copyLink);

  document.getElementById("menu-downloadimg").addEventListener("click", function () {
    anzhiyu.downloadImage(domImgSrc, "anzhiyu");
  });

  document.getElementById("menu-newwindowimg").addEventListener("click", function () {
    window.open(domImgSrc, "_blank");
    rm.hideRightMenu();
  });

  document.getElementById("menu-copyimg").addEventListener("click", function () {
    rm.writeClipImg(domImgSrc);
  });

  document.getElementById("menu-searchBaidu").addEventListener("click", rm.searchBaidu);

  //éŸ³ä¹
  document.getElementById("menu-music-toggle").addEventListener("click", anzhiyu.musicToggle);

  document.getElementById("menu-music-back").addEventListener("click", anzhiyu.musicSkipBack);

  document.getElementById("menu-music-forward").addEventListener("click", anzhiyu.musicSkipForward);

  document.getElementById("menu-music-copyMusicName").addEventListener("click", function () {
    rm.rightmenuCopyText(anzhiyu.musicGetName());
    anzhiyu.snackbarShow("å¤åˆ¶æ­Œæ›²åç§°æˆåŠŸ", false, 3000);
  });

}

addRightMenuClickEvent();</script><script data-pjax>var themeColorMeta = document.querySelector('meta[name="theme-color"]');
var pageHeaderEl = document.getElementById("page-header");
var navMusicEl = document.getElementById("nav-music");
var consoleEl = document.getElementById("console");
// å·²éšæœºçš„æ­Œæ›²
var selectRandomSong = [];
// éŸ³ä¹é»˜è®¤å£°éŸ³å¤§å°
var musicVolume = 0.8;
// æ˜¯å¦åˆ‡æ¢äº†å‘¨æ°ä¼¦éŸ³ä¹åˆ—è¡¨
var changeMusicListFlag = false;
// å½“å‰é»˜è®¤æ’­æ”¾åˆ—è¡¨
var defaultPlayMusicList = [];

document.getElementById("page-name").innerText = document.title.split(" | Smith")[0];
anzhiyu.initIndexEssay();
anzhiyu.changeTimeInEssay();
anzhiyu.removeBodyPaceClass();
anzhiyu.qrcodeCreate();
anzhiyu.changeTimeInAlbumDetail();
anzhiyu.reflashEssayWaterFall();
anzhiyu.sayhi();
anzhiyu.stopImgRightDrag();
anzhiyu.addNavBackgroundInit();
anzhiyu.setValueToBodyType();
anzhiyu.catalogActive();
anzhiyu.tagsPageActive();
anzhiyu.categoriesBarActive();
anzhiyu.topCategoriesBarScroll();
anzhiyu.switchRightClickMenuHotReview();
anzhiyu.getCustomPlayList();
anzhiyu.addEventListenerConsoleMusicList(false);
setTimeout(() => {if (typeof addFriendLinksInFooter === "function") {addFriendLinksInFooter();}}, 200)</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/aplayer/1.10.1/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/aplayer/1.10.1/APlayer.min.js"></script><script src="https://npm.elemecdn.com/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://lib.baomitu.com/pjax/0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div></body></html>