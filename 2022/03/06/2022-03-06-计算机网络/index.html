<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>计算机网络 | Smith</title><meta name="keywords" content="计算机网络"><meta name="author" content="Smith"><meta name="copyright" content="Smith"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="计算机网络"><meta name="application-name" content="计算机网络"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="计算机网络"><meta property="og:url" content="https://smithhs.cn/2022/03/06/2022-03-06-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/index.html"><meta property="og:site_name" content="Smith"><meta property="og:description" content="目录 第 1 章 计算机网络概述 1.1 计算机网络的组成 1.2 计算机网络的分类 1.3 性能指标 1.3.1 带宽 1.3.2 吞吐量 1.3.3 时延 1.3.4 时延带宽积(链路容量) 1.3.5 往返时延RTT​ 1.3.6 利用率 1.4 分层结构 1.4.1 OSI参考模型（7层）"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/network.jpg"><meta property="article:author" content="Smith"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/network.jpg"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://smithhs.cn/2022/03/06/2022-03-06-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"><link rel="preconnect" href="//npm.elemecdn.com"/><link rel="preconnect" href="//npm.onmicrosoft.cn"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/node-snackbar/0.1.16/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.14/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: {"skills":["🤖️ 数码科技爱好者","🔍 分享与热心帮助","🏠 智能家居小能手","🔨 设计开发一条龙","🤝 专修交互与设计","🏃 脚踏实地行动派","🧱 团队小组发动机","💢 壮汉人狠话不多"]},
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":240},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#3b70fc","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '计算机网络',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-09-04 22:58:42',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/d20f536c64d06e5fcf4bfe2ec5dc25d.jpg"/><div class="loading-image-dot"></div><div id="loading-percentage">0%</div></div></div><script>if (GLOBAL_CONFIG.preloader.source == "2" || GLOBAL_CONFIG.preloader.source == "3") {
  const loadingPercentage = document.getElementById("loading-percentage");
  let loadingPercentageTimer = setInterval(function() {
    var progressBar = document.querySelector(".pace-progress");
    if (!progressBar) return
    var currentValue = progressBar.getAttribute("data-progress-text");
    if (currentValue !== loadingPercentage.textContent) {
      loadingPercentage.textContent = currentValue;
      if (currentValue === "100%") {
        clearInterval(loadingPercentageTimer);
      }
    }
  }, 100);
}

const preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div id="web_box"><div id="web_container"><div id="menu-mask"></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" href="https://smithhs.cn/" title="博客" target="_blank"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.png" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" href="http://robot.onliu.cn/" title="Robot" target="_blank"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/cupfox.png" alt="Robot"/><span class="back-menu-item-text">Robot</span></a><a class="back-menu-item" href="http://res.onliu.cn" title="Sale" target="_blank"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://alandodo-1315761622.cos.ap-beijing.myqcloud.com/blog-tuce/tubiao.jpg" alt="Sale"/><span class="back-menu-item-text">Sale</span></a><a class="back-menu-item" href="http://se.onliu.cn/" title="资源共享" target="_blank"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://alandodo-1315761622.cos.ap-beijing.myqcloud.com/blog/x126.png" alt="资源共享"/><span class="back-menu-item-text">资源共享</span></a><a class="back-menu-item" href="https://github.com/Smithhss" title="Github" target="_blank"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/GitHub.png" alt="Github"/><span class="back-menu-item-text">Github</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">Smith</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child" style="left:-79px;"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child" style="left:-31px;"><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child" style="left:-79px;"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于我</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button only-home" id="travellings_button" title="随机前往一个开往项目网站"><a class="site-page" onclick="anzhiyu.totraveling()" title="随机前往一个开往项目网站" href="javascript:void(0);" rel="external nofollow" data-pjax-state="external"><i class="anzhiyufont anzhiyu-icon-train"></i></a></div><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/1.jpg" target="_blank"><img class="post-qr-code-img" alt="wechat" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/1.jpg"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/2.jpg" target="_blank"><img class="post-qr-code-img" alt="alipay" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/2.jpg"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> <span>最新评论</span></span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Android-Studio/" style="font-size: 1.05rem;">Android Studio<sup>1</sup></a><a href="/tags/App/" style="font-size: 1.05rem;">App<sup>2</sup></a><a href="/tags/Butterfly/" style="font-size: 1.05rem;">Butterfly<sup>1</sup></a><a href="/tags/C/" style="font-size: 1.05rem;">C++<sup>1</sup></a><a href="/tags/Docker/" style="font-size: 1.05rem;">Docker<sup>2</sup></a><a href="/tags/Easypan/" style="font-size: 1.05rem;">Easypan<sup>2</sup></a><a href="/tags/GPT/" style="font-size: 1.05rem;">GPT<sup>1</sup></a><a href="/tags/Hexo/" style="font-size: 1.05rem;">Hexo<sup>1</sup></a><a href="/tags/Java/" style="font-size: 1.05rem;">Java<sup>6</sup></a><a href="/tags/JavaWeb/" style="font-size: 1.05rem;">JavaWeb<sup>2</sup></a><a href="/tags/Jrebel/" style="font-size: 1.05rem;">Jrebel<sup>1</sup></a><a href="/tags/LeetCode/" style="font-size: 1.05rem;">LeetCode<sup>1</sup></a><a href="/tags/Linux/" style="font-size: 1.05rem;">Linux<sup>2</sup></a><a href="/tags/Markdown/" style="font-size: 1.05rem;">Markdown<sup>1</sup></a><a href="/tags/Maven/" style="font-size: 1.05rem;">Maven<sup>2</sup></a><a href="/tags/MyBatis/" style="font-size: 1.05rem;">MyBatis<sup>1</sup></a><a href="/tags/MyBatis-Plus/" style="font-size: 1.05rem;">MyBatis-Plus<sup>1</sup></a><a href="/tags/Mysql/" style="font-size: 1.05rem;">Mysql<sup>1</sup></a><a href="/tags/Navicat/" style="font-size: 1.05rem;">Navicat<sup>1</sup></a><a href="/tags/NoSql/" style="font-size: 1.05rem;">NoSql<sup>1</sup></a><a href="/tags/Python/" style="font-size: 1.05rem;">Python<sup>3</sup></a><a href="/tags/SSM/" style="font-size: 1.05rem;">SSM<sup>1</sup></a><a href="/tags/Spring/" style="font-size: 1.05rem;">Spring<sup>2</sup></a><a href="/tags/SpringMVC/" style="font-size: 1.05rem;">SpringMVC<sup>1</sup></a><a href="/tags/VMware/" style="font-size: 1.05rem;">VMware<sup>2</sup></a><a href="/tags/WeChat/" style="font-size: 1.05rem;">WeChat<sup>1</sup></a><a href="/tags/YouHou/" style="font-size: 1.05rem;">YouHou<sup>1</sup></a><a href="/tags/books/" style="font-size: 1.05rem;">books<sup>1</sup></a><a href="/tags/butterfly/" style="font-size: 1.05rem;">butterfly<sup>1</sup></a><a href="/tags/clash/" style="font-size: 1.05rem;">clash<sup>1</sup></a><a href="/tags/error/" style="font-size: 1.05rem;">error<sup>1</sup></a><a href="/tags/project/" style="font-size: 1.05rem;">project<sup>4</sup></a><a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 1.05rem;">前端<sup>1</sup></a><a href="/tags/%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6/" style="font-size: 1.05rem;">开发框架<sup>1</sup></a><a href="/tags/%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/" style="font-size: 1.05rem;">开发环境<sup>1</sup></a><a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" style="font-size: 1.05rem;">操作系统<sup>1</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/" style="font-size: 1.05rem;">数据结构与算法<sup>1</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/" style="font-size: 1.05rem;">计算机组成原理<sup>1</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" style="font-size: 1.05rem;">计算机网络<sup>1</sup></a><a href="/tags/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/" style="font-size: 1.05rem;">软件工程<sup>1</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/09/"><span class="card-archive-list-date">九月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/07/"><span class="card-archive-list-date">七月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/06/"><span class="card-archive-list-date">六月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">7</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/05/"><span class="card-archive-list-date">五月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">17</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/04/"><span class="card-archive-list-date">四月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/12/"><span class="card-archive-list-date">十二月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/11/"><span class="card-archive-list-date">十一月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2022/08/"><span class="card-archive-list-date">八月 2022</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" onclick="anzhiyu.switchDarkMode()" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item on" id="consoleCommentBarrage" onclick="anzhiyu.switchCommentBarrage()" title="热评开关"><a class="commentBarrage"><i class="anzhiyufont anzhiyu-icon-message"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/Programming/">Programming</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" tabindex="-1"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>计算机网络</span></a></span></div></div><h1 class="post-title">计算机网络</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="post-meta-icon anzhiyufont anzhiyu-icon-calendar-days"></i><span class="post-meta-label">发表于</span><time datetime="2022-03-06T03:21:00.000Z" title="发表于 2022-03-06 11:21:00">2022-03-06</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">93.7k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>294分钟</span></span><span class="post-meta-separator"></span><span class="post-meta-pv-cv" id="" data-flag-title="计算机网络"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为石家庄"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>石家庄</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/network.jpg"></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p><strong>目录</strong></p>
<p><a href="#main-toc">第 1 章 计算机网络概述</a></p>
<p><a href="#t0">1.1 计算机网络的组成</a></p>
<p><a href="#t1">1.2 计算机网络的分类</a></p>
<p><a href="#t2">1.3 性能指标</a></p>
<p><a href="#t3">1.3.1 带宽</a></p>
<p><a href="#t4">1.3.2 吞吐量</a></p>
<p><a href="#t5">1.3.3 时延</a></p>
<p><a href="#t6">1.3.4 时延带宽积(链路容量)</a></p>
<p><a href="#t7">1.3.5 往返时延RTT​</a></p>
<p><a href="#t8">1.3.6 利用率</a></p>
<p><a href="#t9">1.4 分层结构</a></p>
<p><a href="#t10">1.4.1 OSI参考模型（7层）</a></p>
<p><a href="#t11">1.4.2 TCP&#x2F;IP参考模型（4层）</a></p>
<p><a href="#t12">1.4.3 合成参考模型（5层）</a></p>
<p><a href="#t13">第 2 章 物理层</a></p>
<p><a href="#t14">2.1 物理层概述</a></p>
<p><a href="#t15">2.2 数据通信基础知识</a></p>
<p><a href="#t16">2.3 码元、波特、速率、带宽*</a></p>
<p><a href="#t17">2.4 奈氏准则、香农定理*</a></p>
<p><a href="#t18">2.4.1 失真</a></p>
<p><a href="#t19">2.4.2 奈氏准则*</a></p>
<p><a href="#t20">2.4.3 香农定理*</a></p>
<p><a href="#t21">2.4.4 “Nice”和”香浓”​</a></p>
<p><a href="#t22">2.5 编码、调制*​</a></p>
<p><a href="#t23">2.5.1 数字数据编码为数字信号​</a></p>
<p><a href="#t24">2.5.2 数字数据调制为模拟信号​</a></p>
<p><a href="#t25">2.5.3 模拟数据编码为数字信号​</a></p>
<p><a href="#t26">2.5.4 模拟数据调制为模拟信号​</a></p>
<p><a href="#t27">2.6 物理层传输介质</a></p>
<p><a href="#t28">2.6.1 导向性传输介质​</a></p>
<p><a href="#t29">2.6.2 非导向性传输介质​</a></p>
<p><a href="#t30">2.7 物理层设备</a></p>
<p><a href="#t31">2.7.1 中继器​</a></p>
<p><a href="#t32">2.7.2 集线器​</a></p>
<p><a href="#t33">第 3 章 数据链路层</a></p>
<p><a href="#t34">3.1 数据链路层概述​</a></p>
<p><a href="#t35">3.2 封装成帧、透明传输​</a></p>
<p><a href="#t36">3.3 差错控制​</a></p>
<p><a href="#t37">3.3.1 检错码（奇偶校验码、CRC循环冗余码）</a></p>
<p><a href="#t38">3.3.2 纠错码（海明码）</a></p>
<p><a href="#t39">3.4 流量控制与可靠传输机制*​</a></p>
<p><a href="#t40">3.4.1 停止-等待协议</a></p>
<p><a href="#t41">3.4.2 后退N帧协议（GBN）</a></p>
<p><a href="#t42">3.4.3 选择重传协议（SR）</a></p>
<p><a href="#t43">3.5 介质访问控制（MAC协议）*</a></p>
<p><a href="#t44">3.5.1 信道划分介质访问控制（静态）（频分FDM、时分TDM、波分WDM、码分CDM）</a></p>
<p><a href="#t45">3.5.2 随机访问介质访问控制（动态）（ALOHA、CSMA、CSMA&#x2F;CD、CSMA&#x2F;CA）</a></p>
<p><a href="#t46">3.5.3 轮询访问介质访问控制（动态）（轮询、令牌传递）​</a></p>
<p><a href="#t47">3.6 局域网</a></p>
<p><a href="#t48">3.6.1 以太网</a></p>
<p><a href="#t49">3.6.2 无线局域网</a></p>
<p><a href="#t50">3.7 广域网​</a></p>
<p><a href="#t51">3.7.1 PPP协议</a></p>
<p><a href="#t52">3.7.2 HDLC协议</a></p>
<p><a href="#t53">3.8 链路层设备</a></p>
<p><a href="#t54">3.8.1 网桥​</a></p>
<p><a href="#t55">3.8.2 交换机</a></p>
<p><a href="#t56">第 4 章 网络层</a></p>
<p><a href="#t57">4.2 数据交换方式*</a></p>
<p><a href="#t58">4.2.1 电路交换​</a></p>
<p><a href="#t59">4.2.2 报文交换​</a></p>
<p><a href="#t60">4.2.3 分组交换（数据报、虚电路）​</a></p>
<p><a href="#t61">4.3 IP*</a></p>
<p><a href="#t62">4.3.1 IP数据报格式​</a></p>
<p><a href="#t63">4.3.2 IP数据报分片</a></p>
<p><a href="#t64">4.3.3 IPv4地址​</a></p>
<p><a href="#t65">4.3.4 网络地址转换（NAT）​</a></p>
<p><a href="#t66">4.3.5 子网划分、子网掩码​</a></p>
<p><a href="#t67">4.3.6 无分类编址CIDR（构成超网）​</a></p>
<p><a href="#t68">4.3.7 ARP协议​</a></p>
<p><a href="#t69">4.3.8 DHCP协议​</a></p>
<p><a href="#t70">4.3.9 ICMP协议​</a></p>
<p><a href="#t71">4.4 IPv6​</a></p>
<p><a href="#t72">4.5 路由算法及路由协议​</a></p>
<p><a href="#t73">4.5.1 RIP协议与距离向量算法​</a></p>
<p><a href="#t74">4.5.2 OSPF协议与链路状态算法​</a></p>
<p><a href="#t75">4.5.3 BGP协议​</a></p>
<p><a href="#t76">4.6 IP组播​​​</a></p>
<p><a href="#t77">4.6.1 硬件组播​</a></p>
<p><a href="#t78">4.6.2 因特网范围内组播​</a></p>
<p><a href="#t79">4.7 移动IP​</a></p>
<p><a href="#t80">4.8 网络层设备</a></p>
<p><a href="#t81">4.8.1 路由器​</a></p>
<p><a href="#t82">第 5 章 传输层</a></p>
<p><a href="#t83">5.1 传输层概述</a></p>
<p><a href="#t84">​</a></p>
<p><a href="#t85">5.2 UDP协议</a> </p>
<p><a href="#t86">5.3 TCP协议*</a></p>
<p><a href="#t87">5.3.1 TCP协议特点​</a></p>
<p><a href="#t88">5.3.2 TCP报文段格式​</a></p>
<p><a href="#t89">5.3.3 TCP连接管理​</a></p>
<p><a href="#t90">5.3.4 TCP可靠传输​</a></p>
<p><a href="#t91">5.3.5 TCP流量控制*</a></p>
<p><a href="#t92">5.3.6 TCP拥塞控制*​</a></p>
<p><a href="#t93">第 6 章 应用层</a></p>
<p><a href="#t94">6.1 应用层概述​</a></p>
<p><a href="#t95">6.2 域名解析系统DNS​</a></p>
<p><a href="#t96">6.3 文件传输协议FTP​</a></p>
<p><a href="#t97">6.4 电子邮件​</a></p>
<p><a href="#t98">6.5 万维网和HTTP协议​</a></p>
<hr>
<h2 id="第-1-章-计算机网络概述"><a href="#第-1-章-计算机网络概述" class="headerlink" title="第 1 章 计算机网络概述"></a>第 1 章 <a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C&spm=1001.2101.3001.7020">计算机网络</a>概述</h2><h3 id="1-1-计算机网络的组成"><a href="#1-1-计算机网络的组成" class="headerlink" title="1.1 计算机网络的组成"></a>1.1 计算机网络的组成</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/7555f832efbead1552342575e9f64473png.jpg"></p>
<h3 id="1-2-计算机网络的分类"><a href="#1-2-计算机网络的分类" class="headerlink" title="1.2 计算机网络的分类"></a>1.2 计算机网络的分类</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/e7bd9af98d5eafb3b01fb4243cf18982png.jpg"> 总线型弊端：若总线断开，则影响很多主机，使其无法转递信息</p>
<p>星型：若主机A和集线器D中间断开，则不影响其他任何主机之间传递信息</p>
<h3 id="1-3-性能指标"><a href="#1-3-性能指标" class="headerlink" title="1.3 性能指标"></a>1.3 <a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87&spm=1001.2101.3001.7020">性能指标</a></h3><h4 id="1-3-1-带宽"><a href="#1-3-1-带宽" class="headerlink" title="1.3.1 带宽"></a>1.3.1 带宽</h4><ul>
<li>指发送数据的最高速率，并不是传播数据的速率</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/bb5bcd39573330d639e9aec67966dda4png.jpg"></p>
<h4 id="1-3-2-吞吐量"><a href="#1-3-2-吞吐量" class="headerlink" title="1.3.2 吞吐量"></a>1.3.2 吞吐量</h4><ul>
<li>所有信道加在一起，接受比特的速率</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/a76383dcbf6ea19e9c6727354dfb33d3png.jpg"></p>
<h4 id="1-3-3-时延"><a href="#1-3-3-时延" class="headerlink" title="1.3.3 时延"></a>1.3.3 时延</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/6e33b404ebf25ebadbf88e10de268456png.jpg"></p>
<h4 id="1-3-4-时延带宽积-链路容量"><a href="#1-3-4-时延带宽积-链路容量" class="headerlink" title="1.3.4 时延带宽积(链路容量)"></a>1.3.4 时延带宽积(链路容量)</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/6e63aac62569f21074336fc2164774dbpng.jpg"></p>
<h4 id="1-3-5-往返时延RTT"><a href="#1-3-5-往返时延RTT" class="headerlink" title="1.3.5 往返时延RTT"></a>1.3.5 往返时延<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=RTT&spm=1001.2101.3001.7020">RTT</a><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/7c5d3b8d2f1cd69641f73a3b1f5f4a10png.jpg"></h4><h4 id="1-3-6-利用率"><a href="#1-3-6-利用率" class="headerlink" title="1.3.6 利用率"></a>1.3.6 利用率</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/a2dc130b89a02d57df4ac54843d8c92dpng.jpg">  </p>
<h3 id="1-4-分层结构"><a href="#1-4-分层结构" class="headerlink" title="1.4 分层结构"></a>1.4 分层结构</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/7f4a9b1194a25d6454f6947b90f03cb0png.jpg"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/c751def463858c2309556857f9c808fdpng.jpg"></p>
<ul>
<li><p>第n层在向第n+1层提供服务时，此服务不仅包含第n层本身的功能，还包含由下层服务提供的功能</p>
</li>
<li><p>仅仅在相邻层间有接口，且所提供服务的具体实现细节对上一层完全屏蔽</p>
</li>
<li><p>体系结构是抽象的，而实现是指能运行的一些软件和硬件</p>
</li>
</ul>
<h4 id="1-4-1-OSI参考模型（7层）"><a href="#1-4-1-OSI参考模型（7层）" class="headerlink" title="1.4.1 OSI参考模型（7层）"></a>1.4.1 OSI参考模型（7层）</h4><ul>
<li>法定标准</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/44d225a3febe904013e425c191da7c5apng.jpg"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/60dfe51a2beb23bec19bb24d8d7814bbpng.jpg"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/5178f4ac9b06d29c10d107fded6e9d50png.jpg"></p>
<ol>
<li>应用层：所有能和用户交互产生网络流量的程序</li>
<li>表示层： <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/2296ea3ca32eb6bddcf4587ccb0a265cpng.jpg"> </li>
<li>会话层： <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/c348181f065c3ffebcb17f853c99bcd2png.jpg"></li>
<li>传输层：  <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/58faecd0a24878f2f694cd94df182f5dpng.jpg"></li>
<li> 网络层：<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/63f62f241dd5f46f3ef110f6743905d3png.jpg"></li>
<li>数据链路层 ：<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/6d61f84036e8b82c3b12effa4f1701d3png.jpg"></li>
<li> 物理层：<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/04cebb73440b81173a8f681ede32e777png.jpg"></li>
</ol>
<h4 id="1-4-2-TCP-IP参考模型（4层）"><a href="#1-4-2-TCP-IP参考模型（4层）" class="headerlink" title="1.4.2 TCP&#x2F;IP参考模型（4层）"></a>1.4.2 TCP&#x2F;IP参考模型（4层）</h4><ul>
<li>事实标准</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/3fee7d54a83c224cc2932e954f6be378png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/75ae4ae81ee5cd8a9acb7f4c0316c5f1png.jpg"></p>
<h4 id="1-4-3-合成参考模型（5层）"><a href="#1-4-3-合成参考模型（5层）" class="headerlink" title="1.4.3 合成参考模型（5层）"></a>1.4.3 合成参考模型（5层）</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/0481f4b565396a08328d02f08dc1f65fpng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/49d3eed597e628c34d3d24bfa6ceedb6png.jpg"></p>
<hr>
<h2 id="第-2-章-物理层"><a href="#第-2-章-物理层" class="headerlink" title="第 2 章 物理层"></a>第 2 章 物理层</h2><h3 id="2-1-物理层概述"><a href="#2-1-物理层概述" class="headerlink" title="2.1 物理层概述"></a>2.1 物理层概述</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/cc85422d6aaf1cc5f2c45a6c99364c98png.jpg"></p>
<h3 id="2-2-数据通信基础知识"><a href="#2-2-数据通信基础知识" class="headerlink" title="2.2 数据通信基础知识"></a>2.2 数据通信基础知识</h3><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/2b710d9cd81ae492059333ab20d17329png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/416d148635527d861307cea047c0a06bpng.jpg"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/c6a235a19eeaeb7c529373bf3f86a2e3png.jpg"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/3f5cf447bfdc608c6c5044ea6783e471png.jpg"></p>
<h3 id="2-3-码元、波特、速率、带宽"><a href="#2-3-码元、波特、速率、带宽" class="headerlink" title="2.3 码元、波特、速率、带宽*"></a>2.3 码元、波特、速率、带宽*</h3><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/ecc3ce8e5f8a6dcb375ece909d6f98c6png.jpg"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/d22afbf40231d616e3de6c2200af6d4apng.jpg"></p>
<h3 id="2-4-奈氏准则、香农定理"><a href="#2-4-奈氏准则、香农定理" class="headerlink" title="2.4 奈氏准则、香农定理*"></a>2.4 奈氏准则、香农定理*</h3><h4 id="2-4-1-失真"><a href="#2-4-1-失真" class="headerlink" title="2.4.1 失真"></a>2.4.1 失真</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/2152b4c9fd10be2bdde1ade9c149634cpng.jpg"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/5d3190783f153cf29fe001ab0126fa0epng.jpg"></p>
<h4 id="2-4-2-奈氏准则"><a href="#2-4-2-奈氏准则" class="headerlink" title="2.4.2 奈氏准则*"></a>2.4.2 奈氏准则*</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/14fe4d2d3dbd57e3f13ae3bd3bf85f23png.jpg"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/104f0d605b4ab2b4dddc6db87c0c3d80png.jpg"></p>
<h4 id="2-4-3-香农定理"><a href="#2-4-3-香农定理" class="headerlink" title="2.4.3 香农定理*"></a>2.4.3 香农定理*</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/c34613f95d88c0b0a432e01b06f83777png.jpg"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/6aaf2b596ac5f900a868000af7e0fff0png.jpg"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/a2acf418981386b4a5393732a007cd42png.jpg"></p>
<h4 id="2-4-4-“Nice”和”香浓”"><a href="#2-4-4-“Nice”和”香浓”" class="headerlink" title="2.4.4 “Nice”和”香浓”"></a>2.4.4 “Nice”和”香浓”<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/e2de5686f38eb3f115fb53afa984627fpng.jpg"></h4><h3 id="2-5-编码、调制"><a href="#2-5-编码、调制" class="headerlink" title="2.5 编码、调制*"></a>2.5 编码、调制*<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/cce76aa38edfda5c86dec75851a66d0fpng.jpg"></h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/57acc4bff8a5b414327c79fad6a7d786png.jpg"></p>
<h4 id="2-5-1-数字数据编码为数字信号"><a href="#2-5-1-数字数据编码为数字信号" class="headerlink" title="2.5.1 数字数据编码为数字信号"></a>2.5.1 数字数据编码为数字信号<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/b5702831bb3331cfeb36d7a36ea24774png.jpg"></h4><h4 id="2-5-2-数字数据调制为模拟信号"><a href="#2-5-2-数字数据调制为模拟信号" class="headerlink" title="2.5.2 数字数据调制为模拟信号"></a>2.5.2 数字数据调制为模拟信号<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/07f1466557874d734a9b7729fed844b1png.jpg"></h4><h4 id="2-5-3-模拟数据编码为数字信号"><a href="#2-5-3-模拟数据编码为数字信号" class="headerlink" title="2.5.3 模拟数据编码为数字信号"></a>2.5.3 模拟数据编码为数字信号<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/854a83f5400b3b233c5ad93d2e3126e4png.jpg"></h4><h4 id="2-5-4-模拟数据调制为模拟信号"><a href="#2-5-4-模拟数据调制为模拟信号" class="headerlink" title="2.5.4 模拟数据调制为模拟信号"></a>2.5.4 模拟数据调制为模拟信号<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/c99ab98c498df68c444ce0c7f530cf01png.jpg"></h4><h3 id="2-6-物理层传输介质"><a href="#2-6-物理层传输介质" class="headerlink" title="2.6 物理层传输介质"></a>2.6 物理层传输介质</h3><h4 id="2-6-1-导向性传输介质"><a href="#2-6-1-导向性传输介质" class="headerlink" title="2.6.1 导向性传输介质"></a>2.6.1 导向性传输介质<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/5f0254dc46465886129249caa19a216epng.jpg"></h4><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/28ab373373b3746433bccf4fcca59e84png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/36ddee70df09dd8ba53b0b93bc6740e9png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/80970244060f683682df5ed21d9914e6png.jpg"></p>
<h4 id="2-6-2-非导向性传输介质"><a href="#2-6-2-非导向性传输介质" class="headerlink" title="2.6.2 非导向性传输介质"></a>2.6.2 非导向性传输介质<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/2ed12869a1c3683dcb97e53dbd50c50fpng.jpg"></h4><h3 id="2-7-物理层设备"><a href="#2-7-物理层设备" class="headerlink" title="2.7 物理层设备"></a>2.7 物理层设备</h3><h4 id="2-7-1-中继器"><a href="#2-7-1-中继器" class="headerlink" title="2.7.1 中继器"></a>2.7.1 中继器<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/7f731036f2f550d7edd52b1c50d75adfpng.jpg"></h4><h4 id="2-7-2-集线器"><a href="#2-7-2-集线器" class="headerlink" title="2.7.2 集线器"></a>2.7.2 集线器<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/bd2c88a7c0482f384008b8be32f5c71dpng.jpg"></h4><hr>
<h2 id="第-3-章-数据链路层"><a href="#第-3-章-数据链路层" class="headerlink" title="第 3 章 数据链路层"></a>第 3 章 数据链路层</h2><h3 id="3-1-数据链路层概述"><a href="#3-1-数据链路层概述" class="headerlink" title="3.1 数据链路层概述"></a>3.1 数据链路层概述<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/73f4d94638b7ce212f1b4ffdb23ee4a5png.jpg"></h3><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/4f977348dc06454068c42d3e003c04e3png.jpg"></p>
<h3 id="3-2-封装成帧、透明传输"><a href="#3-2-封装成帧、透明传输" class="headerlink" title="3.2 封装成帧、透明传输"></a>3.2 封装成帧、透明传输<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/3f35e114f009c98b727cc2c36ca6f12bpng.jpg"></h3><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/79995c518772c7c54faf4af33abbc5eepng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/cc1ac104b50b354d4f2678ceb8c493aapng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/35e3f465d279a57b8e8d358f7bc1ede3png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/40e31abeb7d3a6e67528fb44a44f89b0png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/48d83581a7012e1ce263c0a6ce8dd2f8png.jpg"></p>
<h3 id="3-3-差错控制"><a href="#3-3-差错控制" class="headerlink" title="3.3 差错控制"></a>3.3 差错控制<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/5f26c67cd413ef5fb5647c2b96f95f0epng.jpg"></h3><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/d3a8306710a75b283a6a0202be22bdb2png.jpg"></p>
<h4 id="3-3-1-检错码（奇偶校验码、CRC循环冗余码）"><a href="#3-3-1-检错码（奇偶校验码、CRC循环冗余码）" class="headerlink" title="3.3.1 检错码（奇偶校验码、CRC循环冗余码）"></a>3.3.1 检错码（奇偶校验码、CRC循环冗余码）</h4><p><strong>3.3.1.1 奇偶校验码</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/6b81a8a871f73ff4a6e80a97b8685110png.jpg"></p>
<p><strong>3.3.1.2 CRC循环冗余码*</strong><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/fdebd7d058c77b18f92260ba79cabd1epng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/030c564d4fc50880e1bf90d0fa2dd61cpng.jpg"></p>
<h4 id="3-3-2-纠错码（海明码）"><a href="#3-3-2-纠错码（海明码）" class="headerlink" title="3.3.2 纠错码（海明码）"></a>3.3.2 纠错码（海明码）</h4><p><strong>3.3.2.1 海明码*</strong><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/2370cdf6d65cf6e6741bb36dffca6ca8png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/8fc8cc141849eeb0fc8f2a8b55d18996png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/d9b81c8b7890080124b9c9bb2c9a7d19png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/95a5aa4daf5f0cd8ad19f45f1afd3c1cpng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/c26b11e4c7ea6fc7b0e1fff16375f6c7png.jpg"></p>
<h3 id="3-4-流量控制与可靠传输机制"><a href="#3-4-流量控制与可靠传输机制" class="headerlink" title="3.4 流量控制与可靠传输机制*"></a>3.4 流量控制与可靠传输机制*<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/b1d36cbe2c70ee72069e35e15442fa06png.jpg"></h3><ul>
<li><p>流量控制：控制发送速率，使接受方有足够的缓冲空间来接受每一个帧</p>
</li>
<li><p>可靠传输：发送端发啥，接收端就接受啥</p>
</li>
<li><p>滑动窗口解决：</p>
<ul>
<li><p>流量控制（收不下就不给确认，想发也发不了）</p>
</li>
<li><p>可靠传输（发送方<strong>自动重传</strong>）</p>
</li>
</ul>
</li>
</ul>
<h4 id="3-4-1-停止-等待协议"><a href="#3-4-1-停止-等待协议" class="headerlink" title="3.4.1 停止-等待协议"></a>3.4.1 停止-等待协议</h4><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/913ff02cae2771af33606a87b356e832png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/f3fdc35c180387129a10d00fe6590fc5png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/fe6188457d4f521dbabfc8d44ef7b1c0png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/421f4d2172373beba9344a76449e5163png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/d67411d9a72f7c8122c65fe907174707png.jpg"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/58fcad0b2b4bda941fa311c09238cd32png.jpg"></p>
<h4 id="3-4-2-后退N帧协议（GBN）"><a href="#3-4-2-后退N帧协议（GBN）" class="headerlink" title="3.4.2 后退N帧协议（GBN）"></a>3.4.2 后退N帧协议（GBN）</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/189d6b52a568b9ec2660cfd4ee94a785png.jpg"> <strong>有窗口就可以发送（发送端有窗口可以发送数据帧，接收端有窗口可以发送确认帧）</strong> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/e714c8ab1586c341ee4545198e3066b1png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/f6d4d93d60a3dfab5e7805f742485b8cpng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/9297e5ccd66b4e915f04a4e2786cdb36png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/52298de437841095a2f523b8b05aad87png.jpg"></p>
<p>GBN总结重点：</p>
<ul>
<li><p>累计确认（偶尔捎带确认）</p>
</li>
<li><p>接收方只按顺序接受帧，不安顺序无情丢弃</p>
</li>
<li><p>确认序列号最大的、按序到达的帧</p>
</li>
<li><p>发送窗口最大为2的n次方-1，接收窗口大小为1</p>
</li>
</ul>
<h4 id="3-4-3-选择重传协议（SR）"><a href="#3-4-3-选择重传协议（SR）" class="headerlink" title="3.4.3 选择重传协议（SR）"></a>3.4.3 选择重传协议（SR）</h4><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/1b6ddd1db14d9f6274dc90c5098acea3png.jpg"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/adec9894d54cf69b2d065e3a511276adpng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/3e38dd44ace3cbf7afb7242716e442efpng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/1d790b24f6a4b3e6d737668995290f2fpng.jpg"></p>
<p>SR重点总结：</p>
<ul>
<li><p>对数据帧逐一确认，收一个确认一个</p>
</li>
<li><p>只重传出错帧</p>
</li>
<li><p>接收方有缓存</p>
</li>
</ul>
<h3 id="3-5-介质访问控制（MAC协议）"><a href="#3-5-介质访问控制（MAC协议）" class="headerlink" title="3.5 介质访问控制（MAC协议）*"></a>3.5 介质访问控制（MAC协议）*</h3><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/c11e515a80ffda18d98887420821c6fcpng.jpg"></p>
<h4 id="3-5-1-信道划分介质访问控制（静态）（频分FDM、时分TDM、波分WDM、码分CDM）"><a href="#3-5-1-信道划分介质访问控制（静态）（频分FDM、时分TDM、波分WDM、码分CDM）" class="headerlink" title="3.5.1 信道划分介质访问控制（静态）（频分FDM、时分TDM、波分WDM、码分CDM）"></a>3.5.1 信道划分介质访问控制（静态）（频分FDM、时分TDM、波分WDM、码分CDM）</h4><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/39e51b2e9046d8e4b3c0d11569eaa48dpng.jpg"></p>
<p><strong>3.5.1.1 频分多路复用（FDM）</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/5186fa63b5d7f3b325a0c3ee986a0548png.jpg"></p>
<p><strong>3.5.1.2 时分多路复用（TDM）</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/af511073808977cf4d270d4f0828f966png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/05097ca2ac90b676f7123d27a8a3a986png.jpg"></p>
<p><strong>3.5.1.3 波分多路复用（WDM）</strong><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/e01b3219ef35fe9c5195a4e485929a37png.jpg"></p>
<p><strong>3.5.1.4 码分多路复用（CDM）*</strong><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/d010a976de187dbe9d64033e9d66ca07png.jpg"></p>
<h4 id="3-5-2-随机访问介质访问控制（动态）（ALOHA、CSMA、CSMA-CD、CSMA-CA）"><a href="#3-5-2-随机访问介质访问控制（动态）（ALOHA、CSMA、CSMA-CD、CSMA-CA）" class="headerlink" title="3.5.2 随机访问介质访问控制（动态）（ALOHA、CSMA、CSMA&#x2F;CD、CSMA&#x2F;CA）"></a>3.5.2 随机访问介质访问控制（动态）（ALOHA、CSMA、CSMA&#x2F;CD、CSMA&#x2F;CA）</h4><p><strong>3.5.2.1 ALOHA协议</strong><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/d58970dcfae0e3effe926e26c4825b86png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/8e4093d1e682d3387f53f7cfd52e25a7png.jpg"></p>
<ul>
<li><p>纯ALOHA协议比时隙ALOHA协议吞吐量更低，效率更低</p>
</li>
<li><p>纯ALOHA想发就发，时隙ALOHA只有在时间片段开始时才能发</p>
</li>
</ul>
<p><strong>3.5.2.2 CSMA协议</strong><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/9c8a4121ba46f193e583f11957bd72f4png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/ef0ee9ee341646a80830ff972f4ce348png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/9bf0238df5267801815f361957acd06bpng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/484287c3276ef7d72b5bffa65091d096png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/6f7ceb957163ff0aaf098feb07aad0dapng.jpg"></p>
<p> 注：p-坚持CSMA是有的主机(p的概率)直接发送，有的主机(1-p的概率)监听到下一个时序再发送，降低了冲突的可能性</p>
<p><strong>3.5.2.3 CSMA&#x2F;CD协议**</strong></p>
<ul>
<li>应用于半双工网络，总线型以太网（有线）</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/e4648eb73eb3b8ac13b98384cfe0d13dpng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/11af5cae7640a517644b79424dd0e62epng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/ecb920c87e5853f5b6e99912b5159022png.jpg"></p>
<p> 最小帧长是为了确保在检测到碰撞时，帧还没有发完。检测到碰撞的最短时间是2(tao)</p>
<p><strong>3.5.2.4 CSMA&#x2F;CA协议</strong><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/f7d0605ac76e12e38b4c16a648373579png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/822d489e7a3ab4f37bb0d8a80b9d972dpng.jpg"></p>
<p>CSMA&#x2F;CD与CSMA&#x2F;CA区别：</p>
<ul>
<li><p>相同点：</p>
<ul>
<li>都属于CSMA的思路，其核心是<strong>先听再说</strong>，即需要先监听信道，若空闲，再发送数据。</li>
</ul>
</li>
<li><p>不同点：</p>
<ul>
<li><p>传输介质不同：CSMA&#x2F;CD用于<strong>总线式以太网【有线】</strong>，而<strong>CSMA&#x2F;CA用于无线局域网【无线】</strong></p>
</li>
<li><p>载波检测方式不同：因传输介质的不同，CSMA&#x2F;CD与CSMA&#x2F;CA的检测方式也不同。CSMA&#x2F;CD通过电缆中电压的变化来检测，当数据发生碰撞时，电缆中的电压就会随之发生变化；而CSMA&#x2F;CA采用能量检测（ED）、载波检测（CS）和能量载波混合检测三种检测信道空闲的方式。</p>
</li>
<li><p>CSMA&#x2F;CD检测冲突，CSMA&#x2F;CA避免冲突，二者出现冲突后都会进行有限的重传</p>
</li>
</ul>
</li>
</ul>
<h4 id="3-5-3-轮询访问介质访问控制（动态）（轮询、令牌传递）"><a href="#3-5-3-轮询访问介质访问控制（动态）（轮询、令牌传递）" class="headerlink" title="3.5.3 轮询访问介质访问控制（动态）（轮询、令牌传递）"></a>3.5.3 轮询访问介质访问控制（动态）（轮询、令牌传递）<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/2caffbf14d07c4975f63f78d5e34a53dpng.jpg"></h4><p><strong>3.5.3.1 轮询协议</strong><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/b1602d9be4ead84cc2e55e9c7472c704png.jpg"></p>
<p><strong>3.5.3.2 令牌传递协议*</strong><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/6db409a9a9aeb494f7f8828573441803png.jpg"></p>
<h3 id="3-6-局域网"><a href="#3-6-局域网" class="headerlink" title="3.6 局域网"></a>3.6 局域网</h3><p>局域网（Local Area Network）：简称LAN，是指在某一区域内由多台计算机互联成的计算机组，使用<strong>广播信道</strong></p>
<p>决定区域网的主要因素为：<strong>网络拓扑</strong>、<strong>传输介质</strong>、<strong>介质访问控制方法</strong></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/1b005f0b720439c225a8a5ca5072c1ccpng.jpg"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/0ddb93ffc7f8e7c52b39b237837f186apng.jpg"></p>
<p>局域网分类：</p>
<ul>
<li><p>以太网：采用IEEE 802.3标准</p>
</li>
<li><p>无线局域网：采用IEEE 802.11标准</p>
</li>
</ul>
<p>IEEE 802标准：</p>
<ul>
<li><p>IEEE 802.3：<strong>以太网</strong>介质访问控制协议及物理层技术规范</p>
</li>
<li><p>IEEE 802.5：<strong>令牌环网</strong>介质访问控制协议及物理层技术规范</p>
</li>
<li><p>IEEE 802.8：<strong>光纤</strong>技术咨询组，提供有光关光纤联网的技术咨询</p>
</li>
<li><p>IEEE 802.11：<strong>无线局域网</strong>介质访问控制协议及物理层技术规范</p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/908762206d4f3ba50479d35c0c479870png.jpg"></p>
<h4 id="3-6-1-以太网"><a href="#3-6-1-以太网" class="headerlink" title="3.6.1 以太网"></a>3.6.1 以太网</h4><ul>
<li><p>也称802.3局域网，是基带总线局域网规范，使用CSMA&#x2F;CD技术，满足网络速率要求：10Mb&#x2F;s ~ 10Gb&#x2F;s</p>
</li>
<li><p>以太网的两个标准：</p>
<ul>
<li><p>DIX Ethernet V2：第一个局域网产品（以太网）规约</p>
</li>
<li><p>IEEE 802.3：IEEE 802委员会802.3工作组指定的第一个IEEE的以太网标准</p>
</li>
</ul>
</li>
<li><p>以太网提供无连接、不可靠的服务：</p>
<ul>
<li><p>无连接：发送方和接收方无“握手过程”</p>
</li>
<li><p>不可靠：不对发送方的数据帧编号，接收方不向发送方进行确认，差错帧直接丢弃，差错纠正由高层负责</p>
</li>
<li><p><strong>只能实现无差错的接受，不实现可靠传输</strong></p>
</li>
</ul>
</li>
<li><p>以太网拓扑：</p>
<ul>
<li>逻辑上是总线型，物理上是星型</li>
</ul>
</li>
</ul>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/c73e5a792faab6d03a0eccf8431ee3acpng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/1c90cb2b5d4c4aeda249ea3a8195aea4png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/0454fba5c4e0f4af28111406412b0859png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/a3ad07f610ae9e0df5b973b83588ddeepng.jpg"></p>
<h4 id="3-6-2-无线局域网"><a href="#3-6-2-无线局域网" class="headerlink" title="3.6.2 无线局域网"></a>3.6.2 无线局域网</h4><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/62c9a7a1b9749c848c83ff7e9a27891cpng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/6c3e6e7e1ad4ba440ef3b42f0bca6a46png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/aa24995b0340541b85b7feaefc2eefe4png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/2fb900baa97fe5ae14b01abeddf2a5c4png.jpg"></p>
<h3 id="3-7-广域网"><a href="#3-7-广域网" class="headerlink" title="3.7 广域网"></a>3.7 广域网<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/ac91ff56b2936da9a0dfb2e2799b285epng.jpg"></h3><h4 id="3-7-1-PPP协议"><a href="#3-7-1-PPP协议" class="headerlink" title="3.7.1 PPP协议"></a>3.7.1 PPP协议</h4><ul>
<li>全双工通信，点对点通信</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/b0797aba867a9299c7e516a8c6b19be9png.jpg"></p>
<p>PPP协议无需满足的要求：纠错、流量控制、序号、<strong>不支持多点线路</strong></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/3f26f4f94b26ce68cd9524c63a440bc0png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/ba3bc22aaa033d2a25c0fcccf3a63743png.jpg"></p>
<h4 id="3-7-2-HDLC协议"><a href="#3-7-2-HDLC协议" class="headerlink" title="3.7.2 HDLC协议"></a>3.7.2 HDLC协议</h4><ul>
<li>全双工通信</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/553a21e767a098b8d71c08c3a7b94bbcpng.jpg"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/a9c4addd8765ea59c36b56301a9fa14cpng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/2b44c567051e9b9e37cf462821f7461dpng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/a3ca9a1a2aee22fbaf9a3100e40318e2png.jpg"></p>
<p> 节点交换机是在一个网络内的，而路由器是在几个网络之间的</p>
<h3 id="3-8-链路层设备"><a href="#3-8-链路层设备" class="headerlink" title="3.8 链路层设备"></a>3.8 链路层设备</h3><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/1adfe59a6778881e04e908c1cd10cb7bpng.jpg"></p>
<h4 id="3-8-1-网桥"><a href="#3-8-1-网桥" class="headerlink" title="3.8.1 网桥"></a>3.8.1 网桥<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/f130cdc67ec214667cd92b0c5e9090bfpng.jpg"></h4><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/64fe3afb62ff314d211195c4a806ef7epng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/96189abd6cd770ef528a8000b55f29b7png.jpg"></p>
<h4 id="3-8-2-交换机"><a href="#3-8-2-交换机" class="headerlink" title="3.8.2 交换机"></a>3.8.2 交换机</h4><ul>
<li>也称多接口的网桥</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/cd4780e8dd3d5011ce4c342a616bd6fapng.jpg"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/6176b2c1a0b1321a8f11ec1a91ced6cfpng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/dd0c6cba7457e7831900646aeff62670png.jpg"></p>
<hr>
<h2 id="第-4-章-网络层"><a href="#第-4-章-网络层" class="headerlink" title="第 4 章 网络层"></a>第 4 章 网络层</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/5b92de7c40793c582a4d13fc971de3cfpng.jpg"></p>
<h3 id="4-2-数据交换方式"><a href="#4-2-数据交换方式" class="headerlink" title="4.2 数据交换方式*"></a>4.2 数据交换方式*</h3><h4 id="4-2-1-电路交换"><a href="#4-2-1-电路交换" class="headerlink" title="4.2.1 电路交换"></a>4.2.1 电路交换<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/f26bd08834391a8088d3daa172e5e974png.jpg"></h4><h4 id="4-2-2-报文交换"><a href="#4-2-2-报文交换" class="headerlink" title="4.2.2 报文交换"></a>4.2.2 报文交换<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/7e17e492083acd338cf23b57ad290e6cpng.jpg"></h4><h4 id="4-2-3-分组交换（数据报、虚电路）"><a href="#4-2-3-分组交换（数据报、虚电路）" class="headerlink" title="4.2.3 分组交换（数据报、虚电路）"></a>4.2.3 分组交换（数据报、虚电路）<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/c3fccad97f4e4331c4e99d47f0062b24png.jpg"></h4><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/b3fedad120102e0f8dcb6f93d5395470png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/30676a2b8f2e66077adecb92e903eeccpng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/72ec56b4f4f3eb9400fcfb90c1dd35a7png.jpg"></p>
<p><strong>4.2.3.1 数据报方式</strong><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/68cd0c719e2d340a42a15abfba14f47cpng.jpg"></p>
<p><strong>4.2.3.2 虚电路方式</strong><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/4343f6fdca0e0ae53f58739aced601e5png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/e0a02c19e502bf39167c587079ebc404png.jpg"></p>
<h3 id="4-3-IP"><a href="#4-3-IP" class="headerlink" title="4.3 IP*"></a>4.3 IP*</h3><h4 id="4-3-1-IP数据报格式"><a href="#4-3-1-IP数据报格式" class="headerlink" title="4.3.1 IP数据报格式"></a>4.3.1 IP数据报格式<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/008d51281bd9c1950306abde352d19d3png.jpg"></h4><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/2dc172d3d688a5ea9ace99f66c4e6d0cpng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/500da24f447821ff6c30b0b58cce1623png.jpg"></p>
<h4 id="4-3-2-IP数据报分片"><a href="#4-3-2-IP数据报分片" class="headerlink" title="4.3.2 IP数据报分片"></a>4.3.2 IP数据报分片</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/6eea6ff7d6174c68fe15f0813d3c415apng.jpg"></p>
<ul>
<li><p>首部长度单位：4B</p>
</li>
<li><p>总长度单位：1B</p>
</li>
<li><p>片偏移量单位：8B</p>
</li>
</ul>
<h4 id="4-3-3-IPv4地址"><a href="#4-3-3-IPv4地址" class="headerlink" title="4.3.3 IPv4地址"></a>4.3.3 IPv4地址<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/f254e6ded9f273574f2e92750d3a5fffpng.jpg"></h4><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/166406e9a3ec934f15008e975a709851png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/6b38b1e38dfa6020e3beca1d9510ee96png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/562ce5a368213c945dee37918d6342c3png.jpg"></p>
<p> <strong>路由器对目的地址是私有IP地址的数据报一律不进行转发</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/d2fa85b9b76851f98f7f6e80c632017apng.jpg"></p>
<h4 id="4-3-4-网络地址转换（NAT）"><a href="#4-3-4-网络地址转换（NAT）" class="headerlink" title="4.3.4 网络地址转换（NAT）"></a>4.3.4 网络地址转换（NAT）<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/90a998a807b51477ec9e286617e4d004png.jpg"></h4><h4 id="4-3-5-子网划分、子网掩码"><a href="#4-3-5-子网划分、子网掩码" class="headerlink" title="4.3.5 子网划分、子网掩码"></a>4.3.5 子网划分、子网掩码<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/6a97b1292c23eeb5e44fc5c2cf87cca9png.jpg"></h4><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/41e4da74615d5776501d14ad72082eccpng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/81e513be529adfeeee283394906a2764png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/edb25e31db87212c1ed5d00ae59256c4png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/29e4991cc976265769c4bd021670078epng.jpg"></p>
<h4 id="4-3-6-无分类编址CIDR（构成超网）"><a href="#4-3-6-无分类编址CIDR（构成超网）" class="headerlink" title="4.3.6 无分类编址CIDR（构成超网）"></a>4.3.6 无分类编址CIDR（构成超网）<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/e6430e594c38ee2540a553d3015e5ef1png.jpg"></h4><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/48a9333ae1f68f1d1812e78865c4d56bpng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/d3f379c4b6a75286eb09b5ef6c809a15png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/b1e955e654192a188aef900799c03f41png.jpg"></p>
<h4 id="4-3-7-ARP协议"><a href="#4-3-7-ARP协议" class="headerlink" title="4.3.7 ARP协议"></a>4.3.7 ARP协议<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/f0668f23aab25c4dc4dd7688ffba83aepng.jpg"></h4><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/c413c366512cb613e37d66b5180844ddpng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/d24d6e60773448b0ad50633b33de1f7apng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/f5bb7bf95e95430987d8e0f0beb3a3e1png.jpg"></p>
<h4 id="4-3-8-DHCP协议"><a href="#4-3-8-DHCP协议" class="headerlink" title="4.3.8 DHCP协议"></a>4.3.8 DHCP协议<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/b89497375e9c31f049168095883e9cecpng.jpg"></h4><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/931b90f34a798146f66d0ec61d068a97png.jpg"></p>
<h4 id="4-3-9-ICMP协议"><a href="#4-3-9-ICMP协议" class="headerlink" title="4.3.9 ICMP协议"></a>4.3.9 ICMP协议<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/f3caf0be7c9d25456c31bf05373eb100png.jpg"></h4><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/39728d6813d09a91ac622eefb1e7e2bapng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/16914549ea76320e60a039d447bbce19png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/c3e7e6f1a943fee6ad273632ced2b273png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/1aada50aaa271b9de232774d732076eapng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/92ba8d7b422053bba8d7f4d52e086302png.jpg"></p>
<h3 id="4-4-IPv6"><a href="#4-4-IPv6" class="headerlink" title="4.4 IPv6"></a>4.4 IPv6<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/45c61792233e40132db3ccdb3cf268adpng.jpg"></h3><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/0d0a578d5cf21e47a4c082ea08781d35png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/85f417f2710e388cf63b29ff43ed3f55png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/dfe05108f38af811c75121aeb15e4636png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/aeee1402b5d71699682e41c4532dc19fpng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/23929e5a2eac1f45ee92e8b5200b5bbdpng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/5765ea3d8637070ea921e750c585bb2apng.jpg"></p>
<h3 id="4-5-路由算法及路由协议"><a href="#4-5-路由算法及路由协议" class="headerlink" title="4.5 路由算法及路由协议"></a>4.5 路由算法及路由协议<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/735fee4b5b2f01306ce145e810e63141png.jpg"></h3><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/a943dfb4ef8c518416b5a85fea56dfe8png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/c724a7c190b70e7267984f50ff0da96apng.jpg"></p>
<h4 id="4-5-1-RIP协议与距离向量算法"><a href="#4-5-1-RIP协议与距离向量算法" class="headerlink" title="4.5.1 RIP协议与距离向量算法"></a>4.5.1 RIP协议与距离向量算法<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/95b274ccc9400afa8acc7564c4536043png.jpg"></h4><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/5577f8069acedeccaf6b096b2c24d27dpng.jpg"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/c1845dbe48825090e6990a94635bd2dbpng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/6a41d55f85e0e565e6d2641f5e17702fpng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/de3b93f3816acb3e16953ea847db1aeepng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/2c83e1051a85bcf390a847745d868916png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/11b189e20204a0b12a95b41e32335194png.jpg"></p>
<h4 id="4-5-2-OSPF协议与链路状态算法"><a href="#4-5-2-OSPF协议与链路状态算法" class="headerlink" title="4.5.2 OSPF协议与链路状态算法"></a>4.5.2 OSPF协议与链路状态算法<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/6a3ec956bdd0628f52b5d884fab86bb5png.jpg"></h4><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/8c4939a31c7de939dcb67d846cccc97epng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/fcf298e0064f43aa39216ef10a2c22fapng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/268cd1afbfbb207c6d25ba93b1c408dbpng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/165730557aeb71a3329d242da455ed4apng.jpg"></p>
<h4 id="4-5-3-BGP协议"><a href="#4-5-3-BGP协议" class="headerlink" title="4.5.3 BGP协议"></a>4.5.3 BGP协议<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/c5296ab20f1068d0660819f44109b410png.jpg"></h4><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/6bb6d841590fcf9dfe5e6f972befeafbpng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/474b481484cc5cb5540746e176798430png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/de2240ff9e2ca596ebff3ec6623e94ddpng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/a9d822373e78928e1abc214efa4830acpng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/5fc8142420f6ae51cbb666e2c63e9f8dpng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/f11c9e4a1cfd1a8ccd6361e6f495c02fpng.jpg"></p>
<h3 id="4-6-IP组播"><a href="#4-6-IP组播" class="headerlink" title="4.6 IP组播"></a>4.6 IP组播<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/56300fe857daa6965db3bac5b361c71epng.jpg"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/1ae15b8c727349cdd9db809a67c0d7a2png.jpg"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/713f260a73981f2bf2520218dac9fccbpng.jpg"></h3><h4 id="4-6-1-硬件组播"><a href="#4-6-1-硬件组播" class="headerlink" title="4.6.1 硬件组播"></a>4.6.1 硬件组播<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/9d5321950a5f7bd90f0a074d36dd5a63png.jpg"></h4><h4 id="4-6-2-因特网范围内组播"><a href="#4-6-2-因特网范围内组播" class="headerlink" title="4.6.2 因特网范围内组播"></a>4.6.2 因特网范围内组播<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/07564a7045c539a546c95f33ceb9fc40png.jpg"></h4><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/b8c736a53fd5571d4dfb3bca2e5eafbapng.jpg"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/c7635da2a13cdf2601855018f8bb7b81png.jpg"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/9b0dde550e173c0e46a3c0d47ecc1ca5png.jpg"></p>
<h3 id="4-7-移动IP"><a href="#4-7-移动IP" class="headerlink" title="4.7 移动IP"></a>4.7 移动IP<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/343933e0b9e8f7141f738c46dc64bdb8png.jpg"></h3><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/f9475401ec5cba0109085e2d988b5dc8png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/4c00a97f248c83b5afbbeea94ddc0d41png.jpg"></p>
<h3 id="4-8-网络层设备"><a href="#4-8-网络层设备" class="headerlink" title="4.8 网络层设备"></a>4.8 网络层设备</h3><h4 id="4-8-1-路由器"><a href="#4-8-1-路由器" class="headerlink" title="4.8.1 路由器"></a>4.8.1 路由器<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/7520285827c8dce7b28c2a9235ae039cpng.jpg"></h4><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/c4814903bf4ed0097f74dbd48bdbc1d6png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/577338541453f54cb970f19d10ddedeepng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/a9b6cba57610993dd0df2c3b8e919f70png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/7b1d6d4076061fdec549fc2780a5a504png.jpg"></p>
<hr>
<h2 id="第-5-章-传输层"><a href="#第-5-章-传输层" class="headerlink" title="第 5 章 传输层"></a>第 5 章 传输层</h2><h3 id="5-1-传输层概述"><a href="#5-1-传输层概述" class="headerlink" title="5.1 传输层概述"></a>5.1 传输层概述</h3><h2 id=""><a href="#" class="headerlink" title=""></a><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/6fb271b38153e646bb15e1881993cad9png.jpg"></h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/c2b7664d1c07e5998a2abc4c3aa5607epng.jpg"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/0277bc0f5f8e48df8667a3fd7d6573b6png.jpg"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/8b5d8f378589d496c7c9e87da2019644png.jpg"></p>
<h3 id="5-2-UDP协议"><a href="#5-2-UDP协议" class="headerlink" title="5.2 UDP协议"></a>5.2 UDP协议</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/1393826b31a602dd97bb6ca0537004abpng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/3f72571560df4969dade837204a831d2png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/373f51315c5c1e1b11a2e89ef1272968png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/6c033346ccb82c341ded854ea620f616png.jpg"></p>
<h3 id="5-3-TCP协议"><a href="#5-3-TCP协议" class="headerlink" title="5.3 TCP协议*"></a>5.3 TCP协议*</h3><h4 id="5-3-1-TCP协议特点"><a href="#5-3-1-TCP协议特点" class="headerlink" title="5.3.1 TCP协议特点"></a>5.3.1 TCP协议特点<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/4c3eb00c03686e6a381a6fe2ff0464e1png.jpg"></h4><h4 id="5-3-2-TCP报文段格式"><a href="#5-3-2-TCP报文段格式" class="headerlink" title="5.3.2 TCP报文段格式"></a>5.3.2 TCP报文段格式<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/2f00496c7deabd1be33e5b22cfcb0a34png.jpg"></h4><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/f053997577666e3e83ca36692ac2ca6epng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/95cefa719a320f0899c8912216f1fa3cpng.jpg"></p>
<h4 id="5-3-3-TCP连接管理"><a href="#5-3-3-TCP连接管理" class="headerlink" title="5.3.3 TCP连接管理"></a>5.3.3 TCP连接管理<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/0ed48aac0f030f64f7afddce485d05c3png.jpg"></h4><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/44a7a96bcd8840bf64916554d115bc9apng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/8698402b382606c7da45948af9369ee8png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/c6616aa78cc0cfd6b73564579747ad24png.jpg"></p>
<h4 id="5-3-4-TCP可靠传输"><a href="#5-3-4-TCP可靠传输" class="headerlink" title="5.3.4 TCP可靠传输"></a>5.3.4 TCP可靠传输<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/b9d5e45d14778ef809ffea3edd0621fcpng.jpg"></h4><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/102c2eb33c3120f012aa4ff5ca61151dpng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/471063a631d0ae4d3479d1b155f0d414png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/118e46de0aa80ab51f88da3e57722ae4png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/32b2a24dd6ec3284918ac87b74a982fcpng.jpg"></p>
<h4 id="5-3-5-TCP流量控制"><a href="#5-3-5-TCP流量控制" class="headerlink" title="5.3.5 TCP流量控制*"></a>5.3.5 TCP流量控制*</h4><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/964bab26e1b19b70b405326fa2cc1303png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/42aaf3eed5281ec01ca4a32f3bb887bbpng.jpg"></p>
<h4 id="5-3-6-TCP拥塞控制"><a href="#5-3-6-TCP拥塞控制" class="headerlink" title="5.3.6 TCP拥塞控制*"></a>5.3.6 TCP拥塞控制*<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/3d2d6687cf9d4c63b79c70d0fae77aeapng.jpg"></h4><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/e665de4bd3aa2e8648235365b38e7c9epng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/21db4f5f62825f9e39053f77e467958epng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/c346551bc1c373b1676c6f2edfd1d87fpng.jpg"></p>
<hr>
<h2 id="第-6-章-应用层"><a href="#第-6-章-应用层" class="headerlink" title="第 6 章 应用层"></a>第 6 章 应用层</h2><h3 id="6-1-应用层概述"><a href="#6-1-应用层概述" class="headerlink" title="6.1 应用层概述"></a>6.1 应用层概述<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/c5eb9a0a0cb47cbde356bd0b3168dad6png.jpg"></h3><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/c39e54efee9bb11c53927f83322257eapng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/5596df64d49b858a434f7ee91d2387d8png.jpg"></p>
<h3 id="6-2-域名解析系统DNS"><a href="#6-2-域名解析系统DNS" class="headerlink" title="6.2 域名解析系统DNS"></a>6.2 域名解析系统DNS<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/355870d1dfbcf777d723521d8e72e7depng.jpg"></h3><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/5ae3f2830ffd3b93b44f3c7a4d7a0adfpng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/df430d48884226c9c83168fcd16afdafpng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/4efc1f659312735e5cc47842b9819fa0png.jpg"></p>
<h3 id="6-3-文件传输协议FTP"><a href="#6-3-文件传输协议FTP" class="headerlink" title="6.3 文件传输协议FTP"></a>6.3 文件传输协议FTP<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/a6fd1ebd86ee91e578872877523ff250png.jpg"></h3><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/8c485ff96742e946f97d7ba528ca5e62png.jpg"></p>
<p>FTP传输模式：</p>
<ul>
<li><p>文本模式：ASCII码模式，以文本序列传送数据</p>
</li>
<li><p>二进制模式：Binary模式，以二进制序列传送数据</p>
</li>
</ul>
<h3 id="6-4-电子邮件"><a href="#6-4-电子邮件" class="headerlink" title="6.4 电子邮件"></a>6.4 电子邮件<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/4954a4bb32d219833db5698ba5616c15png.jpg"></h3><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/9955e0124a3b8ee7cf618e583ecbb73cpng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/d39e51211cddc85284b5eb13cf050fd1png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/c436ef9839e274446fc38adf102bfa73png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/779c2396db55e41d9c09f66f646cf64apng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/223bd1a0bcf75392ebbbd3f330958faapng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/d5f5dddd45272e30f663ba7e2703597epng.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/40bbb479442fb195610e9147ec11394epng.jpg"></p>
<h3 id="6-5-万维网和HTTP协议"><a href="#6-5-万维网和HTTP协议" class="headerlink" title="6.5 万维网和HTTP协议"></a>6.5 万维网和HTTP协议<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/0d81767a0eb571740630dda519b3d294png.jpg"></h3><p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/4e344b8ef13979ce216ea3087c81a5b3png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/16640477e7381af86d6cefb01b9c5985png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/2976e7a1ffe068f2c7efa91de4889066png.jpg"></p>
<p> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/a20e3686cedef4ba50433cd7403cd5dbpng.jpg"></p>
<h4 id="文章目录"><a href="#文章目录" class="headerlink" title="文章目录"></a>文章目录</h4><ul>
<li><a href="#_1">计算机网络知识点总结</a></li>
<li><ul>
<li><a href="#1__5">1 计算机网络体系结构</a></li>
<li><ul>
<li><a href="#11__7">1.1 计算机网络概述</a></li>
<li><a href="#12__115">1.2 计算机网络体系结构与参考模型</a></li>
<li><ul>
<li><a href="#121__117">1.2.1 计算机网络分层结构</a></li>
<li><a href="#122__150">1.2.2 计算机网络协议、接口、服务的概念</a></li>
<li><a href="#123_ISOOSITCPIP_191">1.2.3 ISO&#x2F;OSI参考模型和TCP&#x2F;IP模型</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#2__347">2 物理层</a></li>
<li><ul>
<li><a href="#21__349">2.1 通信基础</a></li>
<li><ul>
<li><a href="#211__351">2.1.1 基本概念</a></li>
<li><a href="#212__408">2.1.2 奈奎斯特定理与香农定理</a></li>
<li><a href="#213__442">2.1.3 编码与调制</a></li>
<li><a href="#214__491">2.1.4 电路交换、报文交换与分组交换</a></li>
<li><a href="#215__563">2.1.5 数据报与虚电路</a></li>
</ul>
</li>
<li><a href="#22__619">2.2 传输介质</a></li>
<li><ul>
<li><a href="#221__621">2.2.1 双绞线、同轴电缆、光纤与无线传输介质</a></li>
<li><a href="#222__691">2.2.2 物理层接口的特性</a></li>
</ul>
</li>
<li><a href="#23__702">2.3 物理层设备</a></li>
<li><ul>
<li><a href="#231__704">2.3.1 中继器</a></li>
<li><a href="#232__723">2.3.2 集线器</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#3__741">3 数据链路层</a></li>
<li><ul>
<li><a href="#31__743">3.1 数据链路层的功能</a></li>
<li><ul>
<li><a href="#311__749">3.1.1 为网络层提供服务</a></li>
<li><a href="#312__763">3.1.2 链路管理</a></li>
<li><a href="#313__767">3.1.3 封装成帧与透明传输</a></li>
<li><a href="#314__784">3.1.4 流量控制</a></li>
<li><a href="#315__795">3.1.5 差错控制</a></li>
</ul>
</li>
<li><a href="#32__803">3.2 组帧</a></li>
<li><ul>
<li><a href="#321__807">3.2.1 字符计数法</a></li>
<li><a href="#322__815">3.2.2 字符填充的首尾定界符法</a></li>
<li><a href="#323__825">3.2.3 零比特填充的首尾标志法</a></li>
<li><a href="#324__835">3.2.4 违规编码法</a></li>
</ul>
</li>
<li><a href="#33__847">3.3 差错控制</a></li>
<li><ul>
<li><a href="#331__856">3.3.1 检错编码</a></li>
<li><a href="#332__892">3.3.2 纠错编码</a></li>
</ul>
</li>
<li><a href="#34__942">3.4 流量控制与可靠传输机制</a></li>
<li><ul>
<li><a href="#341__944">3.4.1 滑动窗口机制</a></li>
<li><a href="#342__978">3.4.2 单帧滑动窗口与停止-等待协议</a></li>
<li><a href="#343_NGBN_1009">3.4.3 多帧滑动窗口与后退N帧协议（GBN）</a></li>
<li><a href="#344_SR_1044">3.4.4 多帧滑动窗口与选择重传协议（SR）</a></li>
</ul>
</li>
<li><a href="#35__1089">3.5 介质访问控制</a></li>
<li><ul>
<li><a href="#351__1093">3.5.1 信道划分介质访问控制</a></li>
<li><a href="#352__1149">3.5.2 随机访问介质访问控制</a></li>
<li><a href="#353__1277">3.5.3 轮询访问：令牌传递协议</a></li>
</ul>
</li>
<li><a href="#36__1295">3.6 局域网</a></li>
<li><ul>
<li><a href="#361__1297">3.6.1 局域网的基本概念和体系结构</a></li>
<li><a href="#362__IEEE_8023_1338">3.6.2 以太网与 IEEE 802.3</a></li>
<li><a href="#363_IEEE_80211_1406">3.6.3 IEEE 802.11无线局域网</a></li>
<li><a href="#364_VLAN_1455">3.6.4 VLAN基本概念与基本原理</a></li>
</ul>
</li>
<li><a href="#37__1481">3.7 广域网</a></li>
<li><ul>
<li><a href="#371__1483">3.7.1 广域网基本概念</a></li>
<li><a href="#372_PPP_1507">3.7.2 PPP协议</a></li>
<li><a href="#373_HDLC_1552">3.7.3 HDLC协议</a></li>
</ul>
</li>
<li><a href="#38__1579">3.8 数据链路层设备</a></li>
<li><ul>
<li><a href="#381__1581">3.8.1 网桥</a></li>
<li><a href="#382__1596">3.8.2 局域网交换机</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#4__1651">4 网络层</a></li>
<li><ul>
<li><a href="#41__1653">4.1 网络层功能</a></li>
<li><ul>
<li><a href="#411__1657">4.1.1 异构网络互联</a></li>
<li><a href="#412__1676">4.1.2 路由转发</a></li>
<li><a href="#413_SDN_1685">4.1.3 SDN基本概念</a></li>
<li><a href="#414__1718">4.1.4 拥塞控制</a></li>
</ul>
</li>
<li><a href="#42__1750">4.2 路由算法和路由协议</a></li>
<li><ul>
<li><a href="#421__1752">4.2.1 静态路由与动态路由</a></li>
<li><a href="#422__1760">4.2.2 距离-向量路由算法</a></li>
<li><a href="#423__1872">4.2.3 链路状态路由算法</a></li>
<li><a href="#424__2012">4.2.4 层次路由</a></li>
</ul>
</li>
<li><a href="#43_IPv4_2098">4.3 IPv4</a></li>
<li><ul>
<li><a href="#431_IPv4_2100">4.3.1 IPv4分组</a></li>
<li><a href="#432_IPv4NAT_2164">4.3.2 IPv4地址与NAT</a></li>
<li><a href="#433_CIDR_2286">4.3.3 子网划分与子网掩码、CIDR</a></li>
<li><a href="#434_ARPDHCPICMP_2398">4.3.4 ARP、DHCP与ICMP</a></li>
</ul>
</li>
<li><a href="#44_IPv6_2535">4.4 IPv6</a></li>
<li><ul>
<li><a href="#441_IPv6_2537">4.4.1 IPv6的主要特点</a></li>
<li><a href="#442_IPv6_2598">4.4.2 IPv6地址</a></li>
</ul>
</li>
<li><a href="#45_IP_2638">4.5 IP组播</a></li>
<li><ul>
<li><a href="#451__2640">4.5.1 组播的概念</a></li>
<li><a href="#452_IP_2656">4.5.2 IP组播地址</a></li>
<li><a href="#453_IGMP_2687">4.5.3 IGMP与组播路由算法</a></li>
</ul>
</li>
<li><a href="#46_IP_2727">4.6 移动IP</a></li>
<li><ul>
<li><a href="#461_IP_2729">4.6.1 移动IP的概念</a></li>
<li><a href="#462_IP_2743">4.6.2 移动IP通信过程</a></li>
</ul>
</li>
<li><a href="#47__2769">4.7 网络层设备</a></li>
<li><ul>
<li><a href="#471__2771">4.7.1 冲突域和广播域</a></li>
<li><a href="#472__2787">4.7.2 路由器的组成和功能</a></li>
<li><a href="#473__2821">4.7.3 路由表与路由转发</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#5__2847">5 传输层</a></li>
<li><ul>
<li><a href="#51__2849">5.1 传输层提供的服务</a></li>
<li><ul>
<li><a href="#511__2851">5.1.1 传输层的功能</a></li>
<li><a href="#512__2880">5.1.2 传输层的寻址与端口</a></li>
</ul>
</li>
<li><a href="#52_UDP_2924">5.2 UDP协议</a></li>
<li><ul>
<li><a href="#521_UDP_2926">5.2.1 UDP数据报</a></li>
<li><a href="#522_UDP_2958">5.2.2 UDP校验</a></li>
</ul>
</li>
<li><a href="#53_TCP_2980">5.3 TCP协议</a></li>
<li><ul>
<li><a href="#531_TCP_2982">5.3.1 TCP协议的特点</a></li>
<li><a href="#532_TCP_3002">5.3.2 TCP报文段</a></li>
<li><a href="#533_TCP_3041">5.3.3 TCP连接管理</a></li>
<li><a href="#534_TCP_3113">5.3.4 TCP可靠传输</a></li>
<li><a href="#535_TCP_3159">5.3.5 TCP流量控制</a></li>
<li><a href="#536_TCP_3183">5.3.6 TCP拥塞控制</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#6__3245">6 应用层</a></li>
<li><ul>
<li><a href="#61__3247">6.1 网络应用模型</a></li>
<li><ul>
<li><a href="#611__3249">6.1.1 客户&#x2F;服务器模型</a></li>
<li><a href="#612_P2P_3289">6.1.2 P2P模型</a></li>
</ul>
</li>
<li><a href="#62_DNS_3310">6.2 域名系统（DNS）</a></li>
<li><ul>
<li><a href="#621__3318">6.2.1 层次域名空间</a></li>
<li><a href="#622__3366">6.2.2 域名服务器</a></li>
<li><a href="#623__3400">6.2.3 域名解析过程</a></li>
</ul>
</li>
<li><a href="#63_FTP_3442">6.3 文件传输协议（FTP）</a></li>
<li><ul>
<li><a href="#631_FTP_3444">6.3.1 FTP的工作原理</a></li>
<li><a href="#632__3472">6.3.2 控制连接与数据连接</a></li>
</ul>
</li>
<li><a href="#64__3517">6.4 电子邮件</a></li>
<li><ul>
<li><a href="#641__3519">6.4.1 电子邮件系统的组成结构</a></li>
<li><a href="#642_SMTPPOP3_3541">6.4.2 SMTP和POP3</a></li>
<li><a href="#643_MIME_3616">6.4.3 电子邮件格式与MIME</a></li>
</ul>
</li>
<li><a href="#65_WWW_3648">6.5 万维网（WWW）</a></li>
<li><ul>
<li><a href="#651_WWW_3650">6.5.1 WWW的概念与组成结构</a></li>
<li><a href="#652_HTTP_3677">6.5.2 超文本传输协议（HTTP）</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="计算机网络知识点总结"><a href="#计算机网络知识点总结" class="headerlink" title="计算机网络知识点总结"></a>计算机网络知识点总结</h2><h3 id="1-计算机网络体系结构"><a href="#1-计算机网络体系结构" class="headerlink" title="1 计算机网络体系结构"></a>1 计算机网络体系结构</h3><h4 id="1-1-计算机网络概述"><a href="#1-1-计算机网络概述" class="headerlink" title="1.1 计算机网络概述"></a>1.1 计算机网络概述</h4><ol>
<li>计算机网络概念——<strong>互连的、自治的计算机系统的集合</strong></li>
</ol>
<ul>
<li><p>​ <strong>广义观点</strong>：能实现远程信息处理的系统或能进一步达到资源共享的系统。</p>
</li>
<li><p>​ <strong>资源共享观点</strong>：以能够相互<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E5%85%B1%E4%BA%AB%E8%B5%84%E6%BA%90&spm=1001.2101.3001.7020">共享资源</a>的方式互连起来的自治计算机系统的集合。</p>
<ul>
<li>目的：资源共享；组成：多台自治计算机；规则：网络协议</li>
</ul>
</li>
<li><p>​ <strong>用户透明性观点</strong>：整个网络就像一个大的<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%B3%BB%E7%BB%9F&spm=1001.2101.3001.7020">计算机系统</a>一样对用户是透明的。</p>
</li>
</ul>
<ol start="2">
<li>计算机网络的组成</li>
</ol>
<p>​ <a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E7%BB%84%E6%88%90%E9%83%A8%E5%88%86&spm=1001.2101.3001.7020">组成部分</a>：硬件、软件、协议。</p>
<p>​ 工作方式：边缘部分（用户主机）、核心部分（路由器、网络）</p>
<p>​ 功能组成：通信子网（物理层、数据链路层、网络层）、资源子网（会话层、表示层、应用层）</p>
<ol start="3">
<li>计算机网络的功能</li>
</ol>
<p>​ 数据通信、资源共享、分布式处理、提高可靠性、负载均衡</p>
<ol start="4">
<li>计算机网络分类</li>
</ol>
<ul>
<li>范围分类：广域网（WAN）、城域网（MAN）、局域网（LAN）、个人局域网（PAN）</li>
</ul>
<table>
<thead>
<tr>
<th align="center">网络</th>
<th align="center">范围</th>
<th align="center">特点</th>
</tr>
</thead>
<tbody><tr>
<td align="center">广域网（WAN）</td>
<td align="center">10km-1000km</td>
<td align="center">互联网、交换技术</td>
</tr>
<tr>
<td align="center">城域网（MAN）</td>
<td align="center">5km-50km</td>
<td align="center">以太网</td>
</tr>
<tr>
<td align="center">局域网（LAN）</td>
<td align="center">10m-5km</td>
<td align="center">广播技术</td>
</tr>
<tr>
<td align="center">个人局域网（PAN）</td>
<td align="center">0-10m</td>
<td align="center">无线技术</td>
</tr>
</tbody></table>
<ul>
<li>传输技术：广播式网络、点对点网络</li>
<li>拓扑结构：总线型、星型、环形、网状</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/31d46d30d5f8908f55e5f64e45db3723png.jpg#pic_center" alt="image-20230810113136136"></p>
<ul>
<li>使用者：共用网、专用网</li>
<li>交换技术：电路交换网络、报文交换网络、分组交换网络</li>
</ul>
<table>
<thead>
<tr>
<th align="center">网络</th>
<th align="center">特点</th>
<th align="center">应用&#x2F;别称</th>
</tr>
</thead>
<tbody><tr>
<td align="center">电路交换网络</td>
<td align="center">专用通路；建立连接、传输数据、断开连接</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">优点：数据直接传送、时延小</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">缺点：是线路利用率低、不能充分利用线路容量、不便于进行差错控制</td>
<td align="center">传统电话网络</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">报文交换网络</td>
<td align="center">数据加上源地址、目的地址、校验码等辅助信息，封装成报文</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">优点：充分地利用线路容量、实现传输速率的转换、格式转换、差错控制</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">缺点：增加资源开销、缓冲延时、缓冲区难以管理</td>
<td align="center">存储转发网络</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">分组交换网络</td>
<td align="center">数据分成固定长度的数据块，数据块加上目的地址、源地址等组成分组</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">优点：缓冲易于管理；包的平均时延更小；更易于标准化</td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">包交换网络</td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<ul>
<li>传输介质：有线网络、无线网络</li>
</ul>
<ol start="5">
<li>计算机网络性能指标</li>
</ol>
<ul>
<li><p><strong>带宽（Bandwidth）</strong>：最高数据传输速率，表示网络的通信线路所能传送数据的能力，单位是比特&#x2F;秒（b&#x2F;s）。</p>
</li>
<li><p><strong>时延（Delay）</strong>：指数据（一个报文或分组）从网络（或链路）的一端传送到另一端所需要的总时间。</p>
<ul>
<li>发送时延：又称传输时延，主机或路由器发送数据帧所需的时间，从发送分组的第一个比特算起，到该分组的最后一个比特发送完毕所需的时间。</li>
</ul>
<p>发送时延 &#x3D; 数据帧长度 ( b ) &#x2F; 信道宽度 ( b &#x2F; s ) 发送时延&#x3D;数据帧长度(b)&#x2F;信道宽度(b&#x2F;s) 发送时延=数据帧长度(b)&#x2F;信道宽度(b&#x2F;s)</p>
<ul>
<li>传播时延：电磁波在信道中传播一定距离花费的时间，一个比特从链路的一端传播到另一端所需的时间。</li>
</ul>
<p>传播时延 &#x3D; 信道长度 ( m ) &#x2F; 传播速率 ( m &#x2F; s ) 传播时延&#x3D;信道长度(m)&#x2F;传播速率(m&#x2F;s) 传播时延=信道长度(m)&#x2F;传播速率(m&#x2F;s)</p>
<ul>
<li>处理时延：数据在交换结点为存储转发而进行的一些必要的处理所花费的时间。</li>
<li>排队时延：分组在进入路由器后要先在输入队列中排队等待处理。路由器确定转发端口后，还要在输出队列中排队等待转发，这就产生了排队时延。</li>
</ul>
<p>总时延 &#x3D; 发送时延 + 传播时延 + 处理时延 + 排队时延 总时延&#x3D;发送时延+传播时延+处理时延+排队时延 总时延=发送时延+传播时延+处理时延+排队时延</p>
</li>
<li><p><strong>时延带宽积</strong>：又称以比特为单位的链路长度，指发送端发送的第一个比特即将到达终点时，发送端已经发出了多少个比特。<br>时延带宽积 &#x3D; 传播时延 × 信道带宽 时延带宽积&#x3D;传播时延×信道带宽 时延带宽积=传播时延×信道带宽<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/4016d5f6e947f758cb7c5db7ba693d1dpng.jpg#pic_center" alt="image-20230810131802529"></p>
<blockquote>
<p>考虑一个代表链路的圆柱形管道，其长度表示链路的传播时延，横截面积表示链路带宽，则时延带宽积表示该管道可以容纳的比特数量。</p>
</blockquote>
</li>
<li><p><strong>往返时延（RTT）</strong>：指从发送端发出一个短分组，到发送端收到来自接收端的确认（接收端收到数据后立即发送确认），总共经历的时延。</p>
</li>
<li><p><strong>速率（Speed）</strong>：数据传输速率、数据率或比特率，网络中的速率是指连接到计算机网络上的主机在数字信道上传送数据的速率，单位为b&#x2F;s （bps）。更常用的速率单位是千比特&#x2F;秒（kb&#x2F;s）、兆比特&#x2F;秒（Mb&#x2F;s）、吉比特秒（Gb&#x2F;s）、太比特&#x2F;秒（Tb&#x2F;s）。</p>
<blockquote>
<p>在计算机领域，表示存储容量或文件大小时，K&#x3D;210=1024，M&#x3D;220，G&#x3D;230，T&#x3D;240。这与通信领域中的表示方式不同。</p>
<p>在计算机网络中，通常把最高数据传输速率称为带宽。</p>
<p>传播速率是指电磁波在信道中传播的速率，单位是米&#x2F;秒（m&#x2F;s），更常用的单位是千米&#x2F;秒。电磁波在光纤中的传播速率约为2x108m&#x2F;s。</p>
</blockquote>
</li>
<li><p><strong>信道利用率</strong>：指出某一信道有百分之多少的时间是有数据通过的。<br>信道利用率 &#x3D; 有数据通过时间 &#x2F; （有 + 无）数据通过时间 信道利用率&#x3D;有数据通过时间&#x2F;（有+无）数据通过时间 信道利用率=有数据通过时间&#x2F;（有+无）数据通过时间</p>
</li>
</ul>
<blockquote>
<p>例：假定一条链路的传播速率为2x108m&#x2F;s,这相当于电磁波在该媒体上1μs可向前传播200m。若链路带宽为1Mb&#x2F;s,则主机在1μs内可向链路发送1bit数据。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/c195a176c5f04645933cfaba7575d9dbpng.jpg#pic_center" alt="image-20230810171545349"></p>
<p>​ 当t&#x3D;0时，开始向链路发送数据：当t&#x3D;1μs时，信号传播到200m处，注入链路1比特：当t&#x3D;2μs时，信号传播到400m处，注入链路共2比特：当t&#x3D;3μs时，信号传播到600m处，注入链路共3比特。</p>
<p>可以看出，一段时间内，链路中有多少比特取决于带宽(或传输速率)，而1比特“跑” 了多远取决于传播速率。</p>
</blockquote>
<h4 id="1-2-计算机网络体系结构与参考模型"><a href="#1-2-计算机网络体系结构与参考模型" class="headerlink" title="1.2 计算机网络体系结构与参考模型"></a>1.2 计算机网络体系结构与参考模型</h4><h5 id="1-2-1-计算机网络分层结构"><a href="#1-2-1-计算机网络分层结构" class="headerlink" title="1.2.1 计算机网络分层结构"></a>1.2.1 计算机网络分层结构</h5><p>​ 为了方便对网络进行研究、实现与维护，促进标准化，通常对对计算机网络的体系结构以分层的方式进行建模。分层原则如下：</p>
<ul>
<li>每层都实现一种相对独立的功能，降低大系统的复杂度。</li>
<li>各层之间界面自然清晰，易于理解，相互交流尽可能少。</li>
<li>各层功能的精确定义独立于具体的实现方法，可以采用最合适的技术来实现。</li>
<li>保持下层对上层的独立性，上层单向使用下层提供的服务。</li>
<li>整个分层结构应能促进标准化工作。</li>
</ul>
<p>​ 依据一定的规则，将分层后的网络从低层到高层依次称为第1层、第2层…第n层，通常还为每层取一个特定的名称，如第1层的名称为物理层。</p>
<p>​ 实体：在计算机网络的分层结构中，第n层中的活动元素通常称为第n层<strong>实体</strong>。具体来说，实体指任何可发送或接收信息的硬件或软件进程，通常是一个特定的软件模块。</p>
<p>​ 不同机器上的同一层称为<strong>对等层</strong>，同一层的实体称为<strong>对等实体</strong>。</p>
<p>​ 第n层实体实现的<strong>服务</strong>为第n+1层所利用。第n层称为<strong>服务提供者</strong>，第n+1层则称为服务用户。</p>
<p>​ 在计算机网络体系结构的各个层次中，每个报文都分为两部分：一是数据部分，即SDU；二是控制信息部分，即PCI,它们共同组成PDU。</p>
<ul>
<li>服务数据单元(SDU)：为完成用户所要求的功能而应传送的数据。第n层的服务数据单元记为n-SDU。</li>
<li>协议控制信息(PCI)：控制协议操作的信息。第n层的协议控制信息记为n-PCL。</li>
<li>协议数据单元(PDU)：对等层次之间传送的数据单位称为该层的PDU。</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/b779dd75f1e2ea04e21c179b2c98f018png.jpg#pic_center" alt="image-20230810140133449"></p>
<p>​ 层次结构的含义包括以下几方面：</p>
<ul>
<li>第n层的实体不仅要使用第-1层的服务来实现自身定义的功能，还要向第n+1层提供本层的服务，该服务是第n层及其下面各层提供的服务总和。</li>
<li>最低层只提供服务，是整个层次结构的基础：中间各层既是下一层的服务使用者，又是上一层的服务提供者：最高层面向用户提供服务。</li>
<li>上一层只能通过相邻层间的接口使用下一层的服务，而不能调用其他层的服务；下一层所提供服务的实现细节对上一层透明。</li>
<li>两台主机通信时，对等层在逻辑上有一条直接信道，表现为不经过下层就把信息传送到对方。</li>
</ul>
<h5 id="1-2-2-计算机网络协议、接口、服务的概念"><a href="#1-2-2-计算机网络协议、接口、服务的概念" class="headerlink" title="1.2.2 计算机网络协议、接口、服务的概念"></a>1.2.2 计算机网络协议、接口、服务的概念</h5><ol>
<li>协议</li>
</ol>
<p>​ 为进行网络中的对等实体数据交换而建立的规则、标准或约定称为网络协议（<strong>水平结构</strong>）；由语法、语义和同步三部分组成。</p>
<ul>
<li>语法：规定传输数据的格式</li>
<li>语义：规定所要完成的功能</li>
<li>同步：规定各种操作的顺序</li>
</ul>
<ol start="2">
<li>接口</li>
</ol>
<p>​ 接口是同一结点内相邻两层间交换信息的连接点。同一结点相邻两层的实体通过服务访问点（Service Access Point, SAP）进行交互。服务是通过SAP提供给上层使用的，第n层的SAP就是第n+1层可以访问第n层服务的地方。</p>
<ol start="3">
<li>服务</li>
</ol>
<p>​ 服务是指下层为紧邻的上层提供的功能调用（<strong>垂直结构</strong>），对等实体在协议的控制下，使得本层能为上一层提供服务，但要实现本层协议还需要使用下一层所提供的服务。</p>
<p>​ 上层使用下层所提供的服务时必须与下层交换一些命令，这些命令在OSI参考模型中称为<strong>服务原语</strong>。OSI参考模型将原语划分为4类：</p>
<ul>
<li>请求（Request）由服务用户发往服务提供者，请求完成某项工作。</li>
<li>指示（Indication）由服务提供者发往服务用户，指示用户做某件事情。</li>
<li>响应（Response）由服务用户发往服务提供者，作为对指示的响应。</li>
<li>证实（Confirmation）由服务提供者发往服务用户，作为对请求的证实。</li>
</ul>
<p>​ 协议、接口、服务三者之间的关系如下图所示。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/92e244daf33b29831598a937b8d265d7png.jpg#pic_center" alt="image-20230810141423671"></p>
<p>​ 服务类型可按以下三种方式分类：</p>
<ul>
<li>面向连接服务与无连接服务<ul>
<li>面向连接服务中，通信前双方必须先建立连接，分配相应的资源(如缓冲区)，以保证通信能正常进行，传输结束后释放连接和所占用的资源。分为连接建立、数据传输和连接释放三个阶段。如TCP。</li>
<li>无连接服务中，通信前双方不需要先建立连接，需要发送数据时可直接发送，把每个带有目的地址的包(报文分组)传送到线路上，由系统选定路线进行传输。是<strong>尽最大努力交付</strong>的服务，不可靠。如IP、UDP。</li>
</ul>
</li>
<li>可靠服务和不可靠服务<ul>
<li>可靠服务是指网络具有纠错、检错、应答机制，能保证数据正确、可靠地传送到目的地。</li>
<li>不可靠服务是指网络只是尽量正确、可靠地传送，而不能保证数据正确、可靠地传送到目的 地，是一种尽力而为的服务。</li>
</ul>
</li>
<li>有应答服务和无应答服务<ul>
<li>有应答服务是指接收方在收到数据后向发送方给出相应的应答，该应答由传输系统内部自动实现，而不由用户实现。</li>
<li>无应答服务是指接收方收到数据后不自动给出应答。</li>
</ul>
</li>
</ul>
<h5 id="1-2-3-ISO-OSI参考模型和TCP-IP模型"><a href="#1-2-3-ISO-OSI参考模型和TCP-IP模型" class="headerlink" title="1.2.3 ISO&#x2F;OSI参考模型和TCP&#x2F;IP模型"></a>1.2.3 ISO&#x2F;OSI参考模型和TCP&#x2F;IP模型</h5><ol>
<li><strong>OSI参考模型</strong></li>
</ol>
<p>​ 国际标准化组织（ISO）提出的网络体系结构模型，称为<strong>开放系统互连参考模型</strong>，通常简称为OSI参考模型。</p>
<p>​ OSI参考模型有7层，自下而上依次为物理层、数据链路层、网络层、传输层、会话层、表示层、应用层。</p>
<p>​ 低三层统称为<strong>通信子网</strong>，它是为了联网而附加的通信设备，完成数据的传输功能；高三层统称为<strong>资源子网</strong>，它相当于计算机系统，完成数据的处理等功能。 传输层承上启下。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/88a40a903c60c3d7077b686902f8394dpng.jpg#pic_center" alt="image-20230810150448523"></p>
<ul>
<li><strong>物理层</strong></li>
</ul>
<p>​ 物理层的传输单位是比特，功能是在物理媒体上为数据端设备<strong>透明地传</strong>输原始比特流。</p>
<p>​ <strong>透明传输</strong>指不管所传数据是什么样的比特组合，都应当能够在链路上传送。</p>
<p>​ 物理层主要定义数据终端设备(DTE)和数据通信设备(DCE)的物理与逻辑连接方法，物理层协议也称<strong>物理层接口标准</strong>。由于在通信技术的早期阶段，通信规则称为规程(Procedure)，因此物理层协议也称<strong>物理层规程</strong>。如EIA-232C、ElA&#x2F;TIA RS-449、 CCITT的X.21等。</p>
<p>​ 物理层规定电路接口参数、通信链路上传输信号的意义和电气特征。</p>
<ul>
<li><strong>数据链路层</strong></li>
</ul>
<p>​ 数据链路层的传输单位是帧，任务是将网络层传来的IP数据报组装成帧。数据链路层的功能可以概括为<strong>成帧、差错控制、流量控制和传输管理</strong>等。</p>
<p>​ 两个<strong>主机</strong>之间，点对点传输需要数据链路层协议，将数据报组装成帧<strong>透明传输</strong>。</p>
<p>​ 典型的数据链路层协议有SDLC、HDLC、PPP、STP和帧中继等。</p>
<ul>
<li><strong>网络层</strong></li>
</ul>
<p>​ 网络层的传输单位是IP数据报，它关心的是通信子网的运行控制，主要任务是把网络层的协议数据单元(分组)从源端传到目的端，为分组交换网上的不同主机提供通信服务。</p>
<p>​ 关键问题是对分组进行路由选择，并实现<strong>流量控制、拥塞控制、差错控制和网际互连</strong>等功能。</p>
<blockquote>
<p>数据链路层、网络层、传输层都具有流量控制功能，数据链路层是<strong>相邻结点</strong>之间的流量控制，网络层是<strong>整个网络</strong>中的流量控制，传输层是<strong>端到端</strong>的流量控制。</p>
</blockquote>
<p>​ 因特网是一个很大的互联网，它由大量异构网络通过路由器（Router）相互连接起来。因特网的主要网络层协议是无连接的网际协议（Internet Protocol，IP）和许多路由选择协议，因此因特网的网络层也称网际层或P层。</p>
<p>​ 网络层的协议有 IP、IPX、ICMP、IGMP、ARP、RARP 和 OSPF 等。</p>
<ul>
<li><strong>传输层</strong></li>
</ul>
<p>​ 传输层也称运输层，传输单位是报文段(TCP)或用户数据报(UDP)，传输层负责主机中两个<strong>进程</strong>之间的通信。</p>
<p>​ 功能是为端到端连接提供可靠的传输服务，为端到端连接提供<strong>流量控制、差错控制、服务质量、数据传输管理</strong>等服务。</p>
<blockquote>
<p>数据链路层提供的是点到点的通信，传输层提供的是端到端的通信。</p>
<p><strong>点到点</strong>可以理解为主机到主机之间的通信，一个点是指一个硬件地址或IP地址，网络中参与通信的主机是通过硬件地址或IP地址标识的；<br><strong>端到端</strong>的通信是指运行在不同主机内的两个进程之间的通信，一个进程由一个端口来标识，所以称为端到端通信。</p>
</blockquote>
<p>​ 由于一台主机可同时运行多个进程，因此传输层具有<strong>复用</strong>和<strong>分用</strong>的功能。</p>
<p>​ 复用是指多个应用层进程可同时使用下面传输层的服务，分用是指传输层把收到的信息分别交付给上面应用层中相应的进程。</p>
<p>​ 传输层的协议有TCP、UDP。</p>
<ul>
<li><strong>会话层</strong></li>
</ul>
<p>​ 会话层允许不同主机上的各个进程之间进行会话。会话层利用传输层提供的端到端的服务，为表示层实体或用户进程建立连接并在连接上有序地传输数据，这就是会话，也称<strong>建立同步（SYN）</strong>。</p>
<p>​ 会话层负责管理主机间的会话进程，包括建立、管理及终止进程间的会话。会话层可以使用校验点使通信会话在通信失效时从校验点继续恢复通信，实现数据同步。</p>
<ul>
<li><strong>表示层</strong></li>
</ul>
<p>​ 表示层主要处理在两个通信系统中交换信息的表示方式。</p>
<p>​ 为了使不同表示方法的数据和信息之间能互相交换，表示层采用抽象的标准方法定义数据结构，并采用标准的编码形式。表示层的功能有实现数据格式变换、数据加密解密和数据压缩和恢复。</p>
<ul>
<li><strong>应用层</strong></li>
</ul>
<p>​ 传输单位是报文。</p>
<p>​ 应用层是OSI参考模型的最高层，是用户与网络的界面。</p>
<p>​ 应用层为特定类型的网络应用提供 访问OSI参考模型环境的手段。</p>
<p>​ 典型的协议 有用于文件传送的FTP、用于电子邮件的SMTP、用于万维网的HTTP等。</p>
<ol start="2">
<li><strong>TCP&#x2F;IP模型</strong></li>
</ol>
<p>​ ARPA在研究ARPAnet时提出了TCP&#x2F;IP模型，模型从低到高依次为网络接口层（对应OSI参考模型中的物理层和数据链路层）、网际层、传输层和应用层（对应OSI参考模型中的会话层、表示层和应用层）。</p>
<p>​ TCP&#x2F;IP由于得到广泛应用而成为事实上的国际标准。TCPP模型的层次结构如下图所示。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/02e41d2e57079231ef92d297c7a249b1png.jpg#pic_center" alt="image-20230810162556468"></p>
<ul>
<li><strong>网络接口层</strong></li>
</ul>
<p>​ 网络接口层的功能类似于OSI参考模型的物理层和数据链路层。它表示与物理网络的接口。</p>
<p>​ 具体的物理网络既可以是各种类型的局域网，如以太网、令牌环网、令牌总线网等，也可以是诸如电话网、SDH、X.25、帧中继和ATM等公共数据网络。网络接口层的作用是从主机或结点接收P分组，并把它们发送到指定的物理网络上。</p>
<ul>
<li><strong>网际层</strong></li>
</ul>
<p>​ 网际层(主机-主机)一是TCP&#x2F;IP体系结构的关键部分。它和OSI参考模型的网络层在功能上非常相似。</p>
<p>​ 网际层将分组发往任何网络，并为之独立地选择合适的路由，但它不保证各个分组有序地到达，各个分组的有序交付由高层负责。网际层定义了标准的分组格式和协议，即IP。</p>
<ul>
<li><strong>传输层</strong></li>
</ul>
<p>​ 传输层（应用-应用或进程-进程）的功能同样和OSI参考模型中的传输层类似，即使得发送端和目的端主机上的对等实体进行会话。主要使用TCP、UDP协议。</p>
<p>​ 传输控制协议（Transmission Control Protocol, TCP）。它是面向连接的，数据传输的单位是报文段，能够提供可靠的交付。</p>
<p>​ 用户数据报协议（User Datagram Protocol, UDP）。它是无连接的，数据传输的单位是用户数据报，不保证提供可靠的交付，只能提供“尽最大努力交付”。</p>
<ul>
<li><strong>应用层</strong></li>
</ul>
<p>​ 应用层（用户-用户）包含所有的高层协议，如虚拟终端协议（Telnet）、文件传输协议（FTP）、域名解析服务（DNS）、电子邮件协议（SMTP）和超文本传输协议（HTTP）。</p>
<ol start="3">
<li><strong>TCP&#x2F;IP模型与OSI参考模型的比较</strong></li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/ff0a9b1ed3ba21e6940c5536ff9e5c47png.jpg#pic_center" alt="image-20230810163407699"></p>
<ul>
<li><p>相同点</p>
<ul>
<li>二者都采取分层的体系结构</li>
<li>二者都是基于独立的协议栈的概念</li>
<li>二者都可以解决异构网络的互连</li>
</ul>
</li>
<li><p>​ 不同点</p>
<ul>
<li>OSI参考模型的最大贡献就是精确地定义了三个<strong>主要概念</strong>：服务、协议和接口，这与现代的面向对象程序设计思想非常吻合。<br>而TCP&#x2F;IP模型在这三个概念上却没有明确区分，不符合软件工程的思想。</li>
<li>OSI参考模型产生在协议发明之前，没有偏向于任何特定的协议，通用性良好。但设计者在协议方面没有太多经验，不知道把哪些功能放到哪一层更好。<br>TCP&#x2F;IP模型正好相反，首先出现的是<strong>协议</strong>，模型实际上是对已有协议的描述，因此不会出现协议不能匹配模型的情况，但该模型不适合于任何其他非TCP&#x2F;IP的协议栈。</li>
<li>TCP&#x2F;IP模型在设计之初就考虑到了多种<strong>异构网的互连</strong>问题，并将网际协议(IP)作为一个<strong>单独的重要层次</strong>。OSI参考模型最初只考虑到用一种标准的公用数据网将各种不同的系统互连。OSI参考模型认识到IP的重要性后，只好在网络层中<strong>划分出一个子层</strong>来完成类似于TCP&#x2F;IP模型中的IP的功能。</li>
<li>OSI参考模型在网络层支持无连接和面向连接的通信，但在传输层仅有面向连接的通信。<br>而TCP&#x2F;IP模型认为可靠性是端到端的问题，因此它在网际层仅有一种无连接的通信模式，但传输层支持无连接和面向连接两种模式。</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th align="center"></th>
<th align="center">OSI参考模型</th>
<th align="center">TCP&#x2F;IP模型</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>网络层</strong></td>
<td align="center">无连接+面向连接</td>
<td align="center">无连接</td>
</tr>
<tr>
<td align="center"><strong>传输层</strong></td>
<td align="center">面向连接</td>
<td align="center">无连接+面向连接</td>
</tr>
</tbody></table>
<ol start="4">
<li><strong>5层协议体系结构</strong></li>
</ol>
<p>​ 学习计算机网络时，我们往往采取折中的办法，即综合OSI参考模型和TCP&#x2F;IP模型的优点，采用一种如图所示的只有5层协议的体系结构，即我们所熟知的物理层、数据链路层、网络层、传输层和应用层。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/499068b96ea6a06759eb60abcfc3f98bpng.jpg" alt="image-20230810164337238"></p>
<table>
<thead>
<tr>
<th align="center">层次</th>
<th align="center">协议</th>
</tr>
</thead>
<tbody><tr>
<td align="center">应用层</td>
<td align="center">路由选择协议：距离向量路由算法（RIP）、边界网关协议（BGP）；</td>
</tr>
<tr>
<td align="center">动态主机配置协议（DHCP）；</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">域名系统（DNS）；文件传输协议（FTP）；超文本传输协议（HTTP）；</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">电子邮件协议：简单邮件传输协议（SMTP）、邮局协议（POP3）、互联网消息访问协议（IMAP）、多用途网际邮件扩充（MIME）</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">传输层</td>
<td align="center">传输控制协议（TCP）、用户数据报协议（UDP）</td>
</tr>
<tr>
<td align="center">网络层</td>
<td align="center">网际协议：IPv4、IPv6；地址解析协议（ARP）；网络地址转换协议（NAT）；</td>
</tr>
<tr>
<td align="center">互联网控制报文协议（ICMP）；网际组管理协议（IGMP）；</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">路由选择协议：链路状态路由算法（OSPF）；无分类编址（CIDR）</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">数据链路层</td>
<td align="center">组帧协议：字符计数法、字符填充法和比特填充法</td>
</tr>
<tr>
<td align="center">差错控制协议：奇偶校验码、循环冗余校验码（CRC）、海明码</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">流量控制与可靠传输协议:停止-等待协议、后退N帧协议（GBN）、选择重传协议（SR）</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">介质访问控制协议:ALOHA、CSMA&#x2F;CD、CSMA&#x2F;CA</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">物理层</td>
<td align="center">物理层接口标准（不需了解）</td>
</tr>
</tbody></table>
<h3 id="2-物理层"><a href="#2-物理层" class="headerlink" title="2 物理层"></a>2 物理层</h3><h4 id="2-1-通信基础"><a href="#2-1-通信基础" class="headerlink" title="2.1 通信基础"></a>2.1 通信基础</h4><h5 id="2-1-1-基本概念"><a href="#2-1-1-基本概念" class="headerlink" title="2.1.1 基本概念"></a>2.1.1 基本概念</h5><ol>
<li>.数据、信号与码元</li>
</ol>
<ul>
<li><p>数据：数据是指传送信息的实体；数据传输方式可分为串行传输和并行传输。</p>
<ul>
<li>串行传输是指1比特1比特地按照时间顺序传输（远距离通信通常采用串行传输）</li>
<li>并行传输是指若干比特通过多条通信信道同时传输。</li>
</ul>
</li>
<li><p>信号：是数据的电气或电磁表现，是数据在传输过程中的存在形式。</p>
<ul>
<li>模拟数据（信号）：连续变化的数据（或信号）</li>
<li>数字数据（信号）：取值仅允许为有限的几个离散数值的数据（或信号）</li>
</ul>
</li>
<li><p>码元：码元是指用一个固定时长的信号波形（数字脉冲）表示一位k进制数字，代表不同离散数值的基本波形，是数字通信中数字信号的计量单位，这个时长内的信号称为k进制码元，而该时长称为码元宽度。</p>
<ul>
<li>1码元可以携带若干比特的信息量。例如，在使用二进制编码时，只有两种不同的码元：一种代表0状态，另一种代表1状态。</li>
</ul>
</li>
</ul>
<ol start="2">
<li>信源、信道与信宿</li>
</ol>
<p>​ 一个数据通信系统主要划分为信源、信道和信宿三部分。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/b0000f4338201d1dcb17bd8fa20a8da9png.jpg#pic_center" alt="image-20230811135439310"></p>
<ul>
<li><p><strong>信源</strong>是产生和发送数据的源头。</p>
</li>
<li><p><strong>信宿</strong>是接收数据的终点，它们通常都是计算机或其他数字终端装置。</p>
</li>
</ul>
<p>​ 发送端信源发出的信息需要通过变换器转换成适合于在信道上传输的信号，而通过信道传输到接收端的信号先由反变换器转换成原始信息，再发送给信宿。</p>
<ul>
<li><strong>信道</strong>与电路并不等同，信道是信号的传输媒介。</li>
</ul>
<p>​ 一个信道可视为一条线路的逻辑部件，一般用来表示向某个方向传送信息的介质，因此一条通信线路往往包含一条发送信道和一条接收信道。</p>
<p>​ 噪声源是信道上的噪声（即对信号的干扰）及分散在通信系统其他各处的噪声的集中表示。</p>
<blockquote>
<p>信道的极限容量是指信道的最高码元传输速率或信道的极限信息传输速率。</p>
</blockquote>
<p>​ <strong>a. 信道分类</strong>：</p>
<ul>
<li>按传输信号形式：分为传送模拟信号的<strong>模拟信道</strong>和传送数字信号的<strong>数字信道</strong>；</li>
<li>按传输介质的不同：分为<strong>无线信道</strong>和<strong>有线信道</strong>。</li>
</ul>
<p>​ <strong>b. 信道传输信号分类</strong>：</p>
<ul>
<li>基带传输：基带信号将数字信号1和0直接用两种不同的电压表示，然后送到数字信道上传输。</li>
<li>宽带传输：宽带信号将基带信号进行调制后形成频分复用模拟信号，然后送到模拟信道上传输。</li>
</ul>
<p>​ <strong>c. 通信方式分类</strong>：</p>
<ul>
<li>单向通信。只有一个方向的通信而没有反方向的交互，仅需要一条信道。例如，无线电广播、电视广播就属于这种类型。</li>
<li>半双工通信。通信的双方都可以发送或接收信息，但任何一方都不能同时发送和接收信息，此时需要两条信道。</li>
<li>全双工通信。通信双方可以同时发送和接收信息，也需要两条信道。</li>
</ul>
<ol start="3">
<li>.速率、波特与带宽</li>
</ol>
<p>​ 速率也称<em>数据率</em>，指的是数据传输速率，表示单位时间内传输的数据量。可以用码元传输速率和信息传输速率表示。</p>
<ul>
<li><strong>码元传输速率</strong>。又称<strong>波特率</strong>，它表示单位时间内数字通信系统所传输的码元个数（也可称为脉冲个数或信号变化的次数），单位是波特（Baud）。1波特表示数字通信系统每秒传输一个码元。码元可以是多进制的，也可以是二进制的，码元速率与进制数无关。</li>
<li><strong>信息传输速率</strong>。又称信息速率、<strong>比特率</strong>等，它表示单位时间内数字通信系统传输的二进制码元个数（即比特数），单位是比特&#x2F;秒（b&#x2F;s）。</li>
</ul>
<h5 id="2-1-2-奈奎斯特定理与香农定理"><a href="#2-1-2-奈奎斯特定理与香农定理" class="headerlink" title="2.1.2 奈奎斯特定理与香农定理"></a>2.1.2 奈奎斯特定理与香农定理</h5><ol>
<li>奈奎斯特定理</li>
</ol>
<p>​ <strong>奈氏准则</strong>：规定在理想低通（没有噪声、带宽有限）的信道中，为了避免码间串扰，极限码元传输速率为2W波特，其中W是<strong>理想低通信道的带宽</strong>。</p>
<blockquote>
<p>码间串扰：信号中的许多高频分量往住不能通过信道，否则在传输中会衰减，导致接收端收到的信号波形失去码元之间的清晰界限。</p>
</blockquote>
<p>​ 若用V表示每个码元离散电平的数目（码元的离散电平数目是指有多少种不同的码元，比如有16种不同的码元，则需要4个二进制位，因此数据传输速率是码元传输速率的4倍），则极限数据率为<br>理想低通信道下的极限数据传输速率 &#x3D; 2 W l o g 2 V （单位为 b &#x2F; s ） 理想低通信道下的极限数据传输速率&#x3D;2Wlog_2V（单位为b&#x2F;s） 理想低通信道下的极限数据传输速率=2Wlog2​V（单位为b&#x2F;s）</p>
<ul>
<li>在任何信道中，码元传输速率是有上限的。若传输速率超过此上限，就会出现严重的码间串扰问题，使得接收端不可能完全正确识别码元。</li>
<li>信道的频带越宽（即通过的信号高频分量越多），就可用更高的速率进行码元的有效传输。</li>
<li>奈氏准则给出了码元传输速率的限制，但并未对信息传输速率给出限制，即未对一个码元可以对应多少个二进制位给出限制。</li>
</ul>
<blockquote>
<p>由于码元传输速率受奈氏准则的制约，所以要提高数据传输速率，就必须设法使每个码元携带更多比特的信息量，此时就需要采用多元制的调制方法。</p>
</blockquote>
<ol start="2">
<li>香农定理</li>
</ol>
<p>​ 香农（Shannon）定理给出了带宽受限且有高斯白噪声干扰的信道的极限数据传输速率，当用此速率进行传输时，可以做到不产生误差。香农定理定义为<br>信道的极限数据传输速率 &#x3D; W l o g 2 （ 1 + S &#x2F; N ）（单位为 b &#x2F; s ） 信道的极限数据传输速率&#x3D;Wlog_2（1+S&#x2F;N）（单位为b&#x2F;s） 信道的极限数据传输速率=Wlog2​（1+S&#x2F;N）（单位为b&#x2F;s）<br>​ 式中，W为信道的带宽，S为信道所传输信号的平均功率，N为信道内部的高斯噪声功率。S&#x2F;N 为信噪比，即信号的平均功率与噪声的平均功率之比， 信噪比 &#x3D; 10 l o g 10 （ S &#x2F; N ) （单位为 d B ） 信噪比&#x3D;10log_{10}（S&#x2F;N) （单位为dB） 信噪比=10log10​（S&#x2F;N)（单位为dB）,例如 当S&#x2F;N&#x3D;10时，信噪比为10dB，而当S&#x2F;N&#x3D; 1000时，信噪比为30dB。</p>
<ul>
<li>信道的带宽或信道中的信噪比越大，信息的极限传输速率越高。</li>
<li>对一定的传输带宽和一定的信噪比，信息传输速率的上限是确定的。</li>
<li>只要信息传输速率低于信道的极限传输速率，就能找到某种方法来实现无差错的传输。</li>
<li>香农定理得出的是极限信息传输速率，实际信道能达到的传输速率要比它低不少。</li>
</ul>
<blockquote>
<p>奈氏准则只考虑了带宽与极限码元传输速率的关系，而香农定理不仅考虑到了带宽，也考虑到了信噪比。这从另一个侧面表明，一个码元对应的二进制位数是有限的。</p>
</blockquote>
<h5 id="2-1-3-编码与调制"><a href="#2-1-3-编码与调制" class="headerlink" title="2.1.3 编码与调制"></a>2.1.3 编码与调制</h5><p>​ <strong>编码</strong>：把数据变换为<strong>数字信号</strong>的过程；<strong>调制</strong>：把数据变换为<strong>模拟信号</strong>的过程。</p>
<ol>
<li>数字数据编码为数字信号</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/b92d1dd5e6a738e9ba291aca46fba6b7png.jpg#pic_center" alt="image-20230811145912844"></p>
<ul>
<li><strong>归零编码</strong>。在归零编码（RZ）中用高电平代表1、低电平代表0（或者相反），<strong>每个时钟周期的中间均跳变到低电平（归零）</strong>，接收方根据该跳变调整本方的时钟基准，这就为传输双方提供了自同步机制。由于归零需要占用一部分带宽，因此传输效率受到了一定的影响。</li>
<li><strong>非归零编码</strong>。非归零编码（NRZ）与RZ编码的区别是不用归零，一个周期可以全部用来传输数据。但NRZ编码无法传递时钟信号，双方难以同步，因此若想传输高速同步数据，则需要都带有时钟线。</li>
<li><strong>反向非归零编码</strong>。反向非归零编码（NRZI）与NRZ编码的区别是用信号的<strong>翻转代表0、信号保持不变代表1</strong>。翻转的信号本身可以作为一种通知机制。这种编码方式集成了前两种编码的优点，既能传输时钟信号，又能尽量不损失系统带宽。USB2.0通信的编码方式就是NRZI编码。</li>
<li><strong>曼彻斯特编码</strong>。曼彻斯特编码（Manchester Encoding）将一个码元分成两个相等的间隔，前一个间隔为高电平而后一个间隔为低电平表示码元1：码元0的表示方法则正好相反。当然，也可采用相反的规定。该编码的特点是，在每个码元的中间出现电平跳变，位中间的跳变既作为时钟信号（可用于同步），又作为数据信号，但它所占的频带宽度是原始基带宽度的两倍。以太网使用的编码方式就是曼彻斯特编码。</li>
<li><strong>差分曼彻斯特编码</strong>。差分曼彻斯特编码常用于局域网传输，其规则是：若码元为1，则前半个码元的电平与上一码元的后半个码元的电平相同；若码元为0，则情形相反。该编码的特点是，在每个码元的中间都有一次电平的跳转，可以实现自同步，且抗干扰性较好。</li>
<li><strong>4B&#x2F;5B编码</strong>。将欲发送数据流的每4位作为一组，然后按照4B&#x2F;5B编码规则将其转换成相应的5位码。5位码共32种组合，但只采用其中的16种对应16种不同的4位码，其他16种作为控制码（帧的开始和结束、线路的状态信息等）或保留。</li>
</ul>
<ol start="2">
<li>数字数据调制为模拟信号</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/c4c214c36178632de61c424d42ddf179png.jpg#pic_center" alt="image-20230811151338009"></p>
<ul>
<li>幅移键控（ASK）。通过改变载波信号的振幅来表示数字信号1和0，而载波的频率和相位都不改变。比较容易实现，但抗干扰能力差。</li>
<li>频移键控（FSK）。通过改变载波信号的频率来表示数字信号1和0，而载波的振幅和相位都不改变。容易实现，抗干扰能力强，目前应用较为广泛。</li>
<li>相移键控（PSK）。通过改变载波信号的相位来表示数字信号1和0，而载波的振幅和频率都不改变。它又分为绝对调相和相对调相。</li>
<li>正交振幅调制（QAM）。在频率相同的前提下，将ASK与PSK结合起来，形成叠加信号。设波特率为B，采用m个相位，每个相位有n种振幅，则该QAM技术的数据传输速率R为</li>
</ul>
<p>R &#x3D; B l o g 2 （ m n ）（单位为 b &#x2F; s ） R&#x3D;Blog_2（mn）（单位为b&#x2F;s） R=Blog2​（mn）（单位为b&#x2F;s）</p>
<ol start="3">
<li>模拟数据编码为数字信号</li>
</ol>
<p>​ 典型的例子是常用于对音频信号进行编码的<strong>脉码调制（PCM）</strong>。它主要包括三个步骤，即采样、量化和编码。</p>
<p>​ <strong>奈奎斯特定理</strong>：在通信领域，带宽是指信号最高频率与最低频率之差，单位为Hz。因此，将模拟信号转换成数字信号时，假设原始信号中的最大频率为 f f f，那么采样频率 f 采样 f_{采样} f采样​必须大于或等于最大频率 f f f的两倍，才能保证采样后的数字信号完整保留原始模拟信号的信息。<br>f 采样 ≥ 2 f f_{采样}≥2f f采样​≥2f</p>
<ul>
<li><p><strong>采样</strong>是指对模拟信号进行周期性扫描，把时间上连续的信号变成时间上离散的信号。</p>
<p>根据采样定理，当采样的频率大于或等于模拟数据的频带带宽（最高变化频率）的两倍时，所得的离散信号可以无失真地代表被采样的模拟数据。</p>
</li>
<li><p><strong>量化</strong>是把采样取得的电平幅值按照一定的分级标度转化为对应的数字值并取整数，这样就把连续的电平幅值转换为了离散的数字量。采样和量化的实质就是分割和转换。</p>
</li>
<li><p><strong>编码</strong>是把量化的结果转换为与之对应的二进制编码。</p>
</li>
</ul>
<ol start="4">
<li>模拟数据调制为模拟信号</li>
</ol>
<p>​ 为了实现传输的有效性，可能需要较高的频率。这种调制方式还可以使用<strong>频分复用（FDM）技术</strong>，充分利用带宽资源。电话机和本地局交换机采用模拟信号传输模拟数据的编码方式，模拟的声音数据是加载到模拟的载波信号中传输的。</p>
<h5 id="2-1-4-电路交换、报文交换与分组交换"><a href="#2-1-4-电路交换、报文交换与分组交换" class="headerlink" title="2.1.4 电路交换、报文交换与分组交换"></a>2.1.4 电路交换、报文交换与分组交换</h5><ol>
<li>电路交换</li>
</ol>
<p>​ 在进行数据传输前，两个结点之间必须先建立一条<strong>专用（双方独占）的物理通信路径</strong>（由通信双方之间的交换设备和链路逐段连接而成），该路径可能经过许多中间结点。这一路径在整个数据传输期间一直被<strong>独占</strong>，直到通信结束后才被释放。</p>
<p>​ 电路交换技术分为三个阶段：连接 建立、数据传输和连接释放。</p>
<p>​ <strong>优点</strong>：</p>
<p>​ 1）传输时延小，专用通道，数据直达<br>​ 2）有序传输，数据顺序传送，无失序问题<br>​ 3）没有冲突，全双工通信，通信双方有不同的信道，不会争用物理信道<br>​ 4）适用范围广，模拟信号和输数字信号都可以传输<br>​ 5）实时性强，双方一旦建立物理通路，便可以实时通信，适用于交互式会话类通信。<br>​ 6）控制简单，电路的交换设备及控制较简单</p>
<p>​ <strong>缺点</strong>：</p>
<p>​ 1）建立连接时间长<br>​ 2）线路独占，信道使用效率低。<br>​ 3）灵活性差：出现故障，就必须重新拨号建立新的连接<br>​ 4）难以规格化<br>​ 5）无数据存储能力，难以平滑通信量<br>​ 6）无法发现与纠正传输差错，难以在通信过程中进行差错控制</p>
<ol start="2">
<li>报文交换</li>
</ol>
<p>​ 数据交换的单位是<strong>报文</strong>，报文携带有目标地址、源地址等信息。报文交换在交换结点采用的是<strong>存储转发</strong>的传输方式。</p>
<p>​ <strong>优点</strong>：</p>
<p>​ 1）无需建立连接。<br>​ 2）动态分配线路：报文发给交换设备时，交换设备先存储报文，然后选择一条合适的空闲线路，将报文发送出去<br>​ 3）线路可靠性高：如果某条传输路径发生故障，可重新选择另一条路径传输数搭<br>​ 4）线路利用率高：通信双方在不同的时间一段一段地部分占有物理通道<br>​ 5）提供多目标服务：一个报文可以同时发送往多个目的地址<br>​ 6）在存储转发中容易实现代码转换和速率匹配，甚至收发双方可以不同时处于可用状态。这样就便于类型，规格和速度不同的计算机之间进行通信。</p>
<p>​ <strong>缺点</strong>：</p>
<p>​ 1）数据进入交换结点后要经历存储、转发，从而引起转发时延（包括接收报文、检验正确性、排队、发送时间等）。<br>​ 2）报文的大小没有限制，要求网路结点需要有较大的缓存空间。增加了传送时延。<br>​ 3）只适用于数字信号。</p>
<ol start="3">
<li>分组交换</li>
</ol>
<p>​ 分组交换限制了每次传送的数据块大小的上限，把大的数据块划分为合理的小数据块，再加上一些必要的控制信息（如源地址、目的地址和编号信息等），构成分组（Packet）。</p>
<p>​ <strong>优点</strong>：</p>
<p>​ 1）无建立时延（相对于报文减小传输时延）<br>​ 2）线路利用率高<br>​ 3）简化了存储管理（相对于报文交换）<br>​ 4）加速传输：分组是逐个传输，可以适用流水线的方式<br>​ 5）减少了出错几率和重发数据量：提高了可靠性，也减少了传输时延。<br>​ 6）分组短小，适用于计算机之间突发式数据通信</p>
<p>​ <strong>缺点</strong>：</p>
<p>​ 1）存在传输时延<br>​ 2）需要传输额外的信息量。每个小数据块都要加上源、目的地址和分组编号等信息<br>​ 3）当分组交换采用数据报服务时，可能出现失序、丢失或重复分组分组到达目的结点时，要对分组按编号进行排序等工作。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/23223ec8af60a96e25347a155870d108png.jpg#pic_center" alt="image-20230811155139123"></p>
<ul>
<li>传送数据量大，且传送时间远大于呼叫时，选择<strong>电路交换</strong>。电路交换传输时延最小。</li>
<li>当端到端的通路有很多段的链路组成时采用<strong>分组交换</strong>传送数据较为合适。</li>
<li>从信道利用率上看，报文交换和分组交换优于电路交换，其中分组交换比报文交换的时延小，尤其适合于计算机之间的突发式的数据通信。</li>
</ul>
<h5 id="2-1-5-数据报与虚电路"><a href="#2-1-5-数据报与虚电路" class="headerlink" title="2.1.5 数据报与虚电路"></a>2.1.5 数据报与虚电路</h5><ol>
<li>数据报</li>
</ol>
<p>​ 作为通信子网用户的端系统发送一个报文时，在端系统中实现的高层协议先把<strong>报文拆成若干带有序号的数据单元</strong>，并在网络层加上地址等<strong>控制信息</strong>后形成<strong>数据报分组</strong>（即网络层的PDU）。中间结点存储分组很短一段时间，找到<strong>最佳的路由</strong>后，尽快转发每个分组。不同的分组可以走不同的路径，也可以按不同的顺序到达目的结点。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/fdf43fa3e6ad9d1e6ea2b2d06262de92png.jpg#pic_center" alt="image-20230811155407956"></p>
<p>原理：</p>
<ul>
<li>主机A先将分组逐个发往与它直接相连的交换结点A，交换结点A缓存收到的分组。</li>
<li>然后查找自己的转发表。由于不同时刻的网络状态不同，因此转发表的内容可能不完全相同，所以有的分组转发给交换结点C，有的分组转发给交换结点D。</li>
<li>网络中的其他结点收到分组后，类似地转发分组，直到分组最终到达主机B。</li>
</ul>
<p>特点：</p>
<ul>
<li>**发送分组前不需要建立连接。**发送方可随时发送分组，网络中的结点可随时接收分组。</li>
<li><strong>网络尽最大努力交付</strong>，传输不保证可靠性，所以可能丢失；网络为每个分组独立地选择路由，转发的路径可能不同，因而<strong>分组不一定按序到达目的结点</strong>。</li>
<li>发送的分组中要<strong>包括发送端和接收端的完整地址</strong>，以便可以独立传输。</li>
<li>分组在交换结点存储转发时，需要排队等候处理，这会带来一定的时延。通过交换结点的通信量较大或网络发生拥塞时，这种时延会大大增加，交换结点还可根据情况丢弃部分分组。</li>
<li>网络具有冗余路径，当某个交换结点或一条链路出现故障时，可相应地更新转发表，寻找另一条路径转发分组，对故障的适应能力强。</li>
<li>存储转发的延时一般较小，提高了网络的吞吐量。</li>
<li>收发双方不独占某条链路，资源利用率较高。</li>
</ul>
<ol start="2">
<li>虚电路</li>
</ol>
<p>​ 虚电路方式试图将数据报方式与电路交换方式结合起来，充分发挥两种方法的优点，以达到最佳的数据交换效果。在分组发送之前，要求在发送方和接收方建立一条逻辑上相连的虚电路，并且连接一旦建立，就固定了虚电路所对应的物理路径。</p>
<p>​ 与电路交换类似，整个通信过程分为三个阶段：虚电路建立、数据传输与虚电路释放。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/cc9b03f1821692b26a40ffcebfd9563dpng.jpg#pic_center" alt="image-20230811161211880"></p>
<p>原理：</p>
<ul>
<li>为进行数据传输，主机A与主机B之间先建立一条逻辑通路，主机A发出一个特殊的“呼叫请求”分组，该分组通过中间结点送往主机B，若主机B同意连接，则发送“呼叫应答”分组予以确认。</li>
<li>虚电路建立后，主机A就可向主机B发送数据分组。当然，主机B也可在该虚电路上向主机A发送数据。</li>
<li>传送结束后主机A通过发送“释放请求”分组来拆除虚电路，逐段断开整个连接。</li>
</ul>
<p>特点：</p>
<ul>
<li>虚电路通信链路的建立和拆除需要时间开销，对交互式应用和小量的短分组情况显得很浪费，但对长时间、频繁的数据交换效率较高。</li>
<li>虚电路的路由选择体现在连接建立阶段，连接建立后，就<strong>确定了传输路径</strong>。</li>
<li>虚电路提供了<strong>可靠的通信功能</strong>，能保证<strong>每个分组正确且有序到达</strong>。此外，还可以对两个数据端点的流量进行控制，当接收方来不及接收数据时，可以通知发送方暂缓发送。</li>
<li>虚电路有一个致命的弱点，即当网络中的某个结点或某条链路出现故障而彻底失效时，所有经过该结点或该链路的虚电路将遭到破坏。</li>
<li>分组首部不包含目的地址，包含的是虚电路标识符，相对于数据报方式，其开销小。</li>
</ul>
<table>
<thead>
<tr>
<th align="center"></th>
<th align="center">数据报服务</th>
<th align="center">虚电路服务</th>
</tr>
</thead>
<tbody><tr>
<td align="center">连接的建立</td>
<td align="center">不需要</td>
<td align="center">必须有</td>
</tr>
<tr>
<td align="center">目的地址</td>
<td align="center">每个分组都有完整的目的地址</td>
<td align="center">仅在建立连接阶段使用，之后每个分组使用长度较短的虚电路号</td>
</tr>
<tr>
<td align="center">路由选择</td>
<td align="center">每个分组独立地进行路由选择和转发</td>
<td align="center">属于同一条虚电路的分组按照同一路由转发</td>
</tr>
<tr>
<td align="center">分组顺序</td>
<td align="center">不保证分组的有序到达</td>
<td align="center">保证分组的有序到达</td>
</tr>
<tr>
<td align="center">可靠性</td>
<td align="center">不保证可靠通信，可靠性由用户主机来保证</td>
<td align="center">可靠性由网络保证</td>
</tr>
<tr>
<td align="center">对网络故障的适应性</td>
<td align="center">出故障的结点丢失分组，其他分组路径选择发生变化时可以正常传输</td>
<td align="center">所有经过故障结点的虚电路均不能正常工作</td>
</tr>
<tr>
<td align="center">差错处理和流量控制</td>
<td align="center">由用户主机进行流量控制，不保证数据报的可靠性</td>
<td align="center">可由分组交换网负责，也可由用户主机负责</td>
</tr>
</tbody></table>
<h4 id="2-2-传输介质"><a href="#2-2-传输介质" class="headerlink" title="2.2 传输介质"></a>2.2 传输介质</h4><h5 id="2-2-1-双绞线、同轴电缆、光纤与无线传输介质"><a href="#2-2-1-双绞线、同轴电缆、光纤与无线传输介质" class="headerlink" title="2.2.1 双绞线、同轴电缆、光纤与无线传输介质"></a>2.2.1 双绞线、同轴电缆、光纤与无线传输介质</h5><p>​ 传输介质也称传输媒体，它是数据传输系统中发送设备和接收设备之间的物理通路。</p>
<ol>
<li>双绞线</li>
</ol>
<p>​ 双绞线是最常用的古老传输介质，它由两根采用一定规则并排绞合的、相互绝缘的铜导线组成。绞合可以减少对相邻导线的电磁干扰。</p>
<p>​ 为了进一步提高抗电磁干扰的能力，可在双绞线的外 面再加上一层，即用金属丝编织成的屏蔽层，这就是**屏蔽双绞线(STP)<strong>；无屏蔽层的双绞线称为</strong>非屏蔽双绞线(UTP)**。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/54571914dc0802fdc06299064c7d59f4png.jpg#pic_center" alt="image-20230811163048085"></p>
<ul>
<li>双绞线的<strong>价格便宜</strong>，是最常用的传输介质之一，在局域网和传统电话网中普遍使用。</li>
<li>带宽取决于铜线的粗细和传输的距离。</li>
<li>通信距离一般 为几千米到数十千米。</li>
<li>模拟传输和数字传输都可使用双绞线，距离太远时，对于模拟传输，要用<strong>放大器</strong>放大衰减的信号；对于数字传输，要用<strong>中继器</strong>将失真的信号整形。</li>
</ul>
<ol start="2">
<li>同轴电缆</li>
</ol>
<p>​ 同轴电缆由内导体、绝缘层、网状编织屏蔽层和塑料外层构成。</p>
<p>​ 基带同轴电缆：<strong>50Ω同轴电缆</strong>，主要用于传送基带数字信号。</p>
<p>​ 宽带同轴电缆：<strong>75Ω同轴电缆</strong>，主要用于传送宽带信号。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/3724839aed55772c42a6324097afb085png.jpg#pic_center" alt="image-20230811163530599"></p>
<ul>
<li>同轴电缆具有良好的抗干扰特性，被广泛用于传输较高速率的数据。</li>
<li>传输距离更远，但价格较双绞线贵。</li>
</ul>
<ol start="3">
<li>光纤</li>
</ol>
<p>​ 光纤通信就是利用光导纤维(简称光纤)传递光脉冲来进行通信。</p>
<p>​ 有光脉冲表示1，无光脉冲表示0。可见光的频率约为108MHz,因此光纤通信系统的<strong>带宽范围极大</strong>。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/2bdbe38e6405452441a48717f9e741e5png.jpg#pic_center" alt="image-20230811164005685"></p>
<p>​ 光纤主要由纤芯（实心）和包层构成，光波通过纤芯进行传导，包层较纤芯有较低的折射率。当光线从高折射率的介质射向低折射率的介质时，其折射角将大于入射角。因此，如果入射角足够大，就会出现全反射，即光线碰到包层时候就会折射回纤芯、这个过程不断重复，光也就沿着光纤传输下去。</p>
<ul>
<li><p>多模光纤：利用光的全反射特性，可以将从不同角度入射的多条光线在一根光纤中传输。</p>
<p>光脉冲在多模光纤中传输时会逐渐展宽, 造成失真，因此多模光纤只适合于<strong>近距离传输</strong>。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/e90c6a79c1713b6e9a4433472f1e6b36png.jpg#pic_center" alt="image-20230811164201006"></p>
</li>
<li><p>单模光纤：光纤的直径减小到只有一个光的波长时，光纤就像一根波导那样，可使光线一直向前传播，而不会产生多次反射。</p>
<p>单模光纤的衰减较小，可传输数公里甚至数十千米而不必采用中继器，适合<strong>远距离传输</strong>。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/ed643b7997aa94c6de11c6de5a0b5d27png.jpg#pic_center" alt="image-20230811164306197"></p>
</li>
</ul>
<p>​ <strong>特点</strong>：</p>
<ul>
<li>传输损耗小，中继距离长，对远距离传输特别经济。</li>
<li>抗雷电和电磁干扰性能好。这在有大电流脉冲干扰的环境下尤为重要。</li>
<li>无串音干扰，保密性好，也不易被窃听或截取数据。</li>
<li>体积小，重量轻。这在现有电缆管道已拥塞不堪的情况下特别有利。</li>
</ul>
<ol start="4">
<li>无线介质</li>
</ol>
<ul>
<li>无线电波<ul>
<li>无线电波具有较强的<strong>穿透能力</strong>，可以传输很长的距离。</li>
<li>无线电波使信号向<strong>所有方向散播</strong>，因此有效距离范围内的接收设备无须对准某个方向，就可与无线电波发射者进行通信连接。</li>
</ul>
</li>
<li>微波、红外线和激光<ul>
<li>有很强的方向性，都沿直线传播。</li>
<li><strong>红外通信和激光通信</strong>把要传输的信号分别转换为各自的信号格式，即红外光信号和激光信号，再直接在空间中传播。</li>
<li><strong>微波通信</strong>的频率较高，频段范围也很宽，载波频率通常为2~40GHz，因而通信信道的容量大。</li>
<li>卫星通信利用地球同步卫星作为中继来转发微波信号，可以克服地面微波通信距离的限制。卫星通信的优点是通信容量大、距离远、覆盖广，缺点是保密性差、端到端传播时延长。</li>
</ul>
</li>
</ul>
<h5 id="2-2-2-物理层接口的特性"><a href="#2-2-2-物理层接口的特性" class="headerlink" title="2.2.2 物理层接口的特性"></a>2.2.2 物理层接口的特性</h5><p>​ 物理层的主要任务可以描述为确定与传输媒体的接口有关的一些特性：</p>
<ul>
<li>机械特性。指明接口所用接线器的形状和尺寸、引脚数目和排列、固定和锁定装置等。</li>
<li>电气特性。指明在接口电缆的各条线上出现的电压的范围。</li>
<li>功能特性。指明某条线上出现的某一电平的电压表示何种意义。</li>
<li>过程特性。或称规程特性。指明对于不同功能的各种可能事件的出现顺序。</li>
</ul>
<p>​ 常用的物理层接口标准有EIARS.232.C、ADSL和SONET&#x2F;SDH等。</p>
<h4 id="2-3-物理层设备"><a href="#2-3-物理层设备" class="headerlink" title="2.3 物理层设备"></a>2.3 物理层设备</h4><h5 id="2-3-1-中继器"><a href="#2-3-1-中继器" class="headerlink" title="2.3.1 中继器"></a>2.3.1 中继器</h5><p>​ 由于存在损耗，在线路上传输的信号功率会逐渐衰减，衰减到一定程度时将造成信号失真，因此会导致接收错误。因此需要中继器在传播途中修复信号失真。</p>
<p>​ 中继器的主要功能是将信号<strong>整形并放大</strong>再<strong>转发</strong>出去，以消除信号经过一长段电缆后而产生的<strong>失真和衰减</strong>，使信号的波形和强度达到所需要的要求，进而<strong>扩大网络传输</strong>的距离。</p>
<ul>
<li><p>原理是信号再生（而非简单地将衰减的信号放大）。中继器有两个端口，数据从一个端口输入，再从另一个端口发出。端口仅作用于信号的电气部分，而不管是否有错误数据或不适于网段的数据。</p>
</li>
<li><p>中继器两端的网络部分是网段，而不是子网，使用中继器连接的几个网段仍然是一个局域网。</p>
</li>
<li><p>中继器工作在物理层，因此它不能连接两个具有不同速率的局域网。</p>
</li>
</ul>
<blockquote>
<p>注意：如果某个网络设备具有存储转发的功能，那么可以认为它能连接两个不同的协议；如果该网络设备没有存储转发功能，那么认为它不能连接两个不同的协议。</p>
<p>中继器没有存储转发功能，因此它不能连接两个速率不同的网段，中继器两端的网段一定要使用同一个协议。</p>
</blockquote>
<p>​ <strong>5-4-3原则</strong>：在采用粗同轴电缆的10BASE5以太网规范中，互相串联的<strong>中继器的个数</strong>不能超过4个，而且用4个中继器<strong>串联的5段通信介质</strong>中只有<strong>3段可以挂接计算机</strong>，其余两段只能用作扩展通信范围的链路段，不能挂接计算机。</p>
<blockquote>
<p>注意：放大器和中继器都起放大作用，只不过放大器放大的是<strong>模拟信号</strong>，原理是将衰减的信号放大，而中继器放大的是<strong>数字信号</strong>，原理是将衰减的信号整形再生。</p>
</blockquote>
<h5 id="2-3-2-集线器"><a href="#2-3-2-集线器" class="headerlink" title="2.3.2 集线器"></a>2.3.2 集线器</h5><p>​ 集线器（Hub）实质上是一个多端口的中继器。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/25b7892401ba56bffe858fd7208f7783png.jpg#pic_center" alt="image-20230811170527515"></p>
<p>​ 当Hub工作时，一个端口接收到数据信号后，由于信号在从端口到Hub的传输过程中已有衰减，所以Hub便将该信号进行<strong>整形放大</strong>，使之<strong>再生（恢复）</strong>到发送时的状态，紧接着转发到<strong>其他所有</strong>（除输入端口外）处于工作状态的端口。</p>
<ul>
<li>每个端口连接的网络部分是一个网络的不同网段，由Hub组成的网络是共享式网络，但逻辑上仍是一个总线网。集线器<strong>不能分割冲突域</strong>。</li>
<li>主要使用双绞线组建共享网络，是从服务器连接到桌面的最经济方案。</li>
<li>只能在半双工状态下工作，如果同时有两个或多个端口输入，那么输出时会发生冲突，致使这些数据都无效。</li>
</ul>
<blockquote>
<p>集线器在一个时钟周期中只能传输一组信息，如果一台集线器连接的机器数目较多，且多台机器经常需要同时通信，那么将导致信息碰撞，使得集线器的工作效率很差。</p>
<p>比如，一个带宽为10Mb&#x2F;S的集线器上连接了8台计算机，当这8台计算机同时工作时，每台计算机真正所拥有的带宽为10&#x2F;8Mb&#x2F;s&#x3D;1.25Mb&#x2F;s。</p>
</blockquote>
<h3 id="3-数据链路层"><a href="#3-数据链路层" class="headerlink" title="3 数据链路层"></a>3 数据链路层</h3><h4 id="3-1-数据链路层的功能"><a href="#3-1-数据链路层的功能" class="headerlink" title="3.1 数据链路层的功能"></a>3.1 数据链路层的功能</h4><p>​ 数据链路层在物理层提供服务的基础上向网络层提供服务，将物理层提供的可能出错的物理连接改造为逻辑上无差错的数据链路。基本任务是将源机器中来自网络层的数据传输到目标机器的网络层。</p>
<p>​ <strong>数据链路</strong>指网络中两个结点之间的逻辑通道，把实现控制数据传输协议的硬件和软件加到链路上就构成数据链路。数据链路层负责通过一条链路从一个结点向另一个物理链路直接相连的相邻结点传送数据报。</p>
<h5 id="3-1-1-为网络层提供服务"><a href="#3-1-1-为网络层提供服务" class="headerlink" title="3.1.1 为网络层提供服务"></a>3.1.1 为网络层提供服务</h5><ol>
<li><p>无确认的无连接服务</p>
<p>源机器发送数据帧时不需先建立链路连接，目的机器收到数据帧时不需发回确认。适用于实时通信或误码率较低的通信信道，如以太网。</p>
</li>
<li><p>有确认的无连接服务</p>
<p>源机器发送数据帧时不需先建立链路连接，但目的机器收到数据帧时必须发回确认。源机器在所规定的时间内未收到确定信号时，就<strong>重传丢失的帧</strong>。该服务适用于误码率较高的通信信道，如无线通信。</p>
</li>
<li><p>有确认的面向连接服务</p>
<p>帧传输过程分为三个阶段：建立数据链路、传输帧、释放数据链路。目的机器对收到的每一帧都要给出确认，源机器收到确认后才能发送下一帧。该服务适用于通信要求（可靠性、实时性）较高的场合。</p>
</li>
</ol>
<h5 id="3-1-2-链路管理"><a href="#3-1-2-链路管理" class="headerlink" title="3.1.2 链路管理"></a>3.1.2 链路管理</h5><p>​ 数据链路层连接的建立、维持和释放过程称为<strong>链路管理</strong>，它主要用于面向连接的服务。</p>
<h5 id="3-1-3-封装成帧与透明传输"><a href="#3-1-3-封装成帧与透明传输" class="headerlink" title="3.1.3 封装成帧与透明传输"></a>3.1.3 封装成帧与透明传输</h5><p>​ 两台主机之间传输信息时，必须将网络层的分组<strong>封装成帧</strong>，以帧的格式进行传送。</p>
<ul>
<li>帧构成：数据前后添加首部和尾部。帧长&#x3D;数据长度+首部长度+尾部长度</li>
<li>帧定界：帧首部尾部包含控制信息，其中一个重要作用是确定帧的界限。</li>
<li>帧同步：接收方应能从接收到的二进制比特流中区分出帧的起始与终止。</li>
<li>最大传送单元（MTU）：为了提高帧的传输效率，应当使帧的数据部分的长度尽可能地大于首部和尾部的长度，但每种数据链路层协议都规定了<strong>帧的数据部分的长度上限</strong>——最大传送单元（MTU）。</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/e604b8fd27f98847ef9ba8268d9aeef7png.jpg#pic_center" alt="image-20230814143522092"></p>
<p><strong>HDLC协议</strong>：用标识位F （01111110）来标识帧的开始和结束。帧格式如下图所示。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/dda0917e8cb8bd9e98803e3a680cd61fpng.jpg#pic_center" alt="image-20230814140449549"></p>
<ul>
<li>透明传输：不管所传数据是什么样的比特组合，都应当能在链路上传送。通过不同组帧方式实现透明传输。</li>
</ul>
<h5 id="3-1-4-流量控制"><a href="#3-1-4-流量控制" class="headerlink" title="3.1.4 流量控制"></a>3.1.4 流量控制</h5><p>​ 由于收发双方各自的工作速率和缓存空间的差异，可能出现发送方的发送能力大于接收方的接收能力的现象，这样会导致帧的丢失导致出错。<br>​ <strong>流量控制</strong>实际上就是限制发送方的数据流量，使其发送速率不超过接收方的接收能力。</p>
<blockquote>
<p>流量控制在不同层，控制的对象不同。对于数据链路层来说，控制的是相邻两结点之间数据链路上的流量，而对于传输层来说，控制的则是从源端到目的端之间的流量。</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/5e1abf40e4df8ed749bd03bb3f6d4bcbpng.jpg#pic_center" alt="image-20230814143422344"></p>
<blockquote>
<p>在OSI体系结构中，数据链路层具有流量控制的功能。而在TCP&#x2F;IP体系结构中，流 量控制功能被移到了传输层。</p>
</blockquote>
<h5 id="3-1-5-差错控制"><a href="#3-1-5-差错控制" class="headerlink" title="3.1.5 差错控制"></a>3.1.5 差错控制</h5><p>​ 由于信道噪声等各种原因，帧在传输过程中可能会出现错误。用以使发送方确定接收方是否正确收到由其发送的数据的方法称为<strong>差错控制</strong>。</p>
<p>​ 位错指帧中某些位出现了差错。通常采用<strong>循环冗余校验</strong>（CRC）方式发现位错，通过<strong>自动重传请求</strong>（Automatic Repeat reQuest, ARQ）方式来重传出错的帧。</p>
<p>​ 帧错指帧的丢失、重复或失序等错误。在数据链路层引入定时器和编号机制，能保证每一帧最终都能有且仅有一次正确地交付给目的结点。</p>
<h4 id="3-2-组帧"><a href="#3-2-组帧" class="headerlink" title="3.2 组帧"></a>3.2 组帧</h4><p>​ 为了使接收方能正确地接收并检查所传输的帧，发送方必须依据一定的规则把网络层递交的分组封装成帧（称为<strong>组帧</strong>）。</p>
<h5 id="3-2-1-字符计数法"><a href="#3-2-1-字符计数法" class="headerlink" title="3.2.1 字符计数法"></a>3.2.1 字符计数法</h5><p>​ 字符计数法是指在帧头部使用一个<strong>计数字段</strong>来标明帧内字符数。目的结点的数据链路层收到<strong>字节计数值</strong>时，就知道后面跟随的字节数，从而可以确定帧结束的位置（计数字段提供的字节数包含自身所占用的一个字节）。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/db15d291819d4097fd5c6d9dbe5e45c1png.jpg#pic_center" alt="image-20230814145540445"></p>
<p>​ 问题：若计算字段出错，则失去划分帧边界依据，彻底失去帧同步。</p>
<h5 id="3-2-2-字符填充的首尾定界符法"><a href="#3-2-2-字符填充的首尾定界符法" class="headerlink" title="3.2.2 字符填充的首尾定界符法"></a>3.2.2 字符填充的首尾定界符法</h5><p>​ 字符填充法使用特定字符来定界一帧的开始与结束。如下图所示，<strong>控制字符SOH</strong>放在帧的最前面，表示帧的首部开始，<strong>控制字符EOT</strong>表示帧的结束。为了使信息位中出现的特殊字符不被误判为帧的首尾定界符，可在特殊字符前面填充一个**转义字符(ESC)**来加以区分。从而实现透明传输。</p>
<blockquote>
<p>注意，转义字符是ASCI码中的控制字符，是一个字符，而非“E”“S”“C”三个字符的组合</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/bb85b4541f61e5fc719077a1c7592d0apng.jpg#pic_center" alt="image-20230814145805071"></p>
<p>​ 接收方收到转义字符后，就知道其后面紧跟的是数据信息，而不是控制信息。</p>
<h5 id="3-2-3-零比特填充的首尾标志法"><a href="#3-2-3-零比特填充的首尾标志法" class="headerlink" title="3.2.3 零比特填充的首尾标志法"></a>3.2.3 零比特填充的首尾标志法</h5><p>​ 零比特填充法它使用一个特定的比特模式，即01111110来标志一帧的开始和结束。HDLC协议使用该方法。</p>
<p>​ 为了防止误判，<strong>发送方</strong>的数据链路层在信息位中遇到5个连续的“1”时，将自动在其后插入一个“0”；而<strong>接收方</strong>做该过程的逆操作，即每收到5个连续的“1”时，自动删除后面紧跟的“0”，以恢复原信息。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/60b44ba1fd7a71b12dbf49d9ee844712png.jpg#pic_center" alt="image-20230814150635814"></p>
<p>​ 零比特填充法很容易由硬件来实现，性能优于字符填充法。</p>
<h5 id="3-2-4-违规编码法"><a href="#3-2-4-违规编码法" class="headerlink" title="3.2.4 违规编码法"></a>3.2.4 违规编码法</h5><p>​ 利用不会用到的编码方式作为帧的开始与终止。</p>
<p>​ <strong>曼彻斯特编码方法</strong>将数据比特“1”编码成“高-低”电平对，将数据比特“0”编码成“低-高”电平对，而**“高-高”电平对和“低一低”电平对在数据比特中是违规**的（即没有采用）。</p>
<p>​ 可以借用这些违规编码序列来定界帧的<strong>起始和终止</strong>。局域网IEEE802标准就采用了这种方法。</p>
<p>​ 违规编码法不需要采用任何填充技术，便能实现数据传输的<strong>透明性</strong>，但它只适用于采用冗余 编码的特殊编码环境。</p>
<blockquote>
<p>由于字符计数法中计数字段的脆弱性和字符填充法实现上的复杂性与不兼容性，目前较<strong>常用的组帧方法</strong>是<strong>零比特填充法和违规编码法</strong>。</p>
</blockquote>
<h4 id="3-3-差错控制-1"><a href="#3-3-差错控制-1" class="headerlink" title="3.3 差错控制"></a>3.3 差错控制</h4><p>​ 实际通信链路中可能会发送<strong>比特差错</strong>，即1可能会变成0，0也可能会变成1。</p>
<p>​ 通常利用编码技术进行差错控制，主要有自动重传请求ARQ和前向纠错FEC。</p>
<ul>
<li>在ARQ方式中，接收端检测到差错时，就设法通知发送端重发，直到接收到正确的码字为止。属于<strong>检错编码</strong>。</li>
<li>在FEC方式中，接收端不但能发现差错，而且能确定比特串的错误位置，从而加以纠正。属于<strong>纠错编码</strong>。</li>
</ul>
<h5 id="3-3-1-检错编码"><a href="#3-3-1-检错编码" class="headerlink" title="3.3.1 检错编码"></a>3.3.1 检错编码</h5><p>​ 检错编码都采用<strong>冗余编码技术</strong>，其核心思想是在有效数据（信息位）被发送前，先按某种关系附加一定的冗余位，构成一个符合某一规则的码字后再发送。</p>
<ol>
<li>奇偶校验码</li>
</ol>
<p>​ 奇偶校验码是奇校验码和偶校验码的统称，是一种最基本的检错码。由n-1位信息元和1位校验元组成。</p>
<ul>
<li><strong>奇校验码</strong>：在附加一个校验元后，码长为n的码字中“1”的个数为奇数。</li>
<li><strong>偶校验码</strong>：在附加一个校验元后，码长为n的码字中“1”的个数为偶数。</li>
</ul>
<blockquote>
<p>奇偶校验码只能检测出奇数个位出错，但不能知道哪位出错，也不能发现偶数个位出错情况。</p>
</blockquote>
<ol start="2">
<li>循环冗余码</li>
</ol>
<p>​ 循环冗余码（Cyclic Redundancy Code, CRC）又称多项式码，任何一个由二进制数位串组成的代码都可与一个只含有0和1两个系数的多项式建立一一对应关系。</p>
<p>​ 给定一个m bit 的帧或报文，发送器生成 r bit 的<strong>帧检验序列（FCS）</strong>。将FCS接到原始帧后面，形成长度为 m+r 的序列。该序列可被约定好的多项式 G(x) <strong>模2整除</strong>。其中r为G(x)的阶数，即<strong>位数减一</strong>；G(x)的首尾必需都为1。<br>​ 接收方用相同的G(x) 作为除数P去除收到的帧，无余数则无差错。</p>
<blockquote>
<p><strong>生成帧检验序列（FCS）方法</strong>：</p>
<p>​ 设将多项式G(x)&#x3D;1101作为除数P，数据101001（m&#x3D;6，r&#x3D;3），计算FCS。</p>
<p>​ a. 在帧末尾加上r个0；b. 模2除法求得r位余数位FCS</p>
<p>​ 模2除法指按位异或运算，若两个二进制位相同，结果为0；不同结果为1。若首位为0则不进行异或运算，直接右移一位，如下式0111和除数1101运算时，0111右移变为01110与1101运算。直到剩余位数少于除数，得到余数。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/7f44d2c3c88bd0893cf9c5dc3690e122png.jpg#pic_center" alt="image-20230814155522000"></p>
<p>​ 如上图所示，被除数M是原 m 位序列加 r 位0组成的序列（101001+000）。将G(x)作为除数P，进行模2除法，最后得到的余数R即为FCS。因此发送数据为原m为序列加FCS序列，即101001+001。该序列</p>
</blockquote>
<p>​ 通过循环冗余码（CRC）的检错技术，数据链路层做到了对帧的<strong>无差错接收</strong>。也就是说，凡是接收端数据链路层接受的帧，我们都认为这些帧在传输过程中<strong>没有产生差错</strong>；而接收端丢弃的帧虽然也收到了，但最终因为有差错而被丢弃，即未被接受。</p>
<blockquote>
<p>循环冗余码（CRC）是具有纠错功能的，只是数据链路层仅使用了它的检错功能，检测到帧出错则直接丢弃，是为了方便协议的实现，因此本节将CRC放在检错编码中介绍。</p>
</blockquote>
<h5 id="3-3-2-纠错编码"><a href="#3-3-2-纠错编码" class="headerlink" title="3.3.2 纠错编码"></a>3.3.2 纠错编码</h5><p>​ 纠错方法：在每个要发送的数据块上附加足够的冗余信息，使接收方能够推导出发送方实际送出的应该是什么样的比特串。</p>
<p>​ <strong>海明码</strong>：最常见的纠错编码，其原理是在有效信息位中加入几个校验位形成海明码，并把海明码的每个二进制位分配到几个奇偶校验组中。当某一位出错后，就会引起有关的几个校验位的值发生变化，这不但可以发现错位，而且能指出错位的位置，为自动纠错提供依据。</p>
<p>​ 以序列1010为例讲述海明码编码过程：</p>
<ol>
<li><p>确定海明码的位数</p>
<p>设n为有效信息的位数，k为校验位的位数，则信息位n和校验位k应满足<br>n + k ≤ 2 k − 1 n+k≤2^k-1 n+k≤2k−1<br>​ 序列有4为有效信息，k&#x3D;3时满足3+4≤23-1；因此海明码信息位D有4位，校验位P有3位，共7位。</p>
</li>
<li><p>确定校验位的分布</p>
<p>规定校验位Pi在海明位号2i-1的位置上，其余位信息位，因此有P1在第1位，P2在第2位，P3在第4位。</p>
<p>海明码分布如下：D4 D3 D2 P3 D1 P2 P1</p>
</li>
<li><p>分组以形成校验关系</p>
<p>每个数据位用多个校验位进行校验，但要满足条件：被校验数据位的海明位号等于校验该数据位的各校验位海明位号之和。校验位不需要再被校验。分组形成的校验关系如下。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/8ced715750ff4ffeffa9716e83f525e4png.jpg#pic_center" alt="image-20230814164958994"></p>
</li>
<li><p>校验位取值</p>
<p>校验位Pi的值为第i组（由该校验位校验的数据位）所有位求异或。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/1b36fc285599da36d9b5a6c7ce843b2bpng.jpg#pic_center" alt="image-20230814165047263"></p>
<p>因此，1010对应的海明码为101**0<strong>0</strong>10**</p>
</li>
<li><p>海明码的校验原理</p>
<p>每个校验组分别利用校验位和参与形成该校验位的信息位进行奇偶校验检查，构成k个校验方程:</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/9cce22ff2bab4191a5199e039416970apng.jpg#pic_center" alt="image-20230814165230646"></p>
<p>若S3S2S1的值为“000”，则说明无错；否则说明出错，且这个数就是错误位的位号，如S3S2S1=001，说明第一位出错。直接取反达到了纠错的目的。</p>
</li>
</ol>
<p>​ 以上公式只能纠错一位数据，要有多位数据发生错误，需要更复杂的海明公式。海明码纠错能力和<strong>最小码距</strong>有关。<strong>海明距离</strong>即最小码距，指的是两个字符串对应位置的不同字符的个数。</p>
<ul>
<li>如果要检测 e 个错误，最小码距应该满足：$ D≥e+1 $</li>
<li>如果要纠正 t 个错误，最小码距应满足： D ≥ 2 t + 1 D≥2t+1 D≥2t+1</li>
<li>如果要检测 e 个错误同时纠正 t个错误，最小码距应该满足： D ≥ e + t + 1 , ( e &gt; &#x3D; t ) D≥e+t+1, (e&gt;&#x3D;t) D≥e+t+1,(e&gt;&#x3D;t)</li>
</ul>
<h4 id="3-4-流量控制与可靠传输机制-1"><a href="#3-4-流量控制与可靠传输机制-1" class="headerlink" title="3.4 流量控制与可靠传输机制"></a>3.4 流量控制与可靠传输机制</h4><h5 id="3-4-1-滑动窗口机制"><a href="#3-4-1-滑动窗口机制" class="headerlink" title="3.4.1 滑动窗口机制"></a>3.4.1 滑动窗口机制</h5><ul>
<li><p>发送窗口：在任意时刻，发送方都维持一组连续的允许发送的帧的序号。</p>
<ul>
<li>发送窗口用来对发送方进行流量控制，而发送窗口的大小WT，代表在还未收到对方确认信息的情况下发送方最多还可以发送多少个数据帧。</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/85dd69ed8258a66378818b20985cfb50png.jpg#pic_center" alt="image-20230814175558669"></p>
</li>
<li><p>接收窗口：接收方也维持一组连续的允许接收帧的序号。</p>
<ul>
<li>接收窗口是为了控制可以接收哪些数据帧和不可以接收哪些帧。</li>
<li>在接收方，只有收到的数据帧的序号落入接收窗口内时，才允许将该数据帧收下。</li>
<li>若接收到的数据帧落在接收窗口之外，则一律将其丢弃。</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/dbd72c7c3d1df85a59eb74085b7d44e3png.jpg#pic_center" alt="image-20230814175636711"></p>
</li>
</ul>
<p><strong>滑动窗口特性：</strong></p>
<ul>
<li>只有接收窗口向前滑动（同时接收方发送了确认帧）时，发送窗口才有可能（只有发送方收到确认帧后才一定）向前滑动。</li>
<li>从滑动窗口的概念看，停止-等待协议、后退N帧协议和选择重传协议只在发送窗口大小与接收窗口大小上有所差别：<ul>
<li>停止-等待协议：发送窗口大小&#x3D;1，接收窗口大小&#x3D;1。</li>
<li>后退N帧协议：发送窗口大小&gt;1，接收窗口大小&#x3D;1。</li>
<li>选择重传协议：</li>
</ul>
</li>
<li>接收窗口的大小为1时，可保证帧的有序接收。</li>
<li>数据链路层的滑动窗口协议中，窗口的大小在传输过程中是固定的（注意与第5章传输层的滑动窗口协议的区别）。</li>
</ul>
<p><strong>可靠传输机制</strong>：</p>
<ul>
<li><strong>确认</strong>：确认是一种无数据的控制帧，这种控制帧使得接收方可以让发送方知道哪些内容被正确接收。有些情况下为了提高传输效率，将确认捎带在一个回复帧中，称为<strong>捎带确认</strong>。</li>
<li><strong>超时重传</strong>：超时重传是指发送方在发送某个数据帧后就开启一个<strong>计时器</strong>，在一定时间内如果没有得到发送的数据帧的确认帧，那么就重新发送该数据帧，直到发送成功为止。</li>
<li><strong>自动重传请求</strong>（Automatic Repeat reQuest, ARQ）：通过接收方请求发送方重传出错的数据帧来恢复出错的帧，是通信中用于处理信道所带来差错的方法之一。传统ARQ有三种：停止-等待（Stop-and-Wait） ARQ、 后退 N帧（Go-Back-N）ARQ 和选择性重传（Selective Repeat）ARQ。</li>
</ul>
<blockquote>
<p>在数据链路层中流量控制机制和可靠传输机制是交织在一起的，都由滑动窗口机制解决。</p>
</blockquote>
<h5 id="3-4-2-单帧滑动窗口与停止-等待协议"><a href="#3-4-2-单帧滑动窗口与停止-等待协议" class="headerlink" title="3.4.2 单帧滑动窗口与停止-等待协议"></a>3.4.2 单帧滑动窗口与停止-等待协议</h5><ol>
<li>定义</li>
</ol>
<p>​ 在停止-等待协议中，源站每发送完一个帧就停止发送，等待对方的确认，在收到确认后再发送下一个帧。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/ecc67be207bae6623f6ae6d30398f6adpng.jpg#pic_center" alt="image-20230815092106246"></p>
<ol start="2">
<li>有差错情况</li>
</ol>
<ul>
<li><p>超时计时器：每次发送一个帧就启动一个计时，超时计时器设置的重传时间应当<strong>比帧传输的平均RTT更长</strong>。</p>
<ul>
<li>发完一个帧后，必须保留它的副本。</li>
<li>发送的帧交替地用0和1来标识，确认帧分别用ACK0和ACK1来表示，收到的确认帧有误时，重传已发送的帧。</li>
</ul>
</li>
<li><p>发送失败的三种情况：</p>
<ul>
<li>数据帧丢失或检测到帧出错：数据帧丢失时，或者接收方检测到数据帧有错，不返回ACK，超时重传。</li>
<li>ACK丢失：接收方接收到数据帧，返回ACK时丢失，发送方超时重传。</li>
<li>ACK迟到：接收方收到数据帧后，返回ACK0，但是ACK到达时间超过重传时间，发送方重新发送数据，接收到ACK0时丢失，因为此刻等待ACK1的接收。</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/5040a8b4acf2aa0c3bbf63bf4ad685b6png.jpg#pic_center" alt="image-20230815122833126"></p>
</li>
</ul>
<ol start="3">
<li>性能分析</li>
</ol>
<p>​ 由于要花费大量时间等待ack确认，信道利用率太低。<br>信道利用率 U &#x3D; T D T D + R T T + T A 信道利用率U&#x3D;\frac {T_D} {T_D+RTT+T_A} 信道利用率U=TD​+RTT+TA​TD​​<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/5c6faebf70936981b30fa9e809124413png.jpg#pic_center" alt="image-20230815094310472"></p>
<h5 id="3-4-3-多帧滑动窗口与后退N帧协议（GBN）"><a href="#3-4-3-多帧滑动窗口与后退N帧协议（GBN）" class="headerlink" title="3.4.3 多帧滑动窗口与后退N帧协议（GBN）"></a>3.4.3 多帧滑动窗口与后退N帧协议（GBN）</h5><p>​ 在后退N帧式ARQ中，发送方无须在收到上一个帧的ACK后才能开始发送下一帧，而是可以连续发送帧。</p>
<p>​ 发送窗口大小&gt;1，接收窗口大小&#x3D;1。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/eda9159e6194009a68ab1cc48e6f5686png.jpg#pic_center" alt="image-20230815101525038"></p>
<ol>
<li><p>发送方</p>
<ul>
<li>上层的调用：上层要发送数据时，发送方先检查发送窗口是否己满，如果未满，则产生一个带序号的帧并将其发送；如果窗口已满发送方可以缓存这些数据，窗口不满时再发送帧。</li>
<li>收到了一个ACK：GBN协议中，对n号帧的确认采用累积确认的方式，标明接收方已经收到n号帧和它之前的全部帧。</li>
<li>超时事件：协议的名字为后退N帧&#x2F;回退N帧，来源于出现<strong>丢失和时延过长帧</strong>时发送方的行为。就像在停等协议中一样，定时器将再次用于恢复数据帧或确认帧的丢失。如果出现超时，发送方重传所有己发送但未被确认的帧。</li>
</ul>
</li>
<li><p>接收方</p>
<ul>
<li><p>如果正确按序收到n号帧，那么接收方为n帧发送一个ACK，并将该帧中的数据部分交付给上层。</p>
</li>
<li><p>其余情况都丢弃帧，并为最近按序接收的帧重新发送ACK。</p>
<p>接收方无需缓存任何失序帧，只需要维护一个信息：expectedseqnum（下一个按序接收的帧序号）。</p>
</li>
</ul>
</li>
<li><p>窗口大小</p>
<p>接收窗口为1，可以保证按序接收数据帧。</p>
<p>若采用n比特对帧编号，则其发送窗口的尺寸WT应满足 1 ＜ W T ≤ 2 n − 1 1＜W_T≤2^n-1 1＜WT​≤2n−1。若发送窗口大于 2 n − 1 2^n-1 2n−1，则会造成接收方无法分辨新帧和旧帧。</p>
</li>
<li><p>性能分析</p>
<ul>
<li>优点：因连续发送数据帧而提高了信道利用率</li>
<li>缺点：在重传时必须把原来已经正确传送的数据帧重传，是传送效率降低。</li>
</ul>
</li>
</ol>
<p>​ 信道的传输质量很差导致误码率较大时，后退N帧协议不一定优于停止-等待协议。</p>
<h5 id="3-4-4-多帧滑动窗口与选择重传协议（SR）"><a href="#3-4-4-多帧滑动窗口与选择重传协议（SR）" class="headerlink" title="3.4.4 多帧滑动窗口与选择重传协议（SR）"></a>3.4.4 多帧滑动窗口与选择重传协议（SR）</h5><p>​ 为解决GBN会重传正确传送的帧，设法只重传出现差错和超时的数据帧，这需要加大接收窗口，因此提出了选择重传协议。</p>
<p>​ 发送窗口大小&gt;1，接收窗口大小&gt;1。</p>
<ol>
<li><p>发送方</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/ecfc2b541d2378f3bea8cb6b67f84582png.jpg" alt="image-20230815104723761"></p>
<ul>
<li><p>上层的调用：从上层收到数据后，发送方检查下一个可用于该帧的序号，如果序号位于发送窗口内，则发送数据帧；否则就像GBN一样，要么将数据缓存，要么返回给上层之后再传输。</p>
</li>
<li><p>收到了一个ACK：如果收到ACK，假如该帧序号在窗口内，则SR发送方将那个被确认的帧标记为<strong>已接收</strong>。</p>
<p>如果该帧序号是窗口的<strong>下界</strong>（最左边第一个窗口对应的序号），则窗口向前移动到具有最小序号的未确认帧处。如果窗口移动了并且有序号在窗口内的未发送帧，则发送这些帧。</p>
</li>
<li><p>超时事件：<strong>每个帧都有自己的定时器</strong>，一个超时事件发生后只重传一个帧。</p>
</li>
</ul>
</li>
<li><p>接收方</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/514f592b666fb9006fe220c62800e8f1png.jpg" alt="image-20230815105104266"></p>
<ul>
<li>来者不拒（窗口内的帧）：SR接收方将确认一个正确接收的帧而不管其是否按序。失序的帧将被缓存，并返回给发送方一个该帧的确认帧【<strong>收谁确认谁</strong>】，直到<strong>所有帧（即序号更小的帧）皆被收</strong>到为止，这时才可以将一批帧<strong>按序交付给上层</strong>，然后向前移动滑动窗口。</li>
<li>如果收到了**窗口序号外（小于窗口下界）**的帧，就返回一个ACK。其他情况，就忽略该帧。</li>
</ul>
</li>
<li><p>窗口大小</p>
</li>
</ol>
<p>​ 发送窗口尺寸WT和接收窗口尺寸WR都大于1，一次可接收发送多个帧。</p>
<p>​ WT &#x3D; WR时最好，若采用n比特对帧编号，则需满足 W T m a x &#x3D; W R m a x &#x3D; 2 n − 1 W_{Tmax}&#x3D;W_{Rmax}&#x3D;2^{n-1} WTmax​=WRmax​=2n−1，且 W T + W R ≤ 2 n W_T+W_R≤2^n WT​+WR​≤2n。</p>
<p>​ 如果不满足窗口大小大于序号范围一半，当一个或多个确认帧丢失时，发送方就会超时重传之前的数据帧，但接收方无法分辨是新的数据帧还是重传的数据帧。</p>
<ol start="4">
<li><p>性能分析</p>
<ul>
<li><p>信道利用率：也称信道效率，是对发送方而言的，是指发送方在一个发送周期的时间内，有效地发送数据所需要的时间占整个发送周期的比率。发送方从开始发送数据到收到第一个确认帧为止，称为一个发送周期。</p>
<p>设一个发送周期为T，发送周期内共发送L比特的数据，发送方数据传输率为C，则发送方发送有效数据时间为 L &#x2F; C L&#x2F;C L&#x2F;C，信道利用率为 ( L &#x2F; C ) &#x2F; T (L&#x2F;C)&#x2F;T (L&#x2F;C)&#x2F;T。</p>
</li>
<li><p>信道吞吐率： 信道吞吐率 &#x3D; 信道利用率 × 发送方发送速率 信道吞吐率&#x3D;信道利用率×发送方发送速率 信道吞吐率=信道利用率×发送方发送速率</p>
</li>
<li><p>最小帧长： 最小帧长 &#x3D; 2 × 数据传输速率 × 总线传播时延 最小帧长&#x3D;2×数据传输速率×总线传播时延 最小帧长=2×数据传输速率×总线传播时延</p>
</li>
</ul>
</li>
</ol>
<h4 id="3-5-介质访问控制"><a href="#3-5-介质访问控制" class="headerlink" title="3.5 介质访问控制"></a>3.5 介质访问控制</h4><p>​ 介质访问控制的内容就是，采取一定的措施，使得两对节点之间的通信不会发生互相干扰的情况。用来决定广播信道中信道分配的协议属于数据链路层的一个子层，称为介质访问控制(Medium Access Control, MAC)子层。</p>
<h5 id="3-5-1-信道划分介质访问控制"><a href="#3-5-1-信道划分介质访问控制" class="headerlink" title="3.5.1 信道划分介质访问控制"></a>3.5.1 信道划分介质访问控制</h5><p>​ <strong>信道划分介质访问控制</strong>是将使用介质的每个设备与来自同一信道上的其他设备的通信隔离开，把时域和频域资源合理地分配给网络上的设备。通常采用多路复用技术，把多个输入通道的信息整合到一个复用通道中，在接收端把收到的信息分离。</p>
<ol>
<li><p>频分多路复用（FDM）</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/6a804292331066ed8d0cc6acdd5b2d65png.jpg#pic_center" alt="image-20230815114754984"></p>
<p>​ 用户在相同时间占用不同频率带宽资源。每个子信道分配的带宽可不相同，但它们的总和必须不超过信道的总带宽。在实际应用中为了防止子信道之间的干扰，相邻信道之间需要加入“保护频带”。共享时间。</p>
</li>
<li><p>时分多路复用（TDM）</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/ad2100389833ca5471c3d548de1c0b0epng.jpg#pic_center" alt="image-20230815114926548"></p>
<p>​ 每一个时分复用的用户在每一个TDM帧占用<strong>固定序号的时隙</strong>，所有用户轮流占用信道。</p>
<p>​ 不会发生碰撞，TDM帧是在物理层传送的比特流所划分的帧，标志一个周期。共享空间。</p>
<ul>
<li><p>统计时分多路复用（STDM）</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/8b3a5aec67945722c87f562d27b5be94png.jpg" alt="image-20230815115246126"></p>
<p>每一个STDM帧中的<strong>时隙数</strong>小于连接在集中器上的用户数。各用户有了数据就随时发往集中器的输入缓存，然后集中器<strong>按顺序依次扫描</strong>输入缓存，把缓存中的输入数据放入STDM帧中，一个STDM帧满了就发出。STDM帧不是固定分配时隙，而是<strong>按需动态分配时隙</strong>。</p>
</li>
</ul>
</li>
<li><p>波分多路复用（WDM）</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/c6ea0a85f3e152eb155cc0ba2725825dpng.jpg#pic_center" alt="image-20230815115441883"></p>
<p>波分多路复用就是光的频分多路复用，在<strong>一根光纤</strong>中传输<strong>多种不同波长（频率）的光信号</strong>，由于波长（频率）不同，所以各路光信号互不干扰，最后再用波长分解复用器将各路波长分解出来。</p>
</li>
<li><p>码分多路复用（CDM）</p>
<p>码分多路复用是靠不同的编码来区分各路原始信号的一种复用方式。<strong>既共享信道的频率，又共享时间</strong>。</p>
<p><strong>码分多址（CDMA）</strong>：每个比特时间再划分成m个短的时间槽，称为码片(Chip)，通常m的值是64或128。每个站点指派m位码片序列，发送1时发原码，0时发反码。各个站点码片序列<strong>相互正交</strong>。</p>
<blockquote>
<p>CDMA原理：</p>
<p>假如站点A的码片序列被指派为00011011，则A站发送00011011就表示发送比特1，发送11100100就表示发送比特0。为了方便，按惯例将码片中的0写为-1，将1写为+1，因此A站的码片序列是-1-1-1+1+1-1+1+1。</p>
<p>令向量S表示A站的码片向量，令T表示B站的码片向量。两个不同站的码片序列正交，即向量S和T的规格化内积（Inner Product）为0：<br>S ⋅ T &#x3D; 1 m ∑ i &#x3D; 1 m S i T i &#x3D; 0 S·T&#x3D;\frac{1}{m}\sum_{i&#x3D;1}^{m} {S_iT_i}&#x3D;0 S⋅T=m1​i=1∑m​Si​Ti​=0<br>任何一个码片向量和该码片向量自身的规格化内积都是1，任何一个码片向量和该码片反码的向量的规格化内积是-1</p>
<p>例：A站码片00011011、B站码片00101110；此时A、B站向量相乘内积为0。</p>
<p>当A站向C站发送数据1时，就发送了向量（-1-1-1+1+1-1+1+1）。</p>
<p>当B站向C站发送数据0时，就发送了向量（+1+1-1+1-1-1-1+1）。</p>
<p>两个向量到了公共信道上就进行叠加，实际上就是线性相加，得到S+T&#x3D;(0 0 -2 2 0 -2 0 2)</p>
<p>到达C站后，想获得A站数据，就与A站码片S内积化， S ⋅ ( S + T ) &#x3D; 1 S·(S+T)&#x3D;1 S⋅(S+T)=1，所以A站数据是1；同理， T ⋅ ( S + T ) &#x3D; − 1 T·(S+T)&#x3D;-1 T⋅(S+T)=−1，所以B站发过来的向量是个反码向量，代表0。</p>
</blockquote>
</li>
</ol>
<h5 id="3-5-2-随机访问介质访问控制"><a href="#3-5-2-随机访问介质访问控制" class="headerlink" title="3.5.2 随机访问介质访问控制"></a>3.5.2 随机访问介质访问控制</h5><p>​ 随机访问介质中使用争用型协议 ，胜利者通过争用获得信道，从而获得信息的发送权。将广播信道转化为点到点信道。信道并非在用户通信时固定分配给用户</p>
<ol>
<li><p>ALOHA协议</p>
<ul>
<li><p>纯ALOHA协议</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/840ee86312a876e84b65b95be9127acepng.jpg" alt="image-20230815134438174"></p>
<ul>
<li>思想：不监听信道，不按时间槽发送，随机重发。想发就发</li>
<li>冲突检测：如果发生冲突，接收方在就会检测出差错，然后不予确认，发送方在一定时间内收不到就判断发生冲突。</li>
<li>冲突解决：超时后<strong>等一随机时间</strong>再重传。</li>
</ul>
</li>
<li><p>时隙ALOHA协议</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/134f65dc237f37739263a6e5fd9d5fc0png.jpg#pic_center" alt="image-20230815134629248"></p>
<ul>
<li>思想：把时间分成<strong>若干个相同的时间片</strong>，所有用户在时间片开始时刻同步接入网络信道，若发生冲突，则必须等到下一个时间片开始时刻再发送。控制想发就发的随意性。</li>
<li>吞吐量是纯ALOHA协议的两倍。</li>
</ul>
</li>
</ul>
</li>
<li><p>CSMA协议</p>
<p><strong>载波监听多路访问</strong>（CSMA）指的是每个站点在发送前都先监听一下共用信道，发现信道空闲后再发送。</p>
<p>监听：当几个站同时在总线上发送数据时，总线上的信号<strong>电压摆动值将会增大</strong>（互相叠加）。当一个站检测到的信号电压摆动值超过一定门限值时，就认为总线上至少有两个站同时在发送数据，表明产生了碰撞，即发生了冲突。</p>
<ul>
<li><p>1-坚持 CSMA</p>
<p>坚持指的是对于监听信道忙之后的坚持。</p>
<ul>
<li>思想：如果一个主机要发送消息，那么它先监听信道。空闲则直接传输，不必等待。忙则一直监听，直到<strong>空闲马上传输</strong>。如果有冲突（一段时间内未收到肯定回复），则等待一个随机长的时间再监听，重复上述过程。</li>
<li>优点：只要媒体空闲，站点就马上发送，避免了媒体利用率的损失。</li>
<li>缺点：假如有两个或两个以上的站点有数据要发送，冲突就不可避免。</li>
</ul>
</li>
<li><p>非坚持CSMA</p>
<p>非坚持指的是对于监听信道忙之后就不继续监听。</p>
<ul>
<li>思想：如果一个主机要发送消息，那么它先监听信道。空闲则直接传输，不必等待。忙则等待一个随机的时间之后再进行监听。</li>
<li>优点：采用随机的重发延迟时间可以减少冲突发生的可能性。</li>
<li>缺点：可能存在大家都在延迟等待过程中，使得媒体仍可能处于空闲状态，媒体使用率降低。</li>
</ul>
</li>
<li><p>p-坚持 CSMA</p>
<p>P坚持指的是对于监听信道空闲的处理。</p>
<ul>
<li>思想：如果一个主机要发送消息，那么它先监听信道。空闲则<strong>以p概率直接传输</strong>，不必等待；概<strong>率1-p等待到下一个时间槽再传输</strong>。忙则持续监听直到信道空闲再以p概率发送。若冲突则等到下一个时间槽开始再监听并重复上述过程。</li>
<li>优点：既能像非坚持算法那样减少冲突，又能像1-坚持算法那样减少媒体空闲时间的这种方案。</li>
<li>缺点：发生冲突后还是要坚持把数据帧发送完，造成了浪费。</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th align="center">信道状态</th>
<th align="center">1-坚持</th>
<th align="center">非坚持</th>
<th align="center">p-坚持</th>
</tr>
</thead>
<tbody><tr>
<td align="center">空闲</td>
<td align="center">立即发送数据</td>
<td align="center">立即发送数据</td>
<td align="center">以概率p发送数据</td>
</tr>
<tr>
<td align="center">以概率1-p推迟到下一个时隙</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">忙</td>
<td align="center">继续坚持监听</td>
<td align="center">放弃监听，等待随机的时间后再监听</td>
<td align="center">持续监听，直至信道空闲</td>
</tr>
</tbody></table>
</li>
<li><p>CSMA&#x2F;CD 协议</p>
<p>​ 载波监听多路访问&#x2F;碰撞检测（CSMA&#x2F;CD）协议是CSMA的改进方案，适用于<strong>总线形网络或半双工网络</strong>。</p>
<p>​ <strong>碰撞检测</strong>就是<strong>边发送边监听</strong>，如果 监听到了碰撞，则立即停止数据发送，等待一段随机时间后，重新开始尝试发送数据。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/b532210d96e7a1c78566be62de7620d0png.jpg#pic_center" alt="image-20230815142904674"></p>
<ul>
<li><p><strong>工作流程</strong>：先听后发，边听边发，冲突停发，随机重发</p>
<p>1）适配器从网络中获得分组，封装成以太帧，缓存等待发送<br>2）适配器侦听信道，空闲则发送，忙则持续监听，直到空闲发送<br>3）发送过程中持续检测信道，若检测到碰撞，停止发连并发送一个拥塞信号<br>4）中止发送后，执行指数退避法确定重传时机</p>
</li>
</ul>
<blockquote>
<p>争议期：两端往返传播时延。只要经过2τ（传播时延）时间还没有检测到碰撞，就能肯定这次发送不会发生碰撞。</p>
<p>最小帧长&#x3D;总线传播时延×数据传输速率×2</p>
<p>以太网规定取51.2μs为争用期的长度。对于10Mb&#x2F;s的以太网，在争用期内可发送512bit，即64B。</p>
<p>如果只发送小于64B的帧，如40B的帧，那么需要在MAC子层中于数据字段的后面加入一个整数字节的填充字段，以保证以太网的MAC帧的长度不小于64B。</p>
</blockquote>
<ul>
<li><p><strong>截断二进制指数规避算法</strong>:</p>
<p>1.确定基本退避（推迟）时间为争用期2τ。</p>
<p>2.定义参数k，它等于<strong>重传次数</strong>，但k不超过10，即k&#x3D;min[重传次数,10]。</p>
<p>3.从离散的整数集合[0,1…2k-1]中随机取出一个数r, 重传所需要退避的时间就是<strong>r倍基本退避时间</strong>，即2rτ。</p>
<p>4.当重传达16次仍不能成功时，说明网络太拥挤，认为此帧永远无法正确发出，抛弃此帧并向高层报错。</p>
<p>使用截断二进制指数退避算法可使重传需要推迟的平均时间随重传次数的增大而增大（这也称动态退避），因而能降低发生碰撞的概率，有利于整个系统的稳定。</p>
</li>
</ul>
</li>
<li><p>CSMA&#x2F;CA协议</p>
<p>CSMA&#x2F;CD协议无法用于无线局域网，因为其无法做到360°全面检测碰撞。会出现<strong>隐蔽站</strong>问题。</p>
<p><strong>隐蔽站</strong>：当A和C都检测不到信号，认为信道空闲时，同时向终端B发送数据帧，就会导致冲突。</p>
<p><strong>载波监听多路访问&#x2F;碰撞避免</strong>（CSMA&#x2F;CA）：协议的设计要尽量降低碰撞发生的概率。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/525bb84129f21abba9c40b1c4dddcf16png.jpg#pic_center" alt="image-20230815144613729"></p>
<ul>
<li><p><strong>工作原理</strong>：</p>
<p>1）发送数据前，先检测信道是否空闲。<br>2）空闲则发出<strong>RTS（request to send）</strong>，RTS包括发射端的地址、接收端的地址、下一份数据将持续发送的时间等信息；信道忙则等待。<br>3）接收端收到RTS后，将响应<strong>CTS（clear to send）</strong>。CTS帧 ①给源站明确的发送许可；②指示其他站点在预约期内不要发送。<br>4）发送端收到CTS后，开始发送数据帧（同时<strong>预约信道</strong>：发送方告知其他站点自己要传多久数据）。<br>5）接收端收到数据帧后，将用循环冗余码CRC来检验数据是否正确，正确则响应<strong>ACK帧</strong>。<br>6）发送方收到ACK就可以进行下一个数据帧的发送，若没有则一直重传至规定重发次数为止（采用二进制指数退避:算法来确定随机的推迟时间）。</p>
</li>
<li><p><strong>帧间间隔（IFS）</strong>：为了尽量避免碰撞，802.11规定，所有的站完成发送后，必须再等待一段很短的时间（继续监听）才能发送下一帧。</p>
<p>1）SIFS（短IFS）：最短的IFS，用来分隔属于一次对话的各帧，使用SIFS的帧类型有ACK帧、CTS帧、分片后的数据帧，以及所有回答AP探询的帧等。<br>2）PIFS（点协调IFS）：中等长度的IFS，在PCF操作中使用。<br>3）DIFS（分布式协调IFS）：最长的IFS，用于异步帧竞争访问的时延。</p>
</li>
<li><p><strong>CSMA&#x2F;CD与CSMA&#x2F;CA主要有如下区别</strong>：</p>
<p>1.传输介质不同：CSMA&#x2F;CD用于总线式以太网【有线】，而CSMA&#x2F;CA用于无线局域网【无线】。</p>
<p>2.载波检测方式不同：因传输介质不同，CSMA&#x2F;CD与CSMA&#x2F;CA的检测方式也不同。</p>
<p>CSMA&#x2F;CD通过电缆中电压的变化来检测，当数据发生碰撞时，电缆中的电压就会随着发生变化；</p>
<p>而CSMA&#x2F;CA采用能量检测（ED）、载波检测（CS）和能量载波混合检测三种检测信道空闲的方式。</p>
<p>3.CSMA&#x2F;CD检测冲突，CSMA&#x2F;CA避免冲突，二者出现冲突后都会进行有上限的重传。</p>
</li>
</ul>
</li>
</ol>
<h5 id="3-5-3-轮询访问：令牌传递协议"><a href="#3-5-3-轮询访问：令牌传递协议" class="headerlink" title="3.5.3 轮询访问：令牌传递协议"></a>3.5.3 轮询访问：令牌传递协议</h5><p>​ 在轮询访问中，用户不能随机地发送信息，而要通过一个集中控制的监控站，以循环方式轮询每个结点，再决定信道的分配。</p>
<p>​ <strong>令牌传递协议</strong>：每个结点都可以在一定的时间内（令牌持有时间）获得发送数据的权利，并不是无限制地持有令牌。主要用在令牌环局域网（物理星型拓扑，逻辑环形拓扑）。</p>
<p>​ 令牌：一个特殊的MAC控制帧，它不包含信息，仅控制信道的使用，确保同一时刻只有一个站点独占信道。</p>
<ul>
<li><p><strong>传递过程</strong>：</p>
<p>1）网络空闲时，环路中只有令牌帧在循环传递<br>2）令牌传递到有数据要发送的站点时，该站点就修改令牌中的一个标志位，并在令牌中附加自己需要传输的数据，将令牌变成一个数据帧，然后将这个数据帧发送出去<br>3）数据帧沿着环路传输，接收到的站点一边转发数据，一边查看帧的目的地址。如果目的地址和自己的地址相同，那么接收站就复制该数据帧以便进一步处理。<br>4）数据帧沿着环路传输，直到到达该帧的源站点，源站点收到自己发出去的帧后便不再转发。同时，通过检验返回的帧来查看数据传输过程中是否出错，若有错则重传。<br>5）源站点传送完数据后，重新产生一个令牌，并传递给下一站点，以交出信道控制权。</p>
</li>
<li><p>应用：采用令牌传送方式的网络常用于<strong>负载较重、通信量较大</strong>的网络中。</p>
</li>
</ul>
<h4 id="3-6-局域网-1"><a href="#3-6-局域网-1" class="headerlink" title="3.6 局域网"></a>3.6 局域网</h4><h5 id="3-6-1-局域网的基本概念和体系结构"><a href="#3-6-1-局域网的基本概念和体系结构" class="headerlink" title="3.6.1 局域网的基本概念和体系结构"></a>3.6.1 局域网的基本概念和体系结构</h5><p>​ 局域网（LAN）指在某一区域内由多台计算机互联成的计算机组，使用广播信道。</p>
<ol>
<li><p>特点</p>
<ul>
<li>覆盖的地理范围较小，只在一个相对独立的局部范围内联，如一座或集中的建筑群内。</li>
<li>使用专门铺设的传输介质（双绞线、同轴电缆）进行联网，数据传输速率高（10Mb&#x2F;s~10Gb&#x2F;s）。</li>
<li>通信延迟时间短，误码率低，可靠性较高。</li>
<li>各站为平等关系，共享传输信道。</li>
<li>多采用分布式控制和广播式通信，能进行广播和组播。</li>
</ul>
</li>
<li><p>局域网拓扑结构</p>
<p>①星形结构；②环形结构；③总线形结构；④星形和总线形结合的复合型结构。</p>
</li>
<li><p>传输介质</p>
<p>局域网可以使用双绞线、铜缆和光纤等多种传输介质，其中双绞线为主流传输介质。</p>
</li>
<li><p>介质访问控制方法</p>
<p>主要有CSMA&#x2F;CD、令牌总线和令牌环，其中前两种方法主要用于总线形局域网，令牌环主要用于环形局域网。</p>
</li>
<li><p>局域网拓扑</p>
<ul>
<li>以太网（目前使用范围最广的局域网）。逻辑拓扑是总线形结构，物理拓扑是星形或拓展星形结构。</li>
<li>令牌环（Token Ring，IEEE802.5）。逻辑拓扑是环形结构，物理拓扑是星形结构。</li>
<li>FDDI（光纤分布数字接口，EEE802.8）。逻辑拓扑是环形结构，物理拓扑是双环结构。</li>
</ul>
</li>
<li><p>MAC子层和LLC子层</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/c81e54ae7467a451e47f50edce4565d8png.jpg#pic_center" alt="image-20230815152648577"></p>
<ul>
<li><p><strong>LLC子层</strong>：逻辑链路控制子层，负责识别网络层协议，然后对它们进行封装（给帧加序号）。LLC报头告诉数据链路层一旦帧被接收到时，应当对数据包做何处理。</p>
<p>主要功能：建立和释放数据链路层的逻辑连接、提供与高层的接口、差错控制、给帧加序号。与传输媒体无关。</p>
</li>
<li><p><strong>MAC子层</strong>：介质访问控制子层，向上层屏蔽对物理层访问的各种差异，提供对物理层的统一访问接口。</p>
<p>主要功能包括：组帧和拆卸帧、比特传输差错检测、透明传输。</p>
</li>
</ul>
</li>
</ol>
<h5 id="3-6-2-以太网与-IEEE-802-3"><a href="#3-6-2-以太网与-IEEE-802-3" class="headerlink" title="3.6.2 以太网与 IEEE 802.3"></a>3.6.2 以太网与 IEEE 802.3</h5><p>​ <strong>IEEE 802.3标准</strong>是一种基带总线形的局域网标准，它描述物理层和数据链路层的MAC子层的实现方法。</p>
<p>​ <strong>以太网</strong>逻辑上采用<strong>总线形拓扑结构</strong>，物理星型结构，以太网中的所有计算机共享同一条总线，信息以<strong>广播方式</strong>发送。为了保证数据通信的方便性和可靠性，以太网简化了通信流程并使用了 <strong>CSMA&#x2F;CD方</strong>式对总线进行访问控制。</p>
<p>​ ①采用**无连接<strong>的工作方式，不对发送的数据帧编号，也不要求接收方发送确认，即以太网尽最大努力交付数据，提供的是</strong>不可靠服务**，对于差错的纠正则由高层完成；</p>
<p>​ ②发送的数据都使用<strong>曼彻斯特编码</strong>的信号，每个码元的中间出现一次电压转换，接收端利用这种电压转换方便地把位同步信号提取出来。</p>
<ol>
<li>以太网的传输介质与网卡</li>
</ol>
<p>​ 以太网采用10BASE-T网络，采用的是无屏蔽双绞线（UTP），传输速率是10Mb&#x2F;s。</p>
<table>
<thead>
<tr>
<th align="center">参数</th>
<th align="center">10BASE5</th>
<th align="center">10BASE2</th>
<th align="center">10BASE-T</th>
<th align="center">10BASE-FL</th>
</tr>
</thead>
<tbody><tr>
<td align="center">传输媒体</td>
<td align="center">基带同轴电缆（粗缆）</td>
<td align="center">基带同轴电缆（细缆）</td>
<td align="center">非屏蔽双绞线</td>
<td align="center">光纤对（850nm）</td>
</tr>
<tr>
<td align="center">编码</td>
<td align="center">曼彻斯特编码</td>
<td align="center">曼彻斯特编码</td>
<td align="center">曼彻斯特编码</td>
<td align="center">曼彻斯特编码</td>
</tr>
<tr>
<td align="center">拓扑结构</td>
<td align="center">总线形</td>
<td align="center">总线形</td>
<td align="center">星形</td>
<td align="center">点对点</td>
</tr>
<tr>
<td align="center">最大段长</td>
<td align="center">500m</td>
<td align="center">185m</td>
<td align="center">100m</td>
<td align="center">2000m</td>
</tr>
<tr>
<td align="center">最多结点数目</td>
<td align="center">100</td>
<td align="center">30</td>
<td align="center">2</td>
<td align="center">2</td>
</tr>
</tbody></table>
<p>​ 计算机与外界局域网的连接是通过<strong>网卡</strong>（网络适配器，又称网络接口板&#x2F;卡）实现的。网卡上装有<strong>处理器和存储器</strong>，是工作在<strong>数据链路层</strong>的网络组件。网卡和<strong>局域网的通信</strong>是通过<strong>电缆或双绞线</strong>以<strong>串行</strong>方式进行的，而网卡和<strong>计算机的通信</strong>则是通过计算机主板上的<strong>I&#x2F;O总线</strong>以<strong>并行</strong>方式进行的。网卡的重要功能就是进行<strong>数据的串并转换</strong>。</p>
<p>​ <strong>MAC地址</strong>：介质访问控制（MAC）地址，每块网卡在出厂时的唯一代码，用于控制主机在网络上的数据通信。数据链路层设备（网桥、交换机等）都使用各个网卡的MAC地址。另外，网卡控制着主机对介质的访问，因此网卡也工作在物理层，因为它只关注比特，而不关注任何地址信息和高层协议信息。</p>
<ol start="2">
<li><p>以太网的MAC帧</p>
<p>​ MAC地址也称<strong>物理地址</strong>，MAC地址长6字节，一般用由连字符（或冒号）分 隔的12个十六进制数表示，如 06 − E A − 56 − 3 B − 4 F − 4 D 06-EA-56-3B-4F-4D 06−EA−56−3B−4F−4D。高24位为厂商代码，低24位为厂商自行分配 的网卡序列号。</p>
<p>​ 以太网MAC帧格式有两种标准：DIX Ethernet V2标准（即以太网V2标准）和IEEE 802.3 标准。这里先介绍最常用的以太网V2的MAC帧格式，如图所示。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/667f8a6756c4151453eda3f4c3260667png.jpg#pic_center" alt="image-20230815155854188"></p>
</li>
</ol>
<ul>
<li>前导码：使接收端与发送端时钟同步。在帧前面插入的8字节可再分为两个字段：第一个字段共7字节，是<strong>前同步码</strong>，用来快速实现MAC帧的比特同步；第二个字段是<strong>帧开始定界符</strong>，表示后面的信息就是MAC帧。</li>
<li>地址：通常使用6字节（48bit）地址（MAC地址）。</li>
<li>类型：2字节，指出数据域中携带的数据应交给哪个协议实体处理。</li>
<li>数据：46<del>1500字节，包含高层的协议消息。由于CSMA&#x2F;CD算法的限制，以太网帧必须满足最小长度要求64字节，数据较少时必须加以填充（0</del>46字节）。</li>
</ul>
<blockquote>
<p>注意：46是怎么来的？由CSMA&#x2F;CD可知以太网帧的最短顿长为64B，而MAC帧的首部和尾部的长度为18字节，所以数据字段最短为64-18&#x3D;46字节。最大的1500字节是规定的。</p>
</blockquote>
<ul>
<li>填充：0~46字节，当帧长太短时填充帧，使之达到64字节的最小长度。</li>
<li>校验码（FCS）：4字节，校验范围从目的地址段到数据段的末尾，算法采用32位循环冗余码（CRC），不但需要检验MAC帧的数据部分，还要检验目的地址、源地址和类型字段，但<strong>不校验前导码</strong>。</li>
</ul>
<p>​ 802.3帧格式与DIX以太帧格式的不同之处在于用长度域替代了 DIX帧中的类型域，指出数据域的长度。</p>
<ol start="3">
<li><p>高速以太网</p>
<p>速率≥100Mb&#x2F;s的以太网称为高速以太网。</p>
<ul>
<li><p>100BASE-T 以太网</p>
<p>在双绞线上传送100Mb&#x2F;s基带信号的星型拓扑以太网，仍使用IEEE802.3的CSMA&#x2F;CD协议。</p>
<p>支持全双工和半双工，可在全双工方式下工作而无冲突。</p>
</li>
<li><p>吉比特以太网</p>
<p>在光纤或双绞线上传送1Gb&#x2F;s信号。</p>
<p>支持全双工和半双工，可在全双工方式下工作而无冲突。</p>
</li>
<li><p>10吉比特以太网</p>
<p>10吉比特以太网在光纤上传送10Gb&#x2F;s信号。</p>
<p><strong>只支持全双工</strong>，无争用问题。</p>
</li>
</ul>
</li>
</ol>
<h5 id="3-6-3-IEEE-802-11无线局域网"><a href="#3-6-3-IEEE-802-11无线局域网" class="headerlink" title="3.6.3 IEEE 802.11无线局域网"></a>3.6.3 IEEE 802.11无线局域网</h5><ol>
<li><p>无线局域网的组成</p>
<p>1）<strong>有固定基础设施无线局域网</strong></p>
<p>​ 802.11使用星形拓扑，其中心称为<strong>接入点</strong>(Access Point, AP)，在MAC层使用CSMA&#x2F;CA协议。使用802.11系列协议的局域网又称Wi-Fi。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/95502f65451c2c9539b63489ee3a7ab6png.jpg#pic_center" alt="image-20230815161549000"></p>
<p>​ 无线局域网的最小构件是<strong>基本服务集BSS</strong> (Basic Service Set, BSS)。一个基本服务集包括一个接入点和若干移动站。各站在本BSS内之间的通信，或与本BSS外部站的通 信，都必须通过本BSS的AP。</p>
<p>​ AP就是基本服务集中的<strong>基站</strong>(base station)。安装AP时，必须为该AP分配一个不超过32字节的<strong>服务集标识符</strong>(Service Set IDentifier, SSID)和一个信道。SSID是指使用该AP的无线局域网的名字。</p>
<p>​ 一个基本服务集覆盖的地理范围称为一个<strong>基本服务区</strong>（Basic Service Area，BSA），无线局域网的基本服务区的范围直径一般不超过100m。</p>
<p>​ 一个基本服务集可以是孤立的，也可通过AP连接到一个<strong>分配系统</strong>(Distribution System, DS)，然后再连接到另一个基本服务集，就构成了一个<strong>扩展的服务集</strong>(Extended Service Set, ESS)。</p>
<p>​ ESS还可以通过一种称为 <strong>Porta</strong>l (门户)的设备为无线用户提供到有线连接的以太网的接入。门户的作用相当于一个网桥。</p>
<p>​ 移动站A如果要和另一个基本服务集中的移动站B通信，就必须经过两个接入点AP1和AP2，即A→AP1→AP2→B，注意AP，到AP2的通信是使用有线传输的。</p>
<p>2）<strong>无固定基础设施移动自组织网络</strong></p>
<p>​ 另一种无线局域网是无固定基础设施的无线局域网，又称<strong>自组网络</strong>（ad hoc network）。自组网络没有上述基本服务集中的AP，而是由一些平等状态的移动站相互通信组成的临时网络。各结点之间地位平等，中间结点都为转发结点，因此都具有路由器的功能。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/a979b3db986cb38208c971b322e3daacpng.jpg#pic_center" alt="image-20230815163416468"></p>
</li>
<li><p>802.11局域网的MAC帧</p>
</li>
</ol>
<p>​ 802.11帧共有三种类型，即数据帧、控制帧和管理帧。</p>
<ul>
<li><p>数据帧</p>
<p>1）MAC首部，共30字节。帧的复杂性都在MAC首部。<br>2）帧主体，即帧的数据部分，不超过2312字节。它比以太网的最大长度长很多。<br>3）帧检验序列FCS是尾部，共4字节。</p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/0455f9ca81d66c170dd75dec951e975apng.jpg#pic_center" alt="image-20230815175801593"></p>
<p>​ 其中帧控制的去往AP和来自AP决定着地址内容，具体如下表所示。</p>
<table>
<thead>
<tr>
<th align="center">去往AP</th>
<th align="center">来自AP</th>
<th align="center">地址1</th>
<th align="center">地址2</th>
<th align="center">地址3</th>
<th align="center">地址4</th>
</tr>
</thead>
<tbody><tr>
<td align="center">0</td>
<td align="center">1</td>
<td align="center">接收地址&#x3D;目的地址</td>
<td align="center">发送地址&#x3D;AP地址</td>
<td align="center">源地址</td>
<td align="center">——</td>
</tr>
<tr>
<td align="center">1</td>
<td align="center">0</td>
<td align="center">接收地址&#x3D;AP地址</td>
<td align="center">发送地址&#x3D;源地址</td>
<td align="center">目的地址</td>
<td align="center">——</td>
</tr>
</tbody></table>
<p>​ 地址1是直接接收数据帧的结点地址，地址2是实际发送数据帧的结点地址。</p>
<h5 id="3-6-4-VLAN基本概念与基本原理"><a href="#3-6-4-VLAN基本概念与基本原理" class="headerlink" title="3.6.4 VLAN基本概念与基本原理"></a>3.6.4 VLAN基本概念与基本原理</h5><p>​ 虚拟局域网（VLAN）可以把一个较大的局域网分割成一些较小的与地理位置无关，逻辑上的VLAN，而每个VLAN是一个较小的广播域。VLAN分割了广播域。</p>
<p>​ 802.3ac标准定义了支持VLAN的以太网帧格式的扩展，称为<strong>802.1Q帧</strong>。它在以太网帧中插入一个4字节的标识符（插入在源地址字段和类型字段之间），称为VLAN标签，用来指明发送该帧的计算机属于哪个虚拟局域网。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/8437524111095a95877142e0e33f40b9png.jpg#pic_center" alt="image-20230816100549650"></p>
<p>​ VLAN标签的前两个字节置为0x8100，表示这是一个802.1Q帧。在VLAN标签的后两个字节中，前4位没有用，后12位是该<strong>VLAN的标识符VID</strong>，它唯一标识了该802.1Q帧属于哪个VLAN。</p>
<p>​ VID的<strong>取值范围</strong>为0<del>4095，但0和4095都不用来表示VLAN，因此用于表示VLAN的有效VID取值范围为1</del>4094。12位的VID可识别4096个不同的VLAN。插入VID后，802.1Q帧的<strong>FCS必须重新计算</strong>。</p>
<p>​ IEEE 802.1Q帧是由交换机来处理的，而不是由用户主机来处理的。（即主机和交换机之间只交换普通的以太网帧）</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/1bd0caceee42cc875bf7fabb0ea2dd2bpng.jpg#pic_center" alt="image-20230816102619901"></p>
<p>​ 如上图所示，交换机1连接了7台计算机，该局域网划分为<strong>两个虚拟局域网</strong>VLAN 10和VLAN 20，其中10和20是管理员分配的VID。主机不知道自己的VID，交换机知道所有的VID，主机与交换机用以太网帧交互。VLAN范围可以跨越交换机，交换机1与交换机2相连，并同时连接着两个VLAN。</p>
<p>​ 这两个VLAN虽然都跨越了两个交换机，但<strong>各自都是一个广播域</strong>。</p>
<table>
<thead>
<tr>
<th align="center">发送地址</th>
<th align="center">目的地址</th>
<th align="center">转发路径</th>
</tr>
</thead>
<tbody><tr>
<td align="center">A</td>
<td align="center">B</td>
<td align="center">交换机1查询目的地址接口，识别B属于本交换机管理的同VLAN设备</td>
</tr>
<tr>
<td align="center"><strong>直接转发以太网帧</strong></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">A</td>
<td align="center">E</td>
<td align="center">交换机1查询目的地址接口，将帧转发到交换机2，并插入VLAN标签</td>
</tr>
<tr>
<td align="center"><strong>交换机之间转发Q帧</strong></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">A</td>
<td align="center">C</td>
<td align="center">属于不同网络，需要通过路由器或者三层交换机完成转发</td>
</tr>
</tbody></table>
<h4 id="3-7-广域网-1"><a href="#3-7-广域网-1" class="headerlink" title="3.7 广域网"></a>3.7 广域网</h4><h5 id="3-7-1-广域网基本概念"><a href="#3-7-1-广域网基本概念" class="headerlink" title="3.7.1 广域网基本概念"></a>3.7.1 广域网基本概念</h5><p>​ 广域网通常是指覆盖范围很广（远超一个城市的范围）的长距离网络。广域网的通信子网主要使用分组交换技术。广域网由一些<strong>结点交换机</strong>（不是路由器）及连接这些交换机的链路组成。结点之间都是点到点连接，但为了提高网络的可靠性，通常一个结点交换机往往与多个结点交换机相连。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/5f781f386013ae168a2100ff122b376fpng.jpg#pic_center" alt="image-20230816120701955"></p>
<p>​ 广域网不等于互联网。互联网可以连接不同类型的网络（既可以连接局域网，又可以连接广域网），通常使用路由器来连接。</p>
<p>​ 广域网与局域网有相同有不同，相似点如下：</p>
<ul>
<li>广域网和局域网都是互联网的重要组成构件，从互联网的角度上看，二者平等（不是包含关系）</li>
<li>连接到一个广域网或一个局域网上的主机在该网内进行通信时，只需要使用其网络的物理地址</li>
</ul>
<p>​ 不同点如下所示：</p>
<table>
<thead>
<tr>
<th align="center"></th>
<th align="center">广域网</th>
<th align="center">局域网</th>
</tr>
</thead>
<tbody><tr>
<td align="center">覆盖范围</td>
<td align="center">很广，通常跨区域</td>
<td align="center">较小，通常在一个区域内</td>
</tr>
<tr>
<td align="center">连接方式</td>
<td align="center">结点之间都是点到点连接，但为了提高网络的可靠性，</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">一个结点交换机往往与多个结点交换机相连</td>
<td align="center">普遍采用多点接入技术</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">OSI参考模型层次</td>
<td align="center">三层：物理层，数据链路层，网络层</td>
<td align="center">两层：物理层，数据链路层</td>
</tr>
<tr>
<td align="center">着重点</td>
<td align="center">强调资源共享</td>
<td align="center">强调数据传输</td>
</tr>
</tbody></table>
<p>​ 广域网中的一个重要问题是路由选择和分组转发。路由选择协议负责搜索分组从某个结点到目的结点的最佳传输路由，以便构造路由表，然后从路由表再构造出转发分组的转发表。分组是通过转发表进行转发的。</p>
<h5 id="3-7-2-PPP协议"><a href="#3-7-2-PPP协议" class="headerlink" title="3.7.2 PPP协议"></a>3.7.2 PPP协议</h5><p>​ <strong>点对点协议</strong>（Point–to-Point Protocol，PPP）是使用<strong>串行线路通信</strong>的<strong>面向字节</strong>的协议，该协议应用在<strong>直接连接两个结点</strong>的链路上。<strong>不可靠</strong>。</p>
<ol>
<li><p>组成部分</p>
<ul>
<li><strong>链路控制协议（LCP）</strong>。一种扩展链路控制协议，用于建立、配置、测试和管理数据链路。</li>
<li><strong>网络控制协议（NCP）</strong>。PPP协议允许同时采用多种网络层协议，每个不同的网络层协议要用一个相应的NCP来配置，为网络层协议建立和配置逻辑连接。</li>
<li><strong>一个将IP数据报封装到串行链路的方法</strong>。P数据报在PPP帧中就是其信息部分，这个信息部分的长度受最大传送单元（MTU）的限制。</li>
</ul>
<p>PPP帧格式如图所示，PPP帧前3个字段和最后两个字段与HDLC帧相同。PPP是面向字节的，因 而所有PPP帧的长度都是<strong>整数个字节</strong>。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/f9cba4ed4ec5df9561c270d43a48e006png.jpg#pic_center" alt="image-20230816123730025"></p>
<ul>
<li><p>标注字段（F）为7E（01111110），前后各占1字节。</p>
</li>
<li><p>若标注字段出现在信息字段中，就必须做字节填充，使用的控制转义字节是7D （01111101)。</p>
</li>
<li><p>地址字段（A）占1字节，规定为0xFF，</p>
</li>
<li><p>控制字段（C）占1字节，规定为0x03,两者的内容始终是固定不变的。</p>
</li>
<li><p>协议字段占2字节，说明信息段中运载的是什么种类的分组。HDLC无此字段。</p>
</li>
<li><p>信息部分长度可变，大于或等于0且小于或等于1500B。</p>
</li>
<li><p>帧检验序列（FCS），占2字节，即循环冗余码检验中的冗余码。</p>
</li>
</ul>
<blockquote>
<p>因为PPP是，点对点的，并不是总线形，所以无须采用CSMA&#x2F;CD协议，自然就没有最短帧，所以信息段占01500字节，而不是46~1500字节。</p>
</blockquote>
</li>
<li><p>PPP链路建立、使用、撤销</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/aa40f2efebae11d7144f299b188c47dbpng.jpg#pic_center" alt="image-20230816131220967"></p>
<ul>
<li>静止：当线路处于静止状态时，不存在物理层连接。</li>
<li>建立：当线路检测到载波信号时，建立物理连接，线路变为建立状态。</li>
<li>LCP开始选项商定，商定成功后就进入身份验证状态。身份验证通过后，进入网络层协议状态。</li>
<li>采用NCP配置网络层，配置成功后，进入打开状态，然后就可进行数据传输。</li>
<li>撤销：当数据传输完成后，线路转为终止状态。载波停止后则回到静止状态。</li>
</ul>
</li>
<li><p>特点</p>
<p>1）PPP提供<strong>差错检测但不提供纠错功能</strong>，只保证<strong>无差错接收</strong>（通过硬件进行CRC校验）。它是不可靠的传输协议，因此也不使用序号和确认机制。<br>2）它仅支持<strong>点对点的链路通信</strong>，不支持多点线路。<br>3）PPP只支持<strong>全双工链路</strong>。<br>4）PPP的两端可以<strong>运行不同的网络层协议</strong>，但仍然可使用同一个PPP进行通信。<br>5）PPP是<strong>面向字节</strong>的，当信息字段出现和标志字段一致的比特组合时，PPP有两种不同的处理方法：若PPP用在异步线路（默认），则采用<strong>字符填充法</strong>；若PPP用在SONET&#x2F;SDH等同步线路，则协议规定采用硬件来完成<strong>比特填充</strong>（和HDLC的做法一样）。</p>
</li>
</ol>
<h5 id="3-7-3-HDLC协议"><a href="#3-7-3-HDLC协议" class="headerlink" title="3.7.3 HDLC协议"></a>3.7.3 HDLC协议</h5><p>​ 高级数据链路控制（HDLC）协议是<strong>面向比特</strong>的数据链路层协议。实现<strong>可靠传输</strong>。</p>
<ol>
<li>特点</li>
</ol>
<ul>
<li>该协议不依赖于任何一种字符编码集</li>
<li>数据报文可透明传输，用于实现透明传输的“0比特插入法”易于硬件实现</li>
<li>全双工通信，有较高的数据链路传输效率</li>
<li>所有帧采用CRC检验，对信息帧进行顺序编号，可防止漏收或重发，传输可靠性高</li>
<li>传输控制功能与处理功能分离，具有较大的灵活性。</li>
</ul>
<ol start="2">
<li><p>帧格式</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/f35c76b3de6d65844bf444500cdb86ebpng.jpg#pic_center" alt="image-20230816132019427"></p>
<ul>
<li>标志字段F，为01111110。在接收端只要找到标志字段就可确定一个帧的位置。</li>
<li>HDLC协议采用比特填充的首尾标志法实现透明传输。</li>
<li>地址字段A，共8位，根据不同的传送方式，表示从站或应答站的地址。</li>
<li>控制字段C，共8位，HDLC的许多重要功能都靠控制字段来实现。</li>
</ul>
</li>
<li><p>PPP与HDLC的不同</p>
<ul>
<li>PPP协议是面<strong>向字节</strong>的，HDLC协议是<strong>面向比特</strong>的。</li>
<li>PPP帧比HDLC帧<strong>多一个2字节的协议字段</strong>。当协议字段值为0x0021时，表示信息字段是IP数据报。</li>
<li>PPP协议<strong>不使用序号和确认机制</strong>，只保证无差错接收（CRC检验），而端到端差错检测由高层协议负责。HDLC协议的信息帧使用了<strong>编号和确认机制</strong>，能够提供<strong>可靠传输</strong>。</li>
</ul>
</li>
</ol>
<h4 id="3-8-数据链路层设备"><a href="#3-8-数据链路层设备" class="headerlink" title="3.8 数据链路层设备"></a>3.8 数据链路层设备</h4><h5 id="3-8-1-网桥-1"><a href="#3-8-1-网桥-1" class="headerlink" title="3.8.1 网桥"></a>3.8.1 网桥</h5><p>​ 两个或多个以太网通过网桥连接后，就成为一个更大的以太网，而原来的每个以太网就称为一个网段。网桥工作在链路层的MAC子层，可以使以太网各网段成为<strong>隔离开的碰撞域</strong>。</p>
<p>​ 网桥根据MAC帧的目的地址对帧进行转发和过滤。当网桥收到一个帧时，并不向所有接口转发此帧，而是先检查此帧的目的MAC地址，然后再确定将该帧转发到哪一个接口，或者是把它丢弃（即过滤）。</p>
<ul>
<li><strong>冲突域</strong>：在同一个冲突域中的每一个节点都能收到所有被发送的帧。简单的说就是同一时间只能有一台设备发送信息的范围。</li>
<li><strong>广播域</strong>：网络中能接收任一设备发出的广播帧的所有设备的集合。简单的说如果站点发出一个广播信号，所有能接收到这个信号的设备范围称为一个广播域。</li>
</ul>
<table>
<thead>
<tr>
<th align="center">层次</th>
<th align="center">设备</th>
<th align="center">隔离冲突域</th>
<th align="center">隔离广播域</th>
</tr>
</thead>
<tbody><tr>
<td align="center">网络层</td>
<td align="center">路由器</td>
<td align="center">能</td>
<td align="center">能</td>
</tr>
<tr>
<td align="center">数据链路层</td>
<td align="center">网桥、交换机</td>
<td align="center">能</td>
<td align="center">不能</td>
</tr>
<tr>
<td align="center">物理层</td>
<td align="center">中继器、集线器</td>
<td align="center">不能</td>
<td align="center">不能</td>
</tr>
</tbody></table>
<h5 id="3-8-2-局域网交换机"><a href="#3-8-2-局域网交换机" class="headerlink" title="3.8.2 局域网交换机"></a>3.8.2 局域网交换机</h5><ol>
<li><p>交换机的原理和特点</p>
<p>局域网交换机，又称以太网交换机，以太网交换机实质上就是一个<strong>多端口的网桥</strong>，工作在数据链路层。</p>
<p>以太网交换机的每个端口都直接与单台主机或另一个交换机相连，通常都工作在<strong>全双工方式</strong>。</p>
<ul>
<li><p><strong>原理</strong>：它检测从以太端口来的数据帧的源和目的地的MAC地址，然后与系统内部的动态查找表进行比较，若数据帧的MAC地址不在查找表中，则将该地址加入查找表中，并将数据帧发送给相应的目的端口。</p>
</li>
<li><p>交换机能经济地将网络<strong>分成小的冲突域</strong>，为每个工作站提供<strong>更高的带宽</strong>。</p>
</li>
</ul>
<blockquote>
<p>对于传统10Mb&#x2F;s的共享式以太网，若共有N个用户，则每个用户占有的平均带宽只有总带宽的1&#x2F;N。</p>
<p>使用交换机时，每个端口到主机的带宽还是10Mb&#x2F;s，用户在通信时是独占而不是和其他网络用户共享传输媒体的带宽，因此拥有N个端口的交换机的总容量为N×10Mb&#x2F;s。</p>
</blockquote>
<p><strong>特点</strong>：</p>
<ul>
<li>以太网交换机的<strong>每个端口都直接与单台主机相连</strong>（网桥的端口往往连接到一个网段），并且一般都工作在<strong>全双工方式</strong>。</li>
<li>以太网交换机<strong>同时连通多对端口</strong>，使每对相互通信的主机都能像独占通信媒体那样，无碰撞地传输数据。</li>
<li>以太网交换机是一种<strong>即插即用</strong>设备，其内部的帧的转发表是通过<strong>自学习算法</strong>自动地逐渐建立起来的。</li>
<li>以太网交换机由于使用<strong>专用的交换结构芯片</strong>，交换速率较高。</li>
<li>以太网交换机<strong>独占传输媒体的带宽</strong>。</li>
</ul>
<p><strong>交换模式</strong>：</p>
<ul>
<li><p><strong>直通式交换机</strong>：查完目的MAC地址（6B）就立刻转发。延迟小，可靠性低，无法支持具有不同速率的端口的交换。</p>
</li>
<li><p><strong>存储转发式交换机</strong>：将帧放入<strong>高速缓存</strong>，并检查否正确，正确则转发，错误则丢弃。延迟大，可靠性高，可以支持具有不同速率的端口的交换。</p>
<blockquote>
<p>以太网交换机一股都具有多种速率的端口，例如可以具有10Mb&#x2F;s、100Mb&#x2F;s和1Gb&#x2F;s的端口的各种组合，因此大大方便了各种不同情况的用户。</p>
</blockquote>
</li>
</ul>
</li>
<li><p>交换机的自学习功能</p>
<p>交换机的过滤和转发借助于交换表（switch table）完成。</p>
<p><strong>过滤</strong>：决定一个帧是应该转发到某个端口还是应该将其丢弃称。</p>
<p><strong>转发</strong>：决定一个帧应该被移动到哪个接口。</p>
<p><strong>交换表</strong>：包含多个表项，每个表项包含①一个MAC地址；②连通该MAC地址的交换机端口。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/fa24e80664dee86b9a4c84b47ca6adddpng.jpg#pic_center" alt="image-20230816140541143"></p>
<p><strong>自学习过程</strong>：</p>
<ul>
<li>A先向B发送一帧，从端口1进入交换机。</li>
<li>交换机收到帧后，查找交换表，找不到MAC地址为B的表项。</li>
<li>交换机将该帧的源地址A和端口1（A,1）写入交换表，并向除端口1外的所有端口广播这个帧（该帧就是从端口1进入的，因此不应该将它再从端口1转发出去）。</li>
<li>C和D丢弃该帧，因为目的地址不对。只有B才收下这个目的地址正确的帧。</li>
<li>B通过端口3向A发送一帧，交换机查找交换表后，发现有表项 (A,1)，将该帧从端口1转发给A。同时，将该帧的源地址B和端口 3 (B,3) 写入交换表，表明以后如有发送给B的帧，应该从端口3转发出去。</li>
<li>经过一段时间，只要主机C和D也向其他主机发送帧，交换机就会把C和D及对应的端口号写入交换表。这样，转发给任何主机的帧，都能很快地在交换表中找到相应的转发端口。</li>
</ul>
<blockquote>
<p>交换表中的每个表项都设有一定的有效时间，<strong>过期的表项会自动删除</strong>。这就保证了交换表中的数据符合当前网络的实际状况。</p>
</blockquote>
</li>
</ol>
<h3 id="4-网络层"><a href="#4-网络层" class="headerlink" title="4 网络层"></a>4 网络层</h3><h4 id="4-1-网络层功能"><a href="#4-1-网络层功能" class="headerlink" title="4.1 网络层功能"></a>4.1 网络层功能</h4><p>​ 互联网在网络层的设计思路是，向上只提供简单灵活的、无连接的、尽最大努力交付的数据报服务。也就是说，所传送的分组可能出错、丢失、重复、失序或超时，这就使得网络中的路由器比较简单，而且价格低廉。</p>
<h5 id="4-1-1-异构网络互联"><a href="#4-1-1-异构网络互联" class="headerlink" title="4.1.1 异构网络互联"></a>4.1.1 异构网络互联</h5><p>​ 网络互连是指将两个以上的计算机网络，通过一定的方法，用一些中间设备（又称中继系统）相互连接起来，以构成更大的网络系统。根据所在的层次，中继系统分为以下4种：</p>
<ul>
<li>物理层中继系统：转发器，集线器。</li>
<li>数据链路层中继系统：网桥或交换机。</li>
<li>网络层中继系统：路由器。</li>
<li>网络层以上的中继系统：网关。</li>
</ul>
<p>​ 使用物理层或数据链路层的中继系统时，只是把一个网络扩大了，而从网络层的角度看，它仍然是同一个网络，一般并不称为网络互连。因此网络互连通常是指用路由器进行<strong>网络互连</strong>和<strong>路由选择</strong>。路由器是一台专用计算机，用于在互联网中进行路由选择。</p>
<p>​ TCP&#x2F;IP体系在网络互连上采用的做法是在网络层采用标准化协议，但相互连接的网络可以是<strong>异构</strong>的。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/39cfda182f70915f1769ead07be786e7png.jpg#pic_center" alt="image-20230816150325020"></p>
<p>​ 上图表示用许多计算机网络通过一些路由器进行互连。由于参加互连的计算机网络都使用相同的IP协议，因此可以把互连后的网络视为如图（b）所示的一个虚拟IP网络。</p>
<p>​ IP网络：是通过IP协议使性能各异的网络在网络层上看起来好像是一个统一的网络。</p>
<h5 id="4-1-2-路由转发"><a href="#4-1-2-路由转发" class="headerlink" title="4.1.2 路由转发"></a>4.1.2 路由转发</h5><p>​ 路由器主要完成两个功能：一是路由选择（确定哪一条路径）；二是分组转发（当一个分组到达时所采取的动作）。</p>
<ul>
<li>路由选择：指按照复杂的分布式算法，根据从各相邻路由器所得到的关于整个网络拓扑的变化情况，动态地改变所选择的路由。</li>
<li>分组转发：指路由器根据转发表将用户的IP数据报从合适的端口转发出去。</li>
</ul>
<p>​ 路由表是根据路由选择算法得出的，而转发表是从路由表得出的。转发表的结构应当使查找过程最优化，路由表则需要对网络拓扑变化的计算最优化。在讨论路由选择的原理时，往往不去区分转发表和路由表，而是笼统地使用路由表一词。</p>
<h5 id="4-1-3-SDN基本概念"><a href="#4-1-3-SDN基本概念" class="headerlink" title="4.1.3 SDN基本概念"></a>4.1.3 SDN基本概念</h5><p>​ 网络层的主要任务是转发和路由选择。可以将网络层抽象地划分为数据平面（也称转发层面）和控制平面，<strong>转发</strong>是数据平面实现的功能，而<strong>路由选择</strong>是控制平面实现的功能。</p>
<p>​ <strong>数据平面</strong>：数据平面对于数据处理过程中各种具体处理转发过程。数据平面执行的主要功能是根据转发表进行转发，这是路由器的本地动作。</p>
<p>​ <strong>控制平面</strong>：控制平面用于控制和管理网络协议的运行，比如OSPF协议、RIP协议、BGP协议。用于实现路由选择，控制数据报沿着从源主机到目的主机的端到端路径中路由器之间的路由方式。时间长，通常软件解决。</p>
<p>​ <strong>软件定义网络</strong>（SDN）是近年流行的一种创新网络架构，它采用<strong>集中式的控制平面</strong>和<strong>分布式的数据平面</strong>，两个平面相互分离，控制平面利用<strong>控制-数据接口</strong>对数据平面上的路由器进行集中式控制，方便软件来控制网络。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/19ba011642f50e018956ea9c48c065d5png.jpg#pic_center" alt="image-20230816152221821"></p>
<p>​ 在网络的控制平面有一个逻辑上的<strong>远程控制器</strong>（可以由多个服务器组成）。远程控制器掌握各主机和整个网络的状态，为每个分组计算出最佳路由，通过Openflow协议（也可以通过其他途径）将转发表（在SDN中称为流表）下发给路由器。</p>
<p>​ <strong>路由器</strong>的工作很单纯，即收到分组、查找转发表、转发分组。</p>
<p>​ SDN的可编程性通过为开发者们提供强大的编程接口，使得网络具有很好的编程性。</p>
<ul>
<li><strong>北向接口</strong>：对<strong>上层应用</strong>的开发者，SDN提供的编程接口称为北向接口。北向接口提供了一系列丰富的API，开发者可以在此基础上设计自己的应用，而不必关心底层的硬件细节。</li>
<li><strong>南向接口</strong>：SDN控制器和<strong>转发设备</strong>建立双向会话的接口称为南向接口，通过不同的南向接口协议（如Openflow），SDN控制器就可兼容不同的硬件设备，同时可以在设备中实现上层应用的逻辑。</li>
<li><strong>东西向接口</strong>：SDN控制器集群内部控制器之间的通信接口称为东西向接口，用于增强整个控制平面的可靠性和可拓展性。</li>
</ul>
<p><strong>SDN优点</strong>：</p>
<ul>
<li><strong>全局集中式控制和分布式高速转发</strong>，既利于控制平面的全局优化，又利于高性能的网络转发。</li>
<li><strong>灵活可编程与性能的平衡</strong>，控制和转发功能分离后，使得网络可以由专有的自动化工具以编程方式配置。</li>
<li><strong>降低成本</strong>，控制和数据平面分离后，尤其是在使用开放的接口协议后，就实现了网络设备的制造与功能软件的开发相分离，从而有效降低了成本。</li>
</ul>
<p><strong>SDN的问题</strong>：</p>
<ul>
<li><strong>安全风险</strong>，集中管理容易受攻击，如果崩溃，整个网络会受到影响。</li>
<li><strong>瓶颈问题</strong>，原本分布式的控制平面集中化后，随着网络规模扩大，控制器可能成为网络性能的瓶颈。</li>
</ul>
<h5 id="4-1-4-拥塞控制"><a href="#4-1-4-拥塞控制" class="headerlink" title="4.1.4 拥塞控制"></a>4.1.4 拥塞控制</h5><p>​ <strong>拥塞</strong>：在通信子网中，因出现过量的分组而引起网络性能下降的现象称为拥塞。</p>
<p>​ 例如，某个路由器所在链路的带宽为 R R R B&#x2F;S，如果IP分组只从它的某个端口进入，那么其速率为rinB&#x2F;s。当rin=R时，并非好事。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/6e5cd8f9fbe24571634a0520d95fbc6bpng.jpg#pic_center" alt="image-20230816155911692"></p>
<p>​ 当分组到达路由器的速率接近R时，平均时延急剧增加，并且会有大量的分组被丢弃（路由器端口的缓冲区是有限的），整个网络的吞吐量会骤降，源与目的地之间的平均时延也会变得近乎无穷大。</p>
<p><strong>判断网络是否拥塞方法</strong>：观察网络的吞吐量与网络负载的关系</p>
<ul>
<li>轻度拥塞状态：随着网络负载的增加，网络的吞吐量明显小于正常的吞吐量。</li>
<li>拥塞状态：网络的吞吐量随着网络负载的增大而下降。</li>
<li>死锁状态：网络的负载继续增大，而网络的吞吐量下降到零。</li>
</ul>
<p>​ <strong>拥塞控制</strong>的作用是确保子网能够承载所达到的流量，这是一个全局性的过程，涉及各方面的 行为：主机、路由器及路由器内部的转发处理过程等。单一地增加资源并不能解决拥塞。</p>
<blockquote>
<p>流量控制和拥塞控制的区别：</p>
<p><strong>流量控制</strong>往往是指在发送端和接收端之间的<strong>点对点通信量</strong>的控制。流量控制所要做的是<strong>抑制发送端发送数据的速率</strong>，以便使接收端来得及接收。</p>
<p>而<strong>拥塞控制</strong>必须确保通信子网能够<strong>传送待传送的数据</strong>，是一个全局性的问题，涉及网络中所有的主机、路由器及导致网络传输能力下降的所有因素。</p>
</blockquote>
<p><strong>拥塞控制的方法</strong>：</p>
<ul>
<li><strong>开环控制</strong>：在设计网络时事先将有关发生拥塞的因素考虑周到，力求网络在工作时不产生拥塞。<br>这是一种<strong>静态</strong>的预防方法。一旦整个系统启动并运行，中途就不再需要修改。<br>开环控制手段包括确定何时可接收新流量、何时可丢弃分组及丢弃哪些分组，确定何种调度策略等。所有这些手段的共性是，在做决定时<strong>不考虑当前网络的状态</strong>。</li>
<li><strong>闭环控制</strong>：事先不考虑有关发生拥塞的各种因素，采用<strong>监测网络系统</strong>去监视，及时检测哪里发生了拥塞，然后将拥塞信息传到合适的地方,以便调整网络系统的运行，并解决出现的问题。<br>闭环控制是<strong>基于反馈环路</strong>的概念，是一种<strong>动态</strong>的方法。</li>
</ul>
<h4 id="4-2-路由算法和路由协议"><a href="#4-2-路由算法和路由协议" class="headerlink" title="4.2 路由算法和路由协议"></a>4.2 路由算法和路由协议</h4><h5 id="4-2-1-静态路由与动态路由"><a href="#4-2-1-静态路由与动态路由" class="headerlink" title="4.2.1 静态路由与动态路由"></a>4.2.1 静态路由与动态路由</h5><p>​ 路由器转发分组是通过路由表转发的，而路由表是通过各种算法得到的。从能否随网络的通信量或拓扑自适应地进行调整变化来划分，路由算法可以分为如下两大类。</p>
<ul>
<li><strong>静态路由算法</strong>（又称非自适应路由算法）。指由网络<strong>管理员手工配置</strong>的路由信息。<br>当网络的拓扑结构或链路的状态发生变化时，网络管理员需要手工去修改路由表中相关的静态路由信息。它不能及时适应网络状态的变化，对于简单的小型网络，可以采用静态路由。</li>
<li><strong>动态路由算法</strong>（又称自适应路由算法）。指路由器上的路由表项是通过相互连接的路由器之间彼此交换信息，然后按照一定的算法优化出来的，而这些路由信息会在一定时间间隙里不断更新，以适应不断变化的网络，随时获得最优的寻路效果。</li>
</ul>
<h5 id="4-2-2-距离-向量路由算法"><a href="#4-2-2-距离-向量路由算法" class="headerlink" title="4.2.2 距离-向量路由算法"></a>4.2.2 距离-向量路由算法</h5><ol>
<li><p>距离向量算法</p>
<p>​ 常见的距离-向量路由算法是<strong>RIP算法</strong>，<strong>每个路由器</strong>定期与所有相邻路由器交换<strong>整个路由表</strong>，更新路由项。</p>
<p>​ 这种路由表包含：①每条路径的目的地（另一结点）。②路径的代价（也称距离）。</p>
<blockquote>
<p>这里的距离是一个抽象的概念，如RIP就将距离定义为“跳数”。跳数指从源端口到达目的端口所经过的路由器个数，每经过一个路由器，跳数加1。</p>
</blockquote>
<ul>
<li><p>更新路由表的情况：</p>
<ul>
<li><p><strong>被通告一条新的路由</strong>，该路由在本结点的路由表中不存在，此时本地系统加入这条新的路由。</p>
</li>
<li><p><strong>路由信息有一条较短的距离</strong>，发来的路由信息中有一条到达某个目的地的路由，该路由与当前使用的路由相比，有较短的距离。此时，就用经过发送路由信息的结点的新路由替换路由表中到达那个目的地的现有路由。</p>
</li>
</ul>
</li>
</ul>
<p>​ 距离-向量路由算法的<strong>实质</strong>是，迭代计算一条路由中的站段数或延迟时间，从而得到到达一个目标的最短（最小代价）通路。</p>
<ul>
<li><strong>问题</strong>：大的通信子网导致大的更新报文，路由信息变得很大。</li>
</ul>
<blockquote>
<p>距离-向量路由算法中，路由器只掌握物理相连的邻居及链路费用</p>
</blockquote>
</li>
<li><p><strong>RIP（路由信息协议）</strong> 封装UDP 应用层协议 只适用于小互联网</p>
<p>RIP是一种分布式的基于距离向量的路由选择协议，其最大优点就是简单。</p>
<ul>
<li><p><strong>协议规定</strong>：</p>
<ul>
<li><p>1）网络中的每一个路由器都要维护从它自己到其他每一个目的网络的距离记录（距离向量）</p>
</li>
<li><p>2）距离也称为跳数，规定从一路由器到直接连接的跳数为1。每经过一个路由器，跳数加1</p>
</li>
<li><p>3）RIP认为好的路由就是它通过的路由器的数目少，即优<strong>先选择跳数少的路径</strong></p>
</li>
<li><p>4）RIP允许一条路径最多只能包含15个路由器（即<strong>最多允许15跳</strong>）距离<strong>等于16时，表示网络不可到达</strong></p>
</li>
<li><p>5）RIP默认在任意两个使用RIP的路由器之间每30s广播一次RIP路由更新信息，<strong>动态维护</strong>路由表</p>
</li>
<li><p>6）在RIP中<strong>不支持子网掩码</strong>的RIP广播，RIP中每个网络的<strong>子网掩码必须相同</strong>。在RIP2中，支持变长子网掩码和CIDR</p>
</li>
</ul>
</li>
<li><p><strong>RIP报文格式</strong>：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/774679c5f0e19c3b8aad806a3df08107png.jpg#pic_center" alt="image-20230818133004500"></p>
<p>​ RIP报文由首部和路由部分组成。</p>
</li>
<li><p><strong>RIP的特点</strong>：</p>
<ul>
<li><p>1）仅和相邻路由器交换信息。</p>
</li>
<li><p>2）路由器交换的信息是当前路由器所知道的全部信息，即自己的路由表。</p>
</li>
<li><p>3）按固定的时间间隔交换路由信息，如每隔30秒。</p>
</li>
</ul>
</li>
<li><p><strong>距离向量算法</strong>：每个路由表项目都有三个关键数据： &lt; 目的网络 N ，距离 d ，下一跳路由器地址 X &gt; &lt;目的网络N，距离d，下一跳路由器地址X&gt; &lt;目的网络N，距离d，下一跳路由器地址X&gt;。</p>
<ul>
<li><p>1）对地址为X的相邻路由器发来的报文，修改此报文中的所有项目【**’下一跳’的地址都改为X，把所有’距离’的值+1**】</p>
</li>
<li><p>2）对修改后的报文中的每一个项目，进行以下步骤：</p>
<ul>
<li>①当原来的路由表中没有目的网络N，则把该项目添加到路由表中</li>
<li>②当原来的路由表中有目的网络N，且下一跳路由器地址【是X】时，用收到的项目替换原路由表中的项目</li>
<li>③当原来的路由表中有目的网络N，且下一跳路由器地址【不是X】，若收到的项目中的<strong>距离d&lt;路由表中的距离</strong>，用收到的项目替换原路由表中的项目，否则什么也不做</li>
</ul>
</li>
<li><p>3）如果180s（默认<strong>超时时间是180s</strong>）没有收到相邻路由器的更新路由表，把此相邻路由器记为<strong>不可达路由</strong>，把距离置为16</p>
</li>
<li><p>4）返回</p>
</li>
</ul>
<blockquote>
<p>例：已知路由器R6有表a所示的路由表。现在收到相邻路由器R4发来的路由更新信息，如表b所示。试更新路由器R6的路由表。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/7cc7132153ec7c74d37cfd2282ce6abapng.jpg#pic_center" alt="image-20230818135130787"></p>
<p>先把表b中的距离都加1，并把下一跳路由器都改为R4。得出表c。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/bce19f6867279d0175482646c465c106png.jpg#pic_center" alt="image-20230818135536228"></p>
<p>把这个表的每一行和表a进行比较。</p>
<ul>
<li>第一行在表a中没有，因此要把这一行添加到表a中。</li>
<li>第二行的Net2在表a中有，且下一跳路由器也是R4。因此要更新（距离增大了）。</li>
<li>第三行的Net3在表a中有，但下一跳路由器不同。于是就要比较距离。新的路由信息的距离是2，小于原来表中的4，因此要更新。</li>
</ul>
<p>这样，得出更新后的R6的路由表如表d所示。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/cdc1ecd7f28356a5269fd7f3011de3fcpng.jpg#pic_center" alt="image-20230818135836501"></p>
<p>在更新完路由后，每一个路由器到每一个目的网络的路由都是最短的</p>
</blockquote>
</li>
<li><p><strong>RIP优点</strong>：实现简单、开销小、收敛过程较快</p>
<blockquote>
<p>收敛：路由器刚开始工作时，只知道直接连接的网络的距离（距离为1），接着每一个路由器也只和数目非常有限的相邻路由器交换并更新路由信息。</p>
<p>经过若干次更新后，所有路由器最终都会知道到达本自治系统任何一个网络的最短距离和下一跳路由器的地址，即“收敛”。</p>
</blockquote>
</li>
<li><p><strong>RIP缺点</strong>：好消息传得快，坏消息传得慢</p>
<ul>
<li><p>1）RIP限制了网络的规模，它能使用的最大距离为15（16表示不可达）。</p>
</li>
<li><p>2）路由器之间交换的是路由器中的完整路由表，因此<strong>网络规模越大，开销也越大</strong>。</p>
</li>
<li><p>3）网络出现故障时，会出现<strong>慢收敛</strong>现象（即需要较长时间才能将此信息传送到所有路由器），使更新过程的收敛时间长。</p>
</li>
</ul>
<blockquote>
<p>慢收敛例子：</p>
<p>​ 现在假定路由器R1，到网1的链路出了故障，R1无法到达网1。于是路由器R1把到网1的距离改为16（表示到网1不可达），因而在R1的路由表中的相应项目变为“1，16，直接”。但是，很可能要经过30秒钟后R1才把更新信息发送给R2。然而R2可能已经先把自己的路由表发送给了R1，其中有“1，2，R1”这一项。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/3b090b891c3d5f8329527c1890902cd4png.jpg#pic_center" alt="image-20230821093055417"></p>
<p>​ R1收到R2的更新报文后，误认为可经过R2到达网1，于是把收到的路由信息“1，2，R，”修改为：“1，3，R2”，表明“我到网1的距离是3，下一跳经过R2”，并把更新后的信息发送给R2。<br>​ 同理，R2接着又更新自己的路由表为“1，4，R1”，以为“我到网1距离是4，下一跳经过R1”。<br>​ 这样的更新一直继续下去，直到R1和R2到网1的距离都增大到16时，R1和R2才知道原来网1是不可达的。RIP协议的这一特点叫做：<strong>好消息传播得快，而坏消息传播得慢</strong>。网络出故障的传播时间往往需要较长的时间（例如数分钟）。这是RIP的一个主要缺点。</p>
</blockquote>
</li>
</ul>
</li>
</ol>
<h5 id="4-2-3-链路状态路由算法"><a href="#4-2-3-链路状态路由算法" class="headerlink" title="4.2.3 链路状态路由算法"></a>4.2.3 链路状态路由算法</h5><ol>
<li><p>链路状态路由算法</p>
<ul>
<li><p>链路状态路由算法要求每个参与该算法的结点都具有完全的网络拓扑信息，它们执行下述两项任务。</p>
<ul>
<li><p>第一，<strong>主动测试所有邻接结点的状态</strong>。两个共享一条链接的结点是相邻结点，它们连接到同一条链路，或者连接到同一广播型物理网络。</p>
</li>
<li><p>第二，<strong>定期地将链路状态</strong>传播给所有其他结点（或称路由结点）。</p>
</li>
</ul>
</li>
</ul>
<p>​ 典型的链路状态算法是<strong>OSPF算法</strong>。</p>
<ul>
<li><p><strong>特征</strong>：</p>
<ul>
<li><p>向本自治系统中所有路由器发送信息（洪泛法）。</p>
<blockquote>
<p>洪泛法，即路由器通过所有端 口向所有相邻的路由器发送信息。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/b596515af37c7c1b35f6e3a25a543a35png.jpg#pic_center" alt="image-20230818150509867"></p>
<p>设路由器R用洪泛法发出链路状态更新分组。图中用一些小的箭头表示更新分组。第一次先发给相邻的三个路由器。这三个路由器将收到的分组再进行转发时，要将其上游路由器除外。可靠的洪泛法是在收到更新分组后要发送确认（收到重复的更新分组只需要发送一次确认）。图中的空心箭头表示确认分组。</p>
</blockquote>
</li>
<li><p>发送的信息是与路由器相邻的所有路由器的链路状态。</p>
<blockquote>
<p>OSPF算法中，链路状态的“度量”主要用来表示费用、距离、时延、带宽等。</p>
</blockquote>
</li>
<li><p>只有链路状态发生变化，才向所有路由器发送信息。</p>
</li>
</ul>
</li>
<li><p><strong>优点</strong>：</p>
<ul>
<li><p>每个路由结点使用同样的原始状态数据独立的计算路径。</p>
</li>
<li><p>链路状态不加改变的传播，该算法易于查找故障。</p>
</li>
<li><p>仅运载来自单个结点关于直接链路的信息，其大小与网络中的路由结点数目无关，有更好的规模可伸展性。</p>
</li>
</ul>
</li>
</ul>
<p>​ 链路状态路由算法可以用于大型的或路由信息变化聚敛的互联网环境。因为一个路由器的链路状态只涉及相邻路由器的连通状态，而与整个互联网的规模并无直接关系。</p>
<blockquote>
<p>链路状态路由算法中，所有路由器掌握完整的网络拓扑和链路费用信息。</p>
</blockquote>
</li>
<li><p><strong>OSPF（开放最短路径优先）协议</strong> 网络层协议 封装IP</p>
<ul>
<li><p><strong>OSPF特点</strong>：</p>
<ul>
<li>1）OSPF对不同的链路可根据IP分组的不同服务类型（TOS）而设置成不同的代价。因此，OSPF对于不同类型的业务可计算出不同的路由，十分灵活。</li>
<li>2）如果到同一个目的网络有多条相同代价的路径，那么可以将通信量分配给这几条路径。这称为多路径间的负载平衡。</li>
<li>3）所有在OSPF路由器之间交换的分组都具有鉴别功能，因而保证了仅在可信赖的路由器之间交换链路状态信息。</li>
<li>4）支持可变长度的子网划分和无分类编址CIDR。</li>
<li>5）每个链路状态都带上一个32位的序号，序号越大，状态就越新。</li>
</ul>
</li>
<li><p><strong>OSPF与RIP的区别</strong>：</p>
</li>
</ul>
<table>
<thead>
<tr>
<th align="center"></th>
<th align="center">RIP</th>
<th align="center">OSPF</th>
</tr>
</thead>
<tbody><tr>
<td align="center">工作层次</td>
<td align="center">应用层 基于UDP</td>
<td align="center">网络层 基于IP</td>
</tr>
<tr>
<td align="center">转发范围</td>
<td align="center">相邻路由器</td>
<td align="center">整个本自治系统（洪泛法）</td>
</tr>
<tr>
<td align="center">发送内容</td>
<td align="center">整个路由表</td>
<td align="center">相邻路由器链路状态</td>
</tr>
<tr>
<td align="center">何时发送</td>
<td align="center">定期交换 收敛慢</td>
<td align="center">链路状态改变（洪泛法） 收敛快</td>
</tr>
</tbody></table>
<ul>
<li><p><strong>OSPF报文格式</strong>：</p>
<p>OSPF直接用IP数据报传送，工作在网络层。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/76af6a1123daf7c8e5da956025eb0aebpng.jpg#pic_center" alt="image-20230818144119117"></p>
</li>
<li><p><strong>OSPF的基本工作原理</strong>：</p>
<p>为了使OSPF能够用于规模很大的网络，OSPF将一个自治系统再划分为若干个更小的范围，叫做<strong>区域</strong>（area）。每一个区域都有一个32位的区域标识符（用点分十进制表示）。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/7b99a95e2c42f9d7452e6ab5483af33apng.jpg#pic_center" alt="image-20230818142755180"></p>
<p>​ 划分区域后，洪泛法交换链路状态信息的范围<strong>局限于每一个区域</strong>，减少网络的通信量。在一个区域内部的路由器只知道本区域的完整网络拓扑，而不知道其他区域的网络拓扑的情况。每个区域路由器应不超200个。</p>
<p>​ OSPF采用<strong>层次结构的区域划分</strong>，使每个区域能够与其他区域通信。</p>
<ul>
<li><p>在上层的区域叫做<strong>主干区域</strong>backbone area）。主千区域的标识符规定为0.0.0.0。主干区域的作用是用来<strong>连通其他在下层的区域</strong>。</p>
</li>
<li><p>从其他区域来的信息都由<strong>区域边界路由器</strong>（area border router）进行概括。如路由器R3，R4和R7。</p>
</li>
<li><p>在主干区域内的路由器叫做<strong>主干路由器</strong>（backbone router），如R3，R4，R5，R6和R7。</p>
</li>
<li><p>在主干区域内需要一个路由器和本自治系统外的其他自治系统交换路由信息。这样的路由器叫做<strong>自治系统边界路由器</strong>，如R6。</p>
<p>​ 采用层次划分后，使每一个区域内部交换路由信息的通信量大大减小，因而使OSPF协议能够用于<strong>规模很大的自治系统</strong>中。</p>
</li>
</ul>
</li>
<li><p><strong>OSPF分组类型</strong>：</p>
<ul>
<li>1）<strong>问候分组</strong>，用来发现和维持邻站的可达性。</li>
<li>2）<strong>数据库描述分组</strong>，向邻站给出自己的链路状态数据库中的所有链路状态项目的摘要信息。</li>
<li>3）<strong>链路状态请求分组</strong>，向对方请求发送某些链路状态项目的详细信息。</li>
<li>4）<strong>链路状态更新分组</strong>，用洪泛法对全网更新链路状态。</li>
<li>5）<strong>链路状态确认分组</strong>，对链路更新分组的确认。</li>
</ul>
<p>​ 通常每隔10秒，每两个相邻路由器要交换一次问候分组，以便知道哪些站可达。路由器刚开始工作时，OSPF让每个路由器使用数据库描述分组和相邻路由器交换本数据库中已有的链 路状态摘要信息。然后，路由器使用链路状态请求分组，向对方请求发送自己所缺少的某些链路 状态项目的详细信息。经过一系列的这种分组交换，就建立了全网同步的链路数据库。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/0223e2420c7817d30b9eeb2528bd1e61png.jpg#pic_center" alt="image-20230818145357592"></p>
</li>
<li><p><strong>OSPF链路状态路由算法</strong>：</p>
<ul>
<li><p>1.每个路由器发现它的邻居结点【HELLO问候分组】，并了解邻居节点的网络地址。</p>
</li>
<li><p>2.设置到它的每个邻居的成本度量metric。</p>
</li>
<li><p>3.构造【DD数据库描述分组】，向邻站给出自己的链路状态数据库中的所有链路状态项目的摘要信息。</p>
</li>
<li><p>4.如果DD分组中的摘要自己都有，则邻站不做处理；如果有没有的或者是更新的，则发送【LSR链路状态请求分组】请求自己没有的和比自己更新的信息。</p>
</li>
<li><p>5.收到邻站的LSR分组后，发送【LSU链路状态更新分组】进行更新。</p>
</li>
<li><p>6.更新完毕后，邻站返回一个【LSAck链路状态确认分组】进行确认。</p>
</li>
</ul>
<p>只要一个<strong>路由器的链路状态发生变化</strong>：</p>
<ul>
<li><p>5.泛洪发送【LSU链路状态更新分组】进行更新。</p>
</li>
<li><p>6.更新完毕后，其他站返回一个【LSAck链路状态确认分组】进行确认。</p>
</li>
<li><p>7.使用Dijkstra根据自己的链路状态数据库构造到其他节点间的最短路径。</p>
</li>
</ul>
<blockquote>
<p>OSPF算法例子：</p>
<p>因特网中的一个自治系统的内部结构如下图所示。路由选择协议采用OSPF协议时，计算R6的关于网络N1、N2、N3、N4的路由表。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/04046bdd772fc9cfe1ae1d1da4d07b63png.jpg#pic_center" alt="image-20230821095646559"></p>
<p>根据Dijkstra算法，得出以下路径表格，其中主意，经过N3网络路径代价未增加。</p>
<table>
<thead>
<tr>
<th align="center"></th>
<th align="center">R1</th>
<th align="center">R2</th>
<th align="center">R3</th>
<th align="center">R4</th>
<th align="center">R5</th>
<th align="center">N1</th>
<th align="center">N2</th>
<th align="center">N3</th>
<th align="center">N4</th>
</tr>
</thead>
<tbody><tr>
<td align="center">第1轮</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">6</td>
<td align="center"></td>
<td align="center">6</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">第2轮</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">6</td>
<td align="center">14</td>
<td align="center">6</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">7</td>
<td align="center">8</td>
</tr>
<tr>
<td align="center">第3轮</td>
<td align="center"><strong>7</strong></td>
<td align="center"><strong>7</strong></td>
<td align="center">6</td>
<td align="center">14</td>
<td align="center">6</td>
<td align="center"></td>
<td align="center"></td>
<td align="center">7</td>
<td align="center">8</td>
</tr>
<tr>
<td align="center">第4轮</td>
<td align="center">7</td>
<td align="center">7</td>
<td align="center">6</td>
<td align="center">14</td>
<td align="center">6</td>
<td align="center">10</td>
<td align="center">10</td>
<td align="center">7</td>
<td align="center">8</td>
</tr>
</tbody></table>
<p>路由表如下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/945fa0bc4054bf44e0de22f708541c64png.jpg#pic_center" alt="image-20230821100223264"></p>
</blockquote>
</li>
</ul>
</li>
</ol>
<h5 id="4-2-4-层次路由"><a href="#4-2-4-层次路由" class="headerlink" title="4.2.4 层次路由"></a>4.2.4 层次路由</h5><ol>
<li><p>层次路由</p>
<p>网络规模扩大，路由器的路由表成比例地增大。这样会消耗大量资源，因此路由选择应按照层次的方式进行。</p>
<p>因特网将整个互联网划分为许多较小的<strong>自治系统（AS）</strong>（注意一个自治系统中包含很多局域网）。</p>
<blockquote>
<p>自治系统（Autonomous System，AS）：单一技术管理下的一组路由器，这些路由器使用一种<strong>AS内部的路由选择协议</strong>和共同的度量来确定分组在该AS内的路由，同时还使用一种<strong>AS之间的路由选择协议</strong>来确定分组在AS之间的路由。</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/267153a394a482eb120b940daee864cdpng.jpg#pic_center" alt="image-20230818113334901"></p>
<p>​ 每个自治系统有权自主地决定本系统内应采用何种路由选择协议。如果两个自治系统需要通信，那么就需要一种在两个自治系统之间的协议来屏蔽这些差异。因此将选择协议分为以下两种类型：</p>
<ul>
<li><strong>内部网关协议（IGP）</strong>：也称域内路由选择，指一个自治系统内部所使用的路由选择协议，具体的协议有RIP和OSPF等。</li>
<li><strong>外部网关协议（EGP）</strong>：也称域间路由选择，指自治系统之间所使用的路由选择协议，在不同自治系统的路由器之间交换路由信息，并负责为分组在不同自治系统之间选择最优的路径。具体的协议有BGP。</li>
</ul>
<p>使用层次路由时，OSPF将一个自治系统再划分为若干区域（Area），每个路由器都知道在本区域内如何把分组路由到目的地的细节，但不用知道其他区域的内部结构。因而使OSPF协议能够用于规模很大的自治系统中。</p>
</li>
<li><p><strong>BGP（外部网关协议）</strong> 应用层 TCP封装</p>
<p>​ 边界网关协议（Border Gateway Protocol，BGP）是不同自治系统的路由器之间交换路由信息的协议，是一种外部网关协议。</p>
<ul>
<li><p><strong>目的</strong>：力求寻找一条能够到达目的网络且比较好的路由（不能兜圈子）</p>
</li>
<li><p><strong>困难</strong></p>
<ul>
<li>互联网的规模太大，使得自治系统AS之间路由选择非常困难</li>
<li>自治系统AS之间的路由选择必须考虑有关策略。</li>
</ul>
</li>
<li><p><strong>交换过程</strong></p>
<p>BGP所交换的<strong>网络可达性的信息</strong>就是要<strong>到达某个网络所要经过的一系列AS</strong>。</p>
<p>当BGP发言人互相交换了网络可达性的信息后，各BGP发言人就根据所采用的策略从收到的路由信息中找出到达各AS的较好路由。</p>
</li>
<li><p><strong>BGP的工作原理</strong>：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/7ff8cd43f74cf089dd4fd5232615f004png.jpg#pic_center" alt="image-20230818153227250"></p>
<ul>
<li><p>每一个自治系统的管理员要选择至少一个路由器（可多个）作为该自治系统的”BGP发言人”</p>
</li>
<li><p>一个BGP发言人与其他自治系统中的BGP发言人要交换路由信息，就要先<strong>建立TCP连接</strong></p>
</li>
<li><p>然后在此连接上交换BGP报文以<strong>建立BGP会话</strong>，再利用BGP会话交换路由信息</p>
</li>
<li><p>当所有BGP发言人都相互交换网络可达性的信息后，各BGP发言人就可找出到达各个自治系统的比较好的路由</p>
</li>
</ul>
<blockquote>
<p>BGP发言人交换路径向量</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/18b3fdca916ca6aa29cfd254d55dac06png.jpg#pic_center" alt="image-20230818153606293"></p>
<p>自治系统AS2的BGP发言人通知主干网的BGP发言人：“要到达网络N1，N2，N3和N4可经过AS2。”主干网在收到这个通知后，就发出通知：“要到达网络N1，N2，N3和N4可沿路径（AS1，AS2）。”同理，主干网还可发出通知：“要到达网络N5，N6和N可沿路径（AS1，AS3）。”</p>
</blockquote>
</li>
<li><p><strong>BGP报文格式</strong>：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/f8d9d7bee58fbf32d3c9047f36e18addpng.jpg#pic_center" alt="image-20230818152557320"></p>
</li>
<li><p><strong>特点</strong>：</p>
<p>1）BGP协议交换路由信息的结点数量级是自治系统的数量级，比这些自治系统中的网络数少很多</p>
<p>2）每一个自治系统中BGP发言人（或边界路由器）的数目是很少的，这样自治系统之间的路由选择不会很复杂</p>
<p>3）BGP支持CIDR，BGP的路由表包括目的网络前缀、下一跳路由器，以及到达该目的网络所要经过的各个自治系统序列</p>
<p>4）在BGP刚运行时，BGP的邻站交换整个BGP路由表。但以后只需要在发生变化时更新有变化的部分</p>
</li>
<li><p><strong>BGP-4的四种报文</strong></p>
<ul>
<li>打开（Open）报文。用来与相邻的另一个BGP发言人建立关系。</li>
<li>更新（Update）报文。用来发送某一路由的信息，以及列出要撤销的多条路由。</li>
<li>保活（Keepalive）报文。用来确认打开报文并周期性地证实邻站关系。</li>
<li>通知（Notification）报文。用来发送检测到的差错。</li>
</ul>
</li>
</ul>
</li>
</ol>
<p>​ RIP、OSPF与BGP的比较如表所示。</p>
<table>
<thead>
<tr>
<th align="center">协议</th>
<th align="center">RIP</th>
<th align="center">OSPF</th>
<th align="center">BGP</th>
</tr>
</thead>
<tbody><tr>
<td align="center">类型</td>
<td align="center">内部</td>
<td align="center">内部</td>
<td align="center">外部</td>
</tr>
<tr>
<td align="center">路由算法</td>
<td align="center">距离-向量</td>
<td align="center">链路状态</td>
<td align="center">路径-向量</td>
</tr>
<tr>
<td align="center">传递协议</td>
<td align="center">应用层 UDP</td>
<td align="center">网络层 IP</td>
<td align="center">应用层 TCP</td>
</tr>
<tr>
<td align="center">路径选择</td>
<td align="center">跳数最少</td>
<td align="center">代价最低</td>
<td align="center">较好，非最佳</td>
</tr>
<tr>
<td align="center">交换结点</td>
<td align="center">和本结点相邻的路由器</td>
<td align="center">网络中的所有路由器</td>
<td align="center">和本结点相邻的路由器</td>
</tr>
<tr>
<td align="center">交换内容</td>
<td align="center">自己的整个路由表</td>
<td align="center">与本路由器相邻的所有路由器的链路状态</td>
<td align="center">首次：整个路由表</td>
</tr>
<tr>
<td align="center">非首次：有变化的部分</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<h4 id="4-3-IPv4"><a href="#4-3-IPv4" class="headerlink" title="4.3 IPv4"></a>4.3 IPv4</h4><h5 id="4-3-1-IPv4分组"><a href="#4-3-1-IPv4分组" class="headerlink" title="4.3.1 IPv4分组"></a>4.3.1 IPv4分组</h5><ol>
<li>IPv4分组的格式</li>
</ol>
<p>​ 一个IP分组由首部和数据部分组成。首部长度<strong>20B</strong>固定，后面有可选字段，长度可变。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/7504f5659b9cb9baffecd4ccd8ebdc0epng.jpg#pic_center" alt="image-20230816172140328"></p>
<ul>
<li><p>版本：指IP协议的版本，目前广泛使用的版本号为4。</p>
</li>
<li><p>首部长度：单位是4B，最小为5，表示20B，最大是15，表示60B。</p>
</li>
<li><p>区分服务：指示期望获得哪种类型的服务。</p>
</li>
<li><p>总长度：首部+数据，单位是1B。</p>
</li>
<li><p>标识：16位，用于IP分片，同一数据报的分片使用同一标识。</p>
</li>
<li><p>标志：3位，只有后两位有意义，中间位DF，DF&#x3D;1，禁止分片；DF&#x3D;0，允许分片。最低位MF，MF&#x3D;1，后面“还有分片”；MF&#x3D;0，代表最后一片&#x2F;没分片。</p>
</li>
<li><p>片偏移：指出较长分组分片后，某片在原分组中的相对位置；以8B位单位。除了最后一个分片，每个分片数据部分长度一定是8B的整数倍。</p>
</li>
<li><p>生存时间（TTL）：IP分组的保质期。经过一个路由器-1变成0则丢弃。</p>
</li>
<li><p>协议：数据部分的协议，占8位。</p>
<table>
<thead>
<tr>
<th align="center">协议名</th>
<th align="center">ICMP</th>
<th align="center">IGMP</th>
<th align="center">TCP</th>
<th align="center">EGP</th>
<th align="center">IGP</th>
<th align="center">UDP</th>
<th align="center">IPv6</th>
<th align="center">ESP</th>
<th align="center">OSPF</th>
</tr>
</thead>
<tbody><tr>
<td align="center">字段值</td>
<td align="center">1</td>
<td align="center">2</td>
<td align="center">6</td>
<td align="center">8</td>
<td align="center">9</td>
<td align="center">17</td>
<td align="center">41</td>
<td align="center">50</td>
<td align="center">89</td>
</tr>
</tbody></table>
</li>
<li><p>首部检验和：16位，只检验首部。</p>
</li>
<li><p>源IP地址和目的IP地址：32位。</p>
</li>
<li><p>可选字段：0~40B，用来支持排错测量以及安全等措施</p>
</li>
<li><p>填充：全0，把首部补成4B的整数倍</p>
</li>
</ul>
<table>
<thead>
<tr>
<th align="center">段</th>
<th align="center">总长度</th>
<th align="center">片偏移</th>
<th align="center">首部长度</th>
</tr>
</thead>
<tbody><tr>
<td align="center">长度</td>
<td align="center">1B</td>
<td align="center">8B</td>
<td align="center">4B</td>
</tr>
</tbody></table>
<ol start="2">
<li>IP数据报分片</li>
</ol>
<p>​ <strong>最大传送单元（MTU）</strong>：一个链路层数据报能承载的最大数据量。以太网的MTU是<strong>1500字节</strong>。</p>
<p>​ 当IP数据报的总长度大于链路MTU时，就需要将IP数据报中的数据分装在多个较小的IP数据报中，这些较小的数据报称为<strong>片</strong>。 片在目的地的网络层被重新组装。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/a8c993a128334eda38199e04eab91e49png.jpg#pic_center" alt="image-20230817115152840"></p>
<p>​ IP分片利用首部的标识、标志和片偏移三部分完成。</p>
<ul>
<li>标识：创建IP数据报时，源主机为其加一个标识号，同一个数据报分片后，每片具有相同的标识。</li>
<li>标志：共3位，只有后两位有意义，<ul>
<li><strong>中间位DF</strong>（Don’t Fragment），DF&#x3D;1，禁止分片；DF&#x3D;0，允许分片。</li>
<li><strong>最低位MF</strong>（More Fragment），MF&#x3D;1，后面“还有分片”；MF&#x3D;0，代表最后一片&#x2F;没分片。</li>
</ul>
</li>
<li>片偏移：指出数据报分片后某片在原分组中的相对位置，以8B位单位。除了最后一个分片，每个分片数据部分长度一定是8B的整数倍。</li>
</ul>
<blockquote>
<p>如上图所示，一个长4000B的IP数据报（首部20B，数据报部分3980B）到达路由器后，需要在以太网转发（MTU &#x3D; 1500B）。需要将3980B数据分片，前2片，每片有效数据部分1480B，首部20B；后一片数据部分为1020B&#x3D;（3980-1480-1480）B，首部20B。</p>
<p>每一片的DF都为0，表示都允许分片。前两片MF&#x3D;1，表示并非最后一片;最后一片MF&#x3D;0，表示为最后一片。</p>
<p>第一片片偏移为0，第二片片偏移为首位数据地址&#x2F;8&#x3D;1480&#x2F;8&#x3D;185；第三片片偏移&#x3D;2960&#x2F;8&#x3D;370。</p>
</blockquote>
<h5 id="4-3-2-IPv4地址与NAT"><a href="#4-3-2-IPv4地址与NAT" class="headerlink" title="4.3.2 IPv4地址与NAT"></a>4.3.2 IPv4地址与NAT</h5><ol>
<li><p>IPv4地址</p>
<p>​ 连接到因特网的每台主机都分配一个32比特的全球唯一标识符，即<strong>IP地址</strong>。IP地址由互联网名字和数字地址分配机构ICANN进行分配。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/8bf5879a67252c714739ec8e8077e1dbpng.jpg#pic_center" alt="image-20230817142123571"></p>
<p>IP地址由网络号和主机号组成。<br>I P 地址 : : &#x3D; { &lt; 网络号 &gt; , &lt; 主机号 &gt; } IP地址::&#x3D;\{&lt;网络号&gt;,&lt;主机号&gt;\} IP地址::&#x3D;{&lt;网络号&gt;,&lt;主机号&gt;}<br><strong>网络号</strong>标志主机（或路由器）所连接到的网络。一个网络号在整个因特网唯一。</p>
<p><strong>主机号</strong>标志该主机（或路由器）自身。一台主机号在相同网络号范围是唯一的。</p>
<p>​ IPv4被分为了5类地址，分别适用于不同规模的网络。</p>
<table>
<thead>
<tr>
<th align="center">网络类型</th>
<th align="center">网络号</th>
<th align="center">用途</th>
</tr>
</thead>
<tbody><tr>
<td align="center">A类</td>
<td align="center">前8位，第1位为0（1-126）</td>
<td align="center">用于大型网络</td>
</tr>
<tr>
<td align="center">B类</td>
<td align="center">前16位，前2位为10（128-191）</td>
<td align="center">用于中等规模网络</td>
</tr>
<tr>
<td align="center">C类</td>
<td align="center">前24位，前3位为110（192~223）</td>
<td align="center">用于小型网络</td>
</tr>
<tr>
<td align="center">D类</td>
<td align="center">开头1110（224-239）</td>
<td align="center">多播地址，用于向多个目标发送数据</td>
</tr>
<tr>
<td align="center">E类</td>
<td align="center">开头1111（240-255）</td>
<td align="center">保留地址，目前还没有被使用</td>
</tr>
</tbody></table>
<p>​ 某些IP地址有着特殊用途，不能做主机IP地址。</p>
<ul>
<li><strong>主机号全为0</strong>表示<strong>本网络本身</strong>，如202.98.174.0。</li>
<li><strong>主机号全为1</strong>表示<strong>本网络的广播地址</strong>，又称直接广播地址，如202.98.174.255。</li>
<li><strong>127.×.×.×</strong>保留为<strong>环回自检</strong>（Loopback Test）地址，此地址表示任意主机本身，目的地址为环回地址的P数据报永远不会出现在任何网络上。</li>
<li><strong>32位全为0</strong>，即0.0.0.0表示本网络上的<strong>本主机</strong>。</li>
<li><strong>32位全为1</strong>，即255.255.255.255表示整个TCP&#x2F;P网络的广播地址，又称<strong>受限广播地址</strong>。实际使用时，由于路由器对广播域的隔离，255.255.255.255等效为<strong>本网络的广播地址</strong>。</li>
</ul>
<table>
<thead>
<tr>
<th align="center">网络类别</th>
<th align="center">最大可用网络数</th>
<th align="center">第一个可用的网络号</th>
<th align="center">最后一个可用的网络号</th>
<th align="center">网络中最大主机数</th>
</tr>
</thead>
<tbody><tr>
<td align="center">A</td>
<td align="center">27-2</td>
<td align="center">1</td>
<td align="center">126</td>
<td align="center">224-2</td>
</tr>
<tr>
<td align="center">B</td>
<td align="center">214</td>
<td align="center">128.0</td>
<td align="center">191.255</td>
<td align="center">216-2</td>
</tr>
<tr>
<td align="center">C</td>
<td align="center">221</td>
<td align="center">192.0.0</td>
<td align="center">223.255.255</td>
<td align="center">28-2</td>
</tr>
</tbody></table>
<blockquote>
<p>A类地址可用的网络数为27-2，减2的原因是：第一，网络号字段全为0的IP地址是保留地址，意思是“本网络”；第二，网络号为127的P地址是环回自检地址。</p>
</blockquote>
<table>
<thead>
<tr>
<th align="center">网络号</th>
<th align="center">主机号</th>
<th align="center">作为源地址</th>
<th align="center">作为目的地址</th>
<th align="center">用途</th>
</tr>
</thead>
<tbody><tr>
<td align="center">全0</td>
<td align="center">全0</td>
<td align="center">可以</td>
<td align="center">不可以</td>
<td align="center">本网范围内表示主机，路由表中用于表示默认路由</td>
</tr>
<tr>
<td align="center">（表示整个Internet网络）</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">全0</td>
<td align="center">特定值</td>
<td align="center">可以</td>
<td align="center">不可以</td>
<td align="center">表示本网内某个特定主机</td>
</tr>
<tr>
<td align="center">全1</td>
<td align="center">全1</td>
<td align="center">不可以</td>
<td align="center">可以</td>
<td align="center">本网广播地址（路由器不转发）</td>
</tr>
<tr>
<td align="center">特定值</td>
<td align="center">全0</td>
<td align="center">不可以</td>
<td align="center">不可以</td>
<td align="center">网络地址，表示一个网络</td>
</tr>
<tr>
<td align="center">特定值</td>
<td align="center">全1</td>
<td align="center">不可以</td>
<td align="center">可以</td>
<td align="center">直接广播地址，对特定网络上的所有主机进行广播</td>
</tr>
<tr>
<td align="center">127</td>
<td align="center">任何数</td>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">非全0&#x2F;1</td>
<td align="center">可以</td>
<td align="center">可以</td>
<td align="center">用于本地软件环回测试，称为环回地址</td>
<td align="center"></td>
</tr>
</tbody></table>
<p><strong>IP地址特点</strong>：</p>
<ul>
<li><p>IP地址是一种分等级的地址结构。其好处如下：</p>
<p>①在分配IP地址时只分配网络号，而主机号则由得到该网络的单位自行分配，方便了 IP地址的管理；</p>
<p>②路由器仅根据目的主机所连接的网络号来转发分组，减小了路由表所占的存储空间。</p>
</li>
<li><p>IP地址是标志一台主机（或路由器）和一条链路的接口。</p>
</li>
</ul>
<p>当一台主机同时连接到两个网络时，该主机就必须同时具有两个相应的IP地址，每个IP地址的网络号必须与所在网络的网络号相同，且这两个IP地址的主机号是不同的。</p>
<p>IP网络上的一个路由器必然至少应具有两个IP地址（路由器每个端口必须至少分配一个IP地址）。</p>
<ul>
<li><p>用网桥连接的若干LAN仍然是同一个网络（同一个广播域），因此该LAN中所有主机的IP地址的网络号必须相同，但主机号必须不同。</p>
</li>
<li><p>在IP地址中，所有分配到网络号的网络（无论是LAN还是WAN）都是平等的。</p>
</li>
<li><p>在同一个局域网上的主机或路由器的IP地址中的网络号必须是一样的。</p>
</li>
</ul>
<blockquote>
<p>由于广泛使用无分类IP地址进行路由选择，这种传统分类的IP地址已成为历史。</p>
</blockquote>
</li>
<li><p>网络地址转换（NAT）</p>
<p>​ <strong>网络地址转换</strong>（NAT）是指通过将专用网络地址（如Intranet）转换为公用地址（如Internet），从而对外隐藏内部管理的IP地址。其优势如下：</p>
<ul>
<li>它使得整个专用网只<strong>需要一个全球IP地址</strong>就可以与因特网连通。</li>
<li>由于<strong>专用网本地IP地址是可重用</strong>的，所以NAT大大节省了IP地址的消耗。</li>
<li>它隐藏了内部网络结构，从而<strong>降低了内部网络受到攻击的风险</strong>。</li>
</ul>
<p>为了网络安全，划出了部分IP地址为<strong>私有IP地址</strong>。其特点如下：</p>
<ul>
<li><p>私有IP只用于LAN，不用于WAN连接。因此私有IP地址不能直接用于Internet，必须通过网关利用NAT把私有IP地址转换为Internet中合法的全球IP地址后才能用于Internet。</p>
</li>
<li><p>私有IP地址被LAN重复使用。有效地解决了P地址不足的问题。</p>
</li>
</ul>
<p><strong>私有IP地址网段</strong>如下：</p>
<ul>
<li>A类：1个A类网段，即<strong>10</strong>.0.0.0~<strong>10</strong>.255.255.255。</li>
<li>B类：16个B类网段，即<strong>172.16</strong>.0.0~<strong>172.31</strong>.255.255。</li>
<li>C类：256个C类网段，即<strong>192.168</strong>.0.0~<strong>192.168</strong>.255.255。</li>
</ul>
<p>​ 在因特网中的所有路由器，对目的地址是私有地址的数据报一律不进行转发。</p>
<p>​ 这种采用私有 IP地址的互联网络称为<strong>专用互联网</strong>或<strong>本地互联网</strong>。私有IP地址也称<strong>可重用地址</strong>。</p>
<p>​ 使用NAT时需要在专用网连接到因特网的路由器上安装NAT软件，NAT路由器至少有一个有效的外部<strong>全球IP地址</strong>。使用本地地址的主机和外界通信时，NAT路由器使用<strong>NAT转换表</strong>进行本地IP地址和全球IP地址的转换。</p>
<p>​ NAT转换表存放着 { 本地 I P 地址：端口 } \{本地IP地址：端口\} {本地IP地址：端口}到 { 全球 I P 地址：端口 } \{全球IP地址：端口\} {全球IP地址：端口}的映射。该端口号是逻辑上的端口。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/6c30e5e4c0eca1ee039a63bf4dfac707png.jpg#pic_center" alt="image-20230817154901058"></p>
<blockquote>
<p>例，一个宿舍办理了电信宽带，拥有了一个全球IP：138.76.29.7；宿舍内4台主机有了私有地址：192.168.0.0网段。宿舍网关开启NAT功能，NAT表如上图所示。</p>
<p>当路由器LAN端收到源IP为192.168.0.2,2233时，将其映射为138.76.29.7,5001，从WAN口发至因特网。</p>
<p>当路由器从WAN端收到目的地址为138.76.29.7,5060的数据报时，将其映射成192.168.0.3,1234，然后从LAN端口发送给相应的本地主机。</p>
</blockquote>
</li>
</ol>
<p>​ <strong>NAT工作原理</strong>：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/99e83e2d74a73b12407f9b4f74938ef8png.jpg#pic_center" alt="image-20230817161347419"></p>
<ul>
<li>①假设用户主机10.0.0.1（随机端口3345）向Web服务器128.119.40.186（端口80）发送请求。</li>
<li>②NAT路由器收到IP分组后，为该IP分组生成一个新端口号5001，将IP分组的源地址更改为138.76.29.7（即NAT路由器的全球IP地址），将源端口号更改为5001。NAT路由器在NAT转换表中增加一个表项。</li>
<li>③Web服务器并不知道刚抵达的IP分组已被NAT路由器进行了改装，更不知道用户的专用地址，它响应的IP分组的目的地址是NAT路由器的全球IP地址，目的端口号是5001。</li>
<li>④响应分组到达NAT路由器后，通过NAT转换表将IP分组的目的IP地址更改为10.0.0.1，将目的端口号更改为3345。</li>
</ul>
<blockquote>
<p>普通路由器在转发P数据报时，不改变其源P地址和目的P地址。而NAT路由器在转发IP数据报时，一定要更换其IP地址（转换源P地址或目的IP地址）。</p>
<p>普通路由器仅工作在<strong>网络层</strong>，而NAT路由器转发数据报时需要查看和转换<strong>传输层的端口号</strong>。</p>
</blockquote>
<h5 id="4-3-3-子网划分与子网掩码、CIDR"><a href="#4-3-3-子网划分与子网掩码、CIDR" class="headerlink" title="4.3.3 子网划分与子网掩码、CIDR"></a>4.3.3 子网划分与子网掩码、CIDR</h5><ol>
<li><p>子网划分</p>
<p>由于两级IP地址有以下缺点，于是在IP增加<strong>子网号段</strong>：</p>
<ul>
<li><p>IP地址空间的利用率有时很低</p>
</li>
<li><p>给每个物理网络分配一个网络号会使路由表变得太大而使网络性能变坏</p>
</li>
<li><p>两级的IP地址不够灵活。</p>
</li>
</ul>
<p><strong>子网划分</strong>：增加子网号段，使两级IP变成三级IP地址。基本思路如下：</p>
<ul>
<li><p>子网划分纯属一个单位内部的事情。单位对外仍然表现为没有划分子网的网络。</p>
</li>
<li><p>从主机号借位作为子网号；三级IP地址结构如下：<br>I P 地址 &#x3D; { &lt; 网络号 &gt; , &lt; 子网号 &gt; , &lt; 主机号 &gt; } IP地址&#x3D;\{&lt;网络号&gt;,&lt;子网号&gt;,&lt;主机号&gt;\} IP地址={&lt;网络号&gt;,&lt;子网号&gt;,&lt;主机号&gt;}</p>
</li>
<li><p>凡是从其他网络发送给本单位某台主机的IP数据报，仍然是根据IP数据报的目的网络号先找到连接到本单位网络上的路由器。然后该路由器在收到IP数据报后，按目的网络号和子网号找到目的子网。最后把IP数据报直接交付给目的主机。</p>
</li>
</ul>
<p><strong>性质</strong>：</p>
<ul>
<li><p>子网中的主机号为全0或全1的地址都不能被指派</p>
</li>
<li><p>子网中的主机号全0的地址为子网的<strong>网络号</strong>，主机号全1的地址为子网的<strong>广播地址</strong></p>
</li>
</ul>
</li>
<li><p>子网掩码</p>
<p>​ 为了告诉主机或路由器对网络进行了子网划分，使用<strong>子网掩码</strong>来表达对原网络中主机号的<strong>借位</strong>。</p>
<p>​ <strong>子网掩码</strong>是一个与IP地址相对应的、长32bit的二进制串，它由一串1和跟随的一串0组成。1对应于IP地址中的网络号及子网号，而0对应于主机号。</p>
<p>​ 规定所有网络必需使用子网掩码，不划分采用默认子网掩码：</p>
<ul>
<li>A类：255.0.0.0</li>
<li>B类：255.255.0.0</li>
<li>C类：255.255.255.0</li>
</ul>
<p>注意：</p>
<p>1）一个主机在设置IP地址信息的同时，必须设置子网掩码</p>
<p>2）同属于一个子网的所有主机以及路由器的相应端口，必须设置相同的子网掩码</p>
<p>3）路由器的路由表中，所包含的信息其主要内容必须有：目的网络地址、子网掩码、下一跳地址</p>
</li>
<li><p>无分类编址CIDR</p>
<p>​ <strong>无分类域间路由选择CIDR</strong>是在变长子网掩码的基础上提出的一种消除传统A、B、C类网络划分，并且可以在软件的支持下实现超网构造的一种IP地址的划分方法。 IP地址结构如下：<br>I P : : &#x3D; { &lt; 网络前缀 &gt; , &lt; 主机号 &gt; } IP::&#x3D;\{&lt;网络前缀&gt;,&lt;主机号&gt;\} IP::&#x3D;{&lt;网络前缀&gt;,&lt;主机号&gt;}<br>​ CIDR地址块中的地址数一定是2的整数次幕，实际可指派的地址数通常为2N-2；N表示主机号的位数，主机号全0代表网络号，主机号全1为广播地址。</p>
<p>​ <strong>CIDR记法</strong>：IP地址后加上“&#x2F;”，然后写上网络前缀（可以任意长度）的位数。</p>
<blockquote>
<p>例如，对于128.14.32.5&#x2F;20这个地址，它的掩码是20个连续的1和后续12个连续的0，通过逐位相“与”的方法可以得到该地址的网络前缀（或直接截取前20位）：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/c4d25b2997a4fc8e8cb72888a0fe7ef7png.jpg#pic_center" alt="image-20230817170446467"></p>
</blockquote>
<p>​ <strong>构成超网</strong>：将多个子网聚合成一个较大的子网，叫做构成超网，或路由聚合。</p>
<p>​ 路由聚合使得路由表中的一个项目可以表示多个原来传统分类地址的路由，有利于减少路由器之间的信息的交换，从而提高网络性能。</p>
<p>​ 方法：将网络前缀缩短（所有网络地址取交集）。</p>
<blockquote>
<p>例如，网络1的地址块是206.1.0.0&#x2F;17；网络2的地址块是206.1.128.0&#x2F;17。</p>
<p>可以看出两个网络前16位相同，第17位分别是0和1，因此可以聚合成更大地址块206.1.0.0&#x2F;16。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/372575f9bca2f1f2d2d0fc67d39b8509png.jpg#pic_center" alt="image-20230817171351432"></p>
<p>如果不使用路由聚合，那么R1的路由表中需要分别有到网络1和网络2的路由表项。聚合后，到网络1和网络2的两条路由就可以聚合成一条到206.1.0.0&#x2F;16的路由。</p>
</blockquote>
<p>​ <strong>最长前缀匹配</strong>：使用CIDR时，查找路由表可能得到几个匹配结果（跟网络掩码按位相与），应选择具有最长网络前缀的路由。前缀越长，地址块越小，路由越具体。</p>
<p>​ <strong>CIDR查找路由表的方法</strong>：为了更加有效地查找最长前缀匹配，通常将无分类编址的路由表存放在一种层次式数据结构中，然后自上而下地按层次进行查找。这里最常用的数据结构就是二叉线索。</p>
</li>
<li><p>网络层转发分组的过程</p>
</li>
</ol>
<p>​ 分组转发都是基于目的主机所在网络的，这是因为互联网上的网络数远小于主机数，可以极大地压缩转发表的大小。当分组到达路由器后，路由器根据目的IP地址的网络前缀来查找转发表，确定下一跳应当到哪个路由器。</p>
<p>​ 在转发表中，每条路由必须有下面两条信息：<br>( 目的地址，下一跳地址 ) (目的地址，下一跳地址) (目的地址，下一跳地址)<br>​ 这样，IP数据报最终一定可以找到目的主机所在目的网络上的路由器（可能要通过多次间接交付），当到达最后一个路由器时，才试图向目的主机进行直接交付。</p>
<p>​ 采用CIDR编址时，如果一个分组在转发表中可以找到多个匹配的前缀，那么应当选择前缀最长的一个作为匹配的前缀，称为最长前缀匹配。</p>
<p>​ 为了更快地查找转发表，可以按照<strong>前缀的长短排序</strong>，将前缀最长的排在第1行，按前缀长度的降序排列。这样，从第1行最长的开始查找，只要检索到匹配的，就不必再继续查找。</p>
<p>​ 此外，转发表中还可以增加两种特殊的路由：</p>
<ul>
<li><p><strong>主机路由</strong>：对特定目的主机的IP地址专门指明一个路由，以方便网络管理员控制和测试网络。若特定主机的IP地址是a.b.c.d，则转发表中对应项的目的网络是a.b.c.d&#x2F;32。<br>&#x2F;32表示的子网掩码没有意义，但这个特殊的前缀可以用在转发表中。</p>
</li>
<li><p><strong>默认路由</strong>：用特殊前缀0.0.0.0&#x2F;0表示默认路由，全0掩码和任何目的地址进行按位与运算，结果必然为全0，即必然和转发表中的0.0.0.0&#x2F;0相匹配。只要目的网络是其他网络（不在转发表中），就一律选择默认路由。</p>
<p><strong>分组转发算法</strong>如下：</p>
<p>1）从收到的IP分组的首部提取目的主机的IP地址D（即目的地址）。</p>
<p>2）若查找到特定主机路由（目的地址为D），就按照这条路由的下一跳转发分组；否则从转发表中的下一条（即按前缀长度的顺序）开始检查，执行步骤3）。</p>
<p>3）将这一行的子网掩码与目的地址D进行按位与运算。若运算结果与本行的前缀匹配，则查找结束，按照“下一跳”指出的进行处理（或者直接交付本网络上的目的主机，或通过指定接口发送到下一跳路由器）。否则，若转发表还有下一行，则对下一行进行检查，重新执行步骤3）。否则，执行步骤4）。</p>
<p>4）若转发表中有一个默认路由，则把分组传送给默认路由；否则，报告转发分组出错。</p>
</li>
</ul>
<h5 id="4-3-4-ARP、DHCP与ICMP"><a href="#4-3-4-ARP、DHCP与ICMP" class="headerlink" title="4.3.4 ARP、DHCP与ICMP"></a>4.3.4 ARP、DHCP与ICMP</h5><ol>
<li><p>IP地址与硬件地址</p>
<p><strong>IP地址</strong>是网络层使用的地址，它是分层次等级的。</p>
<p><strong>硬件地址</strong>是数据链路层使用的地址（MAC地址），它是平面式的。</p>
<p>​ 在网络层及网络层之上使用IP地址，IP地址放在IP数据报的首部，而MAC地址放在MAC帧的首部。通过数据封装，把IP数据报分组封装为MAC帧后，数据链路层看不见数据报分组中的IP地址。</p>
<p>​ 1）在IP层抽象的互联网上只能看到IP数据报。</p>
<p>​ 2）虽然在IP数据报首部中有源IP地址，但路由器只根据目的IP地址进行转发。</p>
<p>​ 3）在局域网的链路层，只能看见MAC帧。IP数据报被封装在MAC帧中，通过路由器转发IP分组时，IP分组在每个网络中都被路由器解封装和重新封装，其MAC帧首部中的源地址和目的地址会不断改变。这也决定了无法使用MAC地址跨网络通信。</p>
<p>​ 4）尽管互连在一起的网络的硬件地址体系各不相同，但IP层抽象的互联网却屏蔽了下层这些复杂的细节。只要我们在网络层上讨论问题，就能够使用统一的、抽象的IP地址研究主机与主机或路由器之间的通信。</p>
</li>
<li><p>地址解析协议（ARP）</p>
<p>​ 无论网络层使用什么协议，在实际网络的链路上传送数据帧时，最终必须使用<strong>硬件地址</strong>。</p>
<p>​ **地址解析协议（ARP）**作用是完成IP地址到MAC地址的映射。</p>
<p>​ <strong>ARP表</strong>：局域网上各主机和路由器的<strong>IP地址到MAC地址的映射表</strong>，称<strong>ARP表</strong>。使用ARP来动态维护ARP表。</p>
<p>​ <strong>工作原理</strong>：</p>
<ul>
<li><p>主机A欲向本局域网上的某台主机B发送IP数据报时，先在其ARP高速缓存中查看有无主机B的IP地址。</p>
<ul>
<li>如果有，就可查出其对应的硬件地址，再将此硬件地址写入MAC帧，然后通过局域网将该MAC帧发往此硬件地址。</li>
<li>如果没有，那么就通过使用目的MAC地址为FFFF-FF-FF-FF-FF的帧来封装并广播ARP请求分组（广播发送），使同一个局域网里的所有主机都收到此ARP请求。</li>
</ul>
</li>
<li><p>主机B收到该ARP请求后，向主机A发出ARP响应分组（单播发送），分组中包含<strong>主机B的IP与MAC地址的映射关系</strong>，主机A收到ARP响应分组后就将此映射写入ARP缓存，然后按查询到的硬件地址发送MAC帧。</p>
<blockquote>
<p>ARP由于“看到了”IP地址，所以它工作在网络层，而NAT路由器由于“看到了”端口，所以它工作在传输层。</p>
</blockquote>
<p><strong>使用ARP的4种典型情况总结如下</strong>：</p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/c2c2bbd0b3e6adddb1a74a01d1ca8de5png.jpg#pic_center" alt="image-20230817175108090"></p>
<ul>
<li>发送方是<strong>主机</strong>（如H1），要把IP数据报发送到<strong>本网络上的另一台主机</strong>（如H2）。这时H1在网1用ARP找到目的主机H2的硬件地址。</li>
<li>发送方是<strong>主机</strong>（如H1），要把IP数据报发送到<strong>另一个网络上的一台主机</strong>（如H3）。这时H1用ARP找到与网1连接的<strong>路由器R1</strong>的硬件地址，剩下的工作由R1来完成。</li>
<li>发送方是<strong>路由器</strong>（如R1），要把IP数据报转发到<strong>与R1连接的网络（网2）上的一台主机（如H3）</strong>。这时R1在网2用ARP找到目的主机H3的硬件地址。</li>
<li>发送方是<strong>路由器</strong>（如R1），要把IP数据报转发到<strong>网3上的一台主机</strong>（如H4）。这时R1在网2用ARP找到与网2连接的<strong>路由器R2的硬件地址</strong>，剩下的工作由R2来完成。</li>
</ul>
<blockquote>
<p>从IP地址到硬件地址的解析是自动进行的，主机的用户并不知道这种地址解析过程</p>
</blockquote>
</li>
<li><p>动态主机配置协议（DHCP）</p>
<p>​ <strong>动态主机配置协议</strong>(Dynamic Host Configuration Protocol, DHCP)常用于给主机<strong>动态分配IP地址</strong>。</p>
<p>​ <strong>工作原理</strong>：应用层协议，使用客户&#x2F;服务器方式，客户端和服务端通过广播方式进行交互，基于UDP。</p>
<ul>
<li><p>1）需要IP地址的主机在启动时向DHCP服务器广播发送发现报文，这时该主机成为DHCP客户</p>
</li>
<li><p>2）本地网络上所有主机都能收到此广播报文，但只有DHCP服务器才回答此广播报文。DHCP服务器先在其数据库中查找该计算机的配置信息</p>
</li>
<li><p>3）若找到，则返回找到的信息。若找不到，则从服务器的IP地址池中取一个地址分配给该计算机。DHCP服务器的回答报文叫做提供报文</p>
</li>
</ul>
<p>​ DHCP服务器与客户端<strong>交换过程</strong>：</p>
<ul>
<li>1）DHCP客户机<strong>广播</strong>“<strong>DHCP发现</strong>”消息，试图找到网络中的DHCP服务器，以便从DHCP服务器获得一个IP地址。源地址为0.0.0.0，目的地址为255.255.255.255。</li>
<li>2）DHCP服务器收到“DHCP发现”消息后，<strong>广播</strong>“<strong>DHCP提供</strong>”消息，其中包括提供给DHCP客户机的<strong>IP地址</strong>。源地址为<strong>DHCP服务器地址</strong>，目的地址为255.255.255.255。</li>
<li>3）DHCP客户机收到“<strong>DHCP提供</strong>”消息，如果接受该IP地址，那么就广播“<strong>DHCP请求</strong>”消息向DHCP服务器请求提供IP地址。源地址为0.0.0.0，目的地址为255.255.255.255。</li>
<li>4）DHCP服务器<strong>广播</strong>“<strong>DHCP确认</strong>”消息，将IP地址<strong>分配给DHCP客户机</strong>。源地址为DHCP服务器地址，目的地址为255.255.255.255。</li>
</ul>
<p>#mermaid-svg-JQ7ZviGKPnUQkqRC {font-family:”trebuchet ms”,verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-svg-JQ7ZviGKPnUQkqRC .error-icon{fill:#552222;}#mermaid-svg-JQ7ZviGKPnUQkqRC .error-text{fill:#552222;stroke:#552222;}#mermaid-svg-JQ7ZviGKPnUQkqRC .edge-thickness-normal{stroke-width:2px;}#mermaid-svg-JQ7ZviGKPnUQkqRC .edge-thickness-thick{stroke-width:3.5px;}#mermaid-svg-JQ7ZviGKPnUQkqRC .edge-pattern-solid{stroke-dasharray:0;}#mermaid-svg-JQ7ZviGKPnUQkqRC .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-svg-JQ7ZviGKPnUQkqRC .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-svg-JQ7ZviGKPnUQkqRC .marker{fill:#333333;stroke:#333333;}#mermaid-svg-JQ7ZviGKPnUQkqRC .marker.cross{stroke:#333333;}#mermaid-svg-JQ7ZviGKPnUQkqRC svg{font-family:”trebuchet ms”,verdana,arial,sans-serif;font-size:16px;}#mermaid-svg-JQ7ZviGKPnUQkqRC .actor{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#mermaid-svg-JQ7ZviGKPnUQkqRC text.actor&gt;tspan{fill:black;stroke:none;}#mermaid-svg-JQ7ZviGKPnUQkqRC .actor-line{stroke:grey;}#mermaid-svg-JQ7ZviGKPnUQkqRC .messageLine0{stroke-width:1.5;stroke-dasharray:none;stroke:#333;}#mermaid-svg-JQ7ZviGKPnUQkqRC .messageLine1{stroke-width:1.5;stroke-dasharray:2,2;stroke:#333;}#mermaid-svg-JQ7ZviGKPnUQkqRC #arrowhead path{fill:#333;stroke:#333;}#mermaid-svg-JQ7ZviGKPnUQkqRC .sequenceNumber{fill:white;}#mermaid-svg-JQ7ZviGKPnUQkqRC #sequencenumber{fill:#333;}#mermaid-svg-JQ7ZviGKPnUQkqRC #crosshead path{fill:#333;stroke:#333;}#mermaid-svg-JQ7ZviGKPnUQkqRC .messageText{fill:#333;stroke:#333;}#mermaid-svg-JQ7ZviGKPnUQkqRC .labelBox{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#mermaid-svg-JQ7ZviGKPnUQkqRC .labelText,#mermaid-svg-JQ7ZviGKPnUQkqRC .labelText&gt;tspan{fill:black;stroke:none;}#mermaid-svg-JQ7ZviGKPnUQkqRC .loopText,#mermaid-svg-JQ7ZviGKPnUQkqRC .loopText&gt;tspan{fill:black;stroke:none;}#mermaid-svg-JQ7ZviGKPnUQkqRC .loopLine{stroke-width:2px;stroke-dasharray:2,2;stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);}#mermaid-svg-JQ7ZviGKPnUQkqRC .note{stroke:#aaaa33;fill:#fff5ad;}#mermaid-svg-JQ7ZviGKPnUQkqRC .noteText,#mermaid-svg-JQ7ZviGKPnUQkqRC .noteText&gt;tspan{fill:black;stroke:none;}#mermaid-svg-JQ7ZviGKPnUQkqRC .activation0{fill:#f4f4f4;stroke:#666;}#mermaid-svg-JQ7ZviGKPnUQkqRC .activation1{fill:#f4f4f4;stroke:#666;}#mermaid-svg-JQ7ZviGKPnUQkqRC .activation2{fill:#f4f4f4;stroke:#666;}#mermaid-svg-JQ7ZviGKPnUQkqRC .actorPopupMenu{position:absolute;}#mermaid-svg-JQ7ZviGKPnUQkqRC .actorPopupMenuPanel{position:absolute;fill:#ECECFF;box-shadow:0px 8px 16px 0px rgba(0,0,0,0.2);filter:drop-shadow(3px 5px 2px rgb(0 0 0 &#x2F; 0.4));}#mermaid-svg-JQ7ZviGKPnUQkqRC .actor-man line{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;}#mermaid-svg-JQ7ZviGKPnUQkqRC .actor-man circle,#mermaid-svg-JQ7ZviGKPnUQkqRC line{stroke:hsl(259.6261682243, 59.7765363128%, 87.9019607843%);fill:#ECECFF;stroke-width:2px;}#mermaid-svg-JQ7ZviGKPnUQkqRC :root{–mermaid-font-family:”trebuchet ms”,verdana,arial,sans-serif;} 客户端 服务器 DHCP发现 DHCP提供 DHCP请求 DHCP确认 客户端 服务器</p>
<p>​ <strong>DHCP特点</strong>：</p>
<ul>
<li>DHCP允许网络上<strong>配置多台DHCP服务器</strong>，当DHCP客户机发出“DHCP发现”消息时，有可能收到多个应答消息。这时，DHCP<strong>客户机</strong>只会挑选其中的一个，通常挑选最先到达的。</li>
<li>DHCP服务器分配给DHCP客户的<strong>IP地址是临时</strong>的，因此DHCP客户只能在一段有限的时间内使用这个分配到的IP地址。DHCP称这段时间为<strong>租用期</strong>。租用期的数值应由DHCP服务器自己决定，DHCP客户也可在自己发送的报文中提出对租用期的要求。</li>
<li>DHCP的客户端和服务器端需要通过<strong>广播方式</strong>来进行交互，原因是在DHCP执行初期，客户端不知道服务器端的IP地址，而在执行中间，<strong>客户端并未被分配IP地址</strong>，从而导致两者之间的通信必须采用<strong>广播</strong>的方式。采用<strong>UDP</strong>而不采用TCP的原因也很明显：<strong>TCP需要建立连接</strong>，如果连对方的IP地址都不知道，那么更不可能通过双方的套接字建立连接。</li>
<li>DHCP是应用层协议，因为它是通过客户&#x2F;服务器模式工作的，DHCP客户端向DHCP服务器请求服务，而其他层次的协议是没有这两种工作方式的。</li>
</ul>
</li>
<li><p>网际控制报文协议（ICMP）</p>
<p>​ <strong>网际控制报文协议</strong>（Internet Control Message Protocol，ICMP）提高IP数据报交付成功的机会。</p>
<p>​ ICMP是网络层协议。ICMP报文作为IP层数据报的数据，加上数据报的首部，组成IP数据报发送出去。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/262d5255365d1e6e2c26e6f4544487bfpng.jpg#pic_center" alt="image-20230818095720773"></p>
<p>​ ICMP分为两类，即<strong>ICMP差错报告报文</strong>和<strong>ICMP询问报文</strong>。</p>
<ul>
<li><p><strong>ICMP差错报告报文</strong>：用于目标主机或到目标主机路径上的<strong>路由器向源主机报告差错和异常情况</strong>。</p>
<p>ICMP差错报告报文可分为以下5类：</p>
<ul>
<li><strong>终点不可达</strong>。当路由器或主机不能交付数据报时，就向源点发送终点不可达报文。</li>
<li><strong>源点抑制</strong>。当路由器或主机由于<strong>拥塞</strong>而丢弃数据报时，就向源点发送源点抑制报文。</li>
<li><strong>时间超过</strong>。当路由器<strong>收到生存时间（TTL）为零</strong>的数据报时，除丢弃该数据报外，还要向源点发送时间超过报文。当终点在预先规定的时间内不能收到一个数据报的全部数据报片时，就把已收到的数据报片都丢弃，并向源点发送时间超过报文。</li>
<li><strong>参数问题</strong>。当路由器或目的主机收到的数据报的首部中有的<strong>字段的值不正确</strong>时，就丢弃该数据报，并向源点发送参数问题报文。</li>
<li><strong>改变路由（重定向）</strong>。路由器把改变路由报文发送给主机，让主机知道下次应将数据报发送给另外的路由器（可通过更好的路由）。</li>
</ul>
<p>ICMP差错报告报文格式如下：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/4dce3339e3cbd96eb86eecaaf9faa902png.jpg#pic_center" alt="image-20230818100345654"></p>
<p>​ 把收到的需要进行差错报告的<strong>IP数据报</strong>的<strong>首部</strong>和<strong>数据字段的前8个字节</strong>提取出来，作为ICMP报文的数据字段。再加上相应的ICMP差错报告报文的<strong>前8个字节</strong>，就构成了<strong>ICMP差错报告报文</strong>。</p>
<p>​ 提取收到的数据报的数据字段前8个字节是为了<strong>得到运输层的端口号</strong>（对于TCP和UDP）以及运输<strong>层报文的发送序号</strong>（对于TCP）。</p>
<p>​ 整个ICMP报文作为IP数据报的数据字段发送给源点。</p>
<p>​ 不应发送ICMP差错报告报文的几种情况如下：</p>
<ul>
<li>1）对ICMP差错报告报文不再发送ICMP差错报告报文。</li>
<li>2）对第一个分片的数据报片的所有后续数据报片都不发送ICMP差错报告报文。</li>
<li>3）对具有组播地址的数据报都不发送ICMP差错报告报文。</li>
<li>4）对具有特殊地址（如127.0.0.0或0.0.0.0）的数据报不发送ICMP差错报告报文。</li>
</ul>
</li>
<li><p><strong>ICMP询问报文</strong>：共有以下几类，常用的是前两类。</p>
<ul>
<li><strong>回送请求和回答报文</strong>：主机或路由器向特定目的主机发出的询问，收到此报文的主机必须给源主机或路由器发送ICMP回送回答报文。<strong>测试目的站是否可达以及了解其相关状态</strong>。</li>
<li><strong>时间戮请求和回答报文</strong>：请主机或路由器回答当前的日期和时间。用来进行时钟同步和测量时间。</li>
<li><strong>掩码地址请求和回答报文</strong></li>
<li><strong>路由器询问和通告报文</strong></li>
</ul>
<blockquote>
<p>PING：测试两个主机之间的连通性，使用了ICMP回送请求和回答报文。工作在应用层。</p>
<p>Traceroute: 跟踪一个分组从源点到终点的路径, 使用了ICMP时间超过差错报告报文; 工作在网络层。</p>
</blockquote>
</li>
</ul>
</li>
</ol>
<table>
<thead>
<tr>
<th align="center">协议</th>
<th align="center">工作层次</th>
<th align="center">功能</th>
</tr>
</thead>
<tbody><tr>
<td align="center">ARP</td>
<td align="center">网络层</td>
<td align="center">IP到MAC地址的映射</td>
</tr>
<tr>
<td align="center">DHCP</td>
<td align="center">应用层；基于UDP；客户&#x2F;服务器模式</td>
<td align="center">动态分配IP地址</td>
</tr>
<tr>
<td align="center">ICMP</td>
<td align="center">网络层；基于IP</td>
<td align="center">检测网络连通性和故障诊断</td>
</tr>
</tbody></table>
<h4 id="4-4-IPv6-1"><a href="#4-4-IPv6-1" class="headerlink" title="4.4 IPv6"></a>4.4 IPv6</h4><h5 id="4-4-1-IPv6的主要特点"><a href="#4-4-1-IPv6的主要特点" class="headerlink" title="4.4.1 IPv6的主要特点"></a>4.4.1 IPv6的主要特点</h5><ol>
<li><p>解决IP地址耗尽问题措施有以下三种：</p>
<ul>
<li>①采用无类别编址CIDR，使IP地址的分配更加合理；</li>
<li>②采用网络地址转换（NAT）方法以节省全球IP地址；</li>
<li>③采用具有更大地址空间的新版本的IPv6。</li>
</ul>
<p>其中前两种方法只是延长了IPv4地址分配完毕的时间，只有第三种方法<strong>从根本上解决了IP地址的耗尽问题</strong>。</p>
</li>
<li><p>IPv6<strong>特点</strong>如下：</p>
<ul>
<li>1）更大的地址空间。IPv6将地址从IPv4的32位增大到了128位。IPv6的字节数（16B）是IPv4字节数（4B）的平方。</li>
<li>2）扩展的地址层次结构。</li>
<li>3）灵活的首部格式。</li>
<li>4）改进的选项。</li>
<li>5）允许协议继续扩充。</li>
<li>6）支持即插即用（即自动配置）。</li>
<li>7）支持资源的预分配。</li>
<li>8）IPν6只有在包的源结点才能分片，是端到端的，传输路径中的路由器不能分片，所以从一般意义上说，IPv6不允许分片（不允许类似IPv4的路由分片）。</li>
<li>9）IPv6首部长度必须是8B的整数倍，而IPv4首部是4B的整数倍。</li>
<li>10）增大了安全性。身份验证和保密功能是PV6的关键特征。</li>
</ul>
</li>
<li><p>IPv6数据报格式</p>
<p>IPv6数据报由两大部分组成，即<strong>基本首部</strong>（base header）和后面的<strong>有效载荷</strong>（payload）。</p>
<p>有效载荷允许有零个或<strong>多个扩展首部</strong>（extension header），再后面是数据部分。但所有的扩展首部并不属于IPv6数据报的首部。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/6a054a8048cc07f90e4cbcf53eead7bfpng.jpg#pic_center" alt="image-20230818104258996"></p>
<p>与IPv4的首部区别有：</p>
<ul>
<li>取消了首部长度字段，因为它的首部长度是固定的（40字节）。</li>
<li>取消了服务类型字段，因为优先级和流标号字段实现了服务类型字段的功能。</li>
<li>取消了总长度字段，改用有效载荷长度字段。</li>
<li>取消了标识、标志和片偏移字段，因为这些功能已包含在分片扩展首部中。</li>
<li>把TTL字段改称为跳数限制字段，但作用是一样的（名称与作用更加一致）。</li>
<li>取消了协议字段，改用下一个首部字段。</li>
<li>取消了<strong>检验和字段</strong>，这样就加快了路由器处理数据报的速度。我们知道，在数据链路层对检测出有差错的帧就丢弃。在运输层，当使用UDP时，若检测出有差错的用户数据报就丢弃。当使用TCP时，对检测出有差错的报文段就重传，直到正确传送到目的进程为止。因此在网络层的差错检测可以精简掉。</li>
<li>取消了选项字段，而用扩展首部来实现选项功能。</li>
</ul>
<p>把首部字段不必要功能取消后，使得IPv6首部字段减少到8个，首部结构如下。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/4286117f750f120329f3df28123c9dcepng.jpg#pic_center" alt="image-20230818104908071"></p>
<ul>
<li><p>版本：指明了协议版本，字段是6。</p>
</li>
<li><p>通信量类：区分数据报的类别和优先级。</p>
</li>
<li><p>流标号：“流”是互联网络上从特定源点到特定终点的一系列数据报。所有属于同个流的数据报都具有同样的流标号。</p>
</li>
<li><p>有效载荷长度：指明数据报扩展首部加数据长度，最大值是64K。</p>
</li>
<li><p>下一个首部：有扩展首部时，标识下一个扩展首部；没有扩展首部时，指出数据应交付的上层协议。</p>
</li>
<li><p>跳数限制：相当于IPv4的TTL，最大为255。</p>
</li>
</ul>
<p><strong>扩展首部功能</strong>：IPv6把原来IPv4首部中选项的功能都放在扩展首部中，并把扩展首部留给路径两端的源点和终点的主机来处理，而数据报途中经过的<strong>路由器都不处理这些扩展首部</strong>（只有一个首部例外，即逐跳选项扩展首部），这样就大大<strong>提高了路由器的处理效率</strong>。</p>
<blockquote>
<p>每个扩展首部都由若干个字段组成，它们的长度也各不同。但所有扩展首部的<strong>第一个字段</strong>都是<strong>8位的“下一个首部”字段</strong>。此字段的值指出了在该扩展首部后面的字段是什么。当使用多个扩展首部时，应按以上的先后顺序出现。<strong>高层首部</strong>总是放在最后面。</p>
</blockquote>
</li>
</ol>
<h5 id="4-4-2-IPv6地址"><a href="#4-4-2-IPv6地址" class="headerlink" title="4.4.2 IPv6地址"></a>4.4.2 IPv6地址</h5><ol>
<li><p>IPv6数据报的目的地址可以是以下三种基本类型地址之一：</p>
<ul>
<li>单播。单播就是传统的点对点通信。</li>
<li>多播。多播是一点对多点的通信，分组被交付到一组计算机的每台计算机。</li>
<li>任播。这是Pν6增加的一种类型。任播的目的站是一组计算机，但数据报在交付时只交付其中的一台计算机，通常是距离最近的一台计算机。</li>
</ul>
</li>
<li><p>IPv6地址表示</p>
<p>​ 在IPV6标准中指定了一种比较紧凑的表示法，即把地址中的<strong>每4位用一个十六进制数</strong>表示，并用<strong>冒号分隔每16位</strong>，如4BF5:AA12:0216:FEBC:BA5F:039A:BE9A:2170。</p>
<p>​ 当16位域的<strong>开头有一些0</strong>时，可以采用一种缩写表示法，但在域中必须至少有一个数字。例如，可以把地址4BF5:0000:0000:0000:BA5F:<strong>039A</strong>:<strong>000A</strong>:2176缩写为4BF5:0:0:0:BA5F:<strong>39A</strong>:<strong>A</strong>:2176。</p>
<p>​ 当有<strong>相继的0值域</strong>时，还可以进一步缩写。这些域可以用双冒号缩写（::）。双冒号表示法在一个地址中仅能出现一次，因为0值域的个数没有编码，需要从指定的总的域的个数来推算。前述地址可被更紧凑地书写成4BF5::BA5F:39A:A:2176。</p>
</li>
<li><p>IPv6分级</p>
<p>IPv6扩展了IPv4地址的分级概念，为了使路由器能够更快地查找路由。它使用以下3个等级：</p>
<ul>
<li>第一级（顶级）指明全球都知道的公共拓扑</li>
<li>第二级（场点级）指明单个场点</li>
<li>第三级指明单个网络接口</li>
</ul>
</li>
<li><p>IPv4向IPv6过渡</p>
<p>​ 从IPv4向IPv6过渡只能采用逐步演进的办法，同时还必须使新安装的IPv6系统能够向后兼容。IPv6系统必须能够接收和转发IPv4分组，并且能够为IPv4分组选择路由。</p>
<p>​ 过渡方法有以下两种：</p>
<ul>
<li><p><strong>双栈协议</strong>：双协议栈技术就是指在一台设备上同时启用IPv4协议栈和IPv6协议栈。这样的话，这台设备既能和IPv4网络通信，又能和IPv6网络通信。</p>
<p>如果这台设备是一个路由器，那么这台路由器的不同接口上，分别配置了IPv4地址和IPv6地址，并很可能分别连接了IPv4网络和IPv6网络。</p>
<p>如果这台设备是一个计算机，那么它将同时拥有IPv4地址和IPv6地址，并具备同时处理这两个协议地址的功能。</p>
</li>
<li><p><strong>隧道技术</strong>：</p>
<p>通过使用互联网络的基础设施在网络之间传递数据的方式。使用隧道传递的数据（或负载）可以是不同协议的数据顿或包。隧道协议<strong>将其它协议的数据顿或包重新封装</strong>然后<strong>通过隧道发送</strong>。</p>
</li>
</ul>
</li>
</ol>
<h4 id="4-5-IP组播"><a href="#4-5-IP组播" class="headerlink" title="4.5 IP组播"></a>4.5 IP组播</h4><h5 id="4-5-1-组播的概念"><a href="#4-5-1-组播的概念" class="headerlink" title="4.5.1 组播的概念"></a>4.5.1 组播的概念</h5><p>​ 为了能够支持像视频点播和视频会议这样的多媒体应用，网络必须实施某种有效的组播机制。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/9c328a48a38b01594d012059a5c61585png.jpg#pic_center" alt="image-20230818155304812"></p>
<p>​ <strong>组播</strong>：是让源计算机一次发送的<strong>单个分组</strong>可以抵达<strong>用一个组地址标识</strong>的<strong>若干目标主机</strong>，并被它们正确接收。</p>
<p>​ 组播基于UDP协议。当主机想利用组播将单个数据发送给一组主机，源主机把数据发给一个组播地址，组播地址可以标识一组地址。网络把这个数据的副本投递给该组中的每台主机。主机可以同时属于多个组。</p>
<p>​ 在IPv4中，每个组播组都有一个D类地址，要给该组发送的计算机使用这个地址作为目标地址。</p>
<p>​ 主机使用**IGMP（因特网组管理协议）**加入组播组。</p>
<p>​ 主机组播时仅发送一份数据，只有数据在传送路径出现分岔时才将分组复制后继续转发。因此，对发送者而言，数据只需发送一次就可发送到所有接收者，大大减轻了网络的负载和发送者的负担。组播需要路由器的支持才能实现，能够运行组播协议的路由器称为<strong>组播路由器</strong>。</p>
<h5 id="4-5-2-IP组播地址"><a href="#4-5-2-IP组播地址" class="headerlink" title="4.5.2 IP组播地址"></a>4.5.2 IP组播地址</h5><p>​ IP组播使用D类地址格式。D类地址的前四位是1110，因此D类地址范围是224.0.0.0~239.255.255.255。每个D类IP地址标志一个组播组。</p>
<ul>
<li><p>特点：</p>
<p>1）组播数据报也是“尽最大努力交付”，不提供可靠交付，应用于UDP。</p>
<p>2）组播地址只能用于目的地址，不能用于源地址</p>
<p>3）对组播数据报不产生ICMP差错报文。若在PING命令后面键入组播地址，将永远不会收到响应</p>
<p>4）并非所有的D类地址都可作为组播地址</p>
</li>
<li><p>IP组播可以分为两种：</p>
<ul>
<li>一种只在本局域网上进行硬件组播</li>
<li>另一种则在因特网的范围内进行组播</li>
</ul>
<p>在因特网上进行组播的最后阶段，还是要把组播数据报在局域网上用硬件组播交付给组播组的所有成员。</p>
</li>
<li><p>硬件组播</p>
<p>​ 组播IP地址也需要相应的<strong>组播MAC地址</strong>在本地网络中实际传送帧。IANA拥有的以太网组播MAC地址的范围是<strong>从01-00-5E-00-00-00到01-00-5E-7F-FF-FF</strong>。不难看出，在每个地址中，只有<strong>23位</strong>可用作组播。这只能和D类IP地址中的23位有一一对应关系。</p>
<p>​ D类IP地址可供分配的有28位，可见在这28位中，前5位不能用来构成以太网的硬件地址，如图所示。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/c0dd105427a904577095e6566691ee79png.jpg#pic_center" alt="123"></p>
<p>​ 收到多播数据报的主机，还要在IP层利用软件进行过滤，把不是本主机要接收的数据报丢弃。</p>
</li>
</ul>
<h5 id="4-5-3-IGMP与组播路由算法"><a href="#4-5-3-IGMP与组播路由算法" class="headerlink" title="4.5.3 IGMP与组播路由算法"></a>4.5.3 IGMP与组播路由算法</h5><ol>
<li><p><strong>IGMP网际组管理协议</strong> 网络层协议 基于IP</p>
<ul>
<li><p>目的：IGMP协议让<strong>组播路由器</strong>知道<strong>本局域网上是否有主机</strong>（的进程）参加或退出了某个组播组。</p>
</li>
<li><p>工作阶段：</p>
<ul>
<li><p>1、某主机要加入组播组，向组播地址发送IGMP报文，声明自己要加入组播</p>
<p>本地组播路由器收到报文，转发给因特网其他组播路由器</p>
</li>
<li><p>2、本地组播路由器<strong>周期性探询本地局域网上的主机</strong>，以便知道这些主机是否还是组播组的成员。</p>
<blockquote>
<p>只要有一个主机对某个组响应，那么组播路由器就认为这个组是活跃的；如果经过几次探询后没有一个主机响应，组播路由器就认为本网络上的没有此组播组的主机，因此就不再把这组的成员关系发给其他的组播路由器。</p>
</blockquote>
</li>
</ul>
<p>组播路由器知道的成员关系只是<strong>所连接的局域网</strong>中有无组播组的成员。</p>
</li>
</ul>
</li>
<li><p><strong>组播路由选择协议</strong></p>
<ul>
<li><p>目的：组播路由选择协议目的是<strong>找出以源主机为根节点的组播转发树</strong>。</p>
</li>
<li><p><strong>组播转发树</strong>：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/bdd21c91eaf57c5c506867e5c5ab114fpng.jpg" alt="image-20230818162757713"></p>
<ul>
<li><p>组播路由协议目的是找出以源主机为根节点的组播转发树。</p>
</li>
<li><p>构造树可以避免在路由器之间兜圈子。</p>
</li>
<li><p>在组播转发树上的路由器不会收到重复的组播数据报</p>
</li>
<li><p>对不同的多播组对应于不同的多播转发树；同一个多播组，对不同的源点也会有不同的多播转发树。</p>
</li>
</ul>
</li>
<li><p>算法：</p>
<ul>
<li>基于链路状态的路由选择</li>
<li>基于距离-向量的路由选择</li>
<li>协议无关的组播（PIM）</li>
</ul>
</li>
</ul>
</li>
</ol>
<h4 id="4-6-移动IP"><a href="#4-6-移动IP" class="headerlink" title="4.6 移动IP"></a>4.6 移动IP</h4><h5 id="4-6-1-移动IP的概念"><a href="#4-6-1-移动IP的概念" class="headerlink" title="4.6.1 移动IP的概念"></a>4.6.1 移动IP的概念</h5><ol>
<li><p>定义</p>
<p>​ <strong>移动IP技术</strong>是指移动站以<strong>固定的网络IP</strong>地址实现跨越<strong>不同网段</strong>的漫游功能，并保证基于<strong>网络IP的网络权限</strong>在漫游过程中不发生任何改变。移动IP的目标是把<strong>分组自动地投递给移动站</strong>。</p>
</li>
<li><p>移动IP定义了<strong>三种功能实体</strong>：移动节点、本地代理（也称归属代理）和外地代理。</p>
<ul>
<li><strong>移动节点</strong>：具有永久IP地址的移动站。</li>
<li><strong>归属代理（本地代理）</strong>：通常就是连接在归属网络（原始连接到的网络）上的路由器。</li>
<li><strong>永久地址（归属地址&#x2F;主地址）</strong>：移动站点在归属网络中的原始地址。</li>
<li><strong>外部代理（外地代理）</strong>：通常就是连接在被访网络（移动到另一地点所接入的网络）上的路由器。</li>
<li><strong>转交地址（辅地址）</strong>：可以是外部代理的地址或动态配置的一个地址。</li>
</ul>
</li>
</ol>
<h5 id="4-6-2-移动IP通信过程"><a href="#4-6-2-移动IP通信过程" class="headerlink" title="4.6.2 移动IP通信过程"></a>4.6.2 移动IP通信过程</h5><ol>
<li><p>移动IP相关概念的应用</p>
<p>​ 在移动IP中，每个移动站都有一个<strong>原始地址</strong>，即<strong>永久地址（或归属地址）</strong>，<strong>移动站原始连接的网络</strong>称为<strong>归属网络</strong>。永久地址和归属网络的关联是不变的。<strong>归属代理</strong>通常是<strong>连接到归属网络上的路由器</strong>，然而它实现的代理功能是在应用层完成的。</p>
<p>​ 当移动站移动到另一地点，所接入的<strong>外地网络</strong>也称<strong>被访网络</strong>。被访网络中使用的代理称为<strong>外地代理</strong>，它通常是<strong>连接在被访网络上的路由器</strong>。</p>
<p>​ 外地代理有两个重要功能：①要为移动站创建一个<strong>临时地址</strong>，称为<strong>转交地址</strong>。转交地址的网络号显然和被访网络一致。②及时把移动站的<strong>转交地址</strong>告诉其<strong>归属代理</strong>。</p>
<blockquote>
<p>​ 用一个通俗的例子来描述移动IP的通信原理。例如，在以前科技不那么发达的年代，本科毕业时都将走向各自的工作岗位。由于事先并不知道自己未来的准确通讯地址，那么怎样继续和同学们保持联系呢？实际上也很简单。彼此留下各自的家庭地址（即永久地址）。毕业后若要和某同学联系，只要写信寄到该同学的永久地址，再请其家长把信件转交即可。</p>
</blockquote>
</li>
<li><p>移动IP通信过程</p>
<ul>
<li>A刚进入外部网络：<ul>
<li>1.获得<strong>外部代理</strong>的<strong>转交地址</strong>（外部代理广播报文）。</li>
<li>2.移动节点通过<strong>外部代理</strong>发送<strong>注册报文</strong>给<strong>归属代理</strong>（包含永久地址&amp;转交地址）。</li>
<li>3.<strong>归属代理</strong>接收请求，并将移动节点的<strong>永久地址和转交地址绑定</strong>（以后到达该归属代理的数据报且要发往移动节点的数据报将被封装并以<strong>隧道方式</strong>发给<strong>转交地址</strong>），并返回一注册响应报文。</li>
<li>4.<strong>外部代理</strong>接收注册响应，并转发给移动节点。</li>
</ul>
</li>
<li>A移动到了下一个网络：<ul>
<li>1.在<strong>新外部代理</strong>登记注册一个转交地址。</li>
<li>2.新外部代理给<strong>本地代理</strong>发送<strong>新的转交地址</strong>（覆盖旧的）</li>
<li>3.通信</li>
</ul>
</li>
<li>A回到了归属网络：<ul>
<li>1.A向本地代理<strong>注销转交地址</strong>。</li>
<li>2.按原始TCP&#x2F;IP方式通信。</li>
</ul>
</li>
</ul>
</li>
</ol>
<h4 id="4-7-网络层设备"><a href="#4-7-网络层设备" class="headerlink" title="4.7 网络层设备"></a>4.7 网络层设备</h4><h5 id="4-7-1-冲突域和广播域"><a href="#4-7-1-冲突域和广播域" class="headerlink" title="4.7.1 冲突域和广播域"></a>4.7.1 冲突域和广播域</h5><ol>
<li><p>冲突域</p>
<p><strong>冲突域</strong>是指连接到<strong>同一物理介质上的所有结点的集合</strong>，这些结点之间存在<strong>介质争用</strong>的现象。</p>
<blockquote>
<p>在OSI参考模型中，冲突域被视为第1层概念，像集线器、中继器等简单无脑复制转发信号的第1层设备所连接的结点都属于同一个冲突域，也就是说它们不能划分冲突域。而第2层（网桥、交换机）、第3层（路由器）设备都可以划分冲突域。</p>
</blockquote>
</li>
<li><p>广播域</p>
<p><strong>广播域</strong>是指接收同样广播消息的结点集合。也就是说，在该集合中的任何一个结点发送一个广播帧，其他能收到这个帧的结点都被认为是该广播域的一部分。</p>
<blockquote>
<p>在OSI参考模型中，广播域被视为第2层概念，像第1层（集线器等）、第2层（交换机等）设备所连接的结点都属于同一个广播域。而路由器，作为第3层设备，则可以划分广播域，即可以连接不同的广播域。</p>
</blockquote>
<p>通常所说的局域网（LAN）特指使用路由器分割的网络，也就是广播域。</p>
</li>
</ol>
<h5 id="4-7-2-路由器的组成和功能"><a href="#4-7-2-路由器的组成和功能" class="headerlink" title="4.7.2 路由器的组成和功能"></a>4.7.2 路由器的组成和功能</h5><ol>
<li><p>定义</p>
<p>​ 路由器是一种具有<strong>多个输入输出端口的专用计算机</strong>，其任务是<strong>连接不同的网络</strong>（连接异构网络）并完成路由转发。在多个逻辑网络（即多个广播域）互连时必须使用路由器。</p>
</li>
<li><p>路由器转发</p>
<ul>
<li>当源主机要向目标主机发送数据报时，路由器先检查源主机与目标主机是否连接在同一个网络上。</li>
<li>如果源主机和目标主机在同一个网络上，那么直接交付而无须通过路由器。</li>
<li>如果源主机和目标主机不在同一个网络上，那么路由器按照转发表（路由表）指出的路由将数据报转发给下一个路由器，这称为间接交付。</li>
</ul>
</li>
<li><p>路由器结构</p>
<p>整个的路由器结构可划分为两大部分：路由选择部分和分组转发部分。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/dc0c65194789df4a753dc460680e41dcpng.jpg#pic_center" alt="image-20230818171015512"></p>
<ul>
<li><p>路由选择：根据所选定的路由选择协议构造出路由表，同时经常或定期地和相邻路由器交换路由信息而不断地更新和维护路由表</p>
</li>
<li><p>交换结构：根据转发表（路由表得来）对分组进行转发</p>
</li>
<li><p>分组转发：若收到RIP&#x2F;OSPF分组等，则把分组送往路由选择处理机；若收到数据分组，则查找转发表并输出</p>
</li>
<li><p>输入端口：输入端口中的查找和转发功能在路由器的交换功能中是最重要的。当一个分组正在查找转发表时，后面又紧跟着从这个输入端口收到另一个分组。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/3fe98784ad36833dd95c9aceaa3bf0a4png.jpg#pic_center" alt="image-20230818171141751"></p>
</li>
<li><p>输出端口：若路由器处理分组的速率赶不上分组进入队列的速率，则队列的存储空间最终必定减少到零，这就使后面再进入队列的分组由于没有存储空间而只能被丢弃。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/1338123e3e2050f3e88a76d7f0e52532png.jpg#pic_center" alt="image-20230818171409238"></p>
<blockquote>
<p>路由器中的输入或输出队列产生溢出是造成<strong>分组丢失</strong>的重要原因。</p>
</blockquote>
</li>
</ul>
</li>
</ol>
<h5 id="4-7-3-路由表与路由转发"><a href="#4-7-3-路由表与路由转发" class="headerlink" title="4.7.3 路由表与路由转发"></a>4.7.3 路由表与路由转发</h5><p>​ 路由表根据路由选择算法得出的，主要用途是路由选择，总用软件来实现。</p>
<p>​ 标准的路由表有4个项目：目的网络IP地址、子网掩码、下一跳IP地址、接口。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/157bc66885273b6a40917fd321b0a322png.jpg#pic_center" alt="image-20230818172055422"></p>
<p>​ 上图为一个简单的网络拓扑，R1的路由表如下图所示。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/3a98199910d2ae806e96b2269379514bpng.jpg#pic_center" alt="image-20230818172538393"></p>
<p>​ 转发表由路由表得来，可以用软件实现，也可以用特殊的硬件来实现。转发表必须包含完成转发功能所必需的信息，在转发表的每一行必须包含从要到达的目的网络到输出端口和某些MAC地址信息的映射。</p>
<p>​ 为了减少转发表的重复项目，可以使用一个默认路由代替所有具有相同“下一跳” 的项目，并将默认路由设置得比其他项目的优先级低，如下图所示。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/9b0f0c49f26df79d25736f12930ec118png.jpg#pic_center" alt="image-20230818173347615"></p>
<ul>
<li><strong>转发和路由选择的区别</strong>：<ul>
<li>“转发”是路由器根据转发表把收到的P数据报从合适的端口转发出去，它仅涉及一个路由器。</li>
<li>“路由选择”则涉及很多路由器，路由表是许多路由器协同工作的结果。这些路由器按照复杂的路由算法，根据从各相邻路由器得到的网络拓扑的变化情况，动态改变所选择的路由，并由此构造出整个路由表。</li>
</ul>
</li>
</ul>
<blockquote>
<p>注意，在讨论路由选择的原理时，往往不去区分转发表和路由表的区别，但要注意路由表不等于转发表。分组的实际转发是靠直接<strong>查找转发表</strong>，而不是直接查找路由表。</p>
</blockquote>
<h3 id="5-传输层"><a href="#5-传输层" class="headerlink" title="5 传输层"></a>5 传输层</h3><h4 id="5-1-传输层提供的服务"><a href="#5-1-传输层提供的服务" class="headerlink" title="5.1 传输层提供的服务"></a>5.1 传输层提供的服务</h4><h5 id="5-1-1-传输层的功能"><a href="#5-1-1-传输层的功能" class="headerlink" title="5.1.1 传输层的功能"></a>5.1.1 传输层的功能</h5><ol>
<li><p>端到端通信</p>
<p>​ 传输层提供<strong>进程和进程（端到端）之间</strong>的逻辑通信。与网络层的区别是，网络层提供的是主机之间的逻辑通信。应用进程之间的通信又称端到端的逻辑通信。</p>
<p>​ 这里“逻辑通信”的意思是：传输层之间的通信好像是沿水平方向传送数据，但事实上这两个传输层之间并没有一条水平方向的物理连接。</p>
</li>
<li><p>复用和分用</p>
<ul>
<li><p><strong>复用</strong>是指发送方不同的应用进程都可以使用同一个传输层协议传送数据</p>
</li>
<li><p><strong>分用</strong>是指接收方的传输层在剥去报文的首部后能够把这些数据正确交付到目的应用进程</p>
</li>
</ul>
<blockquote>
<p>网络层的复用是指发送方不同协议的数据都可以封装成IP数据报发送出去</p>
<p>网络层的分用是指接收方的网络层在剥去首部后把数据支付给相应的协议</p>
</blockquote>
</li>
<li><p>差错检测</p>
<p>传输层检验首部与数据部分；网路层只检验首部。</p>
</li>
<li><p>提供两种不同的传输协议</p>
<ul>
<li>面向连接的传输控制协议TCP：可靠，面向连接，时延大，适用于大文件</li>
<li>无连接的用户数据报协议UDP：不可靠，无连接，时延小，适用于小文件。</li>
</ul>
</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/9f0ca8a07c9dea37ad0776f8bc828928png.jpg#pic_center" alt="image-20230821100425303"></p>
<h5 id="5-1-2-传输层的寻址与端口"><a href="#5-1-2-传输层的寻址与端口" class="headerlink" title="5.1.2 传输层的寻址与端口"></a>5.1.2 传输层的寻址与端口</h5><ol>
<li><p>端口的作用</p>
<p>​ <strong>端口</strong>能够让应用层的各种应用进程将其数据通过端口向下交付给传输层，以及让传输层知道应当将其报文段中的数据向上通过端口交付给应用层相应的进程。</p>
<p>​ 端口是<strong>传输层服务访问点（TSAP）</strong>，它在传输层的作用类似于<strong>IP地址</strong>在网络层的作用或<strong>MAC地址</strong>在数据链路层的作用，只不过IP地址和MAC地址标识的是主机，而<strong>端口标识的是主机中的应用进程</strong>。</p>
<p>​ 数据链路层的SAP是MAC地址，网络层的SAP是IP地址，传输层的SAP是端口。</p>
<p>​ 在协议栈层间的<strong>抽象的协议端口</strong>是<strong>软件端口</strong>，它与路由器或交换机上的硬件端口是完全不同的概念。硬件端口是不同硬件设备进行交互的接口，而软件端口是应用层的各种协议进程与传输实体进行层间交互的一种地址。传输层使用的是软件端口。</p>
</li>
<li><p>端口号</p>
<p>应用进程通过端口号进行标识，<strong>端口号长度为16bit</strong>，能够表示65536（216）个不同的端口号。</p>
<p>端口号只具有<strong>本地意义</strong>，即端口号只标识本计算机应用层中的各进程，在因特网中不同计算机的相同端口号是没有联系的。根据端口号范围可将端口分为两类：</p>
<ul>
<li><p><strong>服务器端使用的端口号</strong>：它又分为两类，最重要的一类是<strong>熟知端口号</strong>，数值为<strong>0~1023</strong>，IANA（互联网地址指派机构）把这些端口号指派给了TCP&#x2F;IP最重要的一些应用程序，让所有的用户都知道。</p>
<table>
<thead>
<tr>
<th align="center">应用程序</th>
<th align="center">FTP</th>
<th align="center">TELNET</th>
<th align="center">SMTP</th>
<th align="center">DNS</th>
<th align="center">TFTP</th>
<th align="center">HTTP</th>
<th align="center">SNMP</th>
</tr>
</thead>
<tbody><tr>
<td align="center">熟知端口号</td>
<td align="center">21</td>
<td align="center">23</td>
<td align="center">25</td>
<td align="center">53</td>
<td align="center">69</td>
<td align="center">80</td>
<td align="center">161</td>
</tr>
</tbody></table>
<p>另一类称为<strong>登记端口号</strong>，数值为<strong>1024~49151</strong>。它是供没有熟知端口号的应用程序使用的，使用这类端口号必须在LANA登记，以防止重复。</p>
</li>
<li><p><strong>客户端使用的端口号</strong>：数值为<strong>49152~65535</strong>。由于这类端口号<strong>仅在客户进程运行时</strong>才动态地选择，因此又称<strong>短暂端口号</strong>（也称临时端口）。通信结束后，刚用过的客户端口号就不复存在，从而这个端口号就可供其他客户进程以后使用。</p>
</li>
</ul>
</li>
<li><p>套接字</p>
<p>​ 在网络中通过<strong>IP地址</strong>来标识和区别<strong>不同的主机</strong>，通过<strong>端口号</strong>来标识和区分一台主机中的<strong>不同应用进程</strong>，端口号拼接到IP地址即构成<strong>套接字Socket</strong>。套接字，实际上是一个<strong>通信端点</strong>，即<br>套接字 S o c k e t &#x3D; （ I P 地址：端口号） 套接字Socket&#x3D;（IP地址：端口号） 套接字Socket=（IP地址：端口号）<br>它<strong>唯一地标识网络中的一台主机和其上的一个应用（进程）</strong>。</p>
<p>在网络通信中，主机A发给主机B的报文段包含<strong>目的端口号和源端口号</strong>，源端口号是“返回地址”的一部分，即当B需要发回一个报文段给A时，B到A的报文段中的目的端口号便是A到B的报文段中的源端口号（完全的返回地址是A的P地址和源端口号）。</p>
</li>
</ol>
<blockquote>
<p><strong>面向连接服务</strong>：在通信双方进行通信之前，必须先建立连接，在通信过程中，整个连接的情况一直被实时地监控和管理。通信结束后，应该释放这个连接。</p>
<p><strong>无连接服务</strong>：指两个实体之间的通信不需要先建立好连接，需要通信时，直接将信息发送到“网络”中，让该信息的传递在网上尽力而为地往目的地传送。</p>
</blockquote>
<h4 id="5-2-UDP协议-1"><a href="#5-2-UDP协议-1" class="headerlink" title="5.2 UDP协议"></a>5.2 UDP协议</h4><h5 id="5-2-1-UDP数据报"><a href="#5-2-1-UDP数据报" class="headerlink" title="5.2.1 UDP数据报"></a>5.2.1 UDP数据报</h5><ol>
<li><p>UDP概述</p>
<p>UDP仅在IP的数据报服务之上增加了两个最基本的服务：<strong>复用和分用以及差错检测</strong>。</p>
<p>UDP具有如下特点：</p>
<ul>
<li>UDP是无连接的，减少开销和发送数据之前的时延。</li>
<li>UDP使用最大努力交付，即不保证可靠交付。</li>
<li>UDP是面向报文的，适合一次性传输少量数据的网络应用，</li>
<li>UDP无拥塞控制，适合很多实时应用。</li>
<li>分组首部开销小。TCP有20B的首部开销，而UDP仅有8B的开销。</li>
<li>UDP支持一对一、一对多、多对一和多对多的交互通信。</li>
</ul>
</li>
<li><p>UDP的首部格式</p>
<p>UDP数据报包含两部分：UDP首部和用户数据。UDP首部和用户数据。UDP首部有8B，由4个字段组成，每个字段的长度都是2B。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/db516fc1d5a162016d5ed4c39e8680bbpng.jpg#pic_center" alt="image-20230821105819937"></p>
<ul>
<li>**源端口：**源端口号。在需要对方回信时选用，不需要时可用全0。</li>
<li>**目的端口：**目的端口号。这在终点交付报文时必须使用到。</li>
<li>**长度：**单位字节，UDP数据报的长度（包括首部和数据），其最小值是8（仅有首部）。</li>
<li>**校验和：**检测UDP数据报在传输中是否有错。有错就丢弃。该字段是可选的，当源主机不想计算校验和时，则直接令该字段为全0。</li>
</ul>
<p>​ 当传输层从IP层收到UDP数据报时，就根据首部中的目的端口，把UDP数据报通过相应的端口上交给应用进程。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/ebb4c9b9539fe19d7eb02260ae618bb4png.jpg#pic_center" alt="image-20230821104949141"></p>
<p>​ 如果接收方UDP发现收到的报文中的目的端口号不正确（即不存在对应于端口号的应用进程），那么就丢弃该报文，并由ICMP发送“端口不可达”差错报文给发送方。</p>
</li>
</ol>
<h5 id="5-2-2-UDP校验"><a href="#5-2-2-UDP校验" class="headerlink" title="5.2.2 UDP校验"></a>5.2.2 UDP校验</h5><p>​ 在计算校验和时，要在UDP数据报之前增加<strong>12B的伪首部</strong>，伪首部并不是UDP的真正首部。只是在计算校验和时，临时添加在UDP数据报的前面，得到一个临时的UDP数据报。校验和就是按照这个临时的UDP数据报来计算的。伪首部既不向下传送又不向上递交，而只是为了计算校验和。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/4387f65214f07823d921460825f2b1b9png.jpg#pic_center" alt="image-20230821105350391"></p>
<p>​ UDP校验和的计算方法和IP数据报首部校验和的计算方法相似。但不同的是，IP数据报的校验和<strong>只检验IP数据报的首部</strong>，但UDP的校验和则<strong>检查首部和数据部分</strong>。</p>
<p><strong>检验过程</strong>：</p>
<ul>
<li>发送方首先把全零放入校验和字段并添加伪首部，然后把UDP数据报视为许多16位的字串接起来。</li>
<li>若UDP数据报的数据部分不是偶数个字节，则要在数据部分末尾填入一个全零字节（但此字节不发送）。</li>
<li>然后按二进制反码计算出这些16位字的和，将此和的二进制反码写入校验和字段，并发送。</li>
<li>接收方把收到的UDP数据报加上伪首部（如果不为偶数个字节，那么还需要补上全零字节）后，按二进制反码求这些16位字的和。</li>
<li>当无差错时其结果应为全1，否则就表明有差错出现，接收方就应该丢弃这个UDP数据报。</li>
</ul>
<blockquote>
<p>计算UDP检验和的例子：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/51e8819b967b927cdf0f7a4658820b25png.jpg#pic_center" alt="image-20230821110108297"></p>
<p>二进制反码运算求和：将所有的字相加，如果相加过程中最高位产生了进位，就将进位加到最低位上，这叫做回卷。</p>
</blockquote>
<h4 id="5-3-TCP协议-1"><a href="#5-3-TCP协议-1" class="headerlink" title="5.3 TCP协议"></a>5.3 TCP协议</h4><h5 id="5-3-1-TCP协议的特点"><a href="#5-3-1-TCP协议的特点" class="headerlink" title="5.3.1 TCP协议的特点"></a>5.3.1 TCP协议的特点</h5><p>​ TCP是在不可靠的IP层之上实现的<strong>可靠的数据传输协议</strong>，它主要解决传输的<strong>可靠、有序、无丢失和不重复</strong>问题。</p>
<ul>
<li><p>主要特点如下：</p>
<p>1）TCP是<strong>面向连接</strong>（虚连接）的传输层协议</p>
<p>2）每一条TCP连接只能有<strong>两个端点</strong>，每一条TCP连接只能是<strong>点对点</strong>的</p>
<p>3）TCP 提供<strong>可靠交付</strong>的服务，保证传送的数据无差错、不丢失、不重复且有序</p>
<p>4）TCP提供<strong>全双工通信</strong>，两端都有发送缓存和接受缓存。</p>
<p><strong>发送缓存</strong>用来暂时存放以下数据：①发送应用程序传送给发送方TCP准备发送的数据；②TCP已发送但尚未收到确认的数据。</p>
<p><strong>接收缓存</strong>用来暂时存放以下数据：①按序到达但尚未被接收应用程序读取的数据；②不按序到达的数据。</p>
<p>5）TCP是<strong>面向字节流</strong>的。虽然应用程序和TCP的交互是一次一个数据块（大小不等），但TCP把应用程序交下来的数据仅仅看成是一连串的无结构的字节流。</p>
</li>
</ul>
<h5 id="5-3-2-TCP报文段"><a href="#5-3-2-TCP报文段" class="headerlink" title="5.3.2 TCP报文段"></a>5.3.2 TCP报文段</h5><p>​ TCP传送的数据单元称为<strong>报文段</strong>。TCP报文段既可以用来<strong>运载数据</strong>，又可以用来<strong>建立连接</strong>、<strong>释放连接</strong>和<strong>应答</strong>。</p>
<p>​ 一个TCP报文段分为<strong>首部和数据</strong>两部分，整个TCP报文段作为IP数据报的数据部分封装在IP数据报中，其首部的前20B是固定的。TCP首部最短为20B，后面有4N字节是根据需要而增加的选项，长度为4B的整数倍。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/ecfa13b645b96b0c084ad9f711f455d6png.jpg#pic_center" alt="image-20230821112736537"></p>
<ul>
<li><p>源端口和目的端口：各占2个字节，分别写入源端口号和目的端口号。</p>
</li>
<li><p>序号：在一个TCP连接中传送的字节流中的每一个字节都按顺序编号，本字段表示本报文段所发送数据的第一个字节的序号。</p>
</li>
<li><p>确认号：<strong>期望</strong>收到对方下一个报文段的第一个数据字节的序号。若确认号为N，则证明到序号N-1为止的所有数据都已正确收到。</p>
</li>
<li><p>数据偏移（首部长度）：TCP报文段的数据起始处距离TCP报文段的起始处有多远，以4B位单位，即1个数值是4B。</p>
</li>
<li><p>保留。占6位，保留为今后使用，但目前应置为0。</p>
</li>
<li><p>控制位：</p>
<ul>
<li><strong>紧急位URG</strong>：URG&#x3D;1时，标明此报文段中有紧急数据，是高优先级的数据，应<strong>尽快传送</strong>，<strong>不用在缓存里排队</strong>，配合紧急指针字段使用。</li>
<li><strong>确认位ACK</strong>：ACK&#x3D;1时确认号有效，在连接建立后所有传送的报文段都必须把ACK置为1。</li>
<li>推送位PSH：PSH&#x3D;1时，接收方尽快交付接收应用进程，不再等到缓存填满再向上交付。</li>
<li>复位RST：RST&#x3D;1时，表明TCP连接中出现严重差错，必须释放连接，然后再重新建立传输链接。</li>
<li><strong>同步位SYN</strong>：SYN&#x3D;1时，表明是一个连接请求&#x2F;连接接受报文。</li>
<li><strong>终止位FIN</strong>：FIN&#x3D;1时，表明此报文段发送方数据已发完，要求释放连接</li>
</ul>
</li>
<li><p>窗口：指的是发送本报文段的一方的接收窗口，即现在允许对方发送的数据量。</p>
<blockquote>
<p>例如，设确认号是701，窗口字段是1000。这表明，从701号算起，发送此报文段的一方还有接收1000字节数据（字节序号为701~1700）的接收缓存空间。</p>
</blockquote>
</li>
<li><p>检验和：检验首部+数据，检验时要加上12B伪首部，第四个字段为6。</p>
</li>
<li><p>紧急指针：URG&#x3D;1时才有意义，指出本报文段中紧急数据的字节数（紧急数据在报文段数据的最前面）。</p>
</li>
<li><p>选项：长度可变。最大报文段长度MSS、窗口扩大、时间戳、选择确认。</p>
</li>
<li><p>填充：这是为了使整个首部长度是4B的整数倍。</p>
</li>
</ul>
<h5 id="5-3-3-TCP连接管理-1"><a href="#5-3-3-TCP连接管理-1" class="headerlink" title="5.3.3 TCP连接管理"></a>5.3.3 TCP连接管理</h5><p>​ TCP是面向连接的协议，因此每个TCP连接都有三个阶段：连接建立、数据传送和连接释放。TCP连接的管理就是使运输连接的建立和释放都能正常进行。</p>
<ol>
<li><p>TCP连接的建立</p>
<p>在TCP连接建立的过程中，要解决以下三个问题：</p>
<ul>
<li>1）要使每一方能够确知对方的存在。</li>
<li>2）要允许双方协商一些参数（如最大窗口值、是否使用窗口扩大选项、时间戳选项及服务质量等）。</li>
<li>3）能够对运输实体资源（如缓存大小、连接表中的项目等）进行分配。</li>
</ul>
<p>TCP连接的建立采用<strong>客户&#x2F;服务器模式</strong>。主动发起连接建立的应用进程称为客户（Client），而被动等待连接建立的应用进程称为服务器（Server）。</p>
<p>TCP连接的端口即为套接字(Socket)或插口，每条TCP连接唯一地被通信的两个端点（即两个套接字）确定。</p>
<p><strong>连接建立过程经历3个步骤，称为三次握手。</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/d40e6fdf500ff1ed3f04649fb6c07f4dpng.jpg#pic_center" alt="image-20230821134234758"></p>
<p>连接建立前，A、B创建传输控制模块TCB，服务器进程处于LISTEN（收听）状态，等待客户的连接请求。</p>
<ul>
<li><p>1）客户机先向服务器发送一个<strong>连接请求报文段</strong>。它不含应用层数据，其首部中的<strong>SYN标志位&#x3D;1</strong>，另外，客户机要随机选择一个<strong>起始序号seq&#x3D;x</strong>。TCP客户进程进入<strong>SYN-SENT（同步已发送）状态</strong>。</p>
</li>
<li><p>2）服务器收到连接请求报文段后，如同意就向客户机发<strong>确认</strong>，并为该连接<strong>分配缓存和变量</strong>。</p>
<p>其中，<strong>SYN和ACK&#x3D;1</strong>，确认号字段的值<strong>ack&#x3D;x+1</strong>，并且服务器随机产生起始序号<strong>seq&#x3D;y</strong>，确认报文段同样不包含应用层数据。TCP服务器进程进入<strong>SYN-RCVD（同步收到）状态</strong>。</p>
</li>
<li><p>3）当客户机收到确认报文段后，还要向服务器给出<strong>确认</strong>，并且也要给该连接分配缓存和变量。</p>
<p>其中<strong>ACK标志位&#x3D;1</strong>，序号字段<strong>seq&#x3D;x+1</strong>，确认号字段<strong>ack&#x3D;y+1</strong>，该报文段<strong>可以携带数据</strong>，如果<strong>不携带数据则不消耗序号</strong>。TCP客户进程进入<strong>ESTABLISHED（已建立连接）状态</strong>。</p>
</li>
</ul>
<blockquote>
<p>要A第三次确认，是为了防止己失效的连接请求报文段突然又传送到了B，因而产生错误。</p>
<p>防止第一次发送的连接请求报文段滞后到达，A在接收到B的确认就开始传送数据，而B确以为建立了新的连接而无法接收，导致数据丢失。</p>
</blockquote>
<p>服务器端的资源是在完成第二次握手时分配的，而客户端的资源是在完成第三次握手时分配的，这就使得服务器易于受到<strong>SYN洪泛攻击</strong>。</p>
<blockquote>
<p>SYN洪泛攻击的原理和过程如下：</p>
<ul>
<li>攻击者向服务器发送大量的SYN数据包，请求建立连接，但是故意伪造或随机生成源IP地址，使服务器无法回复。</li>
<li>服务器收到SYN数据包后，回复SYN-ACK数据包，并为每个连接分配一个缓冲区，等待客户端的ACK数据包，进入SYN-RCVD状态。</li>
<li>由于源IP地址是伪造或随机的，服务器无法收到客户端的ACK数据包，导致缓冲区被占用，无法处理其他的连接请求。</li>
<li>当缓冲区满了后，服务器就无法接受新的连接请求，从而拒绝服务。</li>
</ul>
<p>解决办法：设置SYN cookie，即在回复SYN-ACK数据包时，不分配缓冲区，而是将一些信息编码在序列号中，等到收到ACK数据包时再解码恢复。</p>
</blockquote>
</li>
<li><p>TCP连接的释放</p>
<p>参与一条TCP连接的两个进程中的任何一个都能终止该连接，连接结束后，主机中的“资源”（缓存和变量）将被释放。TCP连接释放的过程通常称为四次握手。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/ec03c95e326fc1c674b70184c7e2d8d6png.jpg#pic_center" alt="image-20230821141106766"></p>
<ul>
<li><p>1）客户端发送<strong>连接释放报文段</strong>，停止发送数据，主动关闭TCP连接。<strong>FIN&#x3D;1</strong>，<strong>seq&#x3D;u</strong>，它等于前面已传送过的数据的最后一个字节的序号加1。TCP客户进程进入<strong>FIN-WAIT-1（终止等待1）状态</strong>。</p>
</li>
<li><p>2）服务器端回送一个<strong>确认报文段</strong>，<strong>ACK&#x3D;1</strong>，<strong>seq&#x3D;v</strong>，<strong>ack&#x3D;u+1</strong>，客户到服务器这个方向的连接就释放了，TCP连接处于<strong>半关闭状态</strong>。服务器进入<strong>CLOSE-WAIT（关闭等待）状态</strong>。客户收到后进入<strong>FIN-WAIT-2（终止等待2）状态</strong>。</p>
<blockquote>
<p>但服务器若发送数据，客户机仍要接收，即从<strong>服务器到客户机这个方向的连接并未关闭</strong>。</p>
</blockquote>
</li>
<li><p>3）服务器端发完数据，就发出<strong>连接释放报文段</strong>，主动关闭TCP连接。<strong>FIN&#x3D;1</strong>，<strong>ACK&#x3D;1</strong>，<strong>seq&#x3D;w</strong>，<strong>ack&#x3D;u+1</strong>。服务器进入<strong>LAST-ACK（最后确认）状态</strong>。</p>
</li>
<li><p>4）客户端回送一个<strong>确认报文段</strong>，<strong>ACK&#x3D;1</strong>, <strong>seq&#x3D;u+1</strong>, <strong>ack&#x3D;w+1</strong>，客户进入进入到<strong>TIME-WAIT（时间等待）状态</strong>。再等到时间等待计时器设置的<strong>2MSL（最长报文段寿命）后</strong>，连接彻底关闭。客户机和服务器进入<strong>CLOSED（连接关闭）状态</strong>。</p>
<blockquote>
<p>为什么A在TIME-WAIT状态必须等待2MSL的时间呢？</p>
<ul>
<li>第一，为了保证A发送的最后一个ACK报文段能够到达B。</li>
<li>第二，防止“已失效的连接请求报文段”出现在本连接中。</li>
</ul>
</blockquote>
</li>
</ul>
<p>除时间等待计时器外，TCP还设有一个<strong>保活计时器</strong>（keepalive timer）。</p>
<blockquote>
<p>就是使用保活计时器。服务器每收到一次客户的数据，就重新设置保活计时器，时间的设置通常是两小时。若两小时没有收到客户的数据，服务器就发送一个探测报文段，以后则每隔75秒钟发送一次。若一连发送10个探测报文段后仍无客户的响应，服务器就认为客户端出了故障，接着就关闭这个连接。</p>
</blockquote>
</li>
</ol>
<h5 id="5-3-4-TCP可靠传输-1"><a href="#5-3-4-TCP可靠传输-1" class="headerlink" title="5.3.4 TCP可靠传输"></a>5.3.4 TCP可靠传输</h5><p>​ TCP的任务是在IP层不可靠的、尽力而为服务的基础上建立一种可靠数据传输服务。TCP使用了校验、序号、确认和重传等机制来达到这一目的。</p>
<p>​ <strong>可靠</strong>，指的是保证接收方进程从缓存区读出的字节流与发送方发出的字节流是完全一样的。</p>
<ol>
<li><p>序号</p>
<p>​ TCP连接中传送的数据流中的<strong>每一个字节都编上一个序号</strong>。<strong>序号字段的值</strong>则指的是本报文段所发送的数据的<strong>第一个字节的序号</strong>。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/1f4bb458535ca3218346becbe9ff3653png.jpg#pic_center" alt="image-20230821144431181"></p>
<p>​ TCP连接传送的数据流中的每个字节都编上一个序号。序号字段的值是指本报文段所发送的数据的第一个字节的序号。如图所示，假设A和B之间建立了一条TCP连接，A的发送缓存区中共有10B，序号从0开始标号，第一个报文包含第0~2个字节，则该TCP报文段的序号是0，第二个报文段的序号是3。</p>
</li>
<li><p>确认</p>
<p>TCP首部的<strong>确认号</strong>是<strong>期望收到</strong>对方的下一个报文段的数据的<strong>第一个字节的序号</strong>。</p>
<p>TCP默认使用<strong>累计确认</strong>，即TCP只确认数据流中<strong>至第一个丢失字节为止的字节</strong>。</p>
</li>
<li><p>重传</p>
<p>有两种事件会导致TCP对报文段进行重传：超时和冗余ACK。</p>
<ul>
<li><p><strong>超时重传</strong></p>
<p>TCP每发送一个报文段，就对这个<strong>报文段设置一次计时器</strong>。只要计时器设置的重传时间到期但还没有收到确认，就要重传这一报文段。</p>
<p>TCP采用自适应算法，动态改变重传时间RTTs（加权平均往返时间）</p>
</li>
<li><p><strong>冗余ACK（冗余确认）</strong></p>
<p>TCP规定每当比期望序号大的失序报文段到达时，发送一个冗余ACK，指明下一个期待字节的序号。</p>
<p>当发送方收到对同一个报文段的3个冗余ACK时，就可以认为跟在这个被确认报丈段之后的报文段已经丢失。</p>
<blockquote>
<p><strong>快速重传</strong>的例子：</p>
<p>发送方已发送1，2，3，4，5报文段</p>
<ul>
<li>接收方收到1，返回给1的确认（确认号为2的第一个字节）</li>
<li>接收方收到3，仍返回给1的确认（确认号为2的第一个字节）</li>
<li>接收方收到4，仍返回给1的确认（确认号为2的第一个字节）</li>
<li>接收方收到5，仍返回给1的确认（确认号为2的第一个字节）</li>
<li>发送方收到3个对于报文段1的冗余ACK，认为2报文段丢失，重传2号报文段。</li>
</ul>
</blockquote>
</li>
</ul>
</li>
</ol>
<h5 id="5-3-5-TCP流量控制-1"><a href="#5-3-5-TCP流量控制-1" class="headerlink" title="5.3.5 TCP流量控制"></a>5.3.5 TCP流量控制</h5><p>​ TCP提供<strong>流量控制</strong>服务来消除<strong>发送方（发送速率太快）使接收方缓存区溢出</strong>的可能性。TCP提供一种<strong>基于滑动窗口协议</strong>的流量控制机制。</p>
<p><strong>滑动窗口</strong>：</p>
<ul>
<li><strong>接收窗口rwnd</strong>：接收端维护，接收端当前的<strong>接收缓存大小</strong>。</li>
<li><strong>拥塞窗口cwnd</strong>：发送端维护，发送端根据当前网络的<strong>拥塞程度</strong>而确定的<strong>窗口值</strong>。</li>
<li><strong>发送窗口</strong>：由发送端维护，发送端在接收到下一个确认前能够发送的最大字节数。</li>
<li>发送窗口&#x3D;min（接收窗口，拥塞窗口）</li>
</ul>
<p>​ 在通信过程中，接收方根据自己接收缓存的大小，动态地调整发送方的发送窗口大小，即接收窗口rwnd（接收方设置确认报文段的窗口字段来将rwnd通知给发送方），</p>
<p>发送方的<strong>发送窗口</strong>取接收窗口rwnd和拥塞窗口cwnd的最小值。TCP的窗口单位是<strong>字节</strong>，不是报文段。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/7054557403a9299ae55bd0075bc0bdc7png.jpg#pic_center" alt="image-20230821150436320"></p>
<p>​ 如上图所示，设A向B发送数据。在连接建立时，B的接收窗口rwnd&#x3D;400。接收方主机B进行了三次流量控制，这三个报文段都设置了ACK&#x3D;1，只有在ACK&#x3D;1时确认号字段才有意义。第一次把窗口减小到rwnd&#x3D;300，第二次又减到rwnd&#x3D;100，最后减到rwnd&#x3D;0，即不允许发送方再发送数据。这使得发送方暂停发送的状态将持续到B重新发出一个新的窗口值为止。</p>
<p>​ 传输层和数据链路层的<strong>流量控制的区别</strong>是：</p>
<ul>
<li>传输层定义端到端用户之间的流量控制，数据链路层定义两个中间的相邻结点的流量控制。</li>
<li>数据链路层的滑动窗口协议的窗口大小不能动态变化，传输层的则可以动态变化。</li>
</ul>
<h5 id="5-3-6-TCP拥塞控制-1"><a href="#5-3-6-TCP拥塞控制-1" class="headerlink" title="5.3.6 TCP拥塞控制"></a>5.3.6 TCP拥塞控制</h5><p>​ 拥塞控制是指<strong>防止过多的数据注入网络</strong>，保证网络中的路由器或链路不致过载，是全局性过程。出现拥塞时，端点并不了解拥塞发生的细节，对通信连接的端点来说，<strong>拥塞往往表现为通信时延的增加</strong>。<br>发送窗口的上限值 &#x3D; m i n [ r w n d ， c w n d ] 发送窗口的上限值&#x3D;min[rwnd，cwnd] 发送窗口的上限值=min[rwnd，cwnd]<br>​ 因特网建议标准定义了进行拥塞控制的4种算法：慢开始、拥塞避免、快重传和快恢复。</p>
<ol>
<li><p>慢开始和拥塞避免</p>
<ul>
<li><p><strong>慢开始</strong>：</p>
<p>1）先令拥塞窗口cwnd&#x3D;1（即一个<strong>最大报文段长度MSS</strong>）。</p>
<p>2）在<strong>每收到一个对新的报文段的确认</strong>后，将cwnd加1，即增大一个MSS（<strong>拥塞窗口加倍</strong>）。</p>
<blockquote>
<p>为了便于理解，图中的窗口单位不使用字节而使用报文段的个数</p>
</blockquote>
</li>
<li><p><strong>拥塞避免</strong>：</p>
<p>1）发送端的<strong>拥塞窗口cwnd</strong>每经过一个往返时延RTT就<strong>增加一个MSS</strong>的大小，而不是加倍，使cwnd按<strong>线性规律缓慢增长</strong>（即加法增大）</p>
<p>2）当出现一次超时（网络拥塞）时，则令<strong>慢开始门限ssthresh</strong>等于<strong>当前cwnd的一半</strong>（即乘法减小）</p>
<p>根据cwnd的大小执行不同的算法，可归纳如下：</p>
<ul>
<li>当cwnd&lt;ssthresh时，使用慢开始算法。</li>
<li>当cwnd&gt;ssthresh时，停止使用慢开始算法而改用拥塞避免算法。</li>
<li>当cwnd&#x3D;ssthresh时，既可使用慢开始算法，又可使用拥塞避免算法（通常做法）。</li>
</ul>
</li>
<li><p>网络拥塞处理</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/e9fdee77678feed0238882bf927eefedpng.jpg#pic_center" alt="image-20230821160349885"></p>
<p>① 执行慢开始算法，拥塞窗口cwnd置为1，每收到一个ACK，cwnd加1，即每个轮次拥塞窗口翻倍。</p>
<p>② 达到ssthresh初始值16，执行拥塞避免算法，每个轮次拥塞窗口加1。</p>
<p>③ 在cwnd达到24时，出现超时，发送方判断网络拥塞；调整门限ssthresh为12，cwnd置1，重新慢开始。当拥塞窗口到达12时，开始执行拥塞避免。</p>
<p>​ 当网络出现拥塞时，无论在什么阶段，只要发送方检测到超时事件的发生（没有按时收到确认。重传计时器超时），就要把慢开始门限ssthresh设置为出现拥塞时的发送方cwnd值的一半（但不能小于2）。然后把拥塞窗口cwnd重新设置为1，执行慢开始算法。</p>
</li>
</ul>
</li>
<li><p>快重传和快恢复</p>
<p>​ 快重传和快恢复算法是对慢开始和拥塞避免算法的改进。</p>
<ul>
<li><p><strong>快重传</strong>：收到3个重复的确认执行快重传算法。</p>
</li>
<li><p><strong>快恢复</strong>：</p>
<p>当发送端<strong>收到连续三个冗余ACK</strong>时，就执行“乘法减小”算法，把<strong>慢开始门限ssthresh设置为出现拥塞时发送方cwnd的一半</strong>。与慢开始（将拥塞窗口cwnd设置为1）不同之处是它<strong>把cwnd的值设置为慢开始门限ssthresh改变后的数值</strong>，然后开始执行<strong>拥塞避免算法</strong>（加法增大），使拥塞窗口缓慢地线性增大。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/f175294c1abb7b73bc2429d1e63a0b6cpng.jpg#pic_center" alt="image-20230821160740544"></p>
</li>
</ul>
<p>在流量控制中，发送方发送数据的量由<strong>接收方</strong>决定，而在拥塞控制中，则由发送方自己通过<strong>检测网络状况来决定</strong>。实际上，慢开始、拥塞避免、快重传和快恢复几种算法是<strong>同时应用在拥塞控制机制</strong>中。</p>
<p>四种算法使用的<strong>总结</strong>：</p>
<ul>
<li><p>在TCP连接建立和网络出现超时时，采用慢开始和拥塞避免算法；</p>
</li>
<li><p>当发送方接收到冗余ACK时，采用快重传和快恢复算法。</p>
</li>
</ul>
</li>
</ol>
<h3 id="6-应用层"><a href="#6-应用层" class="headerlink" title="6 应用层"></a>6 应用层</h3><h4 id="6-1-网络应用模型"><a href="#6-1-网络应用模型" class="headerlink" title="6.1 网络应用模型"></a>6.1 网络应用模型</h4><h5 id="6-1-1-客户-服务器模型"><a href="#6-1-1-客户-服务器模型" class="headerlink" title="6.1.1 客户&#x2F;服务器模型"></a>6.1.1 客户&#x2F;服务器模型</h5><p>​ 在客户&#x2F;服务器（Client&#x2F;Server，C&#x2F;S）模型中，有一个总是打开的主机称为<strong>服务器</strong>，它服务于许多来自其他称为客户机的主机请求。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/5baf8e62b5545ef861743af00c24f047png.jpg#pic_center" alt="image-20230821165048681"></p>
<ol>
<li><p><strong>服务器</strong>：提供计算服务的设备</p>
<p>特点：①永久提供服务；②永久性访问地址&#x2F;域名</p>
</li>
<li><p><strong>客户机</strong>：请求计算服务的主机。</p>
<p>特点：</p>
<ul>
<li><p>1）与服务器通信，使用<strong>服务器提供的服务</strong></p>
</li>
<li><p>2）间歇性接入网络</p>
</li>
<li><p>3）可能使用动态IP地址</p>
</li>
<li><p>4）不与其他客户机直接通信</p>
</li>
</ul>
</li>
<li><p><strong>工作流程</strong>：</p>
<ul>
<li>服务器处于接收请求的状态。</li>
<li>客户机发出服务请求，并等待接收结果。</li>
<li>服务器收到请求后，分析请求，进行必要的处理，得到结果并发送给客户机。</li>
</ul>
</li>
<li><p>客户&#x2F;服务器模型的<strong>主要特点</strong></p>
<ul>
<li><p>1）<strong>网络中各计算机的地位不平等</strong>，服务器可以通过对用户权限的限制来达到管理客户机的目的，使它们不能随意存储&#x2F;删除数据，或进行其他受限的网络活动。</p>
<p>整个网络的管理工作由少数服务器担当，因此网络的管理非常<strong>集中和方便</strong>。</p>
</li>
<li><p>2）<strong>客户机相互之间不直接通信</strong>。例如，在Wb应用中两个浏览器并不直接通信。</p>
</li>
<li><p>3）<strong>可扩展性不佳</strong>。受服务器硬件和网络带宽的限制，服务器支持的客户机数有限。</p>
</li>
</ul>
</li>
<li><p>应用：Web、文件传输协议（FTP）、远程登录和电子邮件等。</p>
</li>
</ol>
<h5 id="6-1-2-P2P模型"><a href="#6-1-2-P2P模型" class="headerlink" title="6.1.2 P2P模型"></a>6.1.2 P2P模型</h5><p>​ 在P2P模型中，各计算机没有固定的客户和服务器划分。相反，任意一对计算机一一称为<strong>对等方（Peer）</strong>，<strong>直接相互通信</strong>。每个结点既作为客户访问其他结点的资源，也作为服务器提供资源给其他结点访问。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/599c16df26bba989aea84dfd4b3f7cf7png.jpg#pic_center" alt="image-20230821165041498"></p>
<ol>
<li><p>P2P模型的<strong>特点</strong>：</p>
<ul>
<li>不存在永远在线的服务器，每个主机既可以提供服务，也可以请求服务</li>
<li>任意端系统&#x2F;节点之间可以直接通讯，多个客户机之间可以直接共享文档</li>
<li>节点间歇性接入网络，节点可能改变IP地址</li>
<li>多个客户机之间可以直接共享文档</li>
<li>可扩展性好</li>
<li>网络健壮性强</li>
</ul>
</li>
<li><p>P2P模型缺点：</p>
<p>在获取服务的同时，还要给其他结点提供服务，因此会占用较多的内存，影响整机速度。</p>
</li>
<li><p>应用：PPlive、Bittorrent和电驴等。</p>
</li>
</ol>
<h4 id="6-2-域名系统（DNS）"><a href="#6-2-域名系统（DNS）" class="headerlink" title="6.2 域名系统（DNS）"></a>6.2 域名系统（DNS）</h4><p>​ <strong>域名系统</strong>（Domain Name System，DNS）是因特网使用的命名系统，用来把便于人们记忆的具有特定含义的主机名（<a target="_blank" rel="noopener" href="http://www.baidu.com)转换为便于机器处理的ip地址./">www.baidu.com）转换为便于机器处理的IP地址。</a></p>
<p>​ DNS系统采用客户&#x2F;服务器模型，其协议运行在UDP之上，使用53号端口。</p>
<p>​ DNS分为3部分：层次域名空间、域名服务器和解析器。</p>
<h5 id="6-2-1-层次域名空间"><a href="#6-2-1-层次域名空间" class="headerlink" title="6.2.1 层次域名空间"></a>6.2.1 层次域名空间</h5><p>​ 因特网采用层次树状结构的命名方法。采用这种命名方法，任何一个连接到因特网的主机或路由器，都有一个唯一的层次结构名称，即<strong>域名（Domain Name）</strong>。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/0e842f6d508662490edb16b6af42e260png.jpg#pic_center" alt="image-20230821165138228"></p>
<p>​ “域”（domain）是名字空间中一个可被管理的划分。域还可以划分为子域，而子域还可继续划分为子域的子域，这样就形成了顶级域、二级域、三级域，等等。</p>
<p>​ 从语法上讲，每一个域名都由<strong>标号（label）序列</strong>组成，而各标号之间<strong>用点隔开</strong>。</p>
<ol>
<li><p>标号</p>
<ul>
<li><p>1）标号中的英文不区分大小写</p>
</li>
<li><p>2）标号中除连字符”-“外不能使用其他的标点符号</p>
</li>
<li><p>3）每一个标号不超过63个字符，多标号组成的完整域名最长不超过255个字符</p>
</li>
<li><p>4）级别最低的域名写在最左边，而级别最高的顶级域名写在最右边</p>
</li>
</ul>
</li>
<li><p>域名树</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/147b52e188123aefff85fe95b6edd70epng.jpg#pic_center" alt="image-20230821170927617"></p>
<ul>
<li><p>根：域名树最上面的是根，但没有对应的名字。它用一个点（.）表示，也称为根域或根区。</p>
</li>
<li><p>顶级域名（Top Level Domain，TLD）分为如下三大类：</p>
<ul>
<li><p>国家顶级域名：cn，us，uk</p>
</li>
<li><p>通用顶级域名：com，net，org，gov，int，aero，museum，travel</p>
</li>
<li><p>基础结构域名&#x2F;反向域名：arpa</p>
</li>
</ul>
</li>
<li><p>二级域名：</p>
<ul>
<li><p>类别域名：ac，com，edu，gov，mil，net，org</p>
</li>
<li><p>行政区域名：用于我国各省、自治区、直辖市bj，js</p>
</li>
<li><p>自己注册的域名：cctv，google</p>
</li>
</ul>
<p>凡是在顶级域名com下注册的单位都获得了一个二级域名</p>
</li>
<li><p>三级域名：www、mail</p>
</li>
</ul>
<p>域名树的树叶就是单台计算机的名字，它不能再继续往下划分子域了。</p>
</li>
</ol>
<h5 id="6-2-2-域名服务器"><a href="#6-2-2-域名服务器" class="headerlink" title="6.2.2 域名服务器"></a>6.2.2 域名服务器</h5><p>​ 因特网的域名系统被设计成一个联机分布式的数据库系统，并采用客户&#x2F;服务器模型。</p>
<p>​ 域名到IP地址的解析是由运行在<strong>域名服务器</strong>上的程序完成的，一个服务器所负责管辖的（或有权限的）范围称为区。每个区设置相应的权限域名服务器，用来保存该区中的所有主机的域名到IP地址的映射。</p>
<p>​ 每个域名服务器不但能够进行一些域名到IP地址的解析，而且还必须<strong>具有连向其他域名服务器的信息</strong>。当自己不能进行域名到IP地址的转换时，能够<strong>知道到什么地方去找其他域名服务器</strong>。</p>
<p>​ DNS使用了大量的域名服务器，它们以层次方式组织。没有一台域名服务器具有因特网上所有主机的映射，相反，该映射分布在所有的DNS上。DNS层次结构如图所示。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/9afb1b9e7ce0761ed5264156e9b55536png.jpg#pic_center" alt="image-20230821172724959"></p>
<ol>
<li><p><strong>根域名服务器</strong></p>
<p>​ <strong>根域名服务器是最高层次的域名服务器</strong>，所有的根域名服务器都知道所有的顶级域名服务器的IP地址。</p>
<p>​ 任何本地域名服务器，若无法解析一个域名，就<strong>先求助于根域名服务器</strong>。通常不直接把待查询的域名直接转换成IP地址，而是告诉本地域名服务器<strong>下一步应找哪个顶级域名服务器</strong>进行查询</p>
</li>
<li><p><strong>顶级域名服务器</strong></p>
<p>​ 责管理在该顶级域名服务器注册的<strong>所有二级域名</strong>。</p>
<p>​ 收到DNS查询请求时，就给出相应的回答（可能是最后的结果，也可能是下一步应当查找的域名服务器的IP地址）</p>
</li>
<li><p><strong>授权域名服务器</strong>（权限域名服务器）</p>
<p>​ 负责一个区的域名服务器。每台主机都必须在授权域名服务器处登记，授权域名服务器总是能够将其管辖的<strong>主机名转换为该主机的地址</strong>。</p>
</li>
<li><p><strong>本地域名服务器</strong></p>
<p>当一个主机发出DNS查询请求时，这个查询请求报文就发给<strong>本地域名服务器</strong>。</p>
<p>每一个因特网服务提供者ISP（一个大学，甚至一个大学里的系）都可以拥有一个本地域名服务器。</p>
</li>
</ol>
<h5 id="6-2-3-域名解析过程"><a href="#6-2-3-域名解析过程" class="headerlink" title="6.2.3 域名解析过程"></a>6.2.3 域名解析过程</h5><ol>
<li><p>定义</p>
<p><strong>正向解析</strong>：是指把域名映射成为IP地址的过程；</p>
<p><strong>反向解析</strong>：是指把IP地址映射成为域名的过程。</p>
</li>
<li><p>递归查询</p>
<p>​ 本地域名服务器只需向根域名服务器查询一次，后面的几次查询都是递归地在其他几个域名服务器之间进行的[步骤③~⑥]。在步骤⑦中，本地域名服务器从根域名服务器得到了所需的IP地址，最后在步骤⑧中，本地域名服务器把查询结果告诉发起查询的主机。</p>
<p>​ 由于该方法给根域名服务造成的<strong>负载过大</strong>，所以在实际中几乎不使用。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/358527ea4b371b062e61494e54f96d91png.jpg#pic_center" alt="image-20230821173039730"></p>
</li>
<li><p>递归与迭代相结合的查询</p>
<p>主机向本地域名服务器的查询采用的是递归查询；本地域名服务器向根域名服务器的查询采用迭代查询。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/e01fe5b1f05728bd52c8cdb9c6073ae1png.jpg#pic_center" alt="image-20230821173051789"></p>
<p>假定某客户机想获知域名为y.abc.com主机的IP地址，域名解析的过程（共使用8个UDP报文）：</p>
<ul>
<li><p>①客户机向其本地域名服务器发出DNS请求报文</p>
</li>
<li><p>②本地域名服务器收到请求后，查询本地缓存，假设没有该记录，则以DNS客户的身份向根域名服务器发出解析请求，</p>
</li>
<li><p>③根域名服务器收到请求后，判断该域名属于.com域，将对应的顶级域名服务器dns.com的IP地址返回给本地域名服务器</p>
</li>
<li><p>④本地域名服务器向顶级域名服务器dns.com发出解析请求报文</p>
</li>
<li><p>⑤顶级域名服务器dns.com收到请求后，判断该域名属于abc.com域，将对应的授权域名服务器dns.abc.com的IP地址返回给本地域名服务器6本地域名服务器向授权域名服务器dns.abc.com发起解析请求报文。</p>
</li>
<li><p>⑦授权域名服务器 dns.abc.com收到请求后，将查询结果返回给本地域名服务器。</p>
</li>
<li><p>⑧本地域名服务器将查询结果保存到本地缓存，同时返回给客户机。</p>
</li>
</ul>
<p>为了提高DNS的查询效率，并减少因特网上的DNS查询报文数量，在域名服务器中广泛地使用了<strong>高速缓存</strong>。</p>
<p>查询过的DNS信息可以暂时缓存到高速缓存，再次查询相同域名可直接提供IP地址。</p>
</li>
</ol>
<h4 id="6-3-文件传输协议（FTP）"><a href="#6-3-文件传输协议（FTP）" class="headerlink" title="6.3 文件传输协议（FTP）"></a>6.3 文件传输协议（FTP）</h4><h5 id="6-3-1-FTP的工作原理"><a href="#6-3-1-FTP的工作原理" class="headerlink" title="6.3.1 FTP的工作原理"></a>6.3.1 FTP的工作原理</h5><p>​ <strong>文件传输协议</strong>（File Transfer Protocol，FTP）是因特网上使用得最广泛的文件传输协议。基于TCP，可靠传输。基于&#x3D;&#x3D;客户&#x2F;服务器（C&#x2F;S）&#x3D;&#x3D;的协议。</p>
<p>​ 用户通过一个客户机程序连接至在远程计算机上运行的服务器程序。依照FTP协议提供服务，进行文件传送的计算机就是<strong>FTP服务器</strong>。连接FTP服务器，遵循FTP协议与服务器传送文件的电脑就是<strong>FTP客户端</strong>。</p>
<p>​ FTP<strong>提供交互式的访问</strong>，允许<strong>客户指明文件的类型与格式</strong>，并允许<strong>文件具有存取权限</strong>。它屏蔽了各计算机系统的细节，因而<strong>适合于在异构网络中的任意计算机之间传送文件</strong>。</p>
<ol>
<li><p>功能</p>
<ul>
<li><p>①提供不同种类主机系统（硬、软件体系等都可以不同）之间的文件传输能力。</p>
</li>
<li><p>②以用户权限管理的方式提供用户对远程FTP服务器上的文件管理能力。</p>
</li>
<li><p>③以匿名FTP的方式提供公用文件共享的能力。</p>
</li>
</ul>
</li>
<li><p>FTP的<strong>服务器进程</strong>由两大部分组成：</p>
<ul>
<li>一个主进程，负责接收新的请求</li>
<li>另外有若干从属进程，负责处理单个请求。</li>
</ul>
</li>
<li><p><strong>工作步骤</strong>：</p>
<ul>
<li>①打开熟知端口21（控制端口），使客户进程能够连接上。</li>
<li>②等待客户进程发连接请求。</li>
<li>③启动从属进程来处理客户进程发来的请求。主进程与从属进程并发执行，从属进程对客户进程的请求处理完毕后即终止。</li>
<li>④回到等待状态，继续接收其他客户进程的请求。</li>
</ul>
</li>
</ol>
<h5 id="6-3-2-控制连接与数据连接"><a href="#6-3-2-控制连接与数据连接" class="headerlink" title="6.3.2 控制连接与数据连接"></a>6.3.2 控制连接与数据连接</h5><p>​ FTP在工作时使用两个并行的TCP连接：一个是<strong>控制连接</strong>（服务器端口号21），一个是<strong>数据连接</strong>（服务器端口号20）。使用两个不同的端口号可以使协议更容易实现。控制连接始终保持；数据连接保持一会。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/51ca2377ef9667868d85f912e5e692a8png.jpg#pic_center" alt="image-20230821174653664"></p>
<ol>
<li><p>控制连接</p>
<p>​ <strong>服务器监听</strong>在21号端口，等待客户连接用来传输控制信息（如连接请求、传送请求）。控制信息都是以7位ASCII 格式传送的。</p>
<p>​ FTP客户发出的传送请求，通过控制连接发送给服务器端的控制进程，但控制连接并不用来传送文件。</p>
<p>​ 在整个会话期间<strong>一直保持打开状态</strong>。</p>
</li>
<li><p>数据连接</p>
<p>​ 服务器端的控制进程在接收到FTP客户发送来的<strong>文件传输请求</strong>后就<strong>创建“数据传送进程”和“数据连接”</strong>。</p>
<p>​ 用来连接客户端和服务器端的数据传送进程，数据传送进程完成文件的传送，在<strong>传送完毕后关闭</strong>“数据传送连接”结束运行。</p>
<p>​ 数据连接有两种传输模式：主动模式PORT和被动模式PASV。</p>
<ul>
<li><p>主动模式PORT</p>
<p>​ 客户端连接到<strong>服务器的21端口</strong>，登录成功后要读取数据时，客户端随机开放一个端口，并发送命令告知服务器，服务器收到PORT命令和端口号后，通过20端口和客户端开放的端口连接，发送数据。</p>
</li>
<li><p>被动模式PASV</p>
<p>​ 客户瑞要读取数据时，发送PASV命令到服务器，服务器在本地随机开放一个端口，并告知客户端，客户端再连接到服务器开放的端口进行数据传输。</p>
</li>
</ul>
<p>主动模式传送数据是**“服务器”连接到“客户端”的端口**；被动模式传送数据是**“客户端”连接到“服务器”的端口**。</p>
</li>
<li><p>FTP传输模式</p>
<ul>
<li><p>文本模式：ASCII模式，以文本序列传输数据；</p>
</li>
<li><p>二进制模式：Binary模式，以二进制序列传输数据</p>
</li>
</ul>
</li>
<li><p>性质</p>
<ul>
<li>提供交互式的访问</li>
<li>允许客户指明文件的类型与格式</li>
<li>允许文件具有存取权限</li>
<li>屏蔽了各计算机系统的细节，适合在异构网络中任意计算机之间传送文件</li>
</ul>
</li>
</ol>
<h4 id="6-4-电子邮件-1"><a href="#6-4-电子邮件-1" class="headerlink" title="6.4 电子邮件"></a>6.4 电子邮件</h4><h5 id="6-4-1-电子邮件系统的组成结构"><a href="#6-4-1-电子邮件系统的组成结构" class="headerlink" title="6.4.1 电子邮件系统的组成结构"></a>6.4.1 电子邮件系统的组成结构</h5><p>​ 电子邮件是一种<strong>异步通信方式</strong>，通信时不需要双方同时在场。电子邮件把邮件发送到收件人使用的邮件服务器，并放在其中的收件人邮箱中，收件人可以随时上网到自己使用的邮件服务器进行读取。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/32cc0c4802577c5a9fa4ebb36eb9e340png.jpg#pic_center" alt="image-20230821175308944"></p>
<ol>
<li><p>组成构件</p>
<ul>
<li><strong>用户代理（UA）</strong>：用户与电子邮件系统的接口。用户代理向用户提供一个很友好的接口来发送和接收邮件，用户代理至少应当具有撰写、显示和邮件处理的功能。通常情况下，用户代理就是一个运行在PC上的程序（电子邮件客户端软件），常见的有Outlook和Foxmail等。</li>
<li><strong>邮件服务器</strong>：它的功能是发送和接收邮件，同时还要向发信人报告邮件传送的情况（已交付被拒绝、丢失等）。邮件服务器采用客户服务器方式工作，但它必须能够同时充当客户和服务器。</li>
<li><strong>邮件发送协议和读取协议</strong>：邮件发送协议用于用户代理向邮件服务器发送邮件或在邮件服务器之间发送邮件，如SMTP；邮件读取协议用于用户代理从邮件服务器读取邮件，如POP3。</li>
</ul>
</li>
<li><p>收发过程</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/1fd5cf2f3bc8f44ceeab9403a4276900png.jpg#pic_center" alt="image-20230822090846018"></p>
<ul>
<li>①发信人调用<strong>用户代理</strong>来撰写和编辑要发送的邮件。用户代理用<strong>SMTP</strong>把邮件传送给<strong>发送端邮件服务器</strong>。</li>
<li>②<strong>发送端邮件服务器</strong>将邮件放入<strong>邮件缓存队列</strong>中，等待发送。</li>
<li>③运行在<strong>发送端邮件服务器</strong>的<strong>SMTP客户进程</strong>，发现邮件缓存中有待发送的邮件，就向运行在<strong>接收端邮件服务器</strong>的<strong>SMTP服务器进程</strong>发起建立<strong>TCP连接</strong>。</li>
<li>④<strong>TCP连接建立</strong>后，<strong>SMTP客户进程</strong>开始向<strong>远程SMTP服务器进程</strong>发送邮件。当所有待发送邮件发完后，SMTP就<strong>关闭所建立的TCP连接</strong>。</li>
<li>⑤运行在<strong>接收端邮件服务器</strong>中的<strong>SMTP服务器</strong>进程收到邮件后，将邮件放入收信人的<strong>用户邮箱</strong>，等待收信人在方便时进行读取。</li>
<li>⑥收信人打算<strong>收信</strong>时，调用用户代理，使用<strong>POP3（或IMAP）协议</strong>将自己的邮件<strong>从接收端邮件服务器的用户邮箱中取回</strong>（如果邮箱中有来信的话）。</li>
</ul>
</li>
</ol>
<h5 id="6-4-2-SMTP和POP3"><a href="#6-4-2-SMTP和POP3" class="headerlink" title="6.4.2 SMTP和POP3"></a>6.4.2 SMTP和POP3</h5><ol>
<li><p><strong>SMTP（简单邮件传输协议）</strong></p>
<p>简单邮件传输协议（SMTP）是一种提供可靠且有效的电子<strong>邮件传输协议</strong>，它控制两个相互通信的SMTP进程交换信息。</p>
<p>采用客户&#x2F;服务器方式，发送方为客户，接收方为服务器；TCP连接，端口号为25。</p>
<p>负责发送邮件的SMTP进程就是<strong>SMTP客户</strong>，负责接收邮件的进程就是<strong>SMTP服务器</strong>。</p>
<p>SMTP规定了14条命令（几个字母）和21种应答信息（三位数字代码+简单文字说明）</p>
<p>SMTP分为以下<strong>三个阶段</strong>：</p>
<ul>
<li><p>建立连接</p>
<ul>
<li><p>发件人邮件发送到<strong>发送方邮箱服务器</strong>的缓存中，<strong>SMTP客户</strong>定时扫描邮件缓存。</p>
</li>
<li><p>扫描发现有邮件，使用<strong>SMTP熟知端口号（25）</strong>与<strong>接收方邮件服务器</strong>的<strong>SMTP服务器</strong>建立<strong>TCP连接</strong>。</p>
</li>
<li><p>建立连接后，接收方<strong>SMTP服务器</strong>发出”220 Service ready（服务就绪）”。</p>
</li>
<li><p>SMTP客户向SMTP服务器发送”HELO命令”，附上发送方的主机名。</p>
</li>
<li><p>SMTP服务器若有能力接收邮件，回答”250 OK”；否则，回答”421 Service not available”</p>
</li>
</ul>
<p><strong>SMTP不使用中间的邮件服务器</strong>。TCP连接总是在发送方和接收方这两个邮件服务器之间直接建立。</p>
</li>
<li><p>邮件传输</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">发送方：MAIL FROM:&lt;send@<span class="number">123.</span>com&gt;   <span class="comment">//使用MAIL命令，附上发件人地址，开始邮件的传送</span></span><br><span class="line">接收方：<span class="number">250</span> OK/<span class="number">451</span>(<span class="number">452</span>、<span class="number">200</span>)       <span class="comment">//SMTP服务器回复，是否已经准备好接收邮件（是/否）</span></span><br><span class="line">发送方：RCPT TO：&lt;receive@<span class="number">456.</span>com&gt; <span class="comment">//SMTP客户端回复一个或多个RCPT命令，确认用户是否接收</span></span><br><span class="line">接收方：<span class="number">250</span> OK/<span class="number">550</span> No such user here <span class="comment">//SMTP服务器确认是否接收</span></span><br><span class="line">发送方：DATA						<span class="comment">//SMTP客户表示要开始传输邮件内容</span></span><br><span class="line">接收方：<span class="number">354</span> start mail input;end with &lt;CR&gt;&lt;LF&gt;.&lt;CR&gt;&lt;LF&gt; <span class="comment">//SMTP服务器同意传输并用&lt;CRLF&gt;.&lt;CRLF&gt;回车换行表示邮件内容的结束。</span></span><br><span class="line">发送方：date...						<span class="comment">//开始传输邮件内容</span></span><br><span class="line">接收方：<span class="number">250</span> OK						<span class="comment">//接收结束</span></span><br><span class="line"><span class="number">12345678</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>连接释放</p>
<p>邮件发完，SMTP客户发送<strong>QUIT命令</strong>，SMTP服务器<strong>返回“221”</strong>，表示同意释放TCP连接。</p>
</li>
</ul>
<p>缺点：</p>
<ul>
<li>SMTP不能传送可执行文件或者其他二进制对象。</li>
<li>SMTP<strong>仅限于传送7位ASCII码</strong>，不能传送其他非英语国家的文字。</li>
<li>SMTP服务器会<strong>拒绝超过一定长度的邮件</strong>。</li>
</ul>
</li>
<li><p><strong>POP3（邮局协议）</strong></p>
<p>​ <strong>邮局协议</strong>（Post Office Protocol，POP）是一个非常简单但功能有限的<strong>邮件读取协议</strong>。</p>
<p>​ POP3采用的是**“拉”（Pull）<strong>的通信方式，当用户读取邮件时，用户代理向邮件服务器发出请求，</strong>“拉”取用户邮箱中的邮件**。</p>
<p>​ 使用客户&#x2F;服务器，TCP连接，端口110。</p>
<p>工作方式：</p>
<ul>
<li><strong>下载并保留</strong>：用户从邮件服务器上读取邮件后，邮件依然会保存在邮件服务器上，用户可再次从服务器上读取该邮件。</li>
<li><strong>下载并删除</strong>：邮件一旦被读取，就被从邮件服务器上删除，用户不能再次从服务器上读取。</li>
</ul>
</li>
<li><p><strong>IMAP（因特网报文存取协议）</strong></p>
<p>​ IMAP协议比POP协议复杂。是一种复杂的<strong>邮件读取协议</strong>。</p>
<p>​ 客户&#x2F;服务器，TCP连接，端口号993</p>
<p>​ IMAP为用户提供了创建文件夹、在不同文件夹之间移动邮件及在远程文件夹中查询邮件等联机命令，为此IMAP服务器<strong>维护了会话用户的状态信息</strong>。</p>
<p>​ IMAP的另一特性是<strong>允许用户代理只获取报文的某些部分</strong>。当用户PC上的IMAP客户程序打开IMAP服务器的邮箱时，用户可以看到<strong>邮箱的首部</strong>，若用户需要打开某个邮件，该邮件才<strong>上传到用户的计算机</strong>上。</p>
<p>​ IMAP允许用户在多个客户端上管理同一个邮箱；IMAP可以访问服务器上的所有文件夹；IMAP可以实现邮件的部分下载，即只下载邮件的标题或正文。</p>
</li>
</ol>
<h5 id="6-4-3-电子邮件格式与MIME"><a href="#6-4-3-电子邮件格式与MIME" class="headerlink" title="6.4.3 电子邮件格式与MIME"></a>6.4.3 电子邮件格式与MIME</h5><ol>
<li><p>电子邮件格式</p>
<p>电子邮件分为<strong>信封</strong>和<strong>内容</strong>两大部分，邮件内容又分为<strong>首部</strong>和<strong>主体</strong>两部分。</p>
<p>RFC822 规定了邮件首部格式，而邮件的主体内容用户自由撰写。邮件系统自动将邮件信息提取到信封上。</p>
<p>邮件内容<strong>首部</strong>包含一些<strong>首部行</strong>，每个首部行由 关键字 : 值 关键字:值 关键字:值 组成。主要关键字有 To 和 Subject 。</p>
<ul>
<li><p><strong>To</strong>：是必需的关键字，后面填入一个或多个收件人的电子邮件地址。地址规定 收件人邮箱名 @ 主机域名 收件人邮箱名@主机域名 收件人邮箱名@主机域名，如 a b c @ 123. c o m <a href="mailto:&#x61;&#98;&#x63;&#64;&#49;&#50;&#x33;&#46;&#x63;&#x6f;&#109;">&#x61;&#98;&#x63;&#64;&#49;&#50;&#x33;&#46;&#x63;&#x6f;&#109;</a> <a href="mailto:&#x61;&#x62;&#x63;&#x40;&#x31;&#50;&#51;&#46;&#99;&#x6f;&#x6d;">&#x61;&#x62;&#x63;&#x40;&#x31;&#50;&#51;&#46;&#99;&#x6f;&#x6d;</a>，abc在123.com必须是唯一的。</p>
</li>
<li><p><strong>Subject</strong>：是可选关键字，邮件的主题。它反映了邮件的主要内容。</p>
</li>
<li><p><strong>From</strong>：必需关键字，由邮箱系统自动填入。</p>
</li>
</ul>
<p>主体与首部由一个空行进行分割。典型邮件格式如下。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/d52bc6e80ed1de2e3f3ef20a1453e699png.jpg#pic_center" alt="image-20230822092622377"></p>
</li>
<li><p><strong>多用途网际邮件扩充（MIME）</strong></p>
<p>​ 由于SMTP只能传送ASCII码邮件，为了传送其他国家文字字符，提出了多用途网际邮件扩充（MIME）。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/8b93a2ac363b2e9ff5e41cd03e664180png.jpg#pic_center" alt="image-20230822093032337"></p>
<p>​ MIME并未改动SMTP或取代它。MIME的意图是继续使用目前的格式，但增加了邮件主体的结构，并定义了<strong>传送非ASCII码的编码规则</strong>。主要包括以下三部分：</p>
<ul>
<li><strong>5个新的邮件首部字段</strong>，包括MIME版本、内容描述、内容标识、传送编码和内容类型。</li>
<li>定义了<strong>许多邮件内容的格</strong>式，对多媒体电子邮件的表示方法进行了标准化。</li>
<li>定义了<strong>传送编码</strong>，可对任何内容格式进行转换，而不会被邮件系统改变。</li>
</ul>
</li>
</ol>
<h4 id="6-5-万维网（WWW）"><a href="#6-5-万维网（WWW）" class="headerlink" title="6.5 万维网（WWW）"></a>6.5 万维网（WWW）</h4><h5 id="6-5-1-WWW的概念与组成结构"><a href="#6-5-1-WWW的概念与组成结构" class="headerlink" title="6.5.1 WWW的概念与组成结构"></a>6.5.1 WWW的概念与组成结构</h5><p>​ 万维网（World Wide Web，WWW）是一个分布式、联机式的信息存储空间，在这个空间中：一样有用的事物称为一样“<strong>资源</strong>”，并由一个全域**“统一资源定位符”（URL）<strong>标识。这些资源通过</strong>超文本传输协议（HTTP）**传送给使用者，而后者通过单击链接来获取资源。</p>
<ul>
<li><p>万维网的内核部分是由三个标准构成的：</p>
<ul>
<li><strong>统一资源定位符（URL）</strong>：负责标识万维网上的各种文档，并使每个文档在整个万维网的范围内具有唯一的标识符URL。</li>
<li><strong>超文本传输协议（HTTP）</strong>：一个应用层协议，它使用TCP连接进行可靠的传输，HTTP是万维网客户程序和服务器程序之间交互所必须严格遵守的协议。</li>
<li><strong>超文本标记语言（HTML）</strong>：一种文档结构的标记语言，它使用一些约定的标记对页面上的各种信息（包括文字、声音、图像、视频等）、格式进行描述。</li>
</ul>
</li>
<li><p><strong>URL</strong>是对从因特网上得到的资源的位置和访问方法的一种简洁表示。一般形式如下：<br>&lt; 协议 &gt; : &#x2F; &#x2F; &lt; 主机 &gt; ： &lt; 端口 &gt; &#x2F; &lt; 路径 &gt; &lt;协议&gt;:&#x2F;&#x2F;&lt;主机&gt;：&lt;端口&gt;&#x2F;&lt;路径&gt; &lt;协议&gt;:&#x2F;&#x2F;&lt;主机&gt;：&lt;端口&gt;&#x2F;&lt;路径&gt;</p>
<ul>
<li>&lt;协议&gt;指用什么协议来获取万维网文档，常见的协议有http、ftp等</li>
<li>&lt;主机&gt;是存放资源的主机在因特网中的域名或IP地址</li>
<li>&lt;端口&gt;和&lt;路径&gt;有时可省略。<strong>在URL中不区分大小写。</strong></li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/23aaac87223e240ec00a096425f1dbfapng.jpg#pic_center" alt="image-20230822104251564"></p>
<p>这里省略了默认的端口号80。</p>
</li>
<li><p>万维网以客户&#x2F;服务器方式工作。<strong>浏览器</strong>是在用户主机上的<strong>万维网客户程序</strong>，而<strong>万维网文档所驻留的主机</strong>则运行<strong>服务器程序</strong>，这台主机称为<strong>万维网服务器</strong>。工作流程如下：</p>
<ul>
<li>1）<strong>Web用户</strong>使用浏览器（指定URL）与Web服务器建立连接，并发送浏览请求。</li>
<li>2）<strong>Web服务器</strong>把URL转换为文件路径，并返回信息给Web浏览器。</li>
<li>3）通信完成，关闭连接。</li>
</ul>
</li>
</ul>
<h5 id="6-5-2-超文本传输协议（HTTP）"><a href="#6-5-2-超文本传输协议（HTTP）" class="headerlink" title="6.5.2 超文本传输协议（HTTP）"></a>6.5.2 超文本传输协议（HTTP）</h5><p>​ HTTP协议定义了浏览器（万维网客户进程）怎样向万维网服务器请求万维网文档，以及服务器怎样把文档传送给浏览器。</p>
<p>​ 基于客户&#x2F;服务器模式，基于TCP传输，默认80端口号。</p>
<ol>
<li><p>HTTP的操作过程</p>
<p>​ 浏览器要访问WWW服务器时，首先要完成对WWW服务器的域名解析。一旦获得了服务器的P地址，浏览器就通过TCP向服务器发送连接建立请求。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/37cf43b29ac59927788eb95ccaafbe98png.jpg#pic_center" alt="image-20230822110033961"></p>
<ul>
<li>1）浏览器分析链接指向页面的<strong>URL</strong>（<a target="_blank" rel="noopener" href="http://www.tsinghua.edu.cn/chn/index.htm%EF%BC%89%E3%80%82">http://www.tsinghua.edu.cn/chn/index.htm）。</a></li>
<li>2）<strong>浏览器向DNS请求解析</strong><a target="_blank" rel="noopener" href="http://www.tsinghua.edu.cn的ip地址./">www.tsinghua.edu.cn的IP地址。</a></li>
<li>3）域名系统DNS解析出清华大学服务器的<strong>IP地址</strong>。</li>
<li>4）浏览器与该服务器<strong>建立TCP连接</strong>（默认端口号为80）。</li>
<li>5）浏览器发出HTTP请求<strong>取出文件命令</strong>：GET&#x2F;chn&#x2F;index.htm。</li>
<li>6）服务器通过<strong>HTTP响应</strong>把文件index.htm发送给<strong>浏览器</strong>。</li>
<li>7）释放TCP连接。</li>
<li>8）浏览器解释文件index.htm，并将Web页显示给用户。</li>
</ul>
</li>
<li><p>HTTP的特点</p>
<ul>
<li><p>HTTP是<strong>无连接</strong>的</p>
<p>HTTP基于TCP连接，用来保证可靠传输，但本身是<strong>无连接</strong>的。也就是通信的双方在交换HTTP报文之前不需要先建立HTTP连接。</p>
</li>
<li><p>HTTP是<strong>无状态</strong>的</p>
<p>同一个客户第二次访问同一个服务器上的页面时，服务器的响应与第一次被访问时的相同。因为服务器并不记得曾经访问过的这个客户，也不记得为该客户曾经服务过多少次。</p>
<blockquote>
<p>但是在实际工作中，一些万维网站点常常希望能够识别用户</p>
<p><strong>Cookie</strong>：是存储在用户主机中的文本文件，记录一段时间内某用户（使用识别码识别，如“123456”）的访问记录。 提供个性化服务。</p>
</blockquote>
</li>
</ul>
</li>
<li><p>连接方式</p>
<ul>
<li><p>非持久连接</p>
<p>对于非持久连接，每个网页元素对象（如JPEG图形、Flash等）的传输都需要单独建立一个TCP连接。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/6d531251538720cc8b4601339670e14dpng.jpg#pic_center" alt="image-20230822111929479"><br>请求 w e b 文档所需时间 &#x3D; 传输时间 + 2 R T T 请求web文档所需时间&#x3D;传输时间+2RTT 请求web文档所需时间=传输时间+2RTT<br>​ <strong>请求一个万维网文档所需的时间</strong>是该文档的<strong>传输时间</strong>（与文档大小成正比）<strong>加上两倍往返时间RTT</strong>（一个RTT用于TCP连接，另一个RTT用于请求和接收文档）。</p>
<p>​ 每个对象引用都导致2×RTT的开销，此外每次建立新的TCP连接都要分配缓存和变量，使万<strong>维网服务器的负担很重</strong>。</p>
</li>
<li><p>持久连接</p>
<p>持久连接是指万维网服务器在发送响应后仍然保持这条连接，使同一个客户（浏览器）和该服务器可以继续在这条连接上传送后续的HTTP请求和响应报文。</p>
<p>持久连接又分为非流水线和流水线两种方式。</p>
<ul>
<li><p><strong>非流水线方式</strong>：客户在收到前一个响应后才能发出下一个请求，服务器发送完一个对象后，其TCP连接就处于空闲状态，浪费了服务器资源。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/9fc7a0a55c5b48b9c7dbbe37d1ff3d72png.jpg#pic_center" alt="image-20230822112353926"></p>
</li>
<li><p><strong>流水线方式</strong>：客户每遇到一个对象引用就立即发出一个请求，因而客户可以逐个地连续发出对各个引用对象的请求。<strong>HTTP&#x2F;1.1的默认方式</strong>。</p>
<p>如果所有的请求和响应都是连续发送的，那么所有引用的对象共计经历1个RTT延迟，而不是像非流水线方式那样，每个引用都必须有1个RTT延迟。这种方式减少了TCP连接中的空闲时间，提高了效率。</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>HTTP的报文结构</p>
<p>​ HTTP是<strong>面向文本</strong>的（Text-Oriented），因此报文中的每个字段都是一些ASCII码串，并且每个字段的长度都是不确定的。有<strong>两类HTTP报文</strong>：</p>
<ul>
<li>请求报文：从客户向服务器发送的请求报文。</li>
<li>响应报文：从服务器到客户的回答。</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/7ad4ee38d847d9754733507c8a290f01png.jpg#pic_center" alt="image-20230822112857308"></p>
<ul>
<li><p><strong>开始行</strong>：用于区分是<strong>请求报文</strong>还是<strong>响应报文</strong>。在请求报文中的开始行称为<strong>请求行</strong>，而在响应报文中的开始行称为<strong>状态行</strong>。开始行的三个字段之间都以空格分隔，最后的“CR”和“LF”分别代表**“回车”和“换行”**。</p>
<p>请求报文的“请求行”有三个内容：<strong>方法、请求资源的URL及HTTP的版本</strong>。其中，“方法”是对所请求对象进行的操作，这些方法实际上也就是一些命令。</p>
<table>
<thead>
<tr>
<th align="center">方法（操作）</th>
<th align="center">意义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">GET</td>
<td align="center">请求读取由URL标识的信息</td>
</tr>
<tr>
<td align="center">HEAD</td>
<td align="center">请求读取由URL标识的信息的首部</td>
</tr>
<tr>
<td align="center">POST</td>
<td align="center">给服务器添加信息（如注释）</td>
</tr>
<tr>
<td align="center">PUT</td>
<td align="center">在指明的URL下存储一个文档</td>
</tr>
<tr>
<td align="center">DELETE</td>
<td align="center">删除指明的URL所标志的资源</td>
</tr>
<tr>
<td align="center">CONNECT</td>
<td align="center">用于代理服务器</td>
</tr>
</tbody></table>
</li>
<li><p><strong>首部行</strong>：用来说明<strong>浏览器、服务器或报文主体的一些信息</strong>。首部可以有几行，但也可以不使用。</p>
<p>在每个首部行中都有<strong>首部字段名</strong>和它的<strong>值</strong>，每一行在结束的地方都要有**“回车”和“换行”<strong>。整个首部行结束时，还有一</strong>空行<strong>将首部行和后面的</strong>实体主体**分开。</p>
</li>
<li><p><strong>实体主体</strong>：在请求报文中一般不用这个字段，而在响应报文中也可能没有这个字段。</p>
</li>
<li><p><strong>状态码</strong>：状态行包括三项内容，即HTTP的版本，状态码，以及解释状态码的简单短语。</p>
<ul>
<li><strong>1xx</strong>：表示通知信息的，如请求收到了或正在处理。</li>
<li><strong>2xx</strong>：表示成功，如接受或知道了。</li>
<li><strong>3xx</strong>：表示重定向，如要完成请求还必须采取进一步的行动。</li>
<li><strong>4xx</strong>：表示客户的差错，如请求中有错误的语法或不能完成。</li>
<li><strong>5xx</strong>：表示服务器的差错，如服务器失效无法完成请求。</li>
</ul>
<p>下面三种状态行在响应报文中是经常见到的：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/553b092d1c961bec82684e8a5f5b826epng.jpg#pic_center" alt="image-20230822113915410"></p>
</li>
</ul>
<p>下面是一个完整的HTTP<strong>请求报文</strong>的例子：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/09459c87decadbae3dfd05ee2001f7a6png.jpg#pic_center" alt="image-20230822113638142"></p>
<p>​ 在<strong>请求行</strong>使用了相对URL（即省略了主机的域名）是因为下面的首部行（第2行）给出了<strong>主机的域名</strong>。第3行是告诉服务器<strong>不使用持续连接</strong>，表示浏览器希望服务器在传送完所请求的对象后即<strong>关闭TCP连接</strong>。这个请求报文<strong>没有实体主体</strong>。</p>
<p>若请求的网页转移到了一个新的地址，则响应报文的状态行和一个首部行就是下面的形式：</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/64991388015605a8b43fc50eaeba4cfbpng.jpg#pic_center" alt="image-20230822114133715"></p>
</li>
</ol>
<p><strong>常见应用层协议小结</strong>：</p>
<table>
<thead>
<tr>
<th align="center">应用程序</th>
<th align="center">FTP数据</th>
<th align="center">FTP控制</th>
<th align="center">TELNET</th>
<th align="center">SMTP</th>
<th align="center">DNS</th>
<th align="center">TFTP</th>
<th align="center">HTTP</th>
<th align="center">POP3</th>
<th align="center">SNMP</th>
</tr>
</thead>
<tbody><tr>
<td align="center">使用协议</td>
<td align="center">TCP</td>
<td align="center">TCP</td>
<td align="center">TCP</td>
<td align="center">TCP</td>
<td align="center">UDP</td>
<td align="center">UDP</td>
<td align="center">TCP</td>
<td align="center">TCP</td>
<td align="center">UDP</td>
</tr>
<tr>
<td align="center">熟知端口号</td>
<td align="center">20</td>
<td align="center">21</td>
<td align="center">23</td>
<td align="center">25</td>
<td align="center">53</td>
<td align="center">69</td>
<td align="center">80</td>
<td align="center">110</td>
<td align="center">161</td>
</tr>
</tbody></table>
<h4 id="文章目录-1"><a href="#文章目录-1" class="headerlink" title="文章目录"></a>文章目录</h4><ul>
<li><a href="#_1">前言</a></li>
<li><a href="#_9">一、计算机网络概述</a></li>
<li><ul>
<li><a href="#1__10">1 互联网的构成</a></li>
<li><a href="#2_14">2.网络分类</a></li>
<li><a href="#3_30">3.接入网</a></li>
<li><a href="#4_44">4.网络核心的两大功能</a></li>
<li><ul>
<li><a href="#_45">①路由</a></li>
<li><a href="#_47">②转发</a></li>
</ul>
</li>
<li><a href="#5_50">5.网络分层</a></li>
<li><ul>
<li><a href="#OSI_7_51">①OSI 7层模型</a></li>
<li><a href="#TCPIP_4_87">②TCP&#x2F;IP 4层模型</a></li>
<li><a href="#_90">③两种模型比较</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_97">二、物理层</a></li>
<li><ul>
<li><a href="#1_101">1.物理介质</a></li>
<li><ul>
<li><a href="#_102">①引导型介质</a></li>
<li><a href="#_133">②非引导型介质</a></li>
</ul>
</li>
<li><a href="#_152"></a></li>
<li><a href="#2_155">2.数据交换方式</a></li>
<li><ul>
<li><a href="#_156">①分组交换</a></li>
<li><a href="#_170">②电路交换</a></li>
</ul>
</li>
<li><a href="#3_191">3.信道复用</a></li>
<li><ul>
<li><a href="#_196">①频分复用</a></li>
<li><a href="#_201">②时分复用</a></li>
<li><a href="#_205">③波分复用</a></li>
<li><a href="#_209">④码分复用</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_212">三、数据链路层</a></li>
<li><ul>
<li><a href="#1_214">1.功能（要解决的问题）</a></li>
<li><a href="#2_222">2.数据链路层提供的服务</a></li>
<li><a href="#3Framing_236">3.成帧（Framing）</a></li>
<li><ul>
<li><ul>
<li><a href="#31__237">3.1 要解决的关键问题：如何标识一个帧的开始？</a></li>
<li><a href="#32_framing_241">3.2 成帧（framing）的方式</a></li>
<li><ul>
<li><a href="#_242">①带比特填充的定界符法</a></li>
<li><a href="#_253">②物理层编码违例</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#4_265">4.差错控制</a></li>
<li><ul>
<li><a href="#41__266">4.1 背景</a></li>
<li><a href="#42__278">4.2 差错检验与纠正</a></li>
<li><ul>
<li><a href="#_Parity_Check_302">①奇偶检验 (Parity Check)</a></li>
<li><a href="#_Checksum_309">②校验和 (Checksum)</a></li>
<li><a href="#_Cyclic_Redundancy_CheckCRC_316">③循环冗余校验 (Cyclic Redundancy Check，CRC)</a></li>
<li><a href="#_337">④汉明码</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#5_352">5.流量控制</a></li>
<li><a href="#6_MAC_Medium_Access_Control_362">6.媒体接入控制 MAC (Medium Access Control)子层</a></li>
<li><ul>
<li><a href="#61__368">6.1 信道分配问题</a></li>
<li><ul>
<li><a href="#_TDMA_369">① 时分多址接入-TDMA</a></li>
<li><a href="#_FDMA_379">② 频分多址接入-FDMA</a></li>
</ul>
</li>
<li><a href="#62__388">6.2 多路访问协议</a></li>
<li><ul>
<li><a href="#621__391">6.2.1 随机访问协议</a></li>
<li><ul>
<li><a href="#ALOHA_393">①ALOHA</a></li>
<li><a href="#CSMA_412">②载波侦听多路访问协议CSMA</a></li>
</ul>
</li>
<li><a href="#622__461">6.2.2 受控访问协议</a></li>
<li><ul>
<li><a href="#_466">①位图协议（预留协议）</a></li>
<li><a href="#_479">②令牌传递</a></li>
<li><a href="#_490">③二进制倒计数协议</a></li>
</ul>
</li>
<li><a href="#623__497">6.2.3 有限竞争协议</a></li>
<li><ul>
<li><a href="#Adaptive_Tree_Walk_Protocol_500">①自适应树搜索协议（Adaptive Tree Walk Protocol）</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#63VLAN_506">6.3虚拟局域网VLAN</a></li>
<li><a href="#64WLAN_533">6.4无线局域网WLAN</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_578">四、网络层</a></li>
<li><ul>
<li><a href="#1_579">1.网络层概述</a></li>
<li><a href="#2_583">2.网络层关键功能</a></li>
<li><a href="#3Internet_590">3.Internet网际协议</a></li>
<li><ul>
<li><a href="#31_IPv4_591">3.1 IPv4协议及其相关技术</a></li>
<li><ul>
<li><a href="#311__592">3.1.1 基本概念</a></li>
<li><a href="#312_IPv4_599">3.1.2 IPv4数据报格式</a></li>
<li><a href="#313__622">3.1.3 数据报分片</a></li>
<li><a href="#314_IP_659">3.1.4 IP协议功能及报头字段总结</a></li>
</ul>
</li>
<li><a href="#32_IP_671">3.2 IP地址</a></li>
<li><ul>
<li><a href="#321__672">3.2.1 概述</a></li>
<li><a href="#321__689">3.2.1 子网划分</a></li>
<li><a href="#323__699">3.2.3 无类域间路由</a></li>
</ul>
</li>
<li><a href="#33_DHCP_715">3.3 DHCP动态主机配置协议</a></li>
<li><a href="#34_ARP_731">3.4 ARP地址解析协议</a></li>
<li><a href="#35_NAT_764">3.5 网络地址转换(NAT)</a></li>
<li><a href="#36_ICMP__793">3.6 ICMP: 互联网控制报文协议</a></li>
</ul>
</li>
<li><a href="#4_822">4.路由算法</a></li>
<li><ul>
<li><a href="#41__836">4.1 距离向量路由</a></li>
<li><ul>
<li><a href="#_852">算法过程</a></li>
<li><a href="#_868">特殊情况考虑</a></li>
</ul>
</li>
<li><a href="#42__881">4.2 链路状态路由</a></li>
<li><ul>
<li><a href="#_885">算法过程</a></li>
<li><a href="#_929">距离向量和链路状态算法比较</a></li>
</ul>
</li>
<li><a href="#43__938">4.3 层次路由</a></li>
<li><a href="#44__968">4.4 广播路由</a></li>
<li><ul>
<li><a href="#_971">实现方法</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#5Internet_1016">5.Internet路由协议</a></li>
<li><ul>
<li><a href="#51_RIP_1017">5.1 路由选择协议RIP</a></li>
<li><a href="#52_BGP_1054">5.2 BGP-外部网关路由协议</a></li>
</ul>
</li>
<li><a href="#6_1088">6.路由器的工作原理</a></li>
<li><ul>
<li><a href="#61__1089">6.1 路由器概述</a></li>
<li><a href="#62__1097">6.2 路由器控制层</a></li>
<li><a href="#63__1107">6.3 路由器数据层</a></li>
</ul>
</li>
<li><a href="#7_1141">7.拥塞控制算法</a></li>
<li><ul>
<li><a href="#71__1142">7.1 概述</a></li>
<li><a href="#72__1159">7.2 流量调节</a></li>
<li><a href="#73_RED_Random_Early_Detection_1169">7.3 随机早期检测RED (Random Early Detection)</a></li>
</ul>
</li>
<li><a href="#8_1189">8.服务质量</a></li>
<li><ul>
<li><a href="#81_1190">8.1概述</a></li>
<li><a href="#82__1201">8.2 流量整形</a></li>
<li><ul>
<li><a href="#_1204">①漏桶算法</a></li>
<li><a href="#_1212">②令牌桶算法</a></li>
</ul>
</li>
<li><a href="#83__1220">8.3 数据包调度</a></li>
</ul>
</li>
<li><a href="#9_1229">9.三层交换</a></li>
<li><ul>
<li><a href="#91__1230">9.1 三层交换的技术背景</a></li>
<li><a href="#92__1240">9.2 三层交换的动机</a></li>
<li><a href="#93__1248">9.3 三层交换机的工作原理</a></li>
</ul>
</li>
<li><a href="#10VPN_Virtual_Private_Network_1251">10.虚拟专用网VPN (Virtual Private Network)</a></li>
<li><ul>
<li><a href="#101_VPN_1252">10.1 VPN的技术背景</a></li>
<li><a href="#102_VPN_1264">10.2 VPN的原理</a></li>
<li><a href="#103_VPN_1276">10.3 VPN的实现方式</a></li>
</ul>
</li>
<li><a href="#11IPv6_1284">11.IPv6协议</a></li>
</ul>
</li>
<li><a href="#_1296">五、传输层</a></li>
<li><ul>
<li><a href="#1_1297">1.传输层概述</a></li>
<li><ul>
<li><a href="#11__1305">1.1 套接字</a></li>
<li><a href="#12__1312">1.2 传输层提供的服务</a></li>
<li><a href="#13__1321">1.3 因特网传输层提供的服务</a></li>
</ul>
</li>
<li><a href="#2_1334">2.传输层基本服务——复用和分用</a></li>
<li><ul>
<li><a href="#21__1335">2.1 复用和分用概述</a></li>
<li><a href="#22__1344">2.2 套接字标识与端口号</a></li>
<li><a href="#23_TCPUDP_1357">2.3 TCP&#x2F;UDP套接字（复用和分用）</a></li>
</ul>
</li>
<li><a href="#3UDP_1365">3.无连接传输：UDP</a></li>
<li><ul>
<li><a href="#31_UDP_1366">3.1 UDP报文段结构</a></li>
<li><a href="#32_UDPchecksum_1380">3.2 UDP校验和（checksum）</a></li>
<li><a href="#33_UDP_1403">3.3 为什么需要UDP？</a></li>
</ul>
</li>
<li><a href="#4TCP_1421">4.面向连接的传输：TCP</a></li>
<li><ul>
<li><a href="#41__1422">4.1 可靠传输</a></li>
<li><a href="#42__1445">4.2 流水线技术</a></li>
<li><ul>
<li><a href="#GBN__N__1449">①GBN 协议（回退 N 步协议）</a></li>
<li><a href="#SR__1470">②SR 协议（选择重传协议）</a></li>
<li><a href="#TCP__1499">③TCP 可靠通信的具体实现</a></li>
<li><a href="#GBNSRTCP_1505">GBN、SR和TCP小结</a></li>
</ul>
</li>
<li><a href="#43_TCP_1536">4.3 TCP报文段结构</a></li>
</ul>
</li>
<li><a href="#5TCP_1552">5.TCP流量控制</a></li>
<li><a href="#6_1571">6.拥塞控制</a></li>
<li><ul>
<li><a href="#61__1573">6.1 拥塞控制的类型</a></li>
<li><a href="#62__TCP_1585">6.2 TCP拥塞控制要解决的问题</a></li>
<li><a href="#63_TCP_1638">6.3 TCP拥塞控制的实现</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_1654">六、应用层</a></li>
<li><ul>
<li><a href="#1_1656">1.应用层概述</a></li>
<li><ul>
<li><a href="#11__1665">1.1 应用进程通信方式</a></li>
<li><ul>
<li><a href="#CS_ClientServer_1666">①客户&#x2F;服务器（C&#x2F;S, Client&#x2F;Server）方式</a></li>
<li><a href="#P2PPeer_to_Peer_1691">②对等（P2P，Peer to Peer）方式</a></li>
</ul>
</li>
<li><a href="#12__1704">1.2 服务器进程工作方式</a></li>
</ul>
</li>
<li><a href="#2_1731">2.域名系统</a></li>
<li><ul>
<li><a href="#21__1732">2.1 概述</a></li>
<li><a href="#22__1741">2.2 域名系统名字空间和层次结构</a></li>
<li><a href="#23__1748">2.3 域名解析过程</a></li>
</ul>
</li>
<li><a href="#3_1759">3.电子邮件</a></li>
<li><ul>
<li><a href="#31__1760">3.1 邮件发送的常用协议</a></li>
<li><a href="#32_Webmail_1773">3.2 Webmail</a></li>
</ul>
</li>
<li><a href="#4WWW_1783">4.WWW</a></li>
<li><ul>
<li><a href="#41_WWW_1784">4.1 WWW体系结构与协议</a></li>
<li><a href="#42_HTTP_1813">4.2 HTTP</a></li>
<li><ul>
<li><a href="#_1814">概述</a></li>
<li><a href="#HTTP_1824">HTTP发展现状</a></li>
<li><a href="#WebCookie_1838">Web安全与隐私：Cookie</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#5_1873">5.流媒体</a></li>
<li><ul>
<li><a href="#51__1874">5.1 概述</a></li>
<li><a href="#52__1889">5.2 流媒体动态自适应传输</a></li>
</ul>
</li>
<li><a href="#6CDN_1907">6.内容分发网络CDN</a></li>
<li><ul>
<li><a href="#61__1908">6.1 概述</a></li>
<li><a href="#62__1920">6.2 关键问题</a></li>
<li><a href="#63__1923">6.3 机理与解决方式</a></li>
</ul>
</li>
<li><a href="#7P2P_1941">7.P2P网络</a></li>
<li><a href="#8Telnet_1950">8.远程登录Telnet</a></li>
<li><a href="#9FTP_1966">9.FTP</a></li>
<li><ul>
<li><a href="#91__1967">9.1 概述</a></li>
<li><a href="#92__1975">9.2 工作过程</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_1992">写在最后</a></li>
</ul>
<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>为了准备期末考试，同时也是为了之后复习方便，特对<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C&spm=1001.2101.3001.7020">计算机网络</a>的知识进行了整理。本篇内容大部分是来源于我们老师上课的ppt。而我根据自己的理解，将老师的PPT整理成博文的形式以便大家复习查阅，同时对于一些不是很清楚的地方，我去查阅了相关资料进行补充，当然也会有少部分个人看法夹带其中来帮助大家理解。</p>
<hr>
<p>应评论要求这里放上本文的思维导图以供大家更好的查看<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/5e6c5d7c7e05fb47d57ec27fdfbd418dpng.jpg" alt="在这里插入图片描述"></p>
<h2 id="一、计算机网络概述"><a href="#一、计算机网络概述" class="headerlink" title="一、计算机网络概述"></a>一、计算机网络概述</h2><h3 id="1-互联网的构成"><a href="#1-互联网的构成" class="headerlink" title="1 互联网的构成"></a>1 互联网的构成</h3><p><strong>网络边缘</strong>:位于互联网边缘与互联网相连的计算机和其他设备,如桌面计算机、移动计算机、服务器、其他智能终端设备<br><strong>网络核心</strong>:由互联端系统的分组交换设备和通信链路构成的网状网络<br>如：分组交换路由器、链路层交换机、通信链路(光纤、铜缆、无线电、激光链路)</p>
<h3 id="2-网络分类"><a href="#2-网络分类" class="headerlink" title="2.网络分类"></a>2.网络分类</h3><p><strong>个域网PAN（ Personal Area Network ）</strong></p>
<ul>
<li>能在便携式消费电器与通信设备之间进行短距离通信的网络</li>
<li>覆盖范围一般在10米半径以内，如蓝牙耳机等</li>
</ul>
<p><strong>局域网LAN（Local Area Network）</strong></p>
<ul>
<li>局部地区形成的区域网络，如企业网络</li>
<li>分布地区范围有限，可大可小，大到一栋建筑、小到办公室内的组网</li>
<li>电脑WLAN接入，打印机共享等等</li>
</ul>
<p><strong>城域网MAN（Metropolitan Area Network ）</strong></p>
<ul>
<li>范围覆盖一个城市的网络</li>
</ul>
<p><strong>广域网WAN（Wide Area Network）</strong></p>
<ul>
<li>覆盖很大地理区域，乃至覆盖地区和国家</li>
</ul>
<h3 id="3-接入网"><a href="#3-接入网" class="headerlink" title="3.接入网"></a>3.接入网</h3><p><strong>接入网的用途</strong></p>
<ul>
<li>接入网的用途是将主机连接到边缘路由器上</li>
<li>边缘路由器是端系统Host去往任何其他远程端系统的路径上的第一台路由器</li>
</ul>
<p><strong>各种异构网络通过边缘路由器接入</strong></p>
<p><strong>接入网分类</strong>：</p>
<ul>
<li>光纤到户FTTH</li>
<li>数字用户线DSL</li>
<li>同轴电缆</li>
<li>无线接入</li>
<li>企业和家庭网络</li>
</ul>
<h3 id="4-网络核心的两大功能"><a href="#4-网络核心的两大功能" class="headerlink" title="4.网络核心的两大功能"></a>4.网络核心的两大功能</h3><h4 id="①路由"><a href="#①路由" class="headerlink" title="①路由"></a>①路由</h4><p>确定数据分组从源到目标所使用的路径（全局操作）</p>
<h4 id="②转发"><a href="#②转发" class="headerlink" title="②转发"></a>②转发</h4><p>路由器或交换机将接收到的数据分组转发出去（即移动到该设备的某个输出接口）（本地操作）</p>
<h3 id="5-网络分层"><a href="#5-网络分层" class="headerlink" title="5.网络分层"></a>5.网络分层</h3><h4 id="①OSI-7层模型"><a href="#①OSI-7层模型" class="headerlink" title="①OSI 7层模型"></a>①OSI 7层模型</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/a1c8e27ccc7030d0774c11e1484e32d9png.jpg" alt="在这里插入图片描述"></p>
<p><strong>数据链路层 (Data Link Layer)</strong></p>
<ul>
<li>实现相邻（Neighboring）网络实体间的数据传输</li>
<li>成帧（Framing）：从物理层的比特流中提取出完整的帧</li>
<li>错误检测与纠正：为提供可靠数据通信提供可能</li>
<li>物理地址（MAC address）：48位，理论上唯一网络标识，烧录在网卡，不便更改</li>
<li>流量控制，避免“淹没”（overwhelming）:当快速的发送端遇上慢速的接收端，接收端缓存溢出</li>
<li>共享信道上的访问控制（MAC）：同一个信道，同时传输信号。如同：同一个Wifi热点（AP）连接着多个无线用户（手机），则多个用户同时需要发送数据，如何控制发送顺序？</li>
</ul>
<p><strong>网络层 (Network Layer)</strong></p>
<ul>
<li>将数据包跨越网络从源设备发送到目的设备（host to host）</li>
<li>路由（Routing）：在网络中选取从源端到目的端转发路径，常常会根据网络可达性动态选取最佳路径，也可以使用静态路由</li>
<li>路由协议：路由器之间交互路由信息所遵循的协议规范，使得单个路由器能够获取网络的可达性等信息</li>
<li>服务质量（QoS）控制：处理网络拥塞、负载均衡、准入控制、保障延迟<br>异构网络互联：在异构编址和异构网络中路由寻址和转发</li>
</ul>
<p><strong>传输层 (Transport Layer)</strong></p>
<ul>
<li>将数据从源端口发送到目的端口（进程到进程）</li>
<li>网络层定位到一台主机（host），传输层的作用域具体到主机上的某一个进程</li>
<li>网络层的控制主要面向运营商，传输层为终端用户提供端到端的数据传输控制</li>
<li>两类模式：可靠的传输模式，或不可靠传输模式</li>
<li>可靠传输：可靠的端到端数据传输，适合于对通信质量有要求的应用场景，如文件传输等</li>
<li>不可靠传输：更快捷、更轻量的端到端数据传输，适合于对通信质量要求不高，对通信响应速度要求高的应用场景，如语音对话、视频会议等</li>
</ul>
<p><strong>会话层 (Session Layer)</strong></p>
<ul>
<li>利用传输层提供的服务，在应用程序之间建立和维持会话，并能使会话获得同步</li>
</ul>
<p><strong>表示层（Presentation Layer）</strong></p>
<ul>
<li>关注所传递信息的语法和语义，管理数据的表示方法，传输的数据结构</li>
</ul>
<p><strong>应用层（Application Layer）</strong></p>
<ul>
<li>通过应用层协议，提供应用程序便捷的网络服务调用</li>
</ul>
<h4 id="②TCP-IP-4层模型"><a href="#②TCP-IP-4层模型" class="headerlink" title="②TCP&#x2F;IP 4层模型"></a>②TCP&#x2F;IP 4层模型</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/2c19525e4da8a013e1365e2a350ea16apng.jpg" alt="在这里插入图片描述"></p>
<h4 id="③两种模型比较"><a href="#③两种模型比较" class="headerlink" title="③两种模型比较"></a>③两种模型比较</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/e7a0612b4db75dd1b9437c89551798e7png.jpg" alt="在这里插入图片描述"></p>
<p>注：我们教材的是以下分层来讲述的<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/7d79738cd30bce62a2e44a511711fdaepng.jpg" alt="在这里插入图片描述"></p>
<h2 id="二、物理层"><a href="#二、物理层" class="headerlink" title="二、物理层"></a>二、物理层</h2><ul>
<li>物理层考虑的是怎样才能<strong>在连接各种计算机的传输媒体上传输数据比特流</strong>，而不是指具体的传输媒体。</li>
<li>物理层的作用是要尽可能地<strong>屏蔽掉不同传输媒体和通信手段的差异</strong>。</li>
<li>用于物理层的协议也常称为<strong>物理层规程</strong> (procedure)。</li>
</ul>
<h3 id="1-物理介质"><a href="#1-物理介质" class="headerlink" title="1.物理介质"></a>1.物理介质</h3><h4 id="①引导型介质"><a href="#①引导型介质" class="headerlink" title="①引导型介质"></a>①引导型介质</h4><blockquote>
<p>信号在固体介质中传播，例如铜、光纤、同轴电缆</p>
</blockquote>
<p><strong>光纤</strong></p>
<ul>
<li>高速运行<br>高速点对点传输（10-100 Gbps）</li>
<li>低错误率<br>中继器相距很远，对电磁噪声免疫<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/39152ff94b4fc57813b216b9af24eb26png.jpg" alt="在这里插入图片描述"></li>
</ul>
<p><strong>双绞线</strong></p>
<ul>
<li>两根绝缘铜线互相缠绕为一对</li>
<li>电话线为1对双绞线，网线为4对双绞线，广泛用于计算机网络（以太网）双向传输</li>
<li>第5类：100 Mbps~1 Gbps；第6类：10Gbps</li>
<li>传输距离一般为为100米</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/c5c4e670beb38403e83d5c371c2e75a2png.jpg" alt="在这里插入图片描述"></p>
<p><strong>同轴电缆</strong></p>
<ul>
<li>两根同心铜导线，双向传输</li>
<li>电缆上的多个频率通道</li>
<li>带宽可达100Mbps</li>
<li>传输距离一般为200米</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/21213016f4642d110ed1c5e0b1981a71png.jpg" alt="在这里插入图片描述"></p>
<h4 id="②非引导型介质"><a href="#②非引导型介质" class="headerlink" title="②非引导型介质"></a>②非引导型介质</h4><blockquote>
<p>信号自由传播，例如无线电（陆地无线电、卫星无线电信道)</p>
</blockquote>
<p><strong>无线电</strong></p>
<ul>
<li>电磁频谱中各种“波段”携带的信号</li>
<li>没有物理“电线”</li>
<li>不依赖介质的广播</li>
<li>半双工（发送方到接收方）</li>
</ul>
<p><strong>无线链路类型</strong></p>
<ul>
<li>无线局域网（WiFi）<br>10-100 Mbps；10米</li>
<li>广域（如3&#x2F;4&#x2F;5G蜂窝）<br>在~10公里范围内</li>
<li>蓝牙：短距离，有限速率</li>
<li>地面微波：点对点；45 Mbps</li>
<li>同步卫星：36000km高空， 280毫秒的往返时延</li>
<li>低轨卫星：近地，但围绕地球高速运动，需要大量卫星才能覆盖地球</li>
</ul>
<h3 id="-1"><a href="#-1" class="headerlink" title=""></a></h3><h3 id="2-数据交换方式"><a href="#2-数据交换方式" class="headerlink" title="2.数据交换方式"></a>2.数据交换方式</h3><h4 id="①分组交换"><a href="#①分组交换" class="headerlink" title="①分组交换"></a>①分组交换</h4><p><strong>分组交换采用把一个个小的数据包存储转发传输来实现数据交换。</strong></p>
<p>主要的一些<strong>缺点</strong>：<br>1、不具有实时性。<br>2、存在延时。<br>3、会造成通信阻塞。<br>4、存在无用的重复数据。<br>5、会出现丢包的情况。</p>
<p><strong>优点</strong>：<br>1、设计简单。<br>2、资源利用率很高。</p>
<h4 id="②电路交换"><a href="#②电路交换" class="headerlink" title="②电路交换"></a>②电路交换</h4><p>电路连接的<strong>三个阶段</strong>：</p>
<p>1、建立连接。<br>2、数据传输。<br>3、释放连接。</p>
<p><strong>优点</strong>：<br>1、传输速度快、高效。<br>2、实时。</p>
<p><strong>缺点</strong>：<br>1、资源利用率低。<br>2、新建连接需要占据一定的时间，甚至比通话的时间还长。</p>
<p><strong>电路交换的多路复用</strong><br>频分多路复用FDM<br>时分多路复用TDM</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/5d6a298bae4162200d8133c69b5c2a11png.jpg" alt="在这里插入图片描述"></p>
<h3 id="3-信道复用"><a href="#3-信道复用" class="headerlink" title="3.信道复用"></a>3.信道复用</h3><blockquote>
<p>复用 (multiplexing) 是通信技术中的基本概念。<br>它允许用户使用一个共享信道进行通信，降低成本，提高利用率。</p>
</blockquote>
<h4 id="①频分复用"><a href="#①频分复用" class="headerlink" title="①频分复用"></a>①频分复用</h4><ul>
<li>将整个带宽分为多份，用户在分配到一定的频带后，在通信过程中自始至终都占用这个频带。</li>
<li>频分复用的所有用户在同样的时间占用不同的带宽资源（请注意，这里的“带宽”是频率带宽而不是数据的发送速率）。</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/5d6a298bae4162200d8133c69b5c2a11png.jpg" alt="在这里插入图片描述"></p>
<h4 id="②时分复用"><a href="#②时分复用" class="headerlink" title="②时分复用"></a>②时分复用</h4><p>时分复用则是将时间划分为一段段等长的时分复用帧（TDM 帧）。每一个时分复用的用户在每一个 TDM 帧中占用固定序号的时隙。<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/391cbcbe8c2c650551d0703b496ab408png.jpg" alt="在这里插入图片描述"></p>
<h4 id="③波分复用"><a href="#③波分复用" class="headerlink" title="③波分复用"></a>③波分复用</h4><p>波分复用就是光的频分复用。使用一根光纤来同时传输多个光载波信号。<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/04fb83f637f557b12efbb6d2cb43a3c8png.jpg" alt="在这里插入图片描述"></p>
<h4 id="④码分复用"><a href="#④码分复用" class="headerlink" title="④码分复用"></a>④码分复用</h4><p>各用户使用经过特殊挑选的不同码型，因此彼此不会造成干扰。</p>
<h2 id="三、数据链路层"><a href="#三、数据链路层" class="headerlink" title="三、数据链路层"></a>三、数据链路层</h2><h3 id="1-功能（要解决的问题）"><a href="#1-功能（要解决的问题）" class="headerlink" title="1.功能（要解决的问题）"></a>1.功能（要解决的问题）</h3><p><strong>成帧 （Framing）</strong><br>将比特流划分成“帧”的主要目的是为了检测和纠正物理层在比特传输中可能出现的错误，数据链路层功能需借助“帧”的各个域来实现<br><strong>差错控制 （Error Control）</strong><br>处理传输中出现的差错，如位错误、丢失等<br><strong>流量控制 （Flow Control）</strong><br>确保发送方的发送速率，不大于接收方的处理速率，避免接收缓冲区溢出</p>
<h3 id="2-数据链路层提供的服务"><a href="#2-数据链路层提供的服务" class="headerlink" title="2.数据链路层提供的服务"></a>2.数据链路层提供的服务</h3><p>1.无确认 无连接 服务（ Unacknowledged connectionless ）</p>
<ul>
<li>接收方不对收到的帧进行确认</li>
<li>适用场景：误码率低的可靠信道；实时通信；</li>
<li>网络实例：以太网</li>
</ul>
<p>2.有确认 无连接 服务（ Acknowledged connectionless ）</p>
<ul>
<li>每一帧都得到单独的确认</li>
<li>适用场景：不可靠的信道（无线信道）</li>
<li>网络实例：802.11</li>
</ul>
<p>3.有确认 有连接 服务（ Acknowledged connection-oriented ）</p>
<ul>
<li>适用场景：长延迟的不可靠信道</li>
</ul>
<h3 id="3-成帧（Framing）"><a href="#3-成帧（Framing）" class="headerlink" title="3.成帧（Framing）"></a>3.成帧（Framing）</h3><h5 id="3-1-要解决的关键问题：如何标识一个帧的开始？"><a href="#3-1-要解决的关键问题：如何标识一个帧的开始？" class="headerlink" title="3.1 要解决的关键问题：如何标识一个帧的开始？"></a>3.1 要解决的关键问题：如何标识一个帧的开始？</h5><ul>
<li>接收方必须能从物理层接收的比特流中明确区分出一帧的开始和结束，这个问题被称为帧同步或帧定界</li>
<li>关键：选择何种定界符？定界符出现在数据部分如何处理？</li>
</ul>
<h5 id="3-2-成帧（framing）的方式"><a href="#3-2-成帧（framing）的方式" class="headerlink" title="3.2 成帧（framing）的方式"></a>3.2 成帧（framing）的方式</h5><h6 id="①带比特填充的定界符法"><a href="#①带比特填充的定界符法" class="headerlink" title="①带比特填充的定界符法"></a>①带比特填充的定界符法</h6><p>定界符：两个0比特之间，连续6个1比特，即01111110，0x7E<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/875b471e44a6b0c85370a060308c384dpng.jpg" alt="在这里插入图片描述"><br>发送方检查有效载荷：若在有效载荷中出现连续5个1比特，则直接插入1个0比特<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/f91c2c9a1ad4ac4232124097737f8162png.jpg" alt="在这里插入图片描述"></p>
<p>接收方的处理：<br>若出现连续5个1比特，<br>若下一比特为0，则为有效载荷，直接丢弃0比特；<br>若下一比特为1，则连同后一比特的0，构成定界符，一帧结束</p>
<h6 id="②物理层编码违例"><a href="#②物理层编码违例" class="headerlink" title="②物理层编码违例"></a>②物理层编码违例</h6><ul>
<li>核心思想：<strong>选择的定界符不会在数据部分出现</strong></li>
<li>4B&#x2F;5B编码方案<br>4比特数据映射成5比特编码，剩余的一半码字（16个码字）未使用，可以用做帧定界符<br>例如： 00110组合不包含在4B&#x2F;5B编码中，可做帧定界符</li>
<li>前导码<br>存在很长的 前导码（preamble），可以用作定界符<br>例如：传统以太网、802.11</li>
<li>曼切斯特编码 &#x2F; 差分曼切斯特编码<br>正常的信号在周期中间有跳变，持续的高电平（或低电平）为违例码，可以用作定界符<br>例如：802.5令牌环网</li>
</ul>
<h3 id="4-差错控制"><a href="#4-差错控制" class="headerlink" title="4.差错控制"></a>4.差错控制</h3><h4 id="4-1-背景"><a href="#4-1-背景" class="headerlink" title="4.1 背景"></a>4.1 背景</h4><p>链路层存在的一个问题：<strong>信道的噪声导致数据传输问题</strong></p>
<ul>
<li><strong>差错</strong>（ incorrect ）：数据发生错误</li>
<li><strong>丢失</strong>（ lost ）：接收方未收到</li>
<li><strong>乱序</strong>（out of order）：先发后到，后发先到</li>
<li><strong>重复</strong>（repeatedly delivery）：一次发送，多次接收</li>
</ul>
<p>解决方案：<strong>差错检测与纠正、确认重传</strong></p>
<ul>
<li>确认：接收方校验数据（差错校验），并给发送方应答，防止差错</li>
<li>定时器：发送方启动定时器，防止丢失</li>
<li>顺序号：接收方检查序号，防止乱序递交、重复递交</li>
</ul>
<h4 id="4-2-差错检验与纠正"><a href="#4-2-差错检验与纠正" class="headerlink" title="4.2 差错检验与纠正"></a>4.2 差错检验与纠正</h4><p><strong>目标</strong></p>
<p>保证一定差错检测和纠错能力的前提下，如何减少冗余信息量？</p>
<p><strong>考虑的问题</strong></p>
<ul>
<li>信道的特征和传输需求</li>
<li>冗余信息的计算方法、携带的冗余信息量</li>
<li>计算的复杂度等</li>
</ul>
<p><strong>两种主要策略</strong></p>
<ul>
<li>检错码（error-detecting code）</li>
</ul>
<blockquote>
<p>在被发送的数据块中，包含一些冗余信息，但这些信息只能使接收方推断是否发生错误但不能推断哪位发生错误，接收方可以请求发送方重传数据主要用在高可靠、误码率较低的信道上，例如光纤链路偶尔发生的差错，可以通过重传解决差错问题</p>
</blockquote>
<ul>
<li>纠错码（error-correcting code)</li>
</ul>
<blockquote>
<p>发送方在每个数据块中加入足够的冗余信息，使得接收方能够判断接收到的数据是否有错，并能纠正错误（定位出错的位置）主要用于错误发生比较频繁的信道上，如无线链路也经常用于物理层，以及更高层（例如，实时流媒体应用和内容分发）使用纠错码的技术通常称为前向纠错（FEC，Forward Error Correction)</p>
</blockquote>
<p>常用的检错码包括：</p>
<h5 id="①奇偶检验-Parity-Check"><a href="#①奇偶检验-Parity-Check" class="headerlink" title="①奇偶检验 (Parity Check)"></a>①奇偶检验 (Parity Check)</h5><p>1位奇偶校验是最简单、最基础的检错码。</p>
<p>1位奇偶校验：增加1位校验位，可以检查奇数位错误。<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/fce44f03a2ff1455a259ca01a8bcc50fpng.jpg" alt="在这里插入图片描述"></p>
<h5 id="②校验和-Checksum"><a href="#②校验和-Checksum" class="headerlink" title="②校验和 (Checksum)"></a>②校验和 (Checksum)</h5><p>主要用于TCP&#x2F;IP体系中的网络层和传输层<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/685e782efbafa7c91613f5405d990673png.jpg" alt="在这里插入图片描述"></p>
<h5 id="③循环冗余校验-Cyclic-Redundancy-Check，CRC"><a href="#③循环冗余校验-Cyclic-Redundancy-Check，CRC" class="headerlink" title="③循环冗余校验 (Cyclic Redundancy Check，CRC)"></a>③循环冗余校验 (Cyclic Redundancy Check，CRC)</h5><p>数据链路层广泛使用的校验方法</p>
<p><strong>CRC校验码计算方法</strong></p>
<ul>
<li>设原始数据D为k位二进制位模式</li>
<li>如果要产生n位CRC校验码，事先选定一个n+1位二进制位模式G (称为生成多项式，收发双方提前商定)，G的最高位为1</li>
<li>将原始数据D乘以2^n （相当于在D后面添加 n 个 0），产生k+n位二进制位模式，用G对该位模式做模2除，得到余数R（n位，不足n位前面用0补齐）即为CRC校验码</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/2eced0df7812203613d706958463bb65png.jpg" alt="在这里插入图片描述"></p>
<p>CRC校验码计算示例</p>
<ul>
<li>D &#x3D; 1010001101</li>
<li>n &#x3D; 5</li>
<li>G &#x3D; 110101 或 G &#x3D; x5 + x4 + x2 + 1</li>
<li>R &#x3D; 01110</li>
<li>实际传输数据：101000110101110<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/0f90c1ad8d116fc31a814023e90c83c5png.jpg" alt="在这里插入图片描述"></li>
</ul>
<h5 id="④汉明码"><a href="#④汉明码" class="headerlink" title="④汉明码"></a>④汉明码</h5><p>目标：以奇偶校验为基础，找到出错位置，提供<strong>1位</strong>纠错能力</p>
<ul>
<li>给定n位待发送的数据，首先确定校验位的个数k（根据2^k≥k+n+1）</li>
<li>确定校验位在码流中的位置，2^i,i&#x3D;0,1,2,……，得到校验位P_1,P_2,P_4,P_8,……</li>
<li>确定分组，即每个校验位分别负责哪些数据位<br>P_1负责位置号的二进制符合XXXX1形式的数据位，即1,3,5,7,9,……<br>P_2负责位置号的二进制符合XXX1X形式的数据位，即2,3,6,7,10,……<br>P_3负责位置号的二进制符合XX1XX形式的数据位，即4,5,6,7,12,13,14,15,……</li>
<li>基于偶校验确定每组的校验位（0或1）</li>
</ul>
<blockquote>
<p>注： 汉明码是采用奇偶校验的码。它采用了一种非常巧妙的方式，把这串数字分了组，通过分组校验来确定哪一位出现了错误。</p>
</blockquote>
<blockquote>
<p>实际的海明码编码的过程也并不复杂，我们通过用不同过的校验位，去匹配多个不同的数据组，确保<strong>任何一个数据位出错，都会产生一个多个校验码位出错的唯一组合</strong>。这样，在出错的时候，我们就可以<strong>反过来找到出错的数据位</strong>，并纠正过来。当只有一个校验码位出错的时候，我们就知道实际出错的是校验码位了。</p>
</blockquote>
<h3 id="5-流量控制"><a href="#5-流量控制" class="headerlink" title="5.流量控制"></a>5.流量控制</h3><p>链路层存在的另一个问题：接收方的处理速率</p>
<ul>
<li>接收方的接收缓冲区溢出</li>
</ul>
<p>解决方案</p>
<ul>
<li>基于<strong>反馈</strong> (feedback-based) 的流量控制<br>接收方反馈，发送方调整发送速率</li>
<li>基于<strong>速率</strong> (rate-based) 的流量控制<br>发送方根据内建机制，自行限速</li>
</ul>
<h3 id="6-媒体接入控制-MAC-Medium-Access-Control-子层"><a href="#6-媒体接入控制-MAC-Medium-Access-Control-子层" class="headerlink" title="6.媒体接入控制 MAC (Medium Access Control)子层"></a>6.媒体接入控制 MAC (Medium Access Control)子层</h3><p>数据链路层分为两个子层：<br><strong>MAC子层</strong>：介质访问<br><strong>LLC子层</strong>：承上启下（弱层）<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/f20792204eae2aa635ff3d520d752694png.jpg" alt="在这里插入图片描述"></p>
<h4 id="6-1-信道分配问题"><a href="#6-1-信道分配问题" class="headerlink" title="6.1 信道分配问题"></a>6.1 信道分配问题</h4><h5 id="①-时分多址接入-TDMA"><a href="#①-时分多址接入-TDMA" class="headerlink" title="① 时分多址接入-TDMA"></a>① 时分多址接入-TDMA</h5><p>TDMA: time division multiple access</p>
<ul>
<li>按顺序依次接入并使用信道</li>
<li>每个用户使用固定且相同长度的时隙</li>
<li>某时隙轮到某用户使用时，该用户没有数据要发送，则该时隙被闲置</li>
</ul>
<p>例子: 6-user LAN, 1,3,4时隙有数据发送, 2,5,6时隙被闲置<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/42443c64b7dd5b4beedcbe48ac69ea44png.jpg" alt="在这里插入图片描述"></p>
<h5 id="②-频分多址接入-FDMA"><a href="#②-频分多址接入-FDMA" class="headerlink" title="② 频分多址接入-FDMA"></a>② 频分多址接入-FDMA</h5><p>FDMA: frequency division multiple access</p>
<ul>
<li>信道总频带被划分为多个相同宽度的子频带</li>
<li>每个用户占用一个子频带，不管用户是否有数据发送</li>
</ul>
<p>例子: 6-user LAN, 1,3,4频带有数据发送, 2,5,6频带被闲置<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/751b94ab3ddb2faf669c970b9e401707png.jpg" alt="在这里插入图片描述"></p>
<h4 id="6-2-多路访问协议"><a href="#6-2-多路访问协议" class="headerlink" title="6.2 多路访问协议"></a>6.2 多路访问协议</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/a82bca07cdd6ccde2b4c96cb38085071png.jpg" alt="在这里插入图片描述"></p>
<h5 id="6-2-1-随机访问协议"><a href="#6-2-1-随机访问协议" class="headerlink" title="6.2.1 随机访问协议"></a>6.2.1 随机访问协议</h5><p>特点：冲突不可避免</p>
<h6 id="①ALOHA"><a href="#①ALOHA" class="headerlink" title="①ALOHA"></a>①ALOHA</h6><p><strong>纯ALOHA协议</strong></p>
<p>原理：想发就发！</p>
<p>特点：</p>
<ul>
<li>冲突：两个或以上的帧</li>
<li>随时可能冲突</li>
<li>冲突的帧完全破坏</li>
<li>破坏了的帧要重传</li>
</ul>
<p><strong>分隙ALOHA</strong></p>
<ul>
<li>分隙ALOHA是把时间分成时隙（时槽）</li>
<li>时隙的长度对应一帧的传输时间。</li>
<li>帧的发送必须在时隙的起点。</li>
<li>冲突只发生在时隙的起点<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/48fd4f7426cd0a7282661f37be9e4786png.jpg" alt="在这里插入图片描述"></li>
</ul>
<h6 id="②载波侦听多路访问协议CSMA"><a href="#②载波侦听多路访问协议CSMA" class="headerlink" title="②载波侦听多路访问协议CSMA"></a>②载波侦听多路访问协议CSMA</h6><p>特点：“先听后发”<br>改进ALOHA的侦听&#x2F;发送策略分类<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/dbf64c9dba46cf12ebe1126b5611b5c5png.jpg" alt="在这里插入图片描述"></p>
<p><strong>非持续式CSMA</strong></p>
<p>1.特点<br>①经侦听，如果介质空闲，开始发送<br>②如果介质忙，则等待一个随机分布的时间，然后重复步骤①</p>
<p>2.好处<br>等待一个随机时间可以减少再次碰撞冲突的可能性</p>
<p>3.缺点<br>等待时间内介质上如果没有数据传送，这段时间是浪费的</p>
<hr>
<p><strong>持续式CSMA</strong></p>
<p><strong>p-持续式CSMA</strong></p>
<p>1.特点</p>
<p>①经侦听，如介质空闲，那么以 p的概率 发送，以(1–p)的概率延迟一个时间单元发送<br>②如介质忙，持续侦听，一旦空闲重复①<br>③如果发送已推迟一个时间单元，再重复步骤①</p>
<p><strong>1-持续式CSMA</strong></p>
<p>1.特点<br>①经侦听，如介质空闲，则发送<br>②如介质忙，持续侦听，一旦空闲立即发送<br>③如果发生冲突，等待一个随机分布的时间再重复步骤①</p>
<p>2.好处：持续式的延迟时间要少于非持续式</p>
<p>3.主要问题：如果两个以上的站等待发送，一旦介质空闲就一定会发生冲突</p>
<p>4.注意<br>1-持续式是p-持续式的特例</p>
<h5 id="6-2-2-受控访问协议"><a href="#6-2-2-受控访问协议" class="headerlink" title="6.2.2 受控访问协议"></a>6.2.2 受控访问协议</h5><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/d114e7fc1fde8efdd948da52779954a5png.jpg" alt="在这里插入图片描述"></p>
<p>特点：克服了冲突</p>
<h6 id="①位图协议（预留协议）"><a href="#①位图协议（预留协议）" class="headerlink" title="①位图协议（预留协议）"></a>①位图协议（预留协议）</h6><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/a17f81f92e11a3f5fe1794bb53023523png.jpg" alt="在这里插入图片描述"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/f239a11d608433cb873fecb85746e776png.jpg" alt="在这里插入图片描述"></p>
<p>竞争期：在自己的时槽内发送竞争比特</p>
<ul>
<li>举手示意</li>
<li>资源预留</li>
</ul>
<p>传输期：按序发送</p>
<ul>
<li>明确的使用权，避免了冲突</li>
</ul>
<h6 id="②令牌传递"><a href="#②令牌传递" class="headerlink" title="②令牌传递"></a>②令牌传递</h6><p>令牌：发送权限</p>
<p>令牌的运行：发送工作站去抓取，获得发送权</p>
<ul>
<li>除了环，令牌也可以运行在其它拓扑上，如令牌总线</li>
<li>发送的帧需要目的站或发送站将其从共享信道上去除；防止无限循环</li>
</ul>
<p>缺点：令牌的维护代价</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/1e278c3ab3b65d898206556495e663f8png.jpg" alt="在这里插入图片描述"></p>
<h6 id="③二进制倒计数协议"><a href="#③二进制倒计数协议" class="headerlink" title="③二进制倒计数协议"></a>③二进制倒计数协议</h6><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/869678cbfc16ffdcda8c402ace11d4b6png.jpg" alt="在这里插入图片描述"></p>
<p>站点：编序号，序号长度相同<br>竞争期：有数据发送的站点从高序号到低序号排队，高者得到发送权<br>特点：高序号站点优先</p>
<h5 id="6-2-3-有限竞争协议"><a href="#6-2-3-有限竞争协议" class="headerlink" title="6.2.3 有限竞争协议"></a>6.2.3 有限竞争协议</h5><p>利用上述二者的优势</p>
<h6 id="①自适应树搜索协议（Adaptive-Tree-Walk-Protocol）"><a href="#①自适应树搜索协议（Adaptive-Tree-Walk-Protocol）" class="headerlink" title="①自适应树搜索协议（Adaptive Tree Walk Protocol）"></a>①自适应树搜索协议（Adaptive Tree Walk Protocol）</h6><ul>
<li>在一次成功传输后的第一个竞争时隙，所有站点同时竞争。</li>
<li>如果只有一个站点申请，则获得信道。</li>
<li>否则在下一竞争时隙，有一半站点参与竞争（递归），下一时隙由另一半站点参与竞争</li>
<li>即所有站点构成一棵完全二叉树。<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/d7c44a45ea5f393874f8047dcf835897png.jpg" alt="在这里插入图片描述"></li>
</ul>
<h4 id="6-3虚拟局域网VLAN"><a href="#6-3虚拟局域网VLAN" class="headerlink" title="6.3虚拟局域网VLAN"></a>6.3虚拟局域网VLAN</h4><p><strong>广播域（Broadcasting Domain）</strong></p>
<ul>
<li>广播域是广播帧能够到达的范围；</li>
<li>缺省情况下，交换机所有端口同属于一个广播域，无法隔离广播域；</li>
<li>广播帧在广播域中传播，占用资源，降低性能，且具有安全隐患。</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/224152c3a522c1de33632ba2def0570fpng.jpg" alt="在这里插入图片描述"></p>
<p><strong>VLAN是一个在物理网络上根据用途，工作组、应用等来逻辑划分的局域网络，与用户的物理位置没有关系。</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/f302f128ba5c4f7feb14620064dd4bfapng.jpg" alt="在这里插入图片描述"></p>
<p>通过路由器或三层交换机进行VLAN间路由，实现VLAN间通信。<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/9d699369278ccaeaf8df5782690e5c92png.jpg" alt="在这里插入图片描述"><br>VLAN类型</p>
<ul>
<li><p>基于端口的VLAN<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/cc6e38a506329697d80205d785a4267bpng.jpg" alt="在这里插入图片描述"></p>
</li>
<li><p>基于MAC地址的VLAN<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/f1ea0fc693feabfcab2e94540a0cf799png.jpg" alt="在这里插入图片描述"></p>
</li>
<li><p>基于协议的VLAN<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/57b0eb2bd6e8afe0bb9df0bc2fda8367png.jpg" alt="在这里插入图片描述"></p>
</li>
<li><p>基于子网的VLAN<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/fc07e04b16ed53b7bd7571f1cf5bceadpng.jpg" alt="在这里插入图片描述"></p>
</li>
</ul>
<h4 id="6-4无线局域网WLAN"><a href="#6-4无线局域网WLAN" class="headerlink" title="6.4无线局域网WLAN"></a>6.4无线局域网WLAN</h4><blockquote>
<p>无线局域网（Wireless Local Area Network，WLAN)：指以无线信道作为传输介质的计算机局域网</p>
</blockquote>
<p><strong>基础架构模式（Infrastructure）</strong><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/a7d2fb2eef9446a01e2ea1a13b43d9f4png.jpg" alt="在这里插入图片描述"></p>
<ul>
<li>分布式系统（DS）</li>
<li>访问点（AP）</li>
<li>站点（STA）</li>
<li>基本服务集（BSS）</li>
<li>扩展服务集（ESS）</li>
<li>站点之间通信通过AP转发</li>
</ul>
<p><strong>自组织模式（Ad hoc）</strong><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/057a1bb29e99c25bb95d2cd5567e2c9bpng.jpg" alt="在这里插入图片描述"></p>
<ul>
<li>站点（STA）</li>
<li>独立基本服务集（IBSS）</li>
<li>站点之间直接通信</li>
<li>共享同一无线信道</li>
</ul>
<p><strong>无线局域网需要解决的问题</strong></p>
<p>1.有限的无线频谱带宽资源</p>
<ul>
<li>通道划分、空间重用</li>
<li>提高传输速率，解决传输问题</li>
<li>提高抗干扰能力和保密性</li>
</ul>
<p>2.共享的无线信道</p>
<ul>
<li>介质访问控制方法（CSMA&#x2F;CA）</li>
<li>可靠性传输、安全性</li>
</ul>
<p>3.组网模式管理</p>
<ul>
<li>BSS构建、认证、关联</li>
<li>移动性支持（漫游）</li>
<li>睡眠管理（节能模式）</li>
</ul>
<h2 id="四、网络层"><a href="#四、网络层" class="headerlink" title="四、网络层"></a>四、网络层</h2><h3 id="1-网络层概述"><a href="#1-网络层概述" class="headerlink" title="1.网络层概述"></a>1.网络层概述</h3><p>网络层在数据链路层提供的两个相邻端点之间的数据帧的传送功能上，进一步管理网络中的数据通信，将数据设法从源端经过若干个中间节点传送到目的端，从而向运输层提供最基本的端到端的数据传送服务。<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/9b926eedb8838732becacde60ed556bcpng.jpg" alt="在这里插入图片描述"></p>
<h3 id="2-网络层关键功能"><a href="#2-网络层关键功能" class="headerlink" title="2.网络层关键功能"></a>2.网络层关键功能</h3><ul>
<li>路由（控制面）<ul>
<li>选择数据报从源端到目的端的路径</li>
<li>核心：路由算法与协议</li>
</ul>
</li>
<li>转发（数据面）<ul>
<li>将数据报从路由器的输入接口传送到正确的输出接口</li>
</ul>
</li>
</ul>
<h3 id="3-Internet网际协议"><a href="#3-Internet网际协议" class="headerlink" title="3.Internet网际协议"></a>3.Internet网际协议</h3><h4 id="3-1-IPv4协议及其相关技术"><a href="#3-1-IPv4协议及其相关技术" class="headerlink" title="3.1 IPv4协议及其相关技术"></a>3.1 IPv4协议及其相关技术</h4><h5 id="3-1-1-基本概念"><a href="#3-1-1-基本概念" class="headerlink" title="3.1.1 基本概念"></a>3.1.1 基本概念</h5><p>IPv4协议，网际协议版本4，一种无连接的协议，是互联网的核心，也是使用最广泛的网际协议版本，其后继版本为IPv6</p>
<p>internet协议执行<strong>两个基本功能</strong></p>
<ul>
<li>寻址(addressing)</li>
<li>分片(fragmentation)</li>
</ul>
<h5 id="3-1-2-IPv4数据报格式"><a href="#3-1-2-IPv4数据报格式" class="headerlink" title="3.1.2 IPv4数据报格式"></a>3.1.2 IPv4数据报格式</h5><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/6da13a1473d969ea6dcc509cc086c3e1png.jpg" alt="在这里插入图片描述"></p>
<ul>
<li><strong>版本</strong>： 4bit ，表示采用的IP协议版本</li>
<li><strong>首部长度</strong>： 4bit，表示整个IP数据报首部的长度</li>
<li><strong>区分服务</strong>： 8bit ，该字段一般情况下不使用</li>
<li><strong>总长度</strong>： 16bit ，表示整个IP报文的长度,能表示的最大字节为2^16-1&#x3D;65535字节</li>
<li><strong>标识</strong>： 16bit ， IP软件通过计数器自动产生，每产生1个数据报计数器加1；在ip分片以后，用来标识同一片分片</li>
<li><strong>标志</strong>： 3bit，目前只有两位有意义。<br>MF，置1表示后面还有分片，置0表示这是数据报片的最后1个；<br>DF，不能分片标志，置0时表示允许分片</li>
<li><strong>片偏移</strong>： 13bit，表示IP分片后，相应的IP片在总的IP片的相对位置</li>
<li><strong>生存时间TTL(Time To Live)</strong> ：8bit,表示数据报在网络中的生命周期，用通过路由器的数量来计量，即跳数（每经过一个路由器会减1）</li>
<li><strong>协议</strong>：8bit，标识上层协议（TCP&#x2F;UDP&#x2F;ICMP…）</li>
<li><strong>首部校验和</strong>：16bit ，对数据报首部进行校验，不包括数据部分</li>
<li><strong>源地址</strong>：32bit，标识IP片的发送源IP地址</li>
<li><strong>目的地址</strong>：32bit，标识IP片的目的地IP地址</li>
<li><strong>选项</strong>：可扩充部分，具有可变长度，定义了安全性、严格源路由、松散源路由、记录路由、时间戳等选项</li>
<li><strong>填充</strong>：用全0的填充字段补齐为4字节的整数倍</li>
</ul>
<h5 id="3-1-3-数据报分片"><a href="#3-1-3-数据报分片" class="headerlink" title="3.1.3 数据报分片"></a>3.1.3 数据报分片</h5><p><strong>分片原因</strong></p>
<p>数据报长度大于传输链路的MTU</p>
<blockquote>
<p>MTU（Maximum Transmission Unit）, 最大传输单元</p>
<ul>
<li>链路MTU</li>
<li>路径MTU (Path MTU)</li>
</ul>
</blockquote>
<p><strong>分片策略</strong></p>
<ul>
<li>允许途中分片：根据下一跳链路的MTU实施分片</li>
<li>不允许途中分片：发出的数据报长度小于路径MTU（路径MTU发现机制）</li>
</ul>
<p><strong>重组策略</strong></p>
<ul>
<li>途中重组，实施难度太大</li>
<li>目的端重组（互联网采用的策略）</li>
<li>重组所需信息：原始数据报编号、分片偏移量、是否收集所有分片</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/bb5f3c0c95b1d6edca07b5f4137cbea6png.jpg" alt="在这里插入图片描述"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/cc0b6a528eff805c29345c2a176f25fepng.jpg" alt="在这里插入图片描述"><br>IPv4分片策略</p>
<ul>
<li>IPv4分组在传输途中可以多次分片<ul>
<li>源端系统，中间路由器（可通过标志位设定是否允许路由器分片，DF标志位）</li>
</ul>
</li>
<li>IPv4分片只在目的IP对应的目的端系统进行重组</li>
<li>IPv4分片、重组字段在基本IP头部<ul>
<li>标识、标志、片偏移</li>
</ul>
</li>
<li>IPv6分片机制有较大变化（见IPv6部分的介绍）</li>
</ul>
<blockquote>
<p>注：分组 (packet) 与 帧(frame)的关系</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/56820f6dc4cca1e78322db2cc9dd89bfpng.jpg" alt="在这里插入图片描述"></p>
<h5 id="3-1-4-IP协议功能及报头字段总结"><a href="#3-1-4-IP协议功能及报头字段总结" class="headerlink" title="3.1.4 IP协议功能及报头字段总结"></a>3.1.4 IP协议功能及报头字段总结</h5><p><strong>网络层基本功能</strong></p>
<ul>
<li>支持多跳寻路将IP数据报送达目的端：<strong>目的IP地址</strong></li>
<li>表明发送端身份：<strong>源IP地址</strong></li>
<li>根据IP头部协议类型，提交给不同上层协议处理：<strong>协议</strong></li>
</ul>
<p><strong>其它相关问题</strong></p>
<ul>
<li>数据报长度大于传输链路的MTU的问题，通过<strong>分片机制</strong>解决：<strong>标识、标志、片偏移</strong></li>
<li>防止循环转发浪费网络资源（路由错误、设备故障…），通过<strong>跳数限制</strong>解决：<strong>生存时间TTL</strong></li>
<li>IP报头错误导致无效传输，通过<strong>头部机校验</strong>解决：<strong>首部校验和</strong></li>
</ul>
<h4 id="3-2-IP地址"><a href="#3-2-IP地址" class="headerlink" title="3.2 IP地址"></a>3.2 IP地址</h4><h5 id="3-2-1-概述"><a href="#3-2-1-概述" class="headerlink" title="3.2.1 概述"></a>3.2.1 概述</h5><ul>
<li><p><strong>IP地址</strong>，网络上的每一台主机（或路由器）的每一个接口都会分配一个全球唯一的32位的标识符</p>
</li>
<li><p>将IP地址划分为固定的类，每一类都由两个字段组成</p>
</li>
<li><p>网络号相同的这块连续IP地址空间称为地址的<strong>前缀</strong>，或<strong>网络前缀</strong></p>
</li>
<li><p>IP地址共分为A、B、C、D、E五类，A类、B类、C类为单播地址</p>
</li>
<li><p>IP地址的书写采用点分十进制记法，其中每一段取值范围为0到255</p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/3061a5046bfdef818ee0698e551d39cbpng.jpg" alt="在这里插入图片描述"></p>
<p><strong>IP特殊地址</strong><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/24f7495527f42b42c3fa0d3fb77775ebpng.jpg" alt="在这里插入图片描述"></p>
<h5 id="3-2-1-子网划分"><a href="#3-2-1-子网划分" class="headerlink" title="3.2.1 子网划分"></a>3.2.1 子网划分</h5><ul>
<li>子网划分(subnetting)，在网络内部将一个网络块进行划分以供多个内部网络使用，对外仍是一个网络</li>
<li>子网(subnet )，一个网络进行子网划分后得到的一系列结果网络称为子网</li>
<li>子网掩码(subnet mask )，与 IP 地址一一对应，是32 bit 的二进制数，置1表示网络位，置0表示主机位</li>
<li>子网划分减少了 IP 地址的浪费、网络的组织更加灵活、便于维护和管理<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/16bd2c7bd8280135c3d092851681b10bpng.jpg" alt="在这里插入图片描述"></li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/f02449fdfd9a434c8bbff859bfdfcb20png.jpg" alt="在这里插入图片描述"></p>
<h5 id="3-2-3-无类域间路由"><a href="#3-2-3-无类域间路由" class="headerlink" title="3.2.3 无类域间路由"></a>3.2.3 无类域间路由</h5><ul>
<li>将32位的IP地址划分为前后两个部分，并采用斜线记法，即在IP地址后加上“&#x2F;”，然后再写上网络前缀所占位数</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/ab75ae814e75f38589cdda9ec1a4883bpng.jpg" alt="在这里插入图片描述"></p>
<ul>
<li>一个 CIDR 地址块可以表示很多地址，这种地址的聚合常称为<strong>路由聚合</strong>（route aggregation），也称为<strong>构成超网 (supernet)</strong></li>
<li>聚合技术在Internet中大量使用，它允许前缀重叠，数据包按具体路由的方向发送，即具有最少IP地址的<strong>最长匹配前缀</strong></li>
</ul>
<blockquote>
<p>注：当路由器收到一个IP数据包时，它会将数据包的目的IP地址与自己本地路由表中的所有路由表进行<strong>逐位（Bit-By-Bit）对比</strong>，直到找到<strong>匹配度最长</strong>的条目，这就是<strong>最长前缀匹配机制</strong>。（路由比对之前会用相应路由的目的网络掩码进行逻辑与运算，再拿结果与路由路径比对）</p>
</blockquote>
<h4 id="3-3-DHCP动态主机配置协议"><a href="#3-3-DHCP动态主机配置协议" class="headerlink" title="3.3 DHCP动态主机配置协议"></a>3.3 DHCP动态主机配置协议</h4><p>DHCP ：<strong>动态主机配置协议</strong></p>
<ul>
<li>当主机加入IP网络，允许主机从DHCP服务器动态获取IP地址</li>
<li>可以有效利用IP地址，方便移动主机的地址获取</li>
</ul>
<p>工作模式：<strong>客户&#x2F;服务器模式（ C&#x2F;S ）</strong><br>基于 UDP 工作，服务器运行在 67 号端口， 客户端运行在 68 号端口</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/fc437cf7303a17ff64964050dc5df929png.jpg" alt="在这里插入图片描述"></p>
<ul>
<li>DHCP 客户从UDP端口68以广播形式向服务器发送发现报文（DHCPDISCOVER）</li>
<li>DHCP 服务器广播发出提供报文（DHCPOFFER）</li>
<li>DHCP 客户从多个DHCP服务器中选择一个，并向其以广播形式发送DHCP请求报文（DHCPREQUEST）</li>
<li>被选择的DHCP服务器广播发送确认报文（DHCPACK）</li>
</ul>
<h4 id="3-4-ARP地址解析协议"><a href="#3-4-ARP地址解析协议" class="headerlink" title="3.4 ARP地址解析协议"></a>3.4 ARP地址解析协议</h4><p><strong>背景</strong><br>网络设备有数据要发送给另一台网络设备时，必须要知道对方的网络层地址（即IP地址）。IP地址由网络层来提供，但是仅有IP地址是不够的，IP数据报文必须封装成帧才能通过数据链路进行发送。数据帧必须要包含目的MAC地址，因此发送端还必须获取到目的MAC地址。通过目的IP地址二获取的MAC地址的过程是由ARP（Address Resolution Protocol）协议来实现的。</p>
<blockquote>
<p>注：因为下层协议是通过MAC地址来确定各自身份的，所以下层发送必须要MAC地址</p>
</blockquote>
<p><strong>IP 与 MAC地址</strong><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/4c0731a885c5294256a73d301da58fe8png.jpg" alt="在这里插入图片描述"></p>
<p><strong>ARP协议工作过程</strong><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/66a68730a344ba937251474b209aaa33png.jpg" alt="在这里插入图片描述"></p>
<ul>
<li>A已知B的IP地址，需要获得B的MAC地址（物理地址）</li>
<li>如果A的ARP表中缓存有B的IP地址与MAC地址的映射关系，则直接从ARP表获取</li>
<li>如果A的ARP表中未缓存有B的IP地址与MAC地址的映射关系，则A广播包含B的IP地址的ARP query分组<ul>
<li>在局域网上的所有节点都可以接收到ARP query</li>
</ul>
</li>
<li>B接收到ARP query分组后，将自己的MAC地址发送给A</li>
<li>A在ARP表中缓存B的IP地址和MAC地址的映射关系<ul>
<li>超时时删除</li>
</ul>
</li>
</ul>
<p><strong>路由到另一个局域网</strong><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/9b16edae60ad6b81a6f2569f02ffb9c8png.jpg" alt="在这里插入图片描述"></p>
<ul>
<li>A创建IP数据包（源为A、目的为E）</li>
<li>在源主机A的路由表中找到路由器R的IP地址223.1.1.4</li>
<li>A根据R的IP地址223.1.1.4，使用ARP协议获得R的MAC地址</li>
<li>A创建数据帧（目的地址为R的MAC地址）</li>
<li>数据帧中封装A到E的IP数据包</li>
<li>A发送数据帧，R接收数据帧</li>
</ul>
<h4 id="3-5-网络地址转换-NAT"><a href="#3-5-网络地址转换-NAT" class="headerlink" title="3.5 网络地址转换(NAT)"></a>3.5 网络地址转换(NAT)</h4><p><strong>定义</strong><br>网络地址转换(NAT)用于解决IPv4地址不足的问题，是一种将私有（保留）地址转化为公有IP地址的转换技术</p>
<blockquote>
<p>私有IP地址：<br>A类地址：10.0.0.0–10.255.255.255<br>B类地址：172.16.0.0–172.31.255.555<br>C类地址：192.168.0.0–192.168.255.255</p>
</blockquote>
<p><strong>NAT工作机制</strong><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/074e73afe23db29be423228ba22957d8png.jpg" alt="在这里插入图片描述"></p>
<ul>
<li><p><strong>出数据报</strong>：外出数据报用 NAT IP地址(全局), 新port # 替代 源IP地址(私有), port #</p>
</li>
<li><p><strong>NAT转换表</strong>：每个 (源IP地址, port #)到(NAT IP地址, 新port #) 映射项</p>
</li>
<li><p><strong>入数据报</strong>：对每个入数据报的地址字段用存储在NAT表中的(源IP地址, port #)替代对应的 (NAT IP地址, 新port #)</p>
</li>
<li><p>NAT根据不同的IP上层协议进行NAT表项管理<br>TCP，UDP，ICMP</p>
</li>
<li><p>传输层TCP&#x2F;UDP拥有16-bit 端口号字段<br>所以一个WAN侧地址可支持60,000个并行连接</p>
</li>
</ul>
<p><strong>NAT的优势</strong></p>
<ul>
<li>节省合法地址，减少地址冲突</li>
<li>灵活连接Internet</li>
<li>保护局域网的私密性</li>
</ul>
<h4 id="3-6-ICMP-互联网控制报文协议"><a href="#3-6-ICMP-互联网控制报文协议" class="headerlink" title="3.6 ICMP: 互联网控制报文协议"></a>3.6 ICMP: 互联网控制报文协议</h4><p><strong>ICMP: 互联网控制报文协议</strong></p>
<ul>
<li>ICMP 允许主机或路由器报告差错情况和提供有关异常情况的报告</li>
<li>由主机和路由器用于网络层信息的通信</li>
<li>ICMP 报文携带在IP 数据报中： IP上层协议号为1</li>
</ul>
<p><strong>ICMP报文类型</strong></p>
<ul>
<li><strong>ICMP 差错报告报文</strong><ul>
<li>终点不可达：不可达主机、不可达网络，无效端口、协议</li>
</ul>
</li>
<li><strong>ICMP 询问报文</strong><ul>
<li>回送请求&#x2F;回答 (ping使用)</li>
</ul>
</li>
</ul>
<p><strong>ICMP 报文格式</strong><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/f49415ff7f537ccf23aeb0b9ed5a2c23png.jpg" alt="在这里插入图片描述"></p>
<ul>
<li>ICMP报文的前 4 个字节包含格式统一的三个字段：类型、代码、检验和</li>
<li>相邻的后四个字节内容与ICMP的报文类型有关</li>
</ul>
<p><strong>ICMP报文类型及功能</strong><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/38d1931237e7c9d0893c56830314f469png.jpg" alt="在这里插入图片描述"></p>
<h3 id="4-路由算法"><a href="#4-路由算法" class="headerlink" title="4.路由算法"></a>4.路由算法</h3><p>路由算法须满足的特性：</p>
<ul>
<li>正确性</li>
<li>简单性</li>
<li>鲁棒性</li>
<li>稳定性</li>
<li>公平性</li>
<li>有效性</li>
</ul>
<p>根据路由算法是否随网络的通信量或拓扑自适应划分</p>
<ul>
<li>静态路由选择策略（非自适应路由选择）</li>
<li>动态路由选择策略（自适应路由选择）</li>
</ul>
<h4 id="4-1-距离向量路由"><a href="#4-1-距离向量路由" class="headerlink" title="4.1 距离向量路由"></a>4.1 距离向量路由</h4><p><strong>算法基本思想</strong></p>
<ul>
<li><p>每个节点周期性地向邻居发送它自己到某些节点的距离向量；</p>
</li>
<li><p>当节点x接收到来自邻居的新DV估计，它使用B-F方程更新其自己的DV :<br>Dx(y) ← minv{c(x,v) + Dv(y)} for each node y ∊ N</p>
</li>
<li><p>上述过程迭代执行，Dx(y)收敛为实际最小费用 dx(y)</p>
</li>
</ul>
<p>距离向量算法特点：<strong>迭代的、分布式的</strong></p>
<ul>
<li>每次本地迭代由下列引起: 本地链路费用改变、邻居更新报文</li>
<li>分布式:各节点依次计算，相互依赖</li>
</ul>
<blockquote>
<p>注：路由器只掌握物理相连的邻居以及链路费用</p>
</blockquote>
<h5 id="算法过程"><a href="#算法过程" class="headerlink" title="算法过程"></a>算法过程</h5><ul>
<li><p>路由器启动时初始化自己的路由表</p>
<ul>
<li>初始路由表包含所有直接相连的网络路径，距离均为0<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/7afa3b61a44ec20d9705063304053c83png.jpg" alt="在这里插入图片描述"></li>
</ul>
</li>
<li><p>路由器周期性地向其相邻路由器广播自己知道的路由信息</p>
</li>
<li><p>相邻路由器可以根据收到的路由信息修改和刷新自己的路由表<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/fe76d27336978c7a00429db67945965bpng.jpg" alt="在这里插入图片描述"></p>
</li>
<li><p>路由器经过若干次更新后，最终都会知道到达所有网络的最短距离</p>
</li>
<li><p>所有的路由器都得到正确的路由选择信息时网络进入“收敛”（convergence）状态</p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/ea6602bfa6a32524eaa31e5722d2c190png.jpg" alt="在这里插入图片描述"></p>
<h5 id="特殊情况考虑"><a href="#特殊情况考虑" class="headerlink" title="特殊情况考虑"></a>特殊情况考虑</h5><p><strong>计数到无穷问题（The Count-to-Infinity Problem）</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/4455f5f408531c4cb2f675919dcbb79fpng.jpg" alt="在这里插入图片描述"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/5a2e1a86b09cc38f3b899d7b603e95a9png.jpg" alt="在这里插入图片描述"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/90c0a7425f3172c616f7c0301d1221b0png.jpg" alt="在这里插入图片描述"></p>
<p><strong>好消息传播快，坏消息传播慢</strong>，是距离向量路由的一个主要缺点</p>
<h4 id="4-2-链路状态路由"><a href="#4-2-链路状态路由" class="headerlink" title="4.2 链路状态路由"></a>4.2 链路状态路由</h4><blockquote>
<p>注：所有路由器掌握完整的网络拓扑和链路费用信息</p>
</blockquote>
<h5 id="算法过程-1"><a href="#算法过程-1" class="headerlink" title="算法过程"></a>算法过程</h5><p>链路状态（Link State）路由可分为五个部分：</p>
<ol>
<li><p>发现邻居，了解他们的网络地址；<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/921c677c503f34e6c85479b279c5ecd9png.jpg" alt="在这里插入图片描述"></p>
</li>
<li><p>设置到每个邻居的成本度量；</p>
</li>
</ol>
<blockquote>
<ul>
<li>开销&#x2F;度量&#x2F;代价：<ul>
<li>自动发现设置或人工配置</li>
<li>度量：带宽、跳数、延迟、负载、可靠性等</li>
</ul>
</li>
<li>常用度量：链路带宽（反比）<ul>
<li>例如：1-Gbps以太网的代价为1，100-Mbps以太网的代价为10</li>
</ul>
</li>
<li>可选度量：延迟<ul>
<li>发送一个echo包，另一端立即回送一个应答</li>
<li>通过测量往返时间RTT，可以获得一个合理的延迟估计值</li>
</ul>
</li>
</ul>
</blockquote>
<ol start="3">
<li>构造一个分组，分组中包含刚收到的所有信息；</li>
</ol>
<blockquote>
<p>构造链路状态分组（link state packet，LSP）</p>
<ul>
<li>发送方标识</li>
<li>序列号</li>
<li>年龄</li>
<li>邻居列表</li>
</ul>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/a52db065fbbf2e997bf0f8ad5b89cf2dpng.jpg" alt="在这里插入图片描述"></p>
<ol start="4">
<li>将此分组发送给其他的路由器；</li>
</ol>
<blockquote>
<ul>
<li>每个LSP分组包含一个序列号，且递增</li>
<li>路由器记录所收到的所有（源路由器、序列号）对</li>
<li>当一个新分组到达时，路由器根据记录判断：<ul>
<li>如果是新分组，洪泛广播</li>
<li>如果是重复分组，丢弃</li>
<li>如果是过时分组，拒绝</li>
</ul>
</li>
</ul>
</blockquote>
<ol start="5">
<li>计算到其他路由器的最短路径。</li>
</ol>
<blockquote>
<p>Dijkstra算法示例<br>D(k)：从计算节点到目的节点k当前路径代价<br>p(k)：从计算节点到目的节点k的路径中k节点的前继节点</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/45e055f2a6daa0ff4867bc2acb9ce093png.jpg" alt="在这里插入图片描述"></p>
<h5 id="距离向量和链路状态算法比较"><a href="#距离向量和链路状态算法比较" class="headerlink" title="距离向量和链路状态算法比较"></a>距离向量和链路状态算法比较</h5><p>网络状态信息交换的范围</p>
<ul>
<li>DV:邻居间交换</li>
<li>LS:全网扩散</li>
</ul>
<p>网络状态信息的可靠性</p>
<ul>
<li>DV:部分道听途说</li>
<li>LS:自己测量</li>
</ul>
<h4 id="4-3-层次路由"><a href="#4-3-层次路由" class="headerlink" title="4.3 层次路由"></a>4.3 层次路由</h4><p><strong>产生原因</strong></p>
<ul>
<li>过于庞大的路由表存储、查找困难，路由信息交互开销高</li>
</ul>
<p>现实情况：</p>
<ul>
<li>地址分配往往是随机的，难以进行高效的地址聚合</li>
<li>每个网络的网络管理员有自己的管理方法和思路，并不希望每个路由器都干涉本网络内部的地址分配等问题</li>
</ul>
<p>层次路由可以解决：</p>
<ul>
<li>网络扩展性问题：当网络扩大时，控制路由表条目和路由表存储空间的增长</li>
<li>管理的自治问题：网络管理员可以控制和管理自己网络的路由</li>
</ul>
<p><strong>基本思路</strong></p>
<ul>
<li><p>互联网由大量不同的网络互连，每个管理机构控制的网络是自治的</p>
</li>
<li><p>自治系统（AS，Autonomous System）</p>
<ul>
<li>一个管理机构控制之下的网络</li>
<li>一个AS内部通常使用相同的路由算法&#x2F;路由协议，使用统一的路由度量（跳数、带宽、时延 …）</li>
<li>不同的AS可以使用不同的路由算法&#x2F;路由协议</li>
<li>每个AS有一个全球唯一的ID号：AS ID</li>
</ul>
</li>
<li><p>自治系统内的还可以进一步划分层次：私有自治系统或区域</p>
</li>
</ul>
<p><strong>效果</strong><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/fe23860ae09548df2cd4e51ba7f025bbpng.jpg" alt="在这里插入图片描述"></p>
<h4 id="4-4-广播路由"><a href="#4-4-广播路由" class="headerlink" title="4.4 广播路由"></a>4.4 广播路由</h4><p><strong>广播（Broadcasting）</strong>：源主机同时给全部目标地址发送同一个数据包</p>
<h5 id="实现方法"><a href="#实现方法" class="headerlink" title="实现方法"></a>实现方法</h5><p>①给每个主机单独发送一个数据包</p>
<ul>
<li>效率低、浪费带宽</li>
<li>Server需要知道每个目的地址</li>
</ul>
<p>②多目标路由（multi-destination routing）</p>
<ul>
<li>在需要转发的路由器线路复制一次该数据报</li>
<li>网络利用率高</li>
<li>Server依然需要知道所有的目的地址</li>
</ul>
<blockquote>
<p>注：以上方法难以实现</p>
</blockquote>
<p>③泛洪（flooding）</p>
<ul>
<li>一种将数据包发送到所有网络节点的简单方法</li>
<li>将每个进入数据包发送到除了进入线路外的每条出去线路</li>
</ul>
<p>用途</p>
<ul>
<li>保证性：一种有效广播手段，可确保数据包被传送到网络中每个节点</li>
<li>鲁棒性：即使大量路由器被损坏，也能找到一条路径（如果存在）</li>
<li>简单性：仅需知道自己的邻居</li>
</ul>
<p>无控制的泛洪</p>
<ul>
<li>实现广播最显而易见的技术</li>
<li>环路可能导致广播风暴</li>
<li>路由器可能收到多个副本</li>
<li>节点需要跟踪已泛洪的数据包以阻止洪泛</li>
<li>即使利用跳数来限制，也会出现成倍爆炸</li>
</ul>
<p>解决方法：受控制的泛洪（每个路由器进行有选择的泛洪）</p>
<ul>
<li>序号控制泛洪</li>
<li>逆向路径转发</li>
</ul>
<p>④生成树（spanning tree）</p>
<ul>
<li>源节点向所有属于该生成树的特定链路发送分组</li>
<li>改进了逆向路径转发</li>
<li>没有环路</li>
<li>最佳使用带宽</li>
<li>最少副本，消除了冗余分组</li>
<li>一个路由器可以不必知道整颗树，只需要知道在一颗树中的邻居即可</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/e388211c8515f9160f9c7609c5ac417fpng.jpg" alt="在这里插入图片描述"></p>
<h3 id="5-Internet路由协议"><a href="#5-Internet路由协议" class="headerlink" title="5.Internet路由协议"></a>5.Internet路由协议</h3><h4 id="5-1-路由选择协议RIP"><a href="#5-1-路由选择协议RIP" class="headerlink" title="5.1 路由选择协议RIP"></a>5.1 路由选择协议RIP</h4><p><strong>概述</strong></p>
<ul>
<li>路由选择协议RIP（ Routing Information Protocol）是基于距离矢量算法的协议</li>
<li>使用<strong>跳数</strong>衡量到达目的网络的距离<ul>
<li>RIP 认为一个<strong>好的路由</strong>就是它通过的路由器的数目少，即“<strong>距离短</strong>”</li>
<li>RIP 允许一条路径最多只能包含 15 个路由器</li>
</ul>
</li>
<li>RIP协议的基本思想<ul>
<li>仅和<strong>相邻路由器</strong>交换信息</li>
<li>路由器交换的内容是自己的<strong>路由表</strong></li>
<li>周期性更新：<strong>30s</strong></li>
</ul>
</li>
</ul>
<p><strong>工作过程</strong></p>
<ul>
<li>初始化</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/8c18900551e00127f46d54267431b869png.jpg" alt="在这里插入图片描述"></p>
<ul>
<li>周期性更新<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/783c7bc2d97c93865b5788f835cff9a7png.jpg" alt="在这里插入图片描述"></li>
</ul>
<p><strong>小结</strong></p>
<p>RIP协议的特点</p>
<ul>
<li>算法简单，易于实现</li>
<li>收敛慢</li>
<li>需要交换的信息量较大</li>
</ul>
<p>RIP协议的适用场合</p>
<ul>
<li>中小型网络</li>
</ul>
<p>RIP协议的防环路机制</p>
<ul>
<li>触发更新</li>
<li>毒性反转</li>
<li>水平分割</li>
<li>其他</li>
</ul>
<h4 id="5-2-BGP-外部网关路由协议"><a href="#5-2-BGP-外部网关路由协议" class="headerlink" title="5.2 BGP-外部网关路由协议"></a>5.2 BGP-外部网关路由协议</h4><p>路由协议</p>
<ul>
<li>内部网关协议 IGP： 有 RIP 和、OSPF、ISIS 等多种具体的协议</li>
<li>外部网关协议 EGP：目前使用的协议就是 BGP</li>
</ul>
<p>边界网关协议<strong>BGP (Border Gateway Protocol)</strong></p>
<ul>
<li>目前互联网中唯一实际运行的自治域间的路由协议</li>
</ul>
<p>BGP功能</p>
<ul>
<li>eBGP：从相邻的AS获得网络可达信息</li>
<li>iBGP： 将网络可达信息传播给AS内的路由器</li>
<li>基于网络可达信息和策略决定到其他网络的“最优”路由</li>
</ul>
<p>BGP会话: 两个BGP路由器通过TCP连接交换BGP报文</p>
<ul>
<li>通告到不同网络前缀的路径，即路径向量协议</li>
</ul>
<p><strong>BGP路径通告</strong><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/c28e7273d4868f7b0250f84f48e43e5epng.jpg" alt="在这里插入图片描述"></p>
<ul>
<li>AS2的路由器2c从AS3的路由器3a接收到路径AS3, X</li>
<li>根据AS2的策略，AS2的路由器2c接受路径AS3, X，通过iBGP传播给AS2的所有路由器</li>
<li>根据AS2策略，AS2的路由器2a通过eBGP向AS1的路由器1c通告从AS3的路由器3a接收到路径AS2, AS3, X</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/0040e44db476ce0a9902ad87e0310142png.jpg" alt="在这里插入图片描述"></p>
<p>路由器可能会学到多条到达目的网络的路径:</p>
<ul>
<li>AS1的路由器1c从2a学到路径AS2, AS3, X</li>
<li>AS1的路由器1c从3a学到路径AS3, X<br>由策略，AS1路由器1c可能选择路径AS3, X, 并在AS1中通过iBGP通告路径</li>
</ul>
<h3 id="6-路由器的工作原理"><a href="#6-路由器的工作原理" class="headerlink" title="6.路由器的工作原理"></a>6.路由器的工作原理</h3><h4 id="6-1-路由器概述"><a href="#6-1-路由器概述" class="headerlink" title="6.1 路由器概述"></a>6.1 路由器概述</h4><p>路由器是互联网最主要的网络设备，包含2个核心功能</p>
<ul>
<li>控制层：运行各种路由协议：BGP、OSPF、RIP，学习去往不同目的的转发路径：路由表</li>
<li>数据层：根据上述路由表，将收到的IP分组转发到正确的下一跳链路</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/fcf1a9b4eebb7c629e998dc2b61aac0fpng.jpg" alt="在这里插入图片描述"></p>
<h4 id="6-2-路由器控制层"><a href="#6-2-路由器控制层" class="headerlink" title="6.2 路由器控制层"></a>6.2 路由器控制层</h4><ul>
<li>路由器可同时运行多个路由协议</li>
<li>路由器也可不运行任何路由协议，只使用静态路由和直连路由</li>
<li>路由管理根据路由优先级，选择最佳路由，形成核心路由表</li>
<li>控制层将核心路由表下发到数据层，形成转发表（FIB）</li>
<li>若存在多个“去往同一目的IP前缀”的不同类型路由，路由器根据优先级选择最佳路由</li>
<li>优先级数值越小，优先级越高<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/d22b4f1684ae4ba18d1672d7669ff6eepng.jpg" alt="在这里插入图片描述"></li>
</ul>
<h4 id="6-3-路由器数据层"><a href="#6-3-路由器数据层" class="headerlink" title="6.3 路由器数据层"></a>6.3 路由器数据层</h4><p>路由器中IP报文转发核心功能</p>
<ul>
<li>链路层解封装，IP头部校验</li>
<li>获取报文目的IP地址</li>
<li>用目的IP地址，基于最长前缀匹配规则查询转发表</li>
<li>查询失败，丢弃报文</li>
<li>查询成功<ul>
<li>获取转发出接口和下一跳IP地址</li>
<li>IP头部“TTL”字段值减1，重新计算IP头部“校验和”</li>
<li>重新进行链路层封装，发送报文</li>
</ul>
</li>
</ul>
<blockquote>
<p>注：<strong>普通IP报文转发过程中，路由器不查看传输层及以上层协议的内容</strong></p>
</blockquote>
<ul>
<li><p>IP报文在路由器转发前后的变化</p>
<ul>
<li><strong>链路层封装更新，IP头部“TTL”减1，IP头部“校验和”更新</strong></li>
</ul>
</li>
<li><p>数据报在不同硬件单元的处理</p>
<ul>
<li>报文输入的接口卡<ul>
<li>链路层解封装</li>
<li>转发表查询（该工作在输入接口卡处理）</li>
<li>通过交换结构将报文排队发往目的接口卡（发送过快将产生拥塞）</li>
</ul>
</li>
<li>交换结构<ul>
<li>从输入接口卡发往输出接口卡</li>
</ul>
</li>
<li>报文输出的接口卡<ul>
<li>从交换结构接收报文（排队进行后续处理，到达太快将产生拥塞）</li>
<li>链路层封装</li>
<li>从输出接口发送报文</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>3种典型的交换结构</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/58f438567cf35acd19ef2afd107b977fpng.jpg" alt="在这里插入图片描述"></p>
<h3 id="7-拥塞控制算法"><a href="#7-拥塞控制算法" class="headerlink" title="7.拥塞控制算法"></a>7.拥塞控制算法</h3><h4 id="7-1-概述"><a href="#7-1-概述" class="headerlink" title="7.1 概述"></a>7.1 概述</h4><p><strong>拥塞</strong><br>网络中存在太多的数据包导致数据包传输延迟或丢失，从而导致网络吞吐量下降</p>
<p><strong>拥塞控制（congestion control）</strong><br>需要确保通信子网能够承载用户提交的通信量，是一个全局性问题，涉及主机、路由器等多种因素</p>
<p><strong>产生拥塞的原因</strong></p>
<ul>
<li>主机发送到网络的数据包数量过多，超过了网络的承载能力</li>
<li>突发的流量填满了路由器的缓冲区，造成某些数据包会被丢弃</li>
</ul>
<p><strong>拥塞控制的基本策略</strong></p>
<ul>
<li><strong>开环控制</strong>-—事先对通信流参数进行协商，协商后，不管网络是拥塞还是带宽充足，参数不能动态改变<ul>
<li>开环控制属于预防性拥塞控制，它竭力使网络总是处于无拥塞状态运行。开环控制的方法包括决定什么时候接受新流量，什么时候丢弃数据包和丢弃哪些数据包。其缺点是没有考虑网络的当前状态</li>
</ul>
</li>
<li><strong>闭环控制</strong>—根据网络状态进行<strong>动态控制</strong>，包括两部分：<strong>反馈机制</strong>和<strong>控制机制</strong>。闭环控制方法分为两个子类：<strong>显式反馈</strong>与<strong>隐式反馈</strong></li>
</ul>
<h4 id="7-2-流量调节"><a href="#7-2-流量调节" class="headerlink" title="7.2 流量调节"></a>7.2 流量调节</h4><ul>
<li>**抑制包(Choke Packets)**：用于通知发送方减小发送量，路由器选择一个被拥塞的数据包，给该数据包的源主机返回一个抑制包，抑制包中的目的地址取自该拥塞数据包。源主机收到抑制包后，减少发向特定目的地址的流量</li>
<li>**逐跳的抑制包(Hop-by-Hop Choke Packets)**：在高速或长距离网络中，由于源主机响应太慢，抑制包算法对拥塞控制的效果并不好，可采用逐跳抑制方法；其核心思想是抑制包对它经过的每个路由器都起作用，能够迅速缓解发生拥塞处的拥塞，但要求上游路由器有更大的缓冲区</li>
<li><strong>显式拥塞通告（ECN，Explicit Congestion Notification）</strong>，在IP包头中记录数据包是否经历了拥塞。在数据包转发过程中，路由器可以在包头中标记为经历拥塞，然后接收方在它的下一个应答数据包里显示该标记作为显式拥塞信号</li>
<li><strong>RFC2474中重新定义TOS域为包含一个6位的区分服务码点(DSCP)</strong> 和2位未使用位；<strong>RFC3168重新定义RFC2474中TOS域未使用的两位为ECN域</strong>，包含如下值：<br>00：发送主机不支持ECN<br>01或者10：发送主机支持ECN<br>11：路由器正在经历拥塞</li>
</ul>
<h4 id="7-3-随机早期检测RED-Random-Early-Detection"><a href="#7-3-随机早期检测RED-Random-Early-Detection" class="headerlink" title="7.3 随机早期检测RED (Random Early Detection)"></a>7.3 随机早期检测RED (Random Early Detection)</h4><ul>
<li>使路由器的队列维持两个参数，即队列长度最小门限 THmin 和最大门限 THmax</li>
<li>RED 对每一个到达的数据报都先计算平均队列长度 LAV</li>
<li>若平均队列长度小于最小门限 THmin ，则将新到达的数据报放入队列进行排队</li>
<li>若平均队列长度超过最大门限 THmax，则将新到达的数据报丢弃</li>
<li>若平均队列长度在最小门限 THmin 和最大门限THmax 之间，则按照某一概率 p 将新到达的数据报丢弃</li>
<li>RED 将路由器的到达队列划分成为三个区域<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/3513a4418bf3200ae5c98e56273bc2dapng.jpg" alt="在这里插入图片描述"></li>
</ul>
<p><strong>丢弃概率 p 与 THmin 和 Thmax 的关系</strong></p>
<ul>
<li>当 LAV &lt;Thmin 时，丢弃概率 p &#x3D; 0</li>
<li>当 LAV &gt;Thmax 时，丢弃概率 p &#x3D; 1</li>
<li>当 THmin &lt; LAV &lt; THmax时， 0  p  1<br>例如，按线性规律变化，从 0 变到 pmax</li>
</ul>
<h3 id="8-服务质量"><a href="#8-服务质量" class="headerlink" title="8.服务质量"></a>8.服务质量</h3><h4 id="8-1概述"><a href="#8-1概述" class="headerlink" title="8.1概述"></a>8.1概述</h4><p><strong>问题的提出</strong></p>
<ul>
<li>互联网本身只能提供“尽力而为的服务”或称“尽最大努力交付的服务”</li>
<li>当互联网越来越多的用于传输多媒体信息时，由于这些实时业务对网络的传输延时、延时抖动等特性较为敏感，这样网络的传输质量就难以保障了</li>
<li>IP网络不能保证特定业务的QoS要求，已经成为IP网络发展的巨大障碍</li>
<li>网络的服务质量越来越多的引起人们的关注，甚至成为网络技术研究的热点问题</li>
</ul>
<p><strong>什么是网络服务质量？（QoS, Quality of Service）</strong></p>
<p>QoS是网络在传输数据流时要满足一系列服务请求，具体可以量化为<strong>带宽、时延、抖动、丢包率</strong>等性能指标</p>
<h4 id="8-2-流量整形"><a href="#8-2-流量整形" class="headerlink" title="8.2 流量整形"></a>8.2 流量整形</h4><p>流量整形(traffic shaping)：<strong>其作用是限制流出某一网络的某一连接的流量与突发，使这类报文以比较均匀的速度向外发送</strong></p>
<h5 id="①漏桶算法"><a href="#①漏桶算法" class="headerlink" title="①漏桶算法"></a>①漏桶算法</h5><ul>
<li>到达的数据包（网络层的PDU）被放置在底部具有漏孔的桶中（数据包缓存）</li>
<li>漏桶最多可以排队b个字节，漏桶的这个尺寸受限于内存。如果数据包到达的时候漏桶已经满了，那么数据包应被丢弃</li>
<li>数据包从漏桶中漏出，以常量速率（r字节&#x2F;秒）注入网络，因此平滑了突发流量</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/97197558becdf34c9443e1e61cbf5a87png.jpg" alt="在这里插入图片描述"></p>
<h5 id="②令牌桶算法"><a href="#②令牌桶算法" class="headerlink" title="②令牌桶算法"></a>②令牌桶算法</h5><ul>
<li>产生令牌：周期性的以速率r向令牌桶中增加令牌，桶中的令牌不断增多。如果桶中令牌数已到达上限，则丢弃多余令牌</li>
<li>消耗令牌：输入数据包会消耗桶中的令牌。在网络传输中，数据包的大小通常不一致。大的数据包相较于小的数据包消耗的令牌要多</li>
<li>判断是否通过：输入数据包经过令牌桶时存在两种可能：输出该数据包或者被丢弃。当桶中的令牌数量可以满足数据包对令牌的需求，则将数据包输出，否则将其丢弃</li>
</ul>
<blockquote>
<p>注：漏桶算法和令牌桶算法的区别在于漏桶算法输出的流量永远不可能超过一定限制，而令牌桶算法可以容忍短时间内的高流量输出，对于一些突发流量的需求比较友好</p>
</blockquote>
<h4 id="8-3-数据包调度"><a href="#8-3-数据包调度" class="headerlink" title="8.3 数据包调度"></a>8.3 数据包调度</h4><p>在同一个流的数据包之间以及在竞争流之间<strong>分配路由器资源的算法</strong>称为<strong>包调度算法</strong>，它负责分配带宽和其他路由器资源，负责确定把缓冲区中的哪些数据包发送到输出链路上</p>
<ul>
<li>先来先服务FCFS（First-Come First-Serve）</li>
<li>公平队列算法（Fair Queueing&#x2F;Round Robin）</li>
<li>加权公平队列算法（Weighted Fair Queueing）</li>
<li>优先级调度（Priority Scheduling）</li>
</ul>
<h3 id="9-三层交换"><a href="#9-三层交换" class="headerlink" title="9.三层交换"></a>9.三层交换</h3><h4 id="9-1-三层交换的技术背景"><a href="#9-1-三层交换的技术背景" class="headerlink" title="9.1 三层交换的技术背景"></a>9.1 三层交换的技术背景</h4><ul>
<li>二层交换网络中的广播，限制了网络规模的扩展<ul>
<li>交换机对目标地址无法匹配的数据帧进行广播转发</li>
<li>交换机对目标地址为广播地址的数据帧进行广播转发</li>
<li>交换机为维护生成树状态产生大量的桥协议数据单元(Bridge Protocol Data Unit，BPDU)</li>
<li>这些广播帧会大量消耗网络资源，并频繁影响用户的数据通信</li>
</ul>
</li>
<li>VLAN虽然可以将广播的影响限定在一定范围内，但同时也隔离了正常的用户间数据通信</li>
<li>传统路由器致力于解决VLAN间互联互通，但是其转发效率和拓扑复杂性带来的网络通信瓶颈无法有效应对规模扩展</li>
</ul>
<h4 id="9-2-三层交换的动机"><a href="#9-2-三层交换的动机" class="headerlink" title="9.2 三层交换的动机"></a>9.2 三层交换的动机</h4><ul>
<li>利用第三层协议中的信息来加强第二层交换功能，形成带有路由功能的交换</li>
<li>融合VLAN 间的二层隔离和三层互通，消除大规模网络中广播对性能的影响</li>
<li>简化网络配置，简化网络拓扑，优化网络管理，降低网络部署成本</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/c3ee734c1873497520f5ce5b8f9ee18apng.jpg" alt="在这里插入图片描述"></p>
<h4 id="9-3-三层交换机的工作原理"><a href="#9-3-三层交换机的工作原理" class="headerlink" title="9.3 三层交换机的工作原理"></a>9.3 三层交换机的工作原理</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/3ec9d2193aeca8868cd7298844617e2cpng.jpg" alt="在这里插入图片描述"></p>
<h3 id="10-虚拟专用网VPN-Virtual-Private-Network"><a href="#10-虚拟专用网VPN-Virtual-Private-Network" class="headerlink" title="10.虚拟专用网VPN (Virtual Private Network)"></a>10.虚拟专用网VPN (Virtual Private Network)</h3><h4 id="10-1-VPN的技术背景"><a href="#10-1-VPN的技术背景" class="headerlink" title="10.1 VPN的技术背景"></a>10.1 VPN的技术背景</h4><ul>
<li>计算机网络按用途分类<ul>
<li>专用、公用</li>
</ul>
</li>
<li>专用网络的实现方式<ul>
<li>使用专用链路：铺设、租用（费用高，不灵活）</li>
<li>使用公共链路：不安全</li>
</ul>
</li>
<li>虚拟专用网VPN (Virtual Private Network)<ul>
<li>专用网络的经济、可靠、灵活的解决方案</li>
<li>利用安全隧道技术将专用网络在公共网络上扩展</li>
</ul>
</li>
<li>VPN的设计原则<ul>
<li>安全性、隧道与加密、数据验证、用户验证、防火墙与攻击检测</li>
</ul>
</li>
</ul>
<h4 id="10-2-VPN的原理"><a href="#10-2-VPN的原理" class="headerlink" title="10.2 VPN的原理"></a>10.2 VPN的原理</h4><ul>
<li>VPN指利用公用网络架设专用网络的远程访问技术</li>
<li>VPN通过隧道技术在公共网络上模拟出一条点到点的逻辑专线，从而达到安全数据传输的目的</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/7aaaecc6789874eed1276fb4b52b3329png.jpg" alt="在这里插入图片描述"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/aaf9f5ccc776364642dbb89c9383fd05png.jpg" alt="在这里插入图片描述"></p>
<ul>
<li>VPN对数据机密性和完整性的保护<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/75c927ce49376e85ba6813033bca01a5png.jpg" alt="在这里插入图片描述"></li>
</ul>
<h4 id="10-3-VPN的实现方式"><a href="#10-3-VPN的实现方式" class="headerlink" title="10.3 VPN的实现方式"></a>10.3 VPN的实现方式</h4><ul>
<li><p>用VPN连接合作伙伴<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/ddf6be2e73656a4b10ddf004e6970e7apng.jpg" alt="在这里插入图片描述"></p>
</li>
<li><p>用VPN实现专用网络的远程访问<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/cb3f8dbd562b10b5acca9836f6e5ed33png.jpg" alt="在这里插入图片描述"></p>
</li>
</ul>
<h3 id="11-IPv6协议"><a href="#11-IPv6协议" class="headerlink" title="11.IPv6协议"></a>11.IPv6协议</h3><p>初始动机：应付“32-bit地址空间耗尽”问题（CIDR和NAT都无法从根本上解决地址短缺问题），增加地址空间<br>IPv6 地址</p>
<ul>
<li>地址长度为128bit，是IPv4地址长度的4倍</li>
<li>IPv6地址空间数量约为3*1038</li>
<li>IPv6地址表示法，冒分十六进制，x : x : x : x : x : x : x : x<ul>
<li>简化方法：每个x前面的0可省略，可把连续的值为0的x表示为“::”, 且“::”只能出现1次</li>
<li>简化前地址，2001:0DA8:0000:0000:200C:0000:0000:00A5</li>
<li>简化后地址，2001:DA8:0000:0000:200C::A5</li>
</ul>
</li>
</ul>
<h2 id="五、传输层"><a href="#五、传输层" class="headerlink" title="五、传输层"></a>五、传输层</h2><h3 id="1-传输层概述"><a href="#1-传输层概述" class="headerlink" title="1.传输层概述"></a>1.传输层概述</h3><ul>
<li>传输层位于应用层和网络层之间：<ul>
<li>基于网络层提供的服务，向分布式应用程序提供通信服务</li>
</ul>
</li>
<li>按照因特网的“端到端”设计原则：<ul>
<li><strong>应用程序只运行在终端上</strong>，即不需要为网络设备编写程序</li>
</ul>
</li>
<li>站在应用程序的角度：<ul>
<li>传输层应提供<strong>进程之间本地通信的抽象</strong>：即运行在不同终端上的应用进程仿佛是直接连在一起的</li>
</ul>
</li>
</ul>
<h4 id="1-1-套接字"><a href="#1-1-套接字" class="headerlink" title="1.1 套接字"></a>1.1 套接字</h4><ul>
<li>设想在应用程序和网络之间存在一扇“门”：<ul>
<li>需要发送报文时：发送进程将报文推到门外</li>
<li>门外的运输设施（因特网）将报文送到接收进程的门口</li>
<li>需要接收报文时：接收进程打开门，即可收到报文</li>
</ul>
</li>
<li>在TCP&#x2F;IP网络中，这扇“门”称为<strong>套接字（socket）</strong>，是<strong>应用层和传输层的接口</strong>，也是应用程序和网络之间的API</li>
</ul>
<h4 id="1-2-传输层提供的服务"><a href="#1-2-传输层提供的服务" class="headerlink" title="1.2 传输层提供的服务"></a>1.2 传输层提供的服务</h4><ul>
<li>因特网的网络层提供“<strong>尽力而为</strong>”的服务：<ul>
<li>网络层尽最大努力在终端间交付分组，但不提供任何承诺</li>
<li>具体来说，不保证交付，不保证按序交付，不保证数据完整，不保证延迟，不保证带宽等</li>
</ul>
</li>
<li>传输层的<strong>有所为、有所不为</strong>:<ul>
<li>传输层可以通过差错恢复、重排序等手段提供可靠、按序的交付服务</li>
<li>但传输层无法提供延迟保证、带宽保证等服务</li>
</ul>
</li>
</ul>
<h4 id="1-3-因特网传输层提供的服务"><a href="#1-3-因特网传输层提供的服务" class="headerlink" title="1.3 因特网传输层提供的服务"></a>1.3 因特网传输层提供的服务</h4><ul>
<li>最低限度的传输服务：<ul>
<li>将终端-终端的数据交付扩展到进程-进程的数据交付</li>
<li>报文检错</li>
</ul>
</li>
<li>增强服务：<ul>
<li>可靠数据传输</li>
<li>流量控制</li>
<li>拥塞控制</li>
</ul>
</li>
<li>因特网传输层通过UDP协议和TCP协议，向应用层提供两种不同的传输服务：<ul>
<li>UDP协议：仅提供最低限度的传输服务</li>
<li>TCP协议：提供基础服务和增强服务</li>
</ul>
</li>
</ul>
<h3 id="2-传输层基本服务——复用和分用"><a href="#2-传输层基本服务——复用和分用" class="headerlink" title="2.传输层基本服务——复用和分用"></a>2.传输层基本服务——复用和分用</h3><h4 id="2-1-复用和分用概述"><a href="#2-1-复用和分用概述" class="headerlink" title="2.1 复用和分用概述"></a>2.1 复用和分用概述</h4><p>传输层基本服务：将主机间交付扩展到进程间交付，通过复用和分用实现<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/f11d4c5c30470871a58ddeb72f4be69bpng.jpg" alt="在这里插入图片描述"></p>
<ul>
<li><strong>复用</strong>：<br>发送方传输层将套接字标识置于报文段中，交给网络层</li>
<li><strong>分用</strong>：<br>接收方传输层根据报文段中的套接字标识，将报文段交付到正确的套接字</li>
</ul>
<h4 id="2-2-套接字标识与端口号"><a href="#2-2-套接字标识与端口号" class="headerlink" title="2.2 套接字标识与端口号"></a>2.2 套接字标识与端口号</h4><ul>
<li>端口号是套接字标识的一部分：<ul>
<li>每个套接字在本地关联一个端口号</li>
<li>端口号是一个16比特的数</li>
</ul>
</li>
<li>端口号的分类：<ul>
<li>熟知端口：0～1023，由公共域协议使用</li>
<li>注册端口：1024～49151，需要向IANA注册才能使用</li>
<li>动态和&#x2F;或私有端口：49152～65535，一般程序使用</li>
</ul>
</li>
<li>报文段中有两个字段携带端口号<ul>
<li>源端口号：与发送进程关联的本地端口号</li>
<li>目的端口号：与接收进程关联的本地端口号<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/4686bf10a524d673614ee0ba23799dd6png.jpg" alt="在这里插入图片描述"></li>
</ul>
</li>
</ul>
<h4 id="2-3-TCP-UDP套接字（复用和分用）"><a href="#2-3-TCP-UDP套接字（复用和分用）" class="headerlink" title="2.3 TCP&#x2F;UDP套接字（复用和分用）"></a>2.3 TCP&#x2F;UDP套接字（复用和分用）</h4><p><strong>UDP套接字</strong></p>
<ul>
<li>使用&lt;IP地址，端口号&gt;二元组标识UDP套接字</li>
<li>服务器使用一个套接字服务所有客户<br><strong>TCP套接字</strong></li>
<li>使用&lt;源IP地址，目的IP地址，源端口号，目的端口号&gt; 四元组标识连接套接字</li>
<li>服务器使用一个监听套接字和多个连接套接字服务多个客户，每个连接套接字服务一个客户</li>
</ul>
<h3 id="3-无连接传输：UDP"><a href="#3-无连接传输：UDP" class="headerlink" title="3.无连接传输：UDP"></a>3.无连接传输：UDP</h3><h4 id="3-1-UDP报文段结构"><a href="#3-1-UDP报文段结构" class="headerlink" title="3.1 UDP报文段结构"></a>3.1 UDP报文段结构</h4><ul>
<li>UDP报文：<ul>
<li>报头：携带协议处理需要的信息</li>
<li>载荷（payload）：携带上层数据</li>
</ul>
</li>
<li>用于复用和分用的字段：<ul>
<li>源端口号</li>
<li>目的端口号</li>
</ul>
</li>
<li>用于检测报文错误的字段：<ul>
<li>报文总长度</li>
<li>校验和（checksum）</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/fc70a2c0a160577e8f1d51918c5deae0png.jpg" alt="在这里插入图片描述"></p>
<h4 id="3-2-UDP校验和（checksum）"><a href="#3-2-UDP校验和（checksum）" class="headerlink" title="3.2 UDP校验和（checksum）"></a>3.2 UDP校验和（checksum）</h4><p>校验和字段的作用: 对传输的报文段进行检错<br>以下是报文段的字段</p>
<table>
<thead>
<tr>
<th align="left">key</th>
<th align="left">human</th>
<th align="left">hex</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Source</td>
<td align="left">192.168.1.106</td>
<td align="left">c0a8 016a</td>
</tr>
<tr>
<td align="left">Destination</td>
<td align="left">11.111.111.111</td>
<td align="left">0b6f 6f6f</td>
</tr>
<tr>
<td align="left">Protocol</td>
<td align="left">UDP(17)</td>
<td align="left">11</td>
</tr>
<tr>
<td align="left">Length</td>
<td align="left">17</td>
<td align="left">11</td>
</tr>
<tr>
<td align="left">Source Port</td>
<td align="left">63549</td>
<td align="left">f83d</td>
</tr>
<tr>
<td align="left">Destination Port</td>
<td align="left">12345</td>
<td align="left">3039</td>
</tr>
<tr>
<td align="left">Length</td>
<td align="left">17</td>
<td align="left">11</td>
</tr>
<tr>
<td align="left">Checksum</td>
<td align="left">0xb12d</td>
<td align="left">b12d</td>
</tr>
<tr>
<td align="left">Data</td>
<td align="left">hello UDP</td>
<td align="left">6865 6c6c 6f20 5544 5000</td>
</tr>
</tbody></table>
<p>将上表中所有的 16 进制数加起来，之后取反码。有一点需要注意的是，如果遇到最高位进位，那么需要对结果进行回卷，意思是</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/ebe997481336e72f19615b879c76c464png.jpg" alt="在这里插入图片描述"></p>
<p>求出来的即是校验和。</p>
<h4 id="3-3-为什么需要UDP？"><a href="#3-3-为什么需要UDP？" class="headerlink" title="3.3 为什么需要UDP？"></a>3.3 为什么需要UDP？</h4><p><strong>为什么需要UDP？</strong></p>
<ul>
<li>应用可以尽可能快地发送报文：<ul>
<li>无建立连接的延迟</li>
<li>不限制发送速率（不进行拥塞控制和流量控制）</li>
</ul>
</li>
<li>报头开销小</li>
<li>协议处理简单</li>
</ul>
<p><strong>UDP适合哪些应用？</strong></p>
<ul>
<li>容忍丢包但对延迟敏感的应用：<br>如流媒体</li>
<li>以单次请求&#x2F;响应为主的应用：<br>如DNS</li>
<li>若应用要求基于UDP进行可靠传输：<br>由应用层实现可靠性</li>
</ul>
<h3 id="4-面向连接的传输：TCP"><a href="#4-面向连接的传输：TCP" class="headerlink" title="4.面向连接的传输：TCP"></a>4.面向连接的传输：TCP</h3><h4 id="4-1-可靠传输"><a href="#4-1-可靠传输" class="headerlink" title="4.1 可靠传输"></a>4.1 可靠传输</h4><p>数据包<strong>有序、无差错</strong>到达接收端</p>
<p>如何实现可靠传输，基本原则是什么？</p>
<ul>
<li>利用ACK确认</li>
<li>重传机制</li>
<li>差错检测</li>
</ul>
<p><strong>可靠传输实现举例-Stop and Wait</strong></p>
<blockquote>
<p>注：该实现俗称tcp的三次握手和四次挥手。三次挥手我们也常称为“请求 -&gt; 应答 -&gt; 应答之应答”的三个回合，主要就是为了建立连接</p>
</blockquote>
<p>建立一条TCP连接需要确定两件事：</p>
<ul>
<li>双方都同意建立连接（知晓另一方想建立连接）</li>
<li>初始化连接参数（序号，MSS等）<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/6bf3dc3308a188653c72260dc1ff3f5epng.jpg" alt="在这里插入图片描述"></li>
</ul>
<p>四次挥手：目的就是确保断开连接时双方都是确认结束的状态</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/5e2a32e614ccbe4e9380d700ba4d0509png.jpg" alt="在这里插入图片描述"></p>
<h4 id="4-2-流水线技术"><a href="#4-2-流水线技术" class="headerlink" title="4.2 流水线技术"></a>4.2 流水线技术</h4><p>由于信道上一直有数据不间断地传送，这种传输方式可获得很高的信道利用率。<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/b901bcb52d89920e7b2017a1af057ee0png.jpg" alt="在这里插入图片描述"></p>
<h5 id="①GBN-协议（回退-N-步协议）"><a href="#①GBN-协议（回退-N-步协议）" class="headerlink" title="①GBN 协议（回退 N 步协议）"></a>①GBN 协议（回退 N 步协议）</h5><p><strong>发送窗口</strong><br>发送方维持的发送窗口，它的意义是：位于发送窗口内的分组都可连续发送出去，而不需要等待对方的确认。这样，信道利用率就提高了。<br>发送方每收到一个确认，就把发送窗口向前滑动一个分组的位置。<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/69b4d6030c31f9d4c5044435fe588287png.jpg" alt="在这里插入图片描述"></p>
<p><strong>累积确认</strong></p>
<ul>
<li>接收方一般采用累积确认的方式。即不必对收到的分组逐个发送确认，而是<strong>对按序到达的最后一个分组发送确认</strong>，这样就表示：<strong>到这个分组为止的所有分组都已正确收到了</strong>。</li>
<li>优点：容易实现，即使确认丢失也不必重传。</li>
<li>缺点：不能向发送方反映出接收方已经正确收到的所有分组的信息。</li>
</ul>
<p>如果发送方发送了前 5 个分组，而中间的第 3 个分组丢失了。这时接收方只能对前两个分组发出确认。发送方无法知道后面三个分组的下落，而只好把后面的三个分组都再重传一次。<br>这就叫做 <strong>Go-back-N（回退 N）</strong>，表示<strong>需要再退回来重传已发送过的 N 个分组</strong>。<br>可见当通信线路质量不好时，连续 ARQ 协议会带来负面的影响。</p>
<h5 id="②SR-协议（选择重传协议）"><a href="#②SR-协议（选择重传协议）" class="headerlink" title="②SR 协议（选择重传协议）"></a>②SR 协议（选择重传协议）</h5><p>SR 协议在 GBN 协议的基础上进行了改进，它通过让发送方仅重传那些它怀疑在接收方出错（即丢失或受损）的分组而避免了不必要的重传。选择重传协议只重传真正丢失的分组。</p>
<ul>
<li>选择重传的接收窗口与发送窗口一样大</li>
<li>选择重传协议允许与接收窗口一样多的分组失序到达,并保存这些失序到达的分组,直到连续的一组分组被交付给应用层。</li>
<li>标记发出分组,当ACK&#x3D;Sf 时,将窗口滑过所有连续的已确认的分组<ul>
<li>如果还有未确认的分组,则重发所有检测到的未被确认的分组并重启计时器</li>
<li>如果所有分组都被确认了则停止计时器</li>
</ul>
</li>
<li>确认，确认号(ACK)只定义完好接收的那一个分组的序号,并不反馈任何其他分组的信息</li>
</ul>
<blockquote>
<p>注：SR协议ack确认和GBN的累计确认不同，是一个一个确认</p>
</blockquote>
<blockquote>
<p><strong>计时器</strong><br>理论上选择重传协议要为每个分组使用一个计时器。当某个计时器超时后,只有相应的分组被重传。换而言之，返回N协议将所有的分组当做一个整体对待，而选择重传协议则分别对待每一个分组。但是大多数SR的运输层仅使用了一个计时器.。注意只使用一个计时器而做到跟踪所有发出去的分组的情况的做法是：标记发出分组,当ACK&#x3D;Sf 时,将窗口滑过所有连续的已确认的分组，如果还有未确认的分组，则重发所有检测到的未被确认的分组并重启计时器，如果所有分组都被确认了则停止计时器。</p>
</blockquote>
<blockquote>
<p><strong>快速重传</strong></p>
<ul>
<li><p>仅靠超时重发丢失的报文段，恢复太慢！</p>
</li>
<li><p><strong>发送方可利用重复ACK检测报文段丢失</strong>：</p>
<ul>
<li>发送方通常连续发送许多报文段</li>
<li>若仅有个别报文段丢失，发送方将收到多个重复序号的ACK</li>
<li>多数情况下IP按序交付分组，重复ACK极有可能因丢包产生</li>
</ul>
</li>
<li><p>TCP协议规定： 当发送方收到对同一序号的3次重复确认时，立即重发包含该序号的报文段</p>
</li>
<li><p>所谓快速重传，就是<strong>在定时器到期前重发丢失的报文段</strong></p>
</li>
</ul>
</blockquote>
<h5 id="③TCP-可靠通信的具体实现"><a href="#③TCP-可靠通信的具体实现" class="headerlink" title="③TCP 可靠通信的具体实现"></a>③TCP 可靠通信的具体实现</h5><ul>
<li>TCP 连接的每一端都必须设有两个窗口——一个<strong>发送窗口</strong>和一个<strong>接收窗口</strong>。</li>
<li>TCP 的可靠传输机制用<strong>字节的序号</strong>进行控制。TCP 所有的确认都是基于序号而不是基于报文段。</li>
<li>TCP 两端的四个窗口经常处于<strong>动态变化</strong>之中。</li>
<li>TCP连接的往返时间 RTT 也不是固定不变的。需要使用特定的算法<strong>估算较为合理的重传时间</strong></li>
</ul>
<h5 id="GBN、SR和TCP小结"><a href="#GBN、SR和TCP小结" class="headerlink" title="GBN、SR和TCP小结"></a>GBN、SR和TCP小结</h5><p><strong>Go-Back-N协议</strong><br>接收方：</p>
<ul>
<li>使用累积确认</li>
<li><strong>不缓存失序的分组</strong></li>
<li>对失序分组发送重复ACK</li>
</ul>
<p>发送方：</p>
<ul>
<li>超时后重传从基序号开始的所有分组</li>
</ul>
<p><strong>SR</strong><br>接收方：</p>
<ul>
<li>缓存失序的分组</li>
<li>单独确认每个正确收到的分组</li>
</ul>
<p>发送方：</p>
<ul>
<li>每个分组使用一个定时器</li>
<li>仅重传未被确认的分组</li>
</ul>
<p><strong>TCP协议</strong></p>
<p>接收方：</p>
<ul>
<li>使用累积确认</li>
<li><strong>缓存失序的报文段</strong></li>
<li>对失序报文段发送重复ACK</li>
<li><strong>增加了推迟确认</strong></li>
</ul>
<p>发送方：</p>
<ul>
<li>超时后仅重传最早未确认的报文段</li>
<li><strong>增加了快速重传</strong></li>
</ul>
<h4 id="4-3-TCP报文段结构"><a href="#4-3-TCP报文段结构" class="headerlink" title="4.3 TCP报文段结构"></a>4.3 TCP报文段结构</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/8fbea6cf7c4117c3467f25ca37b6ef69png.jpg" alt="在这里插入图片描述"></p>
<ul>
<li>最大段长度（MSS）：<ul>
<li>TCP段中可以携带的最大数据字节数</li>
<li>建立连接时，每个主机可声明自己能够接受的MSS，缺省为536字节</li>
</ul>
</li>
<li>窗口比例因子（window scale）：<ul>
<li>建立连接时，双方可以协商一个窗口比例因子</li>
<li>实际接收窗口大小 &#x3D; window size * 2^window scale</li>
</ul>
</li>
<li>选择确认（SACK）：<ul>
<li>最初的TCP协议只使用累积确认</li>
<li>改进的TCP协议引入选择确认，允许接收端指出缺失的数据字节</li>
</ul>
</li>
<li>发送序号和确认序号的含义<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/7d9e8dfcd5b80c77a25a15498c0fb311png.jpg" alt="在这里插入图片描述"></li>
</ul>
<h3 id="5-TCP流量控制"><a href="#5-TCP流量控制" class="headerlink" title="5.TCP流量控制"></a>5.TCP流量控制</h3><p>TCP接收端</p>
<ul>
<li>使用显式的窗口通告，告知发送方可用的缓存空间大小</li>
<li>在接收窗口较小时，推迟发送确认</li>
<li>仅当接收窗口显著增加时，通告新的窗口大小</li>
</ul>
<p>TCP发送端</p>
<ul>
<li>使用Nagle算法确定发送时机</li>
<li>使用接收窗口限制发送的数据量，已发送未确认的字节数不超过接收窗口的大小</li>
</ul>
<blockquote>
<p>Nagle算法的解决方法：</p>
<ul>
<li>在新建连接上，当应用数据到来时，组成一个TCP段发送（那怕只有一个字节）</li>
<li>在收到确认之前，后续到来的数据放在发送缓存中</li>
<li>当数据量达到一个MSS或上一次传输的确认到来（取两者的较小时间），用一个TCP段将缓存的字节全部发走</li>
</ul>
</blockquote>
<blockquote>
<p>Nagle算法的优点：</p>
<ul>
<li>适应网络延时、MSS长度及应用速度的各种组合 常规情况下不会降低网络的吞吐量</li>
</ul>
</blockquote>
<h3 id="6-拥塞控制"><a href="#6-拥塞控制" class="headerlink" title="6.拥塞控制"></a>6.拥塞控制</h3><p>发送方根据自己感知的网络拥塞程度，限制其发送速率</p>
<h4 id="6-1-拥塞控制的类型"><a href="#6-1-拥塞控制的类型" class="headerlink" title="6.1 拥塞控制的类型"></a>6.1 拥塞控制的类型</h4><ul>
<li>网络辅助的拥塞控制<ul>
<li>路由器向端系统提供显式的反馈，例如：<ul>
<li>设置拥塞指示比特</li>
<li>给出发送速率指示</li>
</ul>
</li>
<li>ATM、X.25采用此类方法</li>
</ul>
</li>
<li>端到端拥塞控制<ul>
<li>网络层不向端系统提供反馈</li>
<li>端系统通过观察丢包和延迟，自行推断拥塞的发生</li>
<li>TCP采用此类方法</li>
</ul>
</li>
</ul>
<h4 id="6-2-TCP拥塞控制要解决的问题"><a href="#6-2-TCP拥塞控制要解决的问题" class="headerlink" title="6.2 TCP拥塞控制要解决的问题"></a>6.2 TCP拥塞控制要解决的问题</h4><p><strong>发送方如何感知网络拥塞？</strong></p>
<ul>
<li>发送方利用丢包事件感知拥塞：<ul>
<li>拥塞造成丢包和分组延迟增大<br>-无论是丢包还是分组延迟过大，对于发送端来说都是丢包了</li>
</ul>
</li>
<li>丢包事件包括：<br>-重传定时器超时<br>-发送端收到3个重复的ACK</li>
</ul>
<p><strong>发送方采用什么机制限制发送速率?</strong></p>
<ul>
<li><p>发送方使用拥塞窗口cwnd限制已发送未确认的数据量:<br>LastByteSent-LastByteAcked &lt;&#x3D; cwnd<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/ae889ccc687c61ca14c3ddf03b2c0febpng.jpg" alt="在这里插入图片描述"></p>
</li>
<li><p>cwnd随发送方感知的网络拥塞程度而变化</p>
</li>
</ul>
<p><strong>发送方感知到网络拥塞后，采取什么策略调节发送速率？</strong></p>
<p><strong>①AIMD</strong></p>
<ul>
<li>乘性减（Multiplicative Decrease）<ul>
<li>发送方检测到丢包后，将cwnd的大小减半（但不能小于一个MSS）</li>
<li>目的：迅速减小发送速率，缓解拥塞</li>
</ul>
</li>
<li>加性增（Additive Increase）<ul>
<li>若无丢包，每经过一个RTT，将cwnd增大一个MSS，直到检测到丢包</li>
<li>目的：缓慢增大发送速率，避免振荡</li>
</ul>
</li>
</ul>
<blockquote>
<p>注：MSS是发送速率TCP建立连接时双方确定的每一个报文段所能承载的最大数据长度</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/5ae0ea98ca78bcd5a7739ef1d25fc3eapng.jpg" alt="在这里插入图片描述"></p>
<p><strong>②TCP慢启动</strong></p>
<ul>
<li>慢启动的策略：<ul>
<li>每经过一个RTT，将cwnd加倍</li>
</ul>
</li>
<li>慢启动的具体实施：<ul>
<li>每收到一个ACK段，cwnd增加一个MSS</li>
<li>只要发送窗口允许，发送端可以立即发送下一个报文段</li>
</ul>
</li>
<li>特点：<ul>
<li>以一个很低的速率开始，按指数增大发送速率</li>
</ul>
</li>
</ul>
<p><strong>区分不同的丢包事件</strong></p>
<blockquote>
<p>超时：说明网络交付能力很差<br>收到3个重复的ACK：说明网络仍有一定的交付能力</p>
</blockquote>
<ul>
<li>收到3个重复的ACK：<ul>
<li>将cwnd降至一半</li>
<li>使用AIMD调节cwnd</li>
</ul>
</li>
<li>超时：<ul>
<li>设置门限 &#x3D;cwnd&#x2F;2</li>
<li>cwnd&#x3D;1MSS</li>
<li>使用慢启动增大cwnd至门限</li>
<li>使用AIMD调节cwnd</li>
</ul>
</li>
</ul>
<h4 id="6-3-TCP拥塞控制的实现"><a href="#6-3-TCP拥塞控制的实现" class="headerlink" title="6.3 TCP拥塞控制的实现"></a>6.3 TCP拥塞控制的实现</h4><ul>
<li>发送方维护变量ssthresh</li>
<li>发生丢包时，ssthresh&#x3D;cwnd&#x2F;2</li>
<li><strong>ssthresh是从慢启动转为拥塞避免的分水岭</strong>：<ul>
<li>cwnd低于门限时，执行慢启动</li>
<li>cwnd高于门限：执行拥塞避免</li>
</ul>
</li>
<li>拥塞避免阶段，拥塞窗口线性增长：<ul>
<li>每当收到ACK， cwnd&#x3D;cwnd + MSS*(MSS&#x2F;cwnd)</li>
</ul>
</li>
<li>检测到3个重复的ACK后：<ul>
<li>TCP Reno实现： cwnd&#x3D; ssthresh+3，线性增长</li>
<li>TCP Tahoe实现：cwnd&#x3D;1 MSS，慢启动<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/08d0d985aecefa043442bac9dbf854a7png.jpg" alt="在这里插入图片描述"></li>
</ul>
</li>
</ul>
<p><strong>TCP发送端的事件与动作</strong><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/06b1f3307dfbd8678c52f1781dd4785dpng.jpg" alt="在这里插入图片描述"></p>
<h2 id="六、应用层"><a href="#六、应用层" class="headerlink" title="六、应用层"></a>六、应用层</h2><h3 id="1-应用层概述"><a href="#1-应用层概述" class="headerlink" title="1.应用层概述"></a>1.应用层概述</h3><ul>
<li><strong>每个应用层协议都是为了解决某一应用问题</strong>，通过位于不同主机中的多个应用进程之间的通信和协同工作来完成<ul>
<li>两台主机通信实际是其对应的两个应用进程(process)在通信</li>
<li><strong>应用进程</strong>: 为解决具体应用问题而彼此通信的进程</li>
</ul>
</li>
<li>应用层的具体内容就是规定应用进程在通信时所遵循的协议<ul>
<li>客户&#x2F;服务器（C&#x2F;S, Client&#x2F;Server）方式</li>
<li>对等（P2P，Peer to Peer）方式</li>
</ul>
</li>
</ul>
<h4 id="1-1-应用进程通信方式"><a href="#1-1-应用进程通信方式" class="headerlink" title="1.1 应用进程通信方式"></a>1.1 应用进程通信方式</h4><h5 id="①客户-服务器（C-S-Client-Server）方式"><a href="#①客户-服务器（C-S-Client-Server）方式" class="headerlink" title="①客户&#x2F;服务器（C&#x2F;S, Client&#x2F;Server）方式"></a>①客户&#x2F;服务器（C&#x2F;S, Client&#x2F;Server）方式</h5><ul>
<li>应用层的许多协议是基于C&#x2F;S方式，例如，在移动互联网环境下，每个应用APP都是一个客户端<ul>
<li>客户(client)和服务器(server)是指通信中所涉及的2个<strong>应用进程</strong></li>
<li><strong>客户&#x2F;服务器</strong>方式描述的是<strong>应用进程之间服务和被服务</strong>的关系</li>
<li><strong>客户</strong>是服务请求方（主动请求服务，被服务）</li>
<li><strong>服务器</strong>是服务提供方（被动接受服务请求，提供服务）</li>
</ul>
</li>
<li>C&#x2F;S方式可以是面向连接的，也可以是无连接的</li>
<li><strong>面向连接时，C&#x2F;S通信关系一旦建立，通信就是双向的</strong>，双方地位平等，都可发送和接收数据</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/5d531b8e79e079876b8222f33a3cf4ccpng.jpg" alt="在这里插入图片描述"></p>
<p><strong>客户进程的特点</strong></p>
<ul>
<li>在进行通信时临时成为客户，它也可在本地进行其它的计算</li>
<li>用户计算机上运行，在打算通信时<strong>主动</strong>向远地服务器发起通信</li>
<li><strong>客户方必须知道服务器进程所在主机的IP地址才能发出服务请求</strong></li>
<li>需要时可以与多个服务器进行通信</li>
</ul>
<p><strong>服务器进程的特点</strong></p>
<ul>
<li>专门用来提供某种服务的程序，可“同时”处理多个远地或本地客户的请求</li>
<li><strong>必须始终处于运行状态才有可能提供服务</strong></li>
<li>通信开始之前服务器进程不需要知道客户进程所在主机的IP地址，无论客户请求来自哪里，服务器进程被动等待服务请求的到来即可</li>
<li>通常是当系统启动时即自动调用并一直运行着。某些服务器程序也可以由用户或其它进程在通信前启动</li>
<li><strong>被动等待</strong>并接受来自多个客户的通信请求</li>
</ul>
<h5 id="②对等（P2P，Peer-to-Peer）方式"><a href="#②对等（P2P，Peer-to-Peer）方式" class="headerlink" title="②对等（P2P，Peer to Peer）方式"></a>②对等（P2P，Peer to Peer）方式</h5><ul>
<li><strong>对等方式</strong>是指两个进程在通信时并不区分服务的请求方和服务的提供方<ul>
<li>只要两个主机都运行P2P软件，它们就可以进行平等、对等的通信</li>
<li>双方都可以下载对方存储在硬盘中的共享文档，如果权限允许的话</li>
</ul>
</li>
<li>音频&#x2F;视频应用推动了P2P对等通信方式的发展（BitTorrent）</li>
<li>音频&#x2F;视频流量已占主要比</li>
<li>P2P方式从本质上看仍然是使用了C&#x2F;S方式，但强调的是通信过程中的对等，这时<strong>每一个P2P进程既是客户同时也是服务器</strong></li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/9a2293e4db7cbe615f04036b7f25d6f0png.jpg" alt="在这里插入图片描述"></p>
<h4 id="1-2-服务器进程工作方式"><a href="#1-2-服务器进程工作方式" class="headerlink" title="1.2 服务器进程工作方式"></a>1.2 服务器进程工作方式</h4><ul>
<li><p>循环方式(iterative mode)</p>
<ul>
<li>一次只运行一个服务进程</li>
<li>当有多个客户进程请求服务时，服务进程就按请求的先后顺序依次做出响应 (阻塞方式)</li>
</ul>
</li>
<li><p>并发方式(concurrent mode)</p>
<ul>
<li>可以同时运行多个服务进程</li>
<li>每一个服务进程都对某个特定的客户进程做出响应 (非阻塞方式)</li>
</ul>
</li>
<li><p>无连接循环方式服务</p>
<ul>
<li>使用无连接的UDP服务进程通常都工作在循环方式，即一个服务进程在同一时间只能向一个客户进程提供服务。(顺序服务)</li>
<li>服务进程收到客户进程的请求后，就发送UDP用户数据报响应该客户</li>
<li>对其他客户进程发来的请求则暂时不予理睬，这些请求都在服务端的队列中排队等候服务进程的处理</li>
<li>当服务进程处理完毕一个请求时，就从队列中读取来自下一个客户进程的请求，然后继续处理</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/5f1beed19110296bcc241eaa2712887fpng.jpg" alt="在这里插入图片描述"></p>
</li>
<li><p>面向连接的并发方式服务</p>
<ul>
<li>面向连接的TCP服务进程通常都工作在并发服务方式，服务进程在同一时间可同时向多个客户进程提供服务。(并发服务)</li>
<li>在TCP服务进程与多个客户进程之间必须建立多条TCP连接，每条TCP连接在其数据传送完毕后释放</li>
<li>一个TCP连接对应一个（熟知）服务端口</li>
<li>主服务进程在熟知端口等待客户进程发出的请求。一旦收到客户的请求，就创建一个从属服务进程，并指明从属服务进程使用临时套接字与该客户建立TCP连接，然后主服务进程继续在原来的熟知端口等待向其他客户提供服务</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/af63dec506cdb25e8732456b4bd665edpng.jpg" alt="在这里插入图片描述"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/8f2e61b7203db08f8538799c616d7b72png.jpg" alt="在这里插入图片描述"></p>
<h3 id="2-域名系统"><a href="#2-域名系统" class="headerlink" title="2.域名系统"></a>2.域名系统</h3><h4 id="2-1-概述"><a href="#2-1-概述" class="headerlink" title="2.1 概述"></a>2.1 概述</h4><ul>
<li><strong>域名系统</strong>（DNS，Domain Name System）是互联网重要的基础设施之一，向所有需要域名解析的应用提供服务，主要负责将<strong>可读性好的域名映射成IP地址</strong></li>
<li>Internet采用<strong>层次结构的命名树</strong>作为主机的名字，并使用<strong>分布式</strong>的域名系统 DNS。Internet的DNS是一个<strong>联机分布式数据库系统</strong></li>
<li>名字到域名的解析是由<strong>若干个</strong>域名服务器程序完成的。域名服务器程序在专设的结点上运行，相应的结点也称为<strong>名字服务器</strong>(Name Server)或<strong>域名服务器</strong>(Domain Name Server)</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/9bddf908708317ba8f9fd49e9b4d4f3fpng.jpg" alt="在这里插入图片描述"></p>
<h4 id="2-2-域名系统名字空间和层次结构"><a href="#2-2-域名系统名字空间和层次结构" class="headerlink" title="2.2 域名系统名字空间和层次结构"></a>2.2 域名系统名字空间和层次结构</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/b62a8cad5a17fe7ee39478fda7dba064png.jpg" alt="在这里插入图片描述"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/5bf0f8796b38a97aa45dc8d27584def4png.jpg" alt="在这里插入图片描述"></p>
<h4 id="2-3-域名解析过程"><a href="#2-3-域名解析过程" class="headerlink" title="2.3 域名解析过程"></a>2.3 域名解析过程</h4><ul>
<li>递归查询<ul>
<li>当收到查询请求报文的域名服务器不知被查询域名的IP地址时，该域名服务器就以DNS客户的身份向下一步应查询的域名服务器发出查询请求，即替本地域名字服务器继续查询</li>
<li>较少使用<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/8cd1c490f035ddeee5fd8fb9b36a918dpng.jpg" alt="在这里插入图片描述"></li>
</ul>
</li>
<li>迭代查询<ul>
<li>当收到查询请求报文的域名服务器不知道被查询域名的IP地址时，就把自己知道的下一步应查询的域名服务器IP地址告诉本地域名字服务器，由本地域名字服务器继续向该域名服务器查询，直到得到所要解析的域名的IP地址，或者查询不到所要解析的域名的IP地址</li>
<li>通常使用</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/e736aa2423e97718516b2975bd73c055png.jpg" alt="在这里插入图片描述"></p>
<h3 id="3-电子邮件"><a href="#3-电子邮件" class="headerlink" title="3.电子邮件"></a>3.电子邮件</h3><h4 id="3-1-邮件发送的常用协议"><a href="#3-1-邮件发送的常用协议" class="headerlink" title="3.1 邮件发送的常用协议"></a>3.1 邮件发送的常用协议</h4><p><strong>简单邮件传输协议SMTP</strong>（Simple Mail Transfer Protocol）——邮件服务器之间传递邮件使用的协议</p>
<ul>
<li>最终交付（邮件访问）协议::从邮件服务器的邮箱中获取邮件<ul>
<li>POP3：Post Office Protocol-Version 3，第三版邮局协议</li>
<li>IMAP：Internet Message Access Protocol，Internet邮件访问协议</li>
<li>Webmail（HTTP）：基于Web的电子邮件</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/f8f4a1c6db1a4adaebf886ac975fc626png.jpg" alt="在这里插入图片描述"></p>
<h4 id="3-2-Webmail"><a href="#3-2-Webmail" class="headerlink" title="3.2 Webmail"></a>3.2 Webmail</h4><p>Webmail——基于Web的电子邮件</p>
<ul>
<li>提供电子邮件服务的IMAP和SMTP替代方案</li>
<li>使用Web作为界面，用户代理就是普通的浏览器</li>
<li>用户及其远程邮箱之间的通信通过HTTP进行</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/008520eb9e2a30ad12d8a586385ad780png.jpg" alt="在这里插入图片描述"></p>
<h3 id="4-WWW"><a href="#4-WWW" class="headerlink" title="4.WWW"></a>4.WWW</h3><h4 id="4-1-WWW体系结构与协议"><a href="#4-1-WWW体系结构与协议" class="headerlink" title="4.1 WWW体系结构与协议"></a>4.1 WWW体系结构与协议</h4><ul>
<li>WWW&#x3D;World Wide Web&#x3D;万维网</li>
<li>HTTP服务器和客户端，以及它们之间执行的HTTP协议</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/66043cb544453254ee2967d329bc3f71png.jpg" alt="在这里插入图片描述"><br><strong>服务器</strong></p>
<ul>
<li>Web页面（HTML文档）：包含多种对象或链接</li>
<li>Web对象（包括：静态对象和动态对象）：可以是 HTML文档、 图像文件、视频文件、声音文件、脚本文件等</li>
<li>对象用URL（统一资源定位符）编址：协议类型:&#x2F;&#x2F;主机名:端口&#x2F;&#x2F;路径和文件名</li>
</ul>
<p><strong>客户端</strong></p>
<ul>
<li>发出请求、接收响应、解释HTML文档并显示</li>
<li>有些对象需要浏览器安装插件</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/800342398b651996a3c975ac398f51a6png.jpg" alt="在这里插入图片描述"></p>
<p><strong>统一资源定位器URLs</strong><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/447922e4cfdff71b78e49ba4bd88574dpng.jpg" alt="在这里插入图片描述"></p>
<p><strong>www协议</strong><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/7652977ce6e6cd0411f5ca297212c253png.jpg" alt="在这里插入图片描述"></p>
<h4 id="4-2-HTTP"><a href="#4-2-HTTP" class="headerlink" title="4.2 HTTP"></a>4.2 HTTP</h4><h5 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h5><ul>
<li>超文本传输协议HTTP（ HyperText Transfer Protocol）在传输层通常使用<strong>TCP</strong>协议，<strong>缺省使用TCP的80端口</strong></li>
<li>HTTP为<strong>无状态协议</strong>，服务器端不保留之前请求的状态信息<ul>
<li><strong>无状态协议</strong>：效率低、但简单</li>
<li><strong>有状态协议</strong>：维护状态相对复杂，需要维护历史信息，在客户端或服务器出现故障时，需要保持状态的一致性等</li>
</ul>
</li>
<li><strong>HTTP标准</strong><ul>
<li>HTTP&#x2F;1.0: RFC 1945（1996年）</li>
<li>HTTP&#x2F;1.1: RFC 2616（1999年）</li>
<li>HTTP&#x2F;2: RFC 7540（2015年）、RFC 8740（2020年）</li>
</ul>
</li>
</ul>
<h5 id="HTTP发展现状"><a href="#HTTP发展现状" class="headerlink" title="HTTP发展现状"></a>HTTP发展现状</h5><ul>
<li>HTTP&#x2F;1.0（1996）<ul>
<li>无状态，非持久连接</li>
</ul>
</li>
<li>与HTTP&#x2F;1.1（1999）<ul>
<li>支持长连接和流水线机制</li>
<li>缓存策略优化、部分资源请求及断点续传</li>
</ul>
</li>
<li>HTTPS：HTTP+TLS（2008）<ul>
<li>增加SSL&#x2F;TLS（TLS 1.2）层，在TCP之上提供安全机制</li>
</ul>
</li>
<li>HTTP&#x2F;2.0（2015、2020）<ul>
<li>目标：提高带宽利用率、降低延迟</li>
<li>增加二进制格式、TCP多路复用、头压缩、服务端推送等功能</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/d8780164e5719f9a1aabb5d8751a0816png.jpg" alt="在这里插入图片描述"></p>
<h5 id="Web安全与隐私：Cookie"><a href="#Web安全与隐私：Cookie" class="headerlink" title="Web安全与隐私：Cookie"></a>Web安全与隐私：Cookie</h5><p>HTTP <strong>无状态协议</strong>，服务器 <strong>用cookies保持用户状态</strong></p>
<ul>
<li>HTTP在响应的首部行里使用一个关键字头set-cookie：选择的cookie号具有唯一性</li>
<li>后继的HTTP请求中使用服务器响应分配的cookie：</li>
<li>Cookie文件保存在用户的主机中，内容是服务器返回的一些附加信息，由用户主机中的浏览器管理</li>
<li>Web服务器建立后端数据库，记录用户信息，cookie作为关键字<br>例如：<br>Set-Cookie: SID&#x3D;31d4d96e407aad42; Path&#x3D;&#x2F;; Domain&#x3D;example.com<br>Cookie: SID&#x3D;31d4d96e407aad42</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/c031fd37614e3bfd4c373c4c1c045b02png.jpg" alt="在这里插入图片描述"><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/e15046ea2d52be45c29b202af486437bpng.jpg" alt="在这里插入图片描述"></p>
<ul>
<li>Cookies一般包含5个字段<ul>
<li>域指明Cookie来自何方，每个域为每个客户分配Cookie有数量限制</li>
<li>路径标明服务器的文件树中哪些部分可以使用该Cookie</li>
<li>内容采用“名字&#x3D;值”的形式，是Cookie存放内容的地方，可以达到4K容量，内容只是字符串，不是可执行程序</li>
<li>安全指示浏览器只向使用安全传输连接的服务器返回Cookie</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/0adfc15fbc1087503a8b62b9a8012fc3png.jpg" alt="在这里插入图片描述"></p>
<ul>
<li>Cookie技术是把双刃剑，能分析用户喜好，向用户进行个性化推荐<ul>
<li>用Cookie在某网站标识用户信息，查找用户以前浏览网站记录</li>
<li>用Cookie记录用户购物清单</li>
<li>用Cookie可以保存4K内容，跟踪用户浏览网站的喜好</li>
<li>用Cookie跨站点跟踪用户点击广告</li>
</ul>
</li>
<li>Cookie技术是把双刃剑，也能跟踪用户网络浏览痕迹，泄露用户隐私<ul>
<li>Cookie跟踪用户以前浏览过哪些网站，跟踪用户频繁浏览哪类网站</li>
<li>Cookie收集用户信息，用户网络交互时关注的关键词</li>
</ul>
</li>
<li>Cookie容易嵌入间谍程序，这是个误区，Cookie文件保存的只是文本串，没有可执行程序<ul>
<li>用户可以设置浏览器限制使用Cookie</li>
</ul>
</li>
</ul>
<h3 id="5-流媒体"><a href="#5-流媒体" class="headerlink" title="5.流媒体"></a>5.流媒体</h3><h4 id="5-1-概述"><a href="#5-1-概述" class="headerlink" title="5.1 概述"></a>5.1 概述</h4><ul>
<li>流媒体概念<ul>
<li>连续媒体（音视频）经压缩编码、数据打包后，经过网络发送给接收方</li>
<li>接收方对数据进行重组、解码和播放</li>
</ul>
</li>
<li>流媒体的特性<ul>
<li>端到端时延约束</li>
<li>时序性约束：流媒体数据必须按照一定的顺序连续播放</li>
<li>具有一定程度的容错性：丢失部分数据包也可完成基本功能</li>
</ul>
</li>
<li>流媒体面临的挑战<ul>
<li>约束条件：网络特性（带宽有限、动态变化、延迟与抖动、丢失、异构性）</li>
<li>目标：流媒体服务质量要素（画质、启动延迟、平滑、交互性）</li>
<li>如何在“尽力服务”的网络传输条件下获得良好的视频质量？</li>
</ul>
</li>
</ul>
<h4 id="5-2-流媒体动态自适应传输"><a href="#5-2-流媒体动态自适应传输" class="headerlink" title="5.2 流媒体动态自适应传输"></a>5.2 流媒体动态自适应传输</h4><ul>
<li>DASH (Dynamic Adaptive Streaming over HTTP)<ul>
<li>动态自适应流媒体传输协议DASH，由MPEG组织制定的标准</li>
<li>类似协议：苹果HTTP Live Streaming（HLS）； Adobe的HTTP Dynamic Streaming（HDS）；微软的Microsoft Smooth Streaming</li>
</ul>
</li>
<li>DASH 基本思想<ul>
<li>完整视频被拆分为固定时长 (2s-10s) 的视频片段(segment)， 每段提供不同码率</li>
<li>视频片段与其对应的元文件（URL）一同存放于DASH服务器</li>
<li>客户端基于网络条件、缓冲大小等，对每个视频片段，自适应选择合适的视频码率来下</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/c5a31ab53f6cc289664782d9b45d6719png.jpg" alt="在这里插入图片描述"></p>
<p>DASH中普遍使用的自适应码率ABR（Adaptive bitrate）</p>
<h3 id="6-内容分发网络CDN"><a href="#6-内容分发网络CDN" class="headerlink" title="6.内容分发网络CDN"></a>6.内容分发网络CDN</h3><h4 id="6-1-概述"><a href="#6-1-概述" class="headerlink" title="6.1 概述"></a>6.1 概述</h4><ul>
<li>内容分发网络CDN<ul>
<li>Content Delivery Network，or Content Distribution Network</li>
</ul>
</li>
<li>基本思想源于MIT对Web服务瞬间拥塞问题的解决（1998）<ul>
<li>一种Web缓存系统，<strong>靠近网络边缘（用户）提供内容服务</strong></li>
<li>目前提供更丰富的服务，包括静态内容、流媒体、用户上传视频等</li>
</ul>
</li>
<li>主要优点<ul>
<li>降低响应时延，避免网络拥塞</li>
<li>避免原始服务器过载及防止DDoS攻击</li>
<li>分布式架构，具有良好的可扩展性</li>
<li>对用户透明，无需用户感知</li>
</ul>
</li>
</ul>
<h4 id="6-2-关键问题"><a href="#6-2-关键问题" class="headerlink" title="6.2 关键问题"></a>6.2 关键问题</h4><p>怎样将内容（如从百万的视频中选定的内容）分发给同时发起访问的数百万用户？</p>
<h4 id="6-3-机理与解决方式"><a href="#6-3-机理与解决方式" class="headerlink" title="6.3 机理与解决方式"></a>6.3 机理与解决方式</h4><p><strong>DNS重定向实现CDN</strong></p>
<ul>
<li>将请求调度到较近或负载较轻的CDN服务器</li>
<li><strong>HTTP重定向请求内容</strong>，服务提供者返回清单CDN<ul>
<li>原始服务器决策CDN服务器</li>
<li>HTTP响应：状态码30X，Location：指明新的位置</li>
</ul>
</li>
</ul>
<p><strong>DNS辅助实现CDN</strong></p>
<ul>
<li>负载均衡DNS负责决策CDN服务器选择</li>
<li>负载均衡DNS需要收集CDN服务器的位置和负载情况</li>
<li>如果找不到被请求的对象，需要从原始服务器获取</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/d5afdd8867f356bdaa06a5c8dd09c76apng.jpg" alt="在这里插入图片描述"></p>
<h3 id="7-P2P网络"><a href="#7-P2P网络" class="headerlink" title="7.P2P网络"></a>7.P2P网络</h3><p><strong>P2P文件分发协议：BitTorrent</strong></p>
<ul>
<li>文件被划分为256Kb大小的块</li>
<li>具有种子(torrents)的节点发送或接收文件</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/88f117b4ac213ce19a2fa63c8af18421png.jpg" alt="在这里插入图片描述"></p>
<h3 id="8-远程登录Telnet"><a href="#8-远程登录Telnet" class="headerlink" title="8.远程登录Telnet"></a>8.远程登录Telnet</h3><ul>
<li>Telnet协议引入网络<strong>虚拟终端NVT</strong>（Network Virtual Terminal），使用一种专门的键盘定义来屏蔽不同计算机系统对键盘输入的差异性，同时定义客户进程与远程服务器进程之间的交互过程</li>
<li>NVT是Telnet协议定义的<strong>一组通用字符集</strong>，通过这种统一的数据表示方式，来保证不同硬件、软件与数据格式的终端与主机之间通信的兼容性</li>
<li>本地终端输入的字符首先由本地Telnet客户进程转换为NVT格式，通过网络将NVT格式的字符传输到远程主机，远程Telnet服务器进程再将NVT格式的字符转换为远程主机能够识别和处理的字符格式</li>
<li>使用Telnet协议在网络中传输的数据都是NVT格式，不同的用户终端与服务器进程均与本地终端格式无关</li>
</ul>
<p><strong>Telnet的工作过程</strong></p>
<ul>
<li>本地Telnet客户进程与远程主机上的Telnet服务器进程建立TCP连接</li>
<li>将本地终端上输入的用户名和口令及以后输入的任何命令或字符以网络虚拟终端NVT格式传输给远程主机</li>
<li>将远程主机输出的NVT格式的数据转化为本地所接受的格式送回本地终端，包括输入命令回显和命令执行结果</li>
<li>本地终端对远程主机撤销连接，从而结束 Telnet远程登录过程</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/0ccbaea3bb1ea95e360407afbd4a66f2png.jpg" alt="在这里插入图片描述"></p>
<h3 id="9-FTP"><a href="#9-FTP" class="headerlink" title="9.FTP"></a>9.FTP</h3><h4 id="9-1-概述"><a href="#9-1-概述" class="headerlink" title="9.1 概述"></a>9.1 概述</h4><p><strong>文件传输协议FTP(File Transfer Protocol)</strong> 是Internet上使用最广泛的应用层协议之一</p>
<ul>
<li>FTP提供交互式的访问，允许用户指明文件的类型与格式，并允许文件具有存取权限</li>
<li>FTP屏蔽了各计算机系统的细节，适用于在异构网络中任意计算机之间传送文件</li>
<li>RFC 959早在1985年就已经成为Internet的正式标准</li>
<li>FTP使用C&#x2F;S方式实现</li>
</ul>
<h4 id="9-2-工作过程"><a href="#9-2-工作过程" class="headerlink" title="9.2 工作过程"></a>9.2 工作过程</h4><ul>
<li>服务器主进程打开TCP21端口，等待客户进程发出的连接请求</li>
<li>客户可以用分配的任意一个本地端口号与服务器进程的TCP21端口进行连接</li>
<li>客户请求到来时，服务器主进程启动从属进程来处理客户进程发来的请求</li>
<li>服务器从属进程对客户进程的请求处理完毕后即终止，但从属进程在运行期间根据需要还可能创建其他一些子进程</li>
<li>服务器主进程返回，继续等待接收其他客户进程发来的连接请求，服务器主进程与从属进程并行工作</li>
</ul>
<p><strong>FTP的两个端口与两个连接</strong></p>
<ul>
<li><strong>控制连接</strong>在整个会话期间一直保持，客户进程发出的文件传输请求通过控制连接发送给<strong>服务器控制进程（工作在TCP21端口）</strong>，但控制连接不用来传输文件</li>
<li>服务器控制进程在接收到客户进程发送来的文件传输请求后就创建<strong>数据传输进程（工作在TCP20端口）</strong>和<strong>数据连接</strong></li>
<li>数据连接用来连接客户进程和服务器数据传输进程，实际完成文件的传输。服务器数据传输进程在文件传输完毕后关闭数据连接并结束运行</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/7b1be32ae9f52aa37a2fdd118e7e16c8png.jpg" alt="在这里插入图片描述"></p>
<h2 id="写在最后"><a href="#写在最后" class="headerlink" title="写在最后"></a>写在最后</h2><p>这篇知识汇总我写了好久，因为ppt的缘故，知识整理需要自己消化一遍然后挑选重要的部分整理摘录下来，同时对于某些知识点的组织结构做了相应调整，对于不太清楚的地方，我也去查阅了相关资料做了补充。但需要注意的是有些知识点并不完整，该知识点整理也只是根据我们当时考试的考点来整理的，所以不足之处请见谅。</p>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/d20f536c64d06e5fcf4bfe2ec5dc25d.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/d20f536c64d06e5fcf4bfe2ec5dc25d.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">Smith</div><div class="post-copyright__author_desc">人生太短，要干的事太多，我要争分夺秒</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://smithhs.cn/2022/03/06/2022-03-06-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://smithhs.cn/2022/03/06/2022-03-06-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/')">计算机网络</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/1.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/1.jpg" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/2.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/2.jpg" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://smithhs.cn/2022/03/06/2022-03-06-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=计算机网络&amp;url=https://smithhs.cn/2022/03/06/2022-03-06-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/&amp;pic=https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/network.jpg" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="rm.copyPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://smithhs.cn" target="_blank">Smith</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>计算机网络<span class="tagsPageCount">1</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/docker.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://lib.baomitu.com/social-share.js/1.0.16/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://lib.baomitu.com/social-share.js/1.0.16/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/03/05/2022-03-05-%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/operating%20system.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">操作系统</div></div></a></div><div class="next-post pull-right"><a href="/2022/03/10/2022-03-10-%E5%BC%80%E5%8F%91%E6%A1%86%E6%9E%B6/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/framworks.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">开发框架</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC-1-%E7%AB%A0-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%BF%B0"><span class="toc-number">1.</span> <span class="toc-text">第 1 章 计算机网络概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E7%BB%84%E6%88%90"><span class="toc-number">1.1.</span> <span class="toc-text">1.1 计算机网络的组成</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">1.2.</span> <span class="toc-text">1.2 计算机网络的分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-%E6%80%A7%E8%83%BD%E6%8C%87%E6%A0%87"><span class="toc-number">1.3.</span> <span class="toc-text">1.3 性能指标</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-1-%E5%B8%A6%E5%AE%BD"><span class="toc-number">1.3.1.</span> <span class="toc-text">1.3.1 带宽</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-2-%E5%90%9E%E5%90%90%E9%87%8F"><span class="toc-number">1.3.2.</span> <span class="toc-text">1.3.2 吞吐量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-3-%E6%97%B6%E5%BB%B6"><span class="toc-number">1.3.3.</span> <span class="toc-text">1.3.3 时延</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-4-%E6%97%B6%E5%BB%B6%E5%B8%A6%E5%AE%BD%E7%A7%AF-%E9%93%BE%E8%B7%AF%E5%AE%B9%E9%87%8F"><span class="toc-number">1.3.4.</span> <span class="toc-text">1.3.4 时延带宽积(链路容量)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-5-%E5%BE%80%E8%BF%94%E6%97%B6%E5%BB%B6RTT"><span class="toc-number">1.3.5.</span> <span class="toc-text">1.3.5 往返时延RTT</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-6-%E5%88%A9%E7%94%A8%E7%8E%87"><span class="toc-number">1.3.6.</span> <span class="toc-text">1.3.6 利用率</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-%E5%88%86%E5%B1%82%E7%BB%93%E6%9E%84"><span class="toc-number">1.4.</span> <span class="toc-text">1.4 分层结构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-1-OSI%E5%8F%82%E8%80%83%E6%A8%A1%E5%9E%8B%EF%BC%887%E5%B1%82%EF%BC%89"><span class="toc-number">1.4.1.</span> <span class="toc-text">1.4.1 OSI参考模型（7层）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-2-TCP-IP%E5%8F%82%E8%80%83%E6%A8%A1%E5%9E%8B%EF%BC%884%E5%B1%82%EF%BC%89"><span class="toc-number">1.4.2.</span> <span class="toc-text">1.4.2 TCP&#x2F;IP参考模型（4层）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-3-%E5%90%88%E6%88%90%E5%8F%82%E8%80%83%E6%A8%A1%E5%9E%8B%EF%BC%885%E5%B1%82%EF%BC%89"><span class="toc-number">1.4.3.</span> <span class="toc-text">1.4.3 合成参考模型（5层）</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC-2-%E7%AB%A0-%E7%89%A9%E7%90%86%E5%B1%82"><span class="toc-number">2.</span> <span class="toc-text">第 2 章 物理层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E7%89%A9%E7%90%86%E5%B1%82%E6%A6%82%E8%BF%B0"><span class="toc-number">2.1.</span> <span class="toc-text">2.1 物理层概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E6%95%B0%E6%8D%AE%E9%80%9A%E4%BF%A1%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86"><span class="toc-number">2.2.</span> <span class="toc-text">2.2 数据通信基础知识</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-%E7%A0%81%E5%85%83%E3%80%81%E6%B3%A2%E7%89%B9%E3%80%81%E9%80%9F%E7%8E%87%E3%80%81%E5%B8%A6%E5%AE%BD"><span class="toc-number">2.3.</span> <span class="toc-text">2.3 码元、波特、速率、带宽*</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-%E5%A5%88%E6%B0%8F%E5%87%86%E5%88%99%E3%80%81%E9%A6%99%E5%86%9C%E5%AE%9A%E7%90%86"><span class="toc-number">2.4.</span> <span class="toc-text">2.4 奈氏准则、香农定理*</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-1-%E5%A4%B1%E7%9C%9F"><span class="toc-number">2.4.1.</span> <span class="toc-text">2.4.1 失真</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-2-%E5%A5%88%E6%B0%8F%E5%87%86%E5%88%99"><span class="toc-number">2.4.2.</span> <span class="toc-text">2.4.2 奈氏准则*</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-3-%E9%A6%99%E5%86%9C%E5%AE%9A%E7%90%86"><span class="toc-number">2.4.3.</span> <span class="toc-text">2.4.3 香农定理*</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-4-%E2%80%9CNice%E2%80%9D%E5%92%8C%E2%80%9D%E9%A6%99%E6%B5%93%E2%80%9D"><span class="toc-number">2.4.4.</span> <span class="toc-text">2.4.4 “Nice”和”香浓”</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-%E7%BC%96%E7%A0%81%E3%80%81%E8%B0%83%E5%88%B6"><span class="toc-number">2.5.</span> <span class="toc-text">2.5 编码、调制*</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-5-1-%E6%95%B0%E5%AD%97%E6%95%B0%E6%8D%AE%E7%BC%96%E7%A0%81%E4%B8%BA%E6%95%B0%E5%AD%97%E4%BF%A1%E5%8F%B7"><span class="toc-number">2.5.1.</span> <span class="toc-text">2.5.1 数字数据编码为数字信号</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-5-2-%E6%95%B0%E5%AD%97%E6%95%B0%E6%8D%AE%E8%B0%83%E5%88%B6%E4%B8%BA%E6%A8%A1%E6%8B%9F%E4%BF%A1%E5%8F%B7"><span class="toc-number">2.5.2.</span> <span class="toc-text">2.5.2 数字数据调制为模拟信号</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-5-3-%E6%A8%A1%E6%8B%9F%E6%95%B0%E6%8D%AE%E7%BC%96%E7%A0%81%E4%B8%BA%E6%95%B0%E5%AD%97%E4%BF%A1%E5%8F%B7"><span class="toc-number">2.5.3.</span> <span class="toc-text">2.5.3 模拟数据编码为数字信号</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-5-4-%E6%A8%A1%E6%8B%9F%E6%95%B0%E6%8D%AE%E8%B0%83%E5%88%B6%E4%B8%BA%E6%A8%A1%E6%8B%9F%E4%BF%A1%E5%8F%B7"><span class="toc-number">2.5.4.</span> <span class="toc-text">2.5.4 模拟数据调制为模拟信号</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-%E7%89%A9%E7%90%86%E5%B1%82%E4%BC%A0%E8%BE%93%E4%BB%8B%E8%B4%A8"><span class="toc-number">2.6.</span> <span class="toc-text">2.6 物理层传输介质</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-6-1-%E5%AF%BC%E5%90%91%E6%80%A7%E4%BC%A0%E8%BE%93%E4%BB%8B%E8%B4%A8"><span class="toc-number">2.6.1.</span> <span class="toc-text">2.6.1 导向性传输介质</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-6-2-%E9%9D%9E%E5%AF%BC%E5%90%91%E6%80%A7%E4%BC%A0%E8%BE%93%E4%BB%8B%E8%B4%A8"><span class="toc-number">2.6.2.</span> <span class="toc-text">2.6.2 非导向性传输介质</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-%E7%89%A9%E7%90%86%E5%B1%82%E8%AE%BE%E5%A4%87"><span class="toc-number">2.7.</span> <span class="toc-text">2.7 物理层设备</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-7-1-%E4%B8%AD%E7%BB%A7%E5%99%A8"><span class="toc-number">2.7.1.</span> <span class="toc-text">2.7.1 中继器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-7-2-%E9%9B%86%E7%BA%BF%E5%99%A8"><span class="toc-number">2.7.2.</span> <span class="toc-text">2.7.2 集线器</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC-3-%E7%AB%A0-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82"><span class="toc-number">3.</span> <span class="toc-text">第 3 章 数据链路层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E6%A6%82%E8%BF%B0"><span class="toc-number">3.1.</span> <span class="toc-text">3.1 数据链路层概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-%E5%B0%81%E8%A3%85%E6%88%90%E5%B8%A7%E3%80%81%E9%80%8F%E6%98%8E%E4%BC%A0%E8%BE%93"><span class="toc-number">3.2.</span> <span class="toc-text">3.2 封装成帧、透明传输</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-%E5%B7%AE%E9%94%99%E6%8E%A7%E5%88%B6"><span class="toc-number">3.3.</span> <span class="toc-text">3.3 差错控制</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-1-%E6%A3%80%E9%94%99%E7%A0%81%EF%BC%88%E5%A5%87%E5%81%B6%E6%A0%A1%E9%AA%8C%E7%A0%81%E3%80%81CRC%E5%BE%AA%E7%8E%AF%E5%86%97%E4%BD%99%E7%A0%81%EF%BC%89"><span class="toc-number">3.3.1.</span> <span class="toc-text">3.3.1 检错码（奇偶校验码、CRC循环冗余码）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-2-%E7%BA%A0%E9%94%99%E7%A0%81%EF%BC%88%E6%B5%B7%E6%98%8E%E7%A0%81%EF%BC%89"><span class="toc-number">3.3.2.</span> <span class="toc-text">3.3.2 纠错码（海明码）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6%E4%B8%8E%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93%E6%9C%BA%E5%88%B6"><span class="toc-number">3.4.</span> <span class="toc-text">3.4 流量控制与可靠传输机制*</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-1-%E5%81%9C%E6%AD%A2-%E7%AD%89%E5%BE%85%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.4.1.</span> <span class="toc-text">3.4.1 停止-等待协议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-2-%E5%90%8E%E9%80%80N%E5%B8%A7%E5%8D%8F%E8%AE%AE%EF%BC%88GBN%EF%BC%89"><span class="toc-number">3.4.2.</span> <span class="toc-text">3.4.2 后退N帧协议（GBN）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-3-%E9%80%89%E6%8B%A9%E9%87%8D%E4%BC%A0%E5%8D%8F%E8%AE%AE%EF%BC%88SR%EF%BC%89"><span class="toc-number">3.4.3.</span> <span class="toc-text">3.4.3 选择重传协议（SR）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-%E4%BB%8B%E8%B4%A8%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%EF%BC%88MAC%E5%8D%8F%E8%AE%AE%EF%BC%89"><span class="toc-number">3.5.</span> <span class="toc-text">3.5 介质访问控制（MAC协议）*</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-5-1-%E4%BF%A1%E9%81%93%E5%88%92%E5%88%86%E4%BB%8B%E8%B4%A8%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%EF%BC%88%E9%9D%99%E6%80%81%EF%BC%89%EF%BC%88%E9%A2%91%E5%88%86FDM%E3%80%81%E6%97%B6%E5%88%86TDM%E3%80%81%E6%B3%A2%E5%88%86WDM%E3%80%81%E7%A0%81%E5%88%86CDM%EF%BC%89"><span class="toc-number">3.5.1.</span> <span class="toc-text">3.5.1 信道划分介质访问控制（静态）（频分FDM、时分TDM、波分WDM、码分CDM）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-5-2-%E9%9A%8F%E6%9C%BA%E8%AE%BF%E9%97%AE%E4%BB%8B%E8%B4%A8%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%EF%BC%88%E5%8A%A8%E6%80%81%EF%BC%89%EF%BC%88ALOHA%E3%80%81CSMA%E3%80%81CSMA-CD%E3%80%81CSMA-CA%EF%BC%89"><span class="toc-number">3.5.2.</span> <span class="toc-text">3.5.2 随机访问介质访问控制（动态）（ALOHA、CSMA、CSMA&#x2F;CD、CSMA&#x2F;CA）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-5-3-%E8%BD%AE%E8%AF%A2%E8%AE%BF%E9%97%AE%E4%BB%8B%E8%B4%A8%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%EF%BC%88%E5%8A%A8%E6%80%81%EF%BC%89%EF%BC%88%E8%BD%AE%E8%AF%A2%E3%80%81%E4%BB%A4%E7%89%8C%E4%BC%A0%E9%80%92%EF%BC%89"><span class="toc-number">3.5.3.</span> <span class="toc-text">3.5.3 轮询访问介质访问控制（动态）（轮询、令牌传递）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6-%E5%B1%80%E5%9F%9F%E7%BD%91"><span class="toc-number">3.6.</span> <span class="toc-text">3.6 局域网</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-6-1-%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="toc-number">3.6.1.</span> <span class="toc-text">3.6.1 以太网</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-6-2-%E6%97%A0%E7%BA%BF%E5%B1%80%E5%9F%9F%E7%BD%91"><span class="toc-number">3.6.2.</span> <span class="toc-text">3.6.2 无线局域网</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-7-%E5%B9%BF%E5%9F%9F%E7%BD%91"><span class="toc-number">3.7.</span> <span class="toc-text">3.7 广域网</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-7-1-PPP%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.7.1.</span> <span class="toc-text">3.7.1 PPP协议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-7-2-HDLC%E5%8D%8F%E8%AE%AE"><span class="toc-number">3.7.2.</span> <span class="toc-text">3.7.2 HDLC协议</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-8-%E9%93%BE%E8%B7%AF%E5%B1%82%E8%AE%BE%E5%A4%87"><span class="toc-number">3.8.</span> <span class="toc-text">3.8 链路层设备</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-8-1-%E7%BD%91%E6%A1%A5"><span class="toc-number">3.8.1.</span> <span class="toc-text">3.8.1 网桥</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-8-2-%E4%BA%A4%E6%8D%A2%E6%9C%BA"><span class="toc-number">3.8.2.</span> <span class="toc-text">3.8.2 交换机</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC-4-%E7%AB%A0-%E7%BD%91%E7%BB%9C%E5%B1%82"><span class="toc-number">4.</span> <span class="toc-text">第 4 章 网络层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E6%95%B0%E6%8D%AE%E4%BA%A4%E6%8D%A2%E6%96%B9%E5%BC%8F"><span class="toc-number">4.1.</span> <span class="toc-text">4.2 数据交换方式*</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-1-%E7%94%B5%E8%B7%AF%E4%BA%A4%E6%8D%A2"><span class="toc-number">4.1.1.</span> <span class="toc-text">4.2.1 电路交换</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-2-%E6%8A%A5%E6%96%87%E4%BA%A4%E6%8D%A2"><span class="toc-number">4.1.2.</span> <span class="toc-text">4.2.2 报文交换</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-3-%E5%88%86%E7%BB%84%E4%BA%A4%E6%8D%A2%EF%BC%88%E6%95%B0%E6%8D%AE%E6%8A%A5%E3%80%81%E8%99%9A%E7%94%B5%E8%B7%AF%EF%BC%89"><span class="toc-number">4.1.3.</span> <span class="toc-text">4.2.3 分组交换（数据报、虚电路）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-IP"><span class="toc-number">4.2.</span> <span class="toc-text">4.3 IP*</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-1-IP%E6%95%B0%E6%8D%AE%E6%8A%A5%E6%A0%BC%E5%BC%8F"><span class="toc-number">4.2.1.</span> <span class="toc-text">4.3.1 IP数据报格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-2-IP%E6%95%B0%E6%8D%AE%E6%8A%A5%E5%88%86%E7%89%87"><span class="toc-number">4.2.2.</span> <span class="toc-text">4.3.2 IP数据报分片</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-3-IPv4%E5%9C%B0%E5%9D%80"><span class="toc-number">4.2.3.</span> <span class="toc-text">4.3.3 IPv4地址</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-4-%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2%EF%BC%88NAT%EF%BC%89"><span class="toc-number">4.2.4.</span> <span class="toc-text">4.3.4 网络地址转换（NAT）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-5-%E5%AD%90%E7%BD%91%E5%88%92%E5%88%86%E3%80%81%E5%AD%90%E7%BD%91%E6%8E%A9%E7%A0%81"><span class="toc-number">4.2.5.</span> <span class="toc-text">4.3.5 子网划分、子网掩码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-6-%E6%97%A0%E5%88%86%E7%B1%BB%E7%BC%96%E5%9D%80CIDR%EF%BC%88%E6%9E%84%E6%88%90%E8%B6%85%E7%BD%91%EF%BC%89"><span class="toc-number">4.2.6.</span> <span class="toc-text">4.3.6 无分类编址CIDR（构成超网）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-7-ARP%E5%8D%8F%E8%AE%AE"><span class="toc-number">4.2.7.</span> <span class="toc-text">4.3.7 ARP协议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-8-DHCP%E5%8D%8F%E8%AE%AE"><span class="toc-number">4.2.8.</span> <span class="toc-text">4.3.8 DHCP协议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-9-ICMP%E5%8D%8F%E8%AE%AE"><span class="toc-number">4.2.9.</span> <span class="toc-text">4.3.9 ICMP协议</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-IPv6"><span class="toc-number">4.3.</span> <span class="toc-text">4.4 IPv6</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-%E8%B7%AF%E7%94%B1%E7%AE%97%E6%B3%95%E5%8F%8A%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE"><span class="toc-number">4.4.</span> <span class="toc-text">4.5 路由算法及路由协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-5-1-RIP%E5%8D%8F%E8%AE%AE%E4%B8%8E%E8%B7%9D%E7%A6%BB%E5%90%91%E9%87%8F%E7%AE%97%E6%B3%95"><span class="toc-number">4.4.1.</span> <span class="toc-text">4.5.1 RIP协议与距离向量算法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-5-2-OSPF%E5%8D%8F%E8%AE%AE%E4%B8%8E%E9%93%BE%E8%B7%AF%E7%8A%B6%E6%80%81%E7%AE%97%E6%B3%95"><span class="toc-number">4.4.2.</span> <span class="toc-text">4.5.2 OSPF协议与链路状态算法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-5-3-BGP%E5%8D%8F%E8%AE%AE"><span class="toc-number">4.4.3.</span> <span class="toc-text">4.5.3 BGP协议</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-6-IP%E7%BB%84%E6%92%AD"><span class="toc-number">4.5.</span> <span class="toc-text">4.6 IP组播</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-6-1-%E7%A1%AC%E4%BB%B6%E7%BB%84%E6%92%AD"><span class="toc-number">4.5.1.</span> <span class="toc-text">4.6.1 硬件组播</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-6-2-%E5%9B%A0%E7%89%B9%E7%BD%91%E8%8C%83%E5%9B%B4%E5%86%85%E7%BB%84%E6%92%AD"><span class="toc-number">4.5.2.</span> <span class="toc-text">4.6.2 因特网范围内组播</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-7-%E7%A7%BB%E5%8A%A8IP"><span class="toc-number">4.6.</span> <span class="toc-text">4.7 移动IP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-8-%E7%BD%91%E7%BB%9C%E5%B1%82%E8%AE%BE%E5%A4%87"><span class="toc-number">4.7.</span> <span class="toc-text">4.8 网络层设备</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-8-1-%E8%B7%AF%E7%94%B1%E5%99%A8"><span class="toc-number">4.7.1.</span> <span class="toc-text">4.8.1 路由器</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC-5-%E7%AB%A0-%E4%BC%A0%E8%BE%93%E5%B1%82"><span class="toc-number">5.</span> <span class="toc-text">第 5 章 传输层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-%E4%BC%A0%E8%BE%93%E5%B1%82%E6%A6%82%E8%BF%B0"><span class="toc-number">5.1.</span> <span class="toc-text">5.1 传输层概述</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link"><span class="toc-number">6.</span> <span class="toc-text"></span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-UDP%E5%8D%8F%E8%AE%AE"><span class="toc-number">6.1.</span> <span class="toc-text">5.2 UDP协议</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-TCP%E5%8D%8F%E8%AE%AE"><span class="toc-number">6.2.</span> <span class="toc-text">5.3 TCP协议*</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-1-TCP%E5%8D%8F%E8%AE%AE%E7%89%B9%E7%82%B9"><span class="toc-number">6.2.1.</span> <span class="toc-text">5.3.1 TCP协议特点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-2-TCP%E6%8A%A5%E6%96%87%E6%AE%B5%E6%A0%BC%E5%BC%8F"><span class="toc-number">6.2.2.</span> <span class="toc-text">5.3.2 TCP报文段格式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-3-TCP%E8%BF%9E%E6%8E%A5%E7%AE%A1%E7%90%86"><span class="toc-number">6.2.3.</span> <span class="toc-text">5.3.3 TCP连接管理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-4-TCP%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93"><span class="toc-number">6.2.4.</span> <span class="toc-text">5.3.4 TCP可靠传输</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-5-TCP%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6"><span class="toc-number">6.2.5.</span> <span class="toc-text">5.3.5 TCP流量控制*</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-6-TCP%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6"><span class="toc-number">6.2.6.</span> <span class="toc-text">5.3.6 TCP拥塞控制*</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC-6-%E7%AB%A0-%E5%BA%94%E7%94%A8%E5%B1%82"><span class="toc-number">7.</span> <span class="toc-text">第 6 章 应用层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1-%E5%BA%94%E7%94%A8%E5%B1%82%E6%A6%82%E8%BF%B0"><span class="toc-number">7.1.</span> <span class="toc-text">6.1 应用层概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2-%E5%9F%9F%E5%90%8D%E8%A7%A3%E6%9E%90%E7%B3%BB%E7%BB%9FDNS"><span class="toc-number">7.2.</span> <span class="toc-text">6.2 域名解析系统DNS</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3-%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AEFTP"><span class="toc-number">7.3.</span> <span class="toc-text">6.3 文件传输协议FTP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4-%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6"><span class="toc-number">7.4.</span> <span class="toc-text">6.4 电子邮件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5-%E4%B8%87%E7%BB%B4%E7%BD%91%E5%92%8CHTTP%E5%8D%8F%E8%AE%AE"><span class="toc-number">7.5.</span> <span class="toc-text">6.5 万维网和HTTP协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95"><span class="toc-number">7.5.1.</span> <span class="toc-text">文章目录</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93"><span class="toc-number">8.</span> <span class="toc-text">计算机网络知识点总结</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="toc-number">8.1.</span> <span class="toc-text">1 计算机网络体系结构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%BF%B0"><span class="toc-number">8.1.1.</span> <span class="toc-text">1.1 计算机网络概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E4%B8%8E%E5%8F%82%E8%80%83%E6%A8%A1%E5%9E%8B"><span class="toc-number">8.1.2.</span> <span class="toc-text">1.2 计算机网络体系结构与参考模型</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2-1-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%88%86%E5%B1%82%E7%BB%93%E6%9E%84"><span class="toc-number">8.1.2.1.</span> <span class="toc-text">1.2.1 计算机网络分层结构</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2-2-%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE%E3%80%81%E6%8E%A5%E5%8F%A3%E3%80%81%E6%9C%8D%E5%8A%A1%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-number">8.1.2.2.</span> <span class="toc-text">1.2.2 计算机网络协议、接口、服务的概念</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-2-3-ISO-OSI%E5%8F%82%E8%80%83%E6%A8%A1%E5%9E%8B%E5%92%8CTCP-IP%E6%A8%A1%E5%9E%8B"><span class="toc-number">8.1.2.3.</span> <span class="toc-text">1.2.3 ISO&#x2F;OSI参考模型和TCP&#x2F;IP模型</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%89%A9%E7%90%86%E5%B1%82"><span class="toc-number">8.2.</span> <span class="toc-text">2 物理层</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-%E9%80%9A%E4%BF%A1%E5%9F%BA%E7%A1%80"><span class="toc-number">8.2.1.</span> <span class="toc-text">2.1 通信基础</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-1-1-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">8.2.1.1.</span> <span class="toc-text">2.1.1 基本概念</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-1-2-%E5%A5%88%E5%A5%8E%E6%96%AF%E7%89%B9%E5%AE%9A%E7%90%86%E4%B8%8E%E9%A6%99%E5%86%9C%E5%AE%9A%E7%90%86"><span class="toc-number">8.2.1.2.</span> <span class="toc-text">2.1.2 奈奎斯特定理与香农定理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-1-3-%E7%BC%96%E7%A0%81%E4%B8%8E%E8%B0%83%E5%88%B6"><span class="toc-number">8.2.1.3.</span> <span class="toc-text">2.1.3 编码与调制</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-1-4-%E7%94%B5%E8%B7%AF%E4%BA%A4%E6%8D%A2%E3%80%81%E6%8A%A5%E6%96%87%E4%BA%A4%E6%8D%A2%E4%B8%8E%E5%88%86%E7%BB%84%E4%BA%A4%E6%8D%A2"><span class="toc-number">8.2.1.4.</span> <span class="toc-text">2.1.4 电路交换、报文交换与分组交换</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-1-5-%E6%95%B0%E6%8D%AE%E6%8A%A5%E4%B8%8E%E8%99%9A%E7%94%B5%E8%B7%AF"><span class="toc-number">8.2.1.5.</span> <span class="toc-text">2.1.5 数据报与虚电路</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-%E4%BC%A0%E8%BE%93%E4%BB%8B%E8%B4%A8"><span class="toc-number">8.2.2.</span> <span class="toc-text">2.2 传输介质</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-1-%E5%8F%8C%E7%BB%9E%E7%BA%BF%E3%80%81%E5%90%8C%E8%BD%B4%E7%94%B5%E7%BC%86%E3%80%81%E5%85%89%E7%BA%A4%E4%B8%8E%E6%97%A0%E7%BA%BF%E4%BC%A0%E8%BE%93%E4%BB%8B%E8%B4%A8"><span class="toc-number">8.2.2.1.</span> <span class="toc-text">2.2.1 双绞线、同轴电缆、光纤与无线传输介质</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-2-2-%E7%89%A9%E7%90%86%E5%B1%82%E6%8E%A5%E5%8F%A3%E7%9A%84%E7%89%B9%E6%80%A7"><span class="toc-number">8.2.2.2.</span> <span class="toc-text">2.2.2 物理层接口的特性</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-%E7%89%A9%E7%90%86%E5%B1%82%E8%AE%BE%E5%A4%87"><span class="toc-number">8.2.3.</span> <span class="toc-text">2.3 物理层设备</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-3-1-%E4%B8%AD%E7%BB%A7%E5%99%A8"><span class="toc-number">8.2.3.1.</span> <span class="toc-text">2.3.1 中继器</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-3-2-%E9%9B%86%E7%BA%BF%E5%99%A8"><span class="toc-number">8.2.3.2.</span> <span class="toc-text">2.3.2 集线器</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82"><span class="toc-number">8.3.</span> <span class="toc-text">3 数据链路层</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E7%9A%84%E5%8A%9F%E8%83%BD"><span class="toc-number">8.3.1.</span> <span class="toc-text">3.1 数据链路层的功能</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-1-1-%E4%B8%BA%E7%BD%91%E7%BB%9C%E5%B1%82%E6%8F%90%E4%BE%9B%E6%9C%8D%E5%8A%A1"><span class="toc-number">8.3.1.1.</span> <span class="toc-text">3.1.1 为网络层提供服务</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-1-2-%E9%93%BE%E8%B7%AF%E7%AE%A1%E7%90%86"><span class="toc-number">8.3.1.2.</span> <span class="toc-text">3.1.2 链路管理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-1-3-%E5%B0%81%E8%A3%85%E6%88%90%E5%B8%A7%E4%B8%8E%E9%80%8F%E6%98%8E%E4%BC%A0%E8%BE%93"><span class="toc-number">8.3.1.3.</span> <span class="toc-text">3.1.3 封装成帧与透明传输</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-1-4-%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6"><span class="toc-number">8.3.1.4.</span> <span class="toc-text">3.1.4 流量控制</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-1-5-%E5%B7%AE%E9%94%99%E6%8E%A7%E5%88%B6"><span class="toc-number">8.3.1.5.</span> <span class="toc-text">3.1.5 差错控制</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-%E7%BB%84%E5%B8%A7"><span class="toc-number">8.3.2.</span> <span class="toc-text">3.2 组帧</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-1-%E5%AD%97%E7%AC%A6%E8%AE%A1%E6%95%B0%E6%B3%95"><span class="toc-number">8.3.2.1.</span> <span class="toc-text">3.2.1 字符计数法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-2-%E5%AD%97%E7%AC%A6%E5%A1%AB%E5%85%85%E7%9A%84%E9%A6%96%E5%B0%BE%E5%AE%9A%E7%95%8C%E7%AC%A6%E6%B3%95"><span class="toc-number">8.3.2.2.</span> <span class="toc-text">3.2.2 字符填充的首尾定界符法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-3-%E9%9B%B6%E6%AF%94%E7%89%B9%E5%A1%AB%E5%85%85%E7%9A%84%E9%A6%96%E5%B0%BE%E6%A0%87%E5%BF%97%E6%B3%95"><span class="toc-number">8.3.2.3.</span> <span class="toc-text">3.2.3 零比特填充的首尾标志法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-4-%E8%BF%9D%E8%A7%84%E7%BC%96%E7%A0%81%E6%B3%95"><span class="toc-number">8.3.2.4.</span> <span class="toc-text">3.2.4 违规编码法</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-%E5%B7%AE%E9%94%99%E6%8E%A7%E5%88%B6-1"><span class="toc-number">8.3.3.</span> <span class="toc-text">3.3 差错控制</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-3-1-%E6%A3%80%E9%94%99%E7%BC%96%E7%A0%81"><span class="toc-number">8.3.3.1.</span> <span class="toc-text">3.3.1 检错编码</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-3-2-%E7%BA%A0%E9%94%99%E7%BC%96%E7%A0%81"><span class="toc-number">8.3.3.2.</span> <span class="toc-text">3.3.2 纠错编码</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6%E4%B8%8E%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93%E6%9C%BA%E5%88%B6-1"><span class="toc-number">8.3.4.</span> <span class="toc-text">3.4 流量控制与可靠传输机制</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-4-1-%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E6%9C%BA%E5%88%B6"><span class="toc-number">8.3.4.1.</span> <span class="toc-text">3.4.1 滑动窗口机制</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-4-2-%E5%8D%95%E5%B8%A7%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E4%B8%8E%E5%81%9C%E6%AD%A2-%E7%AD%89%E5%BE%85%E5%8D%8F%E8%AE%AE"><span class="toc-number">8.3.4.2.</span> <span class="toc-text">3.4.2 单帧滑动窗口与停止-等待协议</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-4-3-%E5%A4%9A%E5%B8%A7%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E4%B8%8E%E5%90%8E%E9%80%80N%E5%B8%A7%E5%8D%8F%E8%AE%AE%EF%BC%88GBN%EF%BC%89"><span class="toc-number">8.3.4.3.</span> <span class="toc-text">3.4.3 多帧滑动窗口与后退N帧协议（GBN）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-4-4-%E5%A4%9A%E5%B8%A7%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E4%B8%8E%E9%80%89%E6%8B%A9%E9%87%8D%E4%BC%A0%E5%8D%8F%E8%AE%AE%EF%BC%88SR%EF%BC%89"><span class="toc-number">8.3.4.4.</span> <span class="toc-text">3.4.4 多帧滑动窗口与选择重传协议（SR）</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-5-%E4%BB%8B%E8%B4%A8%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6"><span class="toc-number">8.3.5.</span> <span class="toc-text">3.5 介质访问控制</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-5-1-%E4%BF%A1%E9%81%93%E5%88%92%E5%88%86%E4%BB%8B%E8%B4%A8%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6"><span class="toc-number">8.3.5.1.</span> <span class="toc-text">3.5.1 信道划分介质访问控制</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-5-2-%E9%9A%8F%E6%9C%BA%E8%AE%BF%E9%97%AE%E4%BB%8B%E8%B4%A8%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6"><span class="toc-number">8.3.5.2.</span> <span class="toc-text">3.5.2 随机访问介质访问控制</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-5-3-%E8%BD%AE%E8%AF%A2%E8%AE%BF%E9%97%AE%EF%BC%9A%E4%BB%A4%E7%89%8C%E4%BC%A0%E9%80%92%E5%8D%8F%E8%AE%AE"><span class="toc-number">8.3.5.3.</span> <span class="toc-text">3.5.3 轮询访问：令牌传递协议</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-6-%E5%B1%80%E5%9F%9F%E7%BD%91-1"><span class="toc-number">8.3.6.</span> <span class="toc-text">3.6 局域网</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-6-1-%E5%B1%80%E5%9F%9F%E7%BD%91%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5%E5%92%8C%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="toc-number">8.3.6.1.</span> <span class="toc-text">3.6.1 局域网的基本概念和体系结构</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-6-2-%E4%BB%A5%E5%A4%AA%E7%BD%91%E4%B8%8E-IEEE-802-3"><span class="toc-number">8.3.6.2.</span> <span class="toc-text">3.6.2 以太网与 IEEE 802.3</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-6-3-IEEE-802-11%E6%97%A0%E7%BA%BF%E5%B1%80%E5%9F%9F%E7%BD%91"><span class="toc-number">8.3.6.3.</span> <span class="toc-text">3.6.3 IEEE 802.11无线局域网</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-6-4-VLAN%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5%E4%B8%8E%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86"><span class="toc-number">8.3.6.4.</span> <span class="toc-text">3.6.4 VLAN基本概念与基本原理</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-7-%E5%B9%BF%E5%9F%9F%E7%BD%91-1"><span class="toc-number">8.3.7.</span> <span class="toc-text">3.7 广域网</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-7-1-%E5%B9%BF%E5%9F%9F%E7%BD%91%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">8.3.7.1.</span> <span class="toc-text">3.7.1 广域网基本概念</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-7-2-PPP%E5%8D%8F%E8%AE%AE"><span class="toc-number">8.3.7.2.</span> <span class="toc-text">3.7.2 PPP协议</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-7-3-HDLC%E5%8D%8F%E8%AE%AE"><span class="toc-number">8.3.7.3.</span> <span class="toc-text">3.7.3 HDLC协议</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-8-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E8%AE%BE%E5%A4%87"><span class="toc-number">8.3.8.</span> <span class="toc-text">3.8 数据链路层设备</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-8-1-%E7%BD%91%E6%A1%A5-1"><span class="toc-number">8.3.8.1.</span> <span class="toc-text">3.8.1 网桥</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-8-2-%E5%B1%80%E5%9F%9F%E7%BD%91%E4%BA%A4%E6%8D%A2%E6%9C%BA"><span class="toc-number">8.3.8.2.</span> <span class="toc-text">3.8.2 局域网交换机</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E7%BD%91%E7%BB%9C%E5%B1%82"><span class="toc-number">8.4.</span> <span class="toc-text">4 网络层</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-%E7%BD%91%E7%BB%9C%E5%B1%82%E5%8A%9F%E8%83%BD"><span class="toc-number">8.4.1.</span> <span class="toc-text">4.1 网络层功能</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#4-1-1-%E5%BC%82%E6%9E%84%E7%BD%91%E7%BB%9C%E4%BA%92%E8%81%94"><span class="toc-number">8.4.1.1.</span> <span class="toc-text">4.1.1 异构网络互联</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-1-2-%E8%B7%AF%E7%94%B1%E8%BD%AC%E5%8F%91"><span class="toc-number">8.4.1.2.</span> <span class="toc-text">4.1.2 路由转发</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-1-3-SDN%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">8.4.1.3.</span> <span class="toc-text">4.1.3 SDN基本概念</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-1-4-%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6"><span class="toc-number">8.4.1.4.</span> <span class="toc-text">4.1.4 拥塞控制</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-%E8%B7%AF%E7%94%B1%E7%AE%97%E6%B3%95%E5%92%8C%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE"><span class="toc-number">8.4.2.</span> <span class="toc-text">4.2 路由算法和路由协议</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#4-2-1-%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%E4%B8%8E%E5%8A%A8%E6%80%81%E8%B7%AF%E7%94%B1"><span class="toc-number">8.4.2.1.</span> <span class="toc-text">4.2.1 静态路由与动态路由</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-2-2-%E8%B7%9D%E7%A6%BB-%E5%90%91%E9%87%8F%E8%B7%AF%E7%94%B1%E7%AE%97%E6%B3%95"><span class="toc-number">8.4.2.2.</span> <span class="toc-text">4.2.2 距离-向量路由算法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-2-3-%E9%93%BE%E8%B7%AF%E7%8A%B6%E6%80%81%E8%B7%AF%E7%94%B1%E7%AE%97%E6%B3%95"><span class="toc-number">8.4.2.3.</span> <span class="toc-text">4.2.3 链路状态路由算法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-2-4-%E5%B1%82%E6%AC%A1%E8%B7%AF%E7%94%B1"><span class="toc-number">8.4.2.4.</span> <span class="toc-text">4.2.4 层次路由</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-IPv4"><span class="toc-number">8.4.3.</span> <span class="toc-text">4.3 IPv4</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#4-3-1-IPv4%E5%88%86%E7%BB%84"><span class="toc-number">8.4.3.1.</span> <span class="toc-text">4.3.1 IPv4分组</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-3-2-IPv4%E5%9C%B0%E5%9D%80%E4%B8%8ENAT"><span class="toc-number">8.4.3.2.</span> <span class="toc-text">4.3.2 IPv4地址与NAT</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-3-3-%E5%AD%90%E7%BD%91%E5%88%92%E5%88%86%E4%B8%8E%E5%AD%90%E7%BD%91%E6%8E%A9%E7%A0%81%E3%80%81CIDR"><span class="toc-number">8.4.3.3.</span> <span class="toc-text">4.3.3 子网划分与子网掩码、CIDR</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-3-4-ARP%E3%80%81DHCP%E4%B8%8EICMP"><span class="toc-number">8.4.3.4.</span> <span class="toc-text">4.3.4 ARP、DHCP与ICMP</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-IPv6-1"><span class="toc-number">8.4.4.</span> <span class="toc-text">4.4 IPv6</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#4-4-1-IPv6%E7%9A%84%E4%B8%BB%E8%A6%81%E7%89%B9%E7%82%B9"><span class="toc-number">8.4.4.1.</span> <span class="toc-text">4.4.1 IPv6的主要特点</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-4-2-IPv6%E5%9C%B0%E5%9D%80"><span class="toc-number">8.4.4.2.</span> <span class="toc-text">4.4.2 IPv6地址</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-5-IP%E7%BB%84%E6%92%AD"><span class="toc-number">8.4.5.</span> <span class="toc-text">4.5 IP组播</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#4-5-1-%E7%BB%84%E6%92%AD%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-number">8.4.5.1.</span> <span class="toc-text">4.5.1 组播的概念</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-5-2-IP%E7%BB%84%E6%92%AD%E5%9C%B0%E5%9D%80"><span class="toc-number">8.4.5.2.</span> <span class="toc-text">4.5.2 IP组播地址</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-5-3-IGMP%E4%B8%8E%E7%BB%84%E6%92%AD%E8%B7%AF%E7%94%B1%E7%AE%97%E6%B3%95"><span class="toc-number">8.4.5.3.</span> <span class="toc-text">4.5.3 IGMP与组播路由算法</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-6-%E7%A7%BB%E5%8A%A8IP"><span class="toc-number">8.4.6.</span> <span class="toc-text">4.6 移动IP</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#4-6-1-%E7%A7%BB%E5%8A%A8IP%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-number">8.4.6.1.</span> <span class="toc-text">4.6.1 移动IP的概念</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-6-2-%E7%A7%BB%E5%8A%A8IP%E9%80%9A%E4%BF%A1%E8%BF%87%E7%A8%8B"><span class="toc-number">8.4.6.2.</span> <span class="toc-text">4.6.2 移动IP通信过程</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-7-%E7%BD%91%E7%BB%9C%E5%B1%82%E8%AE%BE%E5%A4%87"><span class="toc-number">8.4.7.</span> <span class="toc-text">4.7 网络层设备</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#4-7-1-%E5%86%B2%E7%AA%81%E5%9F%9F%E5%92%8C%E5%B9%BF%E6%92%AD%E5%9F%9F"><span class="toc-number">8.4.7.1.</span> <span class="toc-text">4.7.1 冲突域和广播域</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-7-2-%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E7%BB%84%E6%88%90%E5%92%8C%E5%8A%9F%E8%83%BD"><span class="toc-number">8.4.7.2.</span> <span class="toc-text">4.7.2 路由器的组成和功能</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#4-7-3-%E8%B7%AF%E7%94%B1%E8%A1%A8%E4%B8%8E%E8%B7%AF%E7%94%B1%E8%BD%AC%E5%8F%91"><span class="toc-number">8.4.7.3.</span> <span class="toc-text">4.7.3 路由表与路由转发</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E4%BC%A0%E8%BE%93%E5%B1%82"><span class="toc-number">8.5.</span> <span class="toc-text">5 传输层</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-%E4%BC%A0%E8%BE%93%E5%B1%82%E6%8F%90%E4%BE%9B%E7%9A%84%E6%9C%8D%E5%8A%A1"><span class="toc-number">8.5.1.</span> <span class="toc-text">5.1 传输层提供的服务</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#5-1-1-%E4%BC%A0%E8%BE%93%E5%B1%82%E7%9A%84%E5%8A%9F%E8%83%BD"><span class="toc-number">8.5.1.1.</span> <span class="toc-text">5.1.1 传输层的功能</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-1-2-%E4%BC%A0%E8%BE%93%E5%B1%82%E7%9A%84%E5%AF%BB%E5%9D%80%E4%B8%8E%E7%AB%AF%E5%8F%A3"><span class="toc-number">8.5.1.2.</span> <span class="toc-text">5.1.2 传输层的寻址与端口</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-UDP%E5%8D%8F%E8%AE%AE-1"><span class="toc-number">8.5.2.</span> <span class="toc-text">5.2 UDP协议</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#5-2-1-UDP%E6%95%B0%E6%8D%AE%E6%8A%A5"><span class="toc-number">8.5.2.1.</span> <span class="toc-text">5.2.1 UDP数据报</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-2-2-UDP%E6%A0%A1%E9%AA%8C"><span class="toc-number">8.5.2.2.</span> <span class="toc-text">5.2.2 UDP校验</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-TCP%E5%8D%8F%E8%AE%AE-1"><span class="toc-number">8.5.3.</span> <span class="toc-text">5.3 TCP协议</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#5-3-1-TCP%E5%8D%8F%E8%AE%AE%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">8.5.3.1.</span> <span class="toc-text">5.3.1 TCP协议的特点</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-3-2-TCP%E6%8A%A5%E6%96%87%E6%AE%B5"><span class="toc-number">8.5.3.2.</span> <span class="toc-text">5.3.2 TCP报文段</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-3-3-TCP%E8%BF%9E%E6%8E%A5%E7%AE%A1%E7%90%86-1"><span class="toc-number">8.5.3.3.</span> <span class="toc-text">5.3.3 TCP连接管理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-3-4-TCP%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93-1"><span class="toc-number">8.5.3.4.</span> <span class="toc-text">5.3.4 TCP可靠传输</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-3-5-TCP%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6-1"><span class="toc-number">8.5.3.5.</span> <span class="toc-text">5.3.5 TCP流量控制</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#5-3-6-TCP%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6-1"><span class="toc-number">8.5.3.6.</span> <span class="toc-text">5.3.6 TCP拥塞控制</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E5%BA%94%E7%94%A8%E5%B1%82"><span class="toc-number">8.6.</span> <span class="toc-text">6 应用层</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-%E7%BD%91%E7%BB%9C%E5%BA%94%E7%94%A8%E6%A8%A1%E5%9E%8B"><span class="toc-number">8.6.1.</span> <span class="toc-text">6.1 网络应用模型</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#6-1-1-%E5%AE%A2%E6%88%B7-%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%A8%A1%E5%9E%8B"><span class="toc-number">8.6.1.1.</span> <span class="toc-text">6.1.1 客户&#x2F;服务器模型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-1-2-P2P%E6%A8%A1%E5%9E%8B"><span class="toc-number">8.6.1.2.</span> <span class="toc-text">6.1.2 P2P模型</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-%E5%9F%9F%E5%90%8D%E7%B3%BB%E7%BB%9F%EF%BC%88DNS%EF%BC%89"><span class="toc-number">8.6.2.</span> <span class="toc-text">6.2 域名系统（DNS）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#6-2-1-%E5%B1%82%E6%AC%A1%E5%9F%9F%E5%90%8D%E7%A9%BA%E9%97%B4"><span class="toc-number">8.6.2.1.</span> <span class="toc-text">6.2.1 层次域名空间</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-2-2-%E5%9F%9F%E5%90%8D%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">8.6.2.2.</span> <span class="toc-text">6.2.2 域名服务器</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-2-3-%E5%9F%9F%E5%90%8D%E8%A7%A3%E6%9E%90%E8%BF%87%E7%A8%8B"><span class="toc-number">8.6.2.3.</span> <span class="toc-text">6.2.3 域名解析过程</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-3-%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE%EF%BC%88FTP%EF%BC%89"><span class="toc-number">8.6.3.</span> <span class="toc-text">6.3 文件传输协议（FTP）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#6-3-1-FTP%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">8.6.3.1.</span> <span class="toc-text">6.3.1 FTP的工作原理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-3-2-%E6%8E%A7%E5%88%B6%E8%BF%9E%E6%8E%A5%E4%B8%8E%E6%95%B0%E6%8D%AE%E8%BF%9E%E6%8E%A5"><span class="toc-number">8.6.3.2.</span> <span class="toc-text">6.3.2 控制连接与数据连接</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-4-%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6-1"><span class="toc-number">8.6.4.</span> <span class="toc-text">6.4 电子邮件</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#6-4-1-%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%BB%84%E6%88%90%E7%BB%93%E6%9E%84"><span class="toc-number">8.6.4.1.</span> <span class="toc-text">6.4.1 电子邮件系统的组成结构</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-4-2-SMTP%E5%92%8CPOP3"><span class="toc-number">8.6.4.2.</span> <span class="toc-text">6.4.2 SMTP和POP3</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-4-3-%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6%E6%A0%BC%E5%BC%8F%E4%B8%8EMIME"><span class="toc-number">8.6.4.3.</span> <span class="toc-text">6.4.3 电子邮件格式与MIME</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-5-%E4%B8%87%E7%BB%B4%E7%BD%91%EF%BC%88WWW%EF%BC%89"><span class="toc-number">8.6.5.</span> <span class="toc-text">6.5 万维网（WWW）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#6-5-1-WWW%E7%9A%84%E6%A6%82%E5%BF%B5%E4%B8%8E%E7%BB%84%E6%88%90%E7%BB%93%E6%9E%84"><span class="toc-number">8.6.5.1.</span> <span class="toc-text">6.5.1 WWW的概念与组成结构</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-5-2-%E8%B6%85%E6%96%87%E6%9C%AC%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE%EF%BC%88HTTP%EF%BC%89"><span class="toc-number">8.6.5.2.</span> <span class="toc-text">6.5.2 超文本传输协议（HTTP）</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95-1"><span class="toc-number">8.6.6.</span> <span class="toc-text">文章目录</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-number">9.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E6%A6%82%E8%BF%B0"><span class="toc-number">10.</span> <span class="toc-text">一、计算机网络概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BA%92%E8%81%94%E7%BD%91%E7%9A%84%E6%9E%84%E6%88%90"><span class="toc-number">10.1.</span> <span class="toc-text">1 互联网的构成</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%BD%91%E7%BB%9C%E5%88%86%E7%B1%BB"><span class="toc-number">10.2.</span> <span class="toc-text">2.网络分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%8E%A5%E5%85%A5%E7%BD%91"><span class="toc-number">10.3.</span> <span class="toc-text">3.接入网</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E7%BD%91%E7%BB%9C%E6%A0%B8%E5%BF%83%E7%9A%84%E4%B8%A4%E5%A4%A7%E5%8A%9F%E8%83%BD"><span class="toc-number">10.4.</span> <span class="toc-text">4.网络核心的两大功能</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A0%E8%B7%AF%E7%94%B1"><span class="toc-number">10.4.1.</span> <span class="toc-text">①路由</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A1%E8%BD%AC%E5%8F%91"><span class="toc-number">10.4.2.</span> <span class="toc-text">②转发</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E7%BD%91%E7%BB%9C%E5%88%86%E5%B1%82"><span class="toc-number">10.5.</span> <span class="toc-text">5.网络分层</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A0OSI-7%E5%B1%82%E6%A8%A1%E5%9E%8B"><span class="toc-number">10.5.1.</span> <span class="toc-text">①OSI 7层模型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A1TCP-IP-4%E5%B1%82%E6%A8%A1%E5%9E%8B"><span class="toc-number">10.5.2.</span> <span class="toc-text">②TCP&#x2F;IP 4层模型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A2%E4%B8%A4%E7%A7%8D%E6%A8%A1%E5%9E%8B%E6%AF%94%E8%BE%83"><span class="toc-number">10.5.3.</span> <span class="toc-text">③两种模型比较</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E7%89%A9%E7%90%86%E5%B1%82"><span class="toc-number">11.</span> <span class="toc-text">二、物理层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%89%A9%E7%90%86%E4%BB%8B%E8%B4%A8"><span class="toc-number">11.1.</span> <span class="toc-text">1.物理介质</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A0%E5%BC%95%E5%AF%BC%E5%9E%8B%E4%BB%8B%E8%B4%A8"><span class="toc-number">11.1.1.</span> <span class="toc-text">①引导型介质</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A1%E9%9D%9E%E5%BC%95%E5%AF%BC%E5%9E%8B%E4%BB%8B%E8%B4%A8"><span class="toc-number">11.1.2.</span> <span class="toc-text">②非引导型介质</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#-1"><span class="toc-number">11.2.</span> <span class="toc-text"></span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%95%B0%E6%8D%AE%E4%BA%A4%E6%8D%A2%E6%96%B9%E5%BC%8F"><span class="toc-number">11.3.</span> <span class="toc-text">2.数据交换方式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A0%E5%88%86%E7%BB%84%E4%BA%A4%E6%8D%A2"><span class="toc-number">11.3.1.</span> <span class="toc-text">①分组交换</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A1%E7%94%B5%E8%B7%AF%E4%BA%A4%E6%8D%A2"><span class="toc-number">11.3.2.</span> <span class="toc-text">②电路交换</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E4%BF%A1%E9%81%93%E5%A4%8D%E7%94%A8"><span class="toc-number">11.4.</span> <span class="toc-text">3.信道复用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A0%E9%A2%91%E5%88%86%E5%A4%8D%E7%94%A8"><span class="toc-number">11.4.1.</span> <span class="toc-text">①频分复用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A1%E6%97%B6%E5%88%86%E5%A4%8D%E7%94%A8"><span class="toc-number">11.4.2.</span> <span class="toc-text">②时分复用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A2%E6%B3%A2%E5%88%86%E5%A4%8D%E7%94%A8"><span class="toc-number">11.4.3.</span> <span class="toc-text">③波分复用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A3%E7%A0%81%E5%88%86%E5%A4%8D%E7%94%A8"><span class="toc-number">11.4.4.</span> <span class="toc-text">④码分复用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82"><span class="toc-number">12.</span> <span class="toc-text">三、数据链路层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%8A%9F%E8%83%BD%EF%BC%88%E8%A6%81%E8%A7%A3%E5%86%B3%E7%9A%84%E9%97%AE%E9%A2%98%EF%BC%89"><span class="toc-number">12.1.</span> <span class="toc-text">1.功能（要解决的问题）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82%E6%8F%90%E4%BE%9B%E7%9A%84%E6%9C%8D%E5%8A%A1"><span class="toc-number">12.2.</span> <span class="toc-text">2.数据链路层提供的服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%88%90%E5%B8%A7%EF%BC%88Framing%EF%BC%89"><span class="toc-number">12.3.</span> <span class="toc-text">3.成帧（Framing）</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-1-%E8%A6%81%E8%A7%A3%E5%86%B3%E7%9A%84%E5%85%B3%E9%94%AE%E9%97%AE%E9%A2%98%EF%BC%9A%E5%A6%82%E4%BD%95%E6%A0%87%E8%AF%86%E4%B8%80%E4%B8%AA%E5%B8%A7%E7%9A%84%E5%BC%80%E5%A7%8B%EF%BC%9F"><span class="toc-number">12.3.0.1.</span> <span class="toc-text">3.1 要解决的关键问题：如何标识一个帧的开始？</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-%E6%88%90%E5%B8%A7%EF%BC%88framing%EF%BC%89%E7%9A%84%E6%96%B9%E5%BC%8F"><span class="toc-number">12.3.0.2.</span> <span class="toc-text">3.2 成帧（framing）的方式</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%91%A0%E5%B8%A6%E6%AF%94%E7%89%B9%E5%A1%AB%E5%85%85%E7%9A%84%E5%AE%9A%E7%95%8C%E7%AC%A6%E6%B3%95"><span class="toc-number">12.3.0.2.1.</span> <span class="toc-text">①带比特填充的定界符法</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%91%A1%E7%89%A9%E7%90%86%E5%B1%82%E7%BC%96%E7%A0%81%E8%BF%9D%E4%BE%8B"><span class="toc-number">12.3.0.2.2.</span> <span class="toc-text">②物理层编码违例</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%B7%AE%E9%94%99%E6%8E%A7%E5%88%B6"><span class="toc-number">12.4.</span> <span class="toc-text">4.差错控制</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-%E8%83%8C%E6%99%AF"><span class="toc-number">12.4.1.</span> <span class="toc-text">4.1 背景</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-%E5%B7%AE%E9%94%99%E6%A3%80%E9%AA%8C%E4%B8%8E%E7%BA%A0%E6%AD%A3"><span class="toc-number">12.4.2.</span> <span class="toc-text">4.2 差错检验与纠正</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0%E5%A5%87%E5%81%B6%E6%A3%80%E9%AA%8C-Parity-Check"><span class="toc-number">12.4.2.1.</span> <span class="toc-text">①奇偶检验 (Parity Check)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1%E6%A0%A1%E9%AA%8C%E5%92%8C-Checksum"><span class="toc-number">12.4.2.2.</span> <span class="toc-text">②校验和 (Checksum)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A2%E5%BE%AA%E7%8E%AF%E5%86%97%E4%BD%99%E6%A0%A1%E9%AA%8C-Cyclic-Redundancy-Check%EF%BC%8CCRC"><span class="toc-number">12.4.2.3.</span> <span class="toc-text">③循环冗余校验 (Cyclic Redundancy Check，CRC)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A3%E6%B1%89%E6%98%8E%E7%A0%81"><span class="toc-number">12.4.2.4.</span> <span class="toc-text">④汉明码</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6"><span class="toc-number">12.5.</span> <span class="toc-text">5.流量控制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E5%AA%92%E4%BD%93%E6%8E%A5%E5%85%A5%E6%8E%A7%E5%88%B6-MAC-Medium-Access-Control-%E5%AD%90%E5%B1%82"><span class="toc-number">12.6.</span> <span class="toc-text">6.媒体接入控制 MAC (Medium Access Control)子层</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-%E4%BF%A1%E9%81%93%E5%88%86%E9%85%8D%E9%97%AE%E9%A2%98"><span class="toc-number">12.6.1.</span> <span class="toc-text">6.1 信道分配问题</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0-%E6%97%B6%E5%88%86%E5%A4%9A%E5%9D%80%E6%8E%A5%E5%85%A5-TDMA"><span class="toc-number">12.6.1.1.</span> <span class="toc-text">① 时分多址接入-TDMA</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1-%E9%A2%91%E5%88%86%E5%A4%9A%E5%9D%80%E6%8E%A5%E5%85%A5-FDMA"><span class="toc-number">12.6.1.2.</span> <span class="toc-text">② 频分多址接入-FDMA</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-%E5%A4%9A%E8%B7%AF%E8%AE%BF%E9%97%AE%E5%8D%8F%E8%AE%AE"><span class="toc-number">12.6.2.</span> <span class="toc-text">6.2 多路访问协议</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#6-2-1-%E9%9A%8F%E6%9C%BA%E8%AE%BF%E9%97%AE%E5%8D%8F%E8%AE%AE"><span class="toc-number">12.6.2.1.</span> <span class="toc-text">6.2.1 随机访问协议</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%91%A0ALOHA"><span class="toc-number">12.6.2.1.1.</span> <span class="toc-text">①ALOHA</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%91%A1%E8%BD%BD%E6%B3%A2%E4%BE%A6%E5%90%AC%E5%A4%9A%E8%B7%AF%E8%AE%BF%E9%97%AE%E5%8D%8F%E8%AE%AECSMA"><span class="toc-number">12.6.2.1.2.</span> <span class="toc-text">②载波侦听多路访问协议CSMA</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-2-2-%E5%8F%97%E6%8E%A7%E8%AE%BF%E9%97%AE%E5%8D%8F%E8%AE%AE"><span class="toc-number">12.6.2.2.</span> <span class="toc-text">6.2.2 受控访问协议</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%91%A0%E4%BD%8D%E5%9B%BE%E5%8D%8F%E8%AE%AE%EF%BC%88%E9%A2%84%E7%95%99%E5%8D%8F%E8%AE%AE%EF%BC%89"><span class="toc-number">12.6.2.2.1.</span> <span class="toc-text">①位图协议（预留协议）</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%91%A1%E4%BB%A4%E7%89%8C%E4%BC%A0%E9%80%92"><span class="toc-number">12.6.2.2.2.</span> <span class="toc-text">②令牌传递</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%91%A2%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%80%92%E8%AE%A1%E6%95%B0%E5%8D%8F%E8%AE%AE"><span class="toc-number">12.6.2.2.3.</span> <span class="toc-text">③二进制倒计数协议</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#6-2-3-%E6%9C%89%E9%99%90%E7%AB%9E%E4%BA%89%E5%8D%8F%E8%AE%AE"><span class="toc-number">12.6.2.3.</span> <span class="toc-text">6.2.3 有限竞争协议</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%91%A0%E8%87%AA%E9%80%82%E5%BA%94%E6%A0%91%E6%90%9C%E7%B4%A2%E5%8D%8F%E8%AE%AE%EF%BC%88Adaptive-Tree-Walk-Protocol%EF%BC%89"><span class="toc-number">12.6.2.3.1.</span> <span class="toc-text">①自适应树搜索协议（Adaptive Tree Walk Protocol）</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-3%E8%99%9A%E6%8B%9F%E5%B1%80%E5%9F%9F%E7%BD%91VLAN"><span class="toc-number">12.6.3.</span> <span class="toc-text">6.3虚拟局域网VLAN</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-4%E6%97%A0%E7%BA%BF%E5%B1%80%E5%9F%9F%E7%BD%91WLAN"><span class="toc-number">12.6.4.</span> <span class="toc-text">6.4无线局域网WLAN</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E7%BD%91%E7%BB%9C%E5%B1%82"><span class="toc-number">13.</span> <span class="toc-text">四、网络层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%BD%91%E7%BB%9C%E5%B1%82%E6%A6%82%E8%BF%B0"><span class="toc-number">13.1.</span> <span class="toc-text">1.网络层概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%BD%91%E7%BB%9C%E5%B1%82%E5%85%B3%E9%94%AE%E5%8A%9F%E8%83%BD"><span class="toc-number">13.2.</span> <span class="toc-text">2.网络层关键功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-Internet%E7%BD%91%E9%99%85%E5%8D%8F%E8%AE%AE"><span class="toc-number">13.3.</span> <span class="toc-text">3.Internet网际协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-IPv4%E5%8D%8F%E8%AE%AE%E5%8F%8A%E5%85%B6%E7%9B%B8%E5%85%B3%E6%8A%80%E6%9C%AF"><span class="toc-number">13.3.1.</span> <span class="toc-text">3.1 IPv4协议及其相关技术</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-1-1-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">13.3.1.1.</span> <span class="toc-text">3.1.1 基本概念</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-1-2-IPv4%E6%95%B0%E6%8D%AE%E6%8A%A5%E6%A0%BC%E5%BC%8F"><span class="toc-number">13.3.1.2.</span> <span class="toc-text">3.1.2 IPv4数据报格式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-1-3-%E6%95%B0%E6%8D%AE%E6%8A%A5%E5%88%86%E7%89%87"><span class="toc-number">13.3.1.3.</span> <span class="toc-text">3.1.3 数据报分片</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-1-4-IP%E5%8D%8F%E8%AE%AE%E5%8A%9F%E8%83%BD%E5%8F%8A%E6%8A%A5%E5%A4%B4%E5%AD%97%E6%AE%B5%E6%80%BB%E7%BB%93"><span class="toc-number">13.3.1.4.</span> <span class="toc-text">3.1.4 IP协议功能及报头字段总结</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-IP%E5%9C%B0%E5%9D%80"><span class="toc-number">13.3.2.</span> <span class="toc-text">3.2 IP地址</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-1-%E6%A6%82%E8%BF%B0"><span class="toc-number">13.3.2.1.</span> <span class="toc-text">3.2.1 概述</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-1-%E5%AD%90%E7%BD%91%E5%88%92%E5%88%86"><span class="toc-number">13.3.2.2.</span> <span class="toc-text">3.2.1 子网划分</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-3-%E6%97%A0%E7%B1%BB%E5%9F%9F%E9%97%B4%E8%B7%AF%E7%94%B1"><span class="toc-number">13.3.2.3.</span> <span class="toc-text">3.2.3 无类域间路由</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-DHCP%E5%8A%A8%E6%80%81%E4%B8%BB%E6%9C%BA%E9%85%8D%E7%BD%AE%E5%8D%8F%E8%AE%AE"><span class="toc-number">13.3.3.</span> <span class="toc-text">3.3 DHCP动态主机配置协议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-ARP%E5%9C%B0%E5%9D%80%E8%A7%A3%E6%9E%90%E5%8D%8F%E8%AE%AE"><span class="toc-number">13.3.4.</span> <span class="toc-text">3.4 ARP地址解析协议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-5-%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E8%BD%AC%E6%8D%A2-NAT"><span class="toc-number">13.3.5.</span> <span class="toc-text">3.5 网络地址转换(NAT)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-6-ICMP-%E4%BA%92%E8%81%94%E7%BD%91%E6%8E%A7%E5%88%B6%E6%8A%A5%E6%96%87%E5%8D%8F%E8%AE%AE"><span class="toc-number">13.3.6.</span> <span class="toc-text">3.6 ICMP: 互联网控制报文协议</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E8%B7%AF%E7%94%B1%E7%AE%97%E6%B3%95"><span class="toc-number">13.4.</span> <span class="toc-text">4.路由算法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-%E8%B7%9D%E7%A6%BB%E5%90%91%E9%87%8F%E8%B7%AF%E7%94%B1"><span class="toc-number">13.4.1.</span> <span class="toc-text">4.1 距离向量路由</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AE%97%E6%B3%95%E8%BF%87%E7%A8%8B"><span class="toc-number">13.4.1.1.</span> <span class="toc-text">算法过程</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%89%B9%E6%AE%8A%E6%83%85%E5%86%B5%E8%80%83%E8%99%91"><span class="toc-number">13.4.1.2.</span> <span class="toc-text">特殊情况考虑</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-%E9%93%BE%E8%B7%AF%E7%8A%B6%E6%80%81%E8%B7%AF%E7%94%B1"><span class="toc-number">13.4.2.</span> <span class="toc-text">4.2 链路状态路由</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AE%97%E6%B3%95%E8%BF%87%E7%A8%8B-1"><span class="toc-number">13.4.2.1.</span> <span class="toc-text">算法过程</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%B7%9D%E7%A6%BB%E5%90%91%E9%87%8F%E5%92%8C%E9%93%BE%E8%B7%AF%E7%8A%B6%E6%80%81%E7%AE%97%E6%B3%95%E6%AF%94%E8%BE%83"><span class="toc-number">13.4.2.2.</span> <span class="toc-text">距离向量和链路状态算法比较</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-%E5%B1%82%E6%AC%A1%E8%B7%AF%E7%94%B1"><span class="toc-number">13.4.3.</span> <span class="toc-text">4.3 层次路由</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-4-%E5%B9%BF%E6%92%AD%E8%B7%AF%E7%94%B1"><span class="toc-number">13.4.4.</span> <span class="toc-text">4.4 广播路由</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95"><span class="toc-number">13.4.4.1.</span> <span class="toc-text">实现方法</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-Internet%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE"><span class="toc-number">13.5.</span> <span class="toc-text">5.Internet路由协议</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E5%8D%8F%E8%AE%AERIP"><span class="toc-number">13.5.1.</span> <span class="toc-text">5.1 路由选择协议RIP</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-BGP-%E5%A4%96%E9%83%A8%E7%BD%91%E5%85%B3%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE"><span class="toc-number">13.5.2.</span> <span class="toc-text">5.2 BGP-外部网关路由协议</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">13.6.</span> <span class="toc-text">6.路由器的工作原理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-%E8%B7%AF%E7%94%B1%E5%99%A8%E6%A6%82%E8%BF%B0"><span class="toc-number">13.6.1.</span> <span class="toc-text">6.1 路由器概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-%E8%B7%AF%E7%94%B1%E5%99%A8%E6%8E%A7%E5%88%B6%E5%B1%82"><span class="toc-number">13.6.2.</span> <span class="toc-text">6.2 路由器控制层</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-3-%E8%B7%AF%E7%94%B1%E5%99%A8%E6%95%B0%E6%8D%AE%E5%B1%82"><span class="toc-number">13.6.3.</span> <span class="toc-text">6.3 路由器数据层</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E7%AE%97%E6%B3%95"><span class="toc-number">13.7.</span> <span class="toc-text">7.拥塞控制算法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-1-%E6%A6%82%E8%BF%B0"><span class="toc-number">13.7.1.</span> <span class="toc-text">7.1 概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-%E6%B5%81%E9%87%8F%E8%B0%83%E8%8A%82"><span class="toc-number">13.7.2.</span> <span class="toc-text">7.2 流量调节</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-3-%E9%9A%8F%E6%9C%BA%E6%97%A9%E6%9C%9F%E6%A3%80%E6%B5%8BRED-Random-Early-Detection"><span class="toc-number">13.7.3.</span> <span class="toc-text">7.3 随机早期检测RED (Random Early Detection)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E6%9C%8D%E5%8A%A1%E8%B4%A8%E9%87%8F"><span class="toc-number">13.8.</span> <span class="toc-text">8.服务质量</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1%E6%A6%82%E8%BF%B0"><span class="toc-number">13.8.1.</span> <span class="toc-text">8.1概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-2-%E6%B5%81%E9%87%8F%E6%95%B4%E5%BD%A2"><span class="toc-number">13.8.2.</span> <span class="toc-text">8.2 流量整形</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0%E6%BC%8F%E6%A1%B6%E7%AE%97%E6%B3%95"><span class="toc-number">13.8.2.1.</span> <span class="toc-text">①漏桶算法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1%E4%BB%A4%E7%89%8C%E6%A1%B6%E7%AE%97%E6%B3%95"><span class="toc-number">13.8.2.2.</span> <span class="toc-text">②令牌桶算法</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-3-%E6%95%B0%E6%8D%AE%E5%8C%85%E8%B0%83%E5%BA%A6"><span class="toc-number">13.8.3.</span> <span class="toc-text">8.3 数据包调度</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-%E4%B8%89%E5%B1%82%E4%BA%A4%E6%8D%A2"><span class="toc-number">13.9.</span> <span class="toc-text">9.三层交换</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#9-1-%E4%B8%89%E5%B1%82%E4%BA%A4%E6%8D%A2%E7%9A%84%E6%8A%80%E6%9C%AF%E8%83%8C%E6%99%AF"><span class="toc-number">13.9.1.</span> <span class="toc-text">9.1 三层交换的技术背景</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-2-%E4%B8%89%E5%B1%82%E4%BA%A4%E6%8D%A2%E7%9A%84%E5%8A%A8%E6%9C%BA"><span class="toc-number">13.9.2.</span> <span class="toc-text">9.2 三层交换的动机</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-3-%E4%B8%89%E5%B1%82%E4%BA%A4%E6%8D%A2%E6%9C%BA%E7%9A%84%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="toc-number">13.9.3.</span> <span class="toc-text">9.3 三层交换机的工作原理</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-%E8%99%9A%E6%8B%9F%E4%B8%93%E7%94%A8%E7%BD%91VPN-Virtual-Private-Network"><span class="toc-number">13.10.</span> <span class="toc-text">10.虚拟专用网VPN (Virtual Private Network)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#10-1-VPN%E7%9A%84%E6%8A%80%E6%9C%AF%E8%83%8C%E6%99%AF"><span class="toc-number">13.10.1.</span> <span class="toc-text">10.1 VPN的技术背景</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-2-VPN%E7%9A%84%E5%8E%9F%E7%90%86"><span class="toc-number">13.10.2.</span> <span class="toc-text">10.2 VPN的原理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#10-3-VPN%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F"><span class="toc-number">13.10.3.</span> <span class="toc-text">10.3 VPN的实现方式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-IPv6%E5%8D%8F%E8%AE%AE"><span class="toc-number">13.11.</span> <span class="toc-text">11.IPv6协议</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E4%BC%A0%E8%BE%93%E5%B1%82"><span class="toc-number">14.</span> <span class="toc-text">五、传输层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%BC%A0%E8%BE%93%E5%B1%82%E6%A6%82%E8%BF%B0"><span class="toc-number">14.1.</span> <span class="toc-text">1.传输层概述</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-%E5%A5%97%E6%8E%A5%E5%AD%97"><span class="toc-number">14.1.1.</span> <span class="toc-text">1.1 套接字</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-%E4%BC%A0%E8%BE%93%E5%B1%82%E6%8F%90%E4%BE%9B%E7%9A%84%E6%9C%8D%E5%8A%A1"><span class="toc-number">14.1.2.</span> <span class="toc-text">1.2 传输层提供的服务</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-%E5%9B%A0%E7%89%B9%E7%BD%91%E4%BC%A0%E8%BE%93%E5%B1%82%E6%8F%90%E4%BE%9B%E7%9A%84%E6%9C%8D%E5%8A%A1"><span class="toc-number">14.1.3.</span> <span class="toc-text">1.3 因特网传输层提供的服务</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E4%BC%A0%E8%BE%93%E5%B1%82%E5%9F%BA%E6%9C%AC%E6%9C%8D%E5%8A%A1%E2%80%94%E2%80%94%E5%A4%8D%E7%94%A8%E5%92%8C%E5%88%86%E7%94%A8"><span class="toc-number">14.2.</span> <span class="toc-text">2.传输层基本服务——复用和分用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-%E5%A4%8D%E7%94%A8%E5%92%8C%E5%88%86%E7%94%A8%E6%A6%82%E8%BF%B0"><span class="toc-number">14.2.1.</span> <span class="toc-text">2.1 复用和分用概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-%E5%A5%97%E6%8E%A5%E5%AD%97%E6%A0%87%E8%AF%86%E4%B8%8E%E7%AB%AF%E5%8F%A3%E5%8F%B7"><span class="toc-number">14.2.2.</span> <span class="toc-text">2.2 套接字标识与端口号</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-TCP-UDP%E5%A5%97%E6%8E%A5%E5%AD%97%EF%BC%88%E5%A4%8D%E7%94%A8%E5%92%8C%E5%88%86%E7%94%A8%EF%BC%89"><span class="toc-number">14.2.3.</span> <span class="toc-text">2.3 TCP&#x2F;UDP套接字（复用和分用）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%97%A0%E8%BF%9E%E6%8E%A5%E4%BC%A0%E8%BE%93%EF%BC%9AUDP"><span class="toc-number">14.3.</span> <span class="toc-text">3.无连接传输：UDP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-UDP%E6%8A%A5%E6%96%87%E6%AE%B5%E7%BB%93%E6%9E%84"><span class="toc-number">14.3.1.</span> <span class="toc-text">3.1 UDP报文段结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-UDP%E6%A0%A1%E9%AA%8C%E5%92%8C%EF%BC%88checksum%EF%BC%89"><span class="toc-number">14.3.2.</span> <span class="toc-text">3.2 UDP校验和（checksum）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81UDP%EF%BC%9F"><span class="toc-number">14.3.3.</span> <span class="toc-text">3.3 为什么需要UDP？</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E9%9D%A2%E5%90%91%E8%BF%9E%E6%8E%A5%E7%9A%84%E4%BC%A0%E8%BE%93%EF%BC%9ATCP"><span class="toc-number">14.4.</span> <span class="toc-text">4.面向连接的传输：TCP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93"><span class="toc-number">14.4.1.</span> <span class="toc-text">4.1 可靠传输</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-%E6%B5%81%E6%B0%B4%E7%BA%BF%E6%8A%80%E6%9C%AF"><span class="toc-number">14.4.2.</span> <span class="toc-text">4.2 流水线技术</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0GBN-%E5%8D%8F%E8%AE%AE%EF%BC%88%E5%9B%9E%E9%80%80-N-%E6%AD%A5%E5%8D%8F%E8%AE%AE%EF%BC%89"><span class="toc-number">14.4.2.1.</span> <span class="toc-text">①GBN 协议（回退 N 步协议）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1SR-%E5%8D%8F%E8%AE%AE%EF%BC%88%E9%80%89%E6%8B%A9%E9%87%8D%E4%BC%A0%E5%8D%8F%E8%AE%AE%EF%BC%89"><span class="toc-number">14.4.2.2.</span> <span class="toc-text">②SR 协议（选择重传协议）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A2TCP-%E5%8F%AF%E9%9D%A0%E9%80%9A%E4%BF%A1%E7%9A%84%E5%85%B7%E4%BD%93%E5%AE%9E%E7%8E%B0"><span class="toc-number">14.4.2.3.</span> <span class="toc-text">③TCP 可靠通信的具体实现</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#GBN%E3%80%81SR%E5%92%8CTCP%E5%B0%8F%E7%BB%93"><span class="toc-number">14.4.2.4.</span> <span class="toc-text">GBN、SR和TCP小结</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-TCP%E6%8A%A5%E6%96%87%E6%AE%B5%E7%BB%93%E6%9E%84"><span class="toc-number">14.4.3.</span> <span class="toc-text">4.3 TCP报文段结构</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-TCP%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6"><span class="toc-number">14.5.</span> <span class="toc-text">5.TCP流量控制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6"><span class="toc-number">14.6.</span> <span class="toc-text">6.拥塞控制</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E7%9A%84%E7%B1%BB%E5%9E%8B"><span class="toc-number">14.6.1.</span> <span class="toc-text">6.1 拥塞控制的类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-TCP%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E8%A6%81%E8%A7%A3%E5%86%B3%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">14.6.2.</span> <span class="toc-text">6.2 TCP拥塞控制要解决的问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-3-TCP%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="toc-number">14.6.3.</span> <span class="toc-text">6.3 TCP拥塞控制的实现</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E5%BA%94%E7%94%A8%E5%B1%82"><span class="toc-number">15.</span> <span class="toc-text">六、应用层</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%BA%94%E7%94%A8%E5%B1%82%E6%A6%82%E8%BF%B0"><span class="toc-number">15.1.</span> <span class="toc-text">1.应用层概述</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-%E5%BA%94%E7%94%A8%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F"><span class="toc-number">15.1.1.</span> <span class="toc-text">1.1 应用进程通信方式</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0%E5%AE%A2%E6%88%B7-%E6%9C%8D%E5%8A%A1%E5%99%A8%EF%BC%88C-S-Client-Server%EF%BC%89%E6%96%B9%E5%BC%8F"><span class="toc-number">15.1.1.1.</span> <span class="toc-text">①客户&#x2F;服务器（C&#x2F;S, Client&#x2F;Server）方式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1%E5%AF%B9%E7%AD%89%EF%BC%88P2P%EF%BC%8CPeer-to-Peer%EF%BC%89%E6%96%B9%E5%BC%8F"><span class="toc-number">15.1.1.2.</span> <span class="toc-text">②对等（P2P，Peer to Peer）方式</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-%E6%9C%8D%E5%8A%A1%E5%99%A8%E8%BF%9B%E7%A8%8B%E5%B7%A5%E4%BD%9C%E6%96%B9%E5%BC%8F"><span class="toc-number">15.1.2.</span> <span class="toc-text">1.2 服务器进程工作方式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%9F%9F%E5%90%8D%E7%B3%BB%E7%BB%9F"><span class="toc-number">15.2.</span> <span class="toc-text">2.域名系统</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-%E6%A6%82%E8%BF%B0"><span class="toc-number">15.2.1.</span> <span class="toc-text">2.1 概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-%E5%9F%9F%E5%90%8D%E7%B3%BB%E7%BB%9F%E5%90%8D%E5%AD%97%E7%A9%BA%E9%97%B4%E5%92%8C%E5%B1%82%E6%AC%A1%E7%BB%93%E6%9E%84"><span class="toc-number">15.2.2.</span> <span class="toc-text">2.2 域名系统名字空间和层次结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-%E5%9F%9F%E5%90%8D%E8%A7%A3%E6%9E%90%E8%BF%87%E7%A8%8B"><span class="toc-number">15.2.3.</span> <span class="toc-text">2.3 域名解析过程</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6"><span class="toc-number">15.3.</span> <span class="toc-text">3.电子邮件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-%E9%82%AE%E4%BB%B6%E5%8F%91%E9%80%81%E7%9A%84%E5%B8%B8%E7%94%A8%E5%8D%8F%E8%AE%AE"><span class="toc-number">15.3.1.</span> <span class="toc-text">3.1 邮件发送的常用协议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-Webmail"><span class="toc-number">15.3.2.</span> <span class="toc-text">3.2 Webmail</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-WWW"><span class="toc-number">15.4.</span> <span class="toc-text">4.WWW</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-WWW%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E4%B8%8E%E5%8D%8F%E8%AE%AE"><span class="toc-number">15.4.1.</span> <span class="toc-text">4.1 WWW体系结构与协议</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-2-HTTP"><span class="toc-number">15.4.2.</span> <span class="toc-text">4.2 HTTP</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-number">15.4.2.1.</span> <span class="toc-text">概述</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#HTTP%E5%8F%91%E5%B1%95%E7%8E%B0%E7%8A%B6"><span class="toc-number">15.4.2.2.</span> <span class="toc-text">HTTP发展现状</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Web%E5%AE%89%E5%85%A8%E4%B8%8E%E9%9A%90%E7%A7%81%EF%BC%9ACookie"><span class="toc-number">15.4.2.3.</span> <span class="toc-text">Web安全与隐私：Cookie</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E6%B5%81%E5%AA%92%E4%BD%93"><span class="toc-number">15.5.</span> <span class="toc-text">5.流媒体</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-%E6%A6%82%E8%BF%B0"><span class="toc-number">15.5.1.</span> <span class="toc-text">5.1 概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-%E6%B5%81%E5%AA%92%E4%BD%93%E5%8A%A8%E6%80%81%E8%87%AA%E9%80%82%E5%BA%94%E4%BC%A0%E8%BE%93"><span class="toc-number">15.5.2.</span> <span class="toc-text">5.2 流媒体动态自适应传输</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E5%86%85%E5%AE%B9%E5%88%86%E5%8F%91%E7%BD%91%E7%BB%9CCDN"><span class="toc-number">15.6.</span> <span class="toc-text">6.内容分发网络CDN</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-%E6%A6%82%E8%BF%B0"><span class="toc-number">15.6.1.</span> <span class="toc-text">6.1 概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-%E5%85%B3%E9%94%AE%E9%97%AE%E9%A2%98"><span class="toc-number">15.6.2.</span> <span class="toc-text">6.2 关键问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-3-%E6%9C%BA%E7%90%86%E4%B8%8E%E8%A7%A3%E5%86%B3%E6%96%B9%E5%BC%8F"><span class="toc-number">15.6.3.</span> <span class="toc-text">6.3 机理与解决方式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-P2P%E7%BD%91%E7%BB%9C"><span class="toc-number">15.7.</span> <span class="toc-text">7.P2P网络</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95Telnet"><span class="toc-number">15.8.</span> <span class="toc-text">8.远程登录Telnet</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-FTP"><span class="toc-number">15.9.</span> <span class="toc-text">9.FTP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#9-1-%E6%A6%82%E8%BF%B0"><span class="toc-number">15.9.1.</span> <span class="toc-text">9.1 概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#9-2-%E5%B7%A5%E4%BD%9C%E8%BF%87%E7%A8%8B"><span class="toc-number">15.9.2.</span> <span class="toc-text">9.2 工作过程</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%99%E5%9C%A8%E6%9C%80%E5%90%8E"><span class="toc-number">16.</span> <span class="toc-text">写在最后</span></a></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2022 - 2024 By <a class="footer-bar-link" href="/" title="Smith" target="_blank">Smith</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/Smithhss/smithhs.github.io.git" title="Hexo">Hexo</a></div></div></div></footer></div></div></div><div id="sidebar"><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://smith-1315833455.cos.ap-beijing.myqcloud.com/blog/d20f536c64d06e5fcf4bfe2ec5dc25d.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">59</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">41</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">4</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child" style="left:-79px;"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child" style="left:-31px;"><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li></ul></div><div class="menus_item"><a class="site-page faa-parent animated-hover" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child" style="left:-79px;"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于我</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8805965276" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://music.163.com/#/my/m/music/playlist?id=464586318&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn1.tianli0.top/npm/js-heo@1.0.6/translate/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.14/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/vanilla-lazyload/17.3.1/lazyload.iife.min.js"></script><script src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/node-snackbar/0.1.16/snackbar.min.js"></script><script>var meting_api = "https://meting.qjqq.cn/?server=:server&type=:type&id=:id&auth=:auth&r=:r";
</script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("07/01/2022 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2022 By 安知鱼 V1.5.3",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#3b70fc",
      "",
      "color:#3b70fc",
      "color:#3b70fc",
      "",
      "color:#3b70fc",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 Smith 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script>var visitorMail = "visitor@anheyu.com";</script><script>//动态标题
let leaveTitle = '再看看嘛🌈！';
let backTitle = '欢迎回来✌️！';
let OriginTitile = document.title
let titleTime
document.addEventListener('visibilitychange', function () {
  if (document.hidden) {
    //离开当前页面时标签显示内容
    document.title = leaveTitle
    clearTimeout(titleTime)
  } else {
    //返回当前页面时标签显示内容
    document.title = backTitle + OriginTitile
    //两秒后变回正常标题
    titleTime = setTimeout(function () {
      document.title = OriginTitile
    }, 2000)
  }
})</script><script async data-pjax src="https://lf26-cdn-tos.bytecdntp.com/cdn/expire-1-M/waterfall.js/1.1.0/waterfall.min.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script>// 初始化函数
let rm = {};

//禁止图片与超链接拖拽
let aElements = document.getElementsByTagName("a");
for (let i = 0; i < aElements.length; i++) {
  aElements[i].setAttribute("draggable", "false");
  let imgElements = aElements[i].getElementsByTagName("img");
  for (let j = 0; j < imgElements.length; j++) {
    imgElements[j].setAttribute("draggable", "false");
  }
}

// 显示菜单
rm.showRightMenu = function (isTrue, x = 0, y = 0) {
  console.info(x, y)
  let rightMenu = document.getElementById("rightMenu");
  rightMenu.style.top = x + "px";
  rightMenu.style.left = y + "px";
  if (isTrue) {
    rightMenu.style.display = "block";
    stopMaskScroll();
  } else {
    rightMenu.style.display = "none";
  }
};

// 隐藏菜单
rm.hideRightMenu = function () {
  rm.showRightMenu(false);
  let rightMenuMask = document.querySelector("#rightmenu-mask");
  rightMenuMask.style.display = "none";
};

// 尺寸
let rmWidth = document.getElementById("rightMenu").offsetWidth;
let rmHeight = document.getElementById("rightMenu").offsetHeight;

// 重新定义尺寸
rm.reloadrmSize = function () {
  rightMenu.style.visibility = "hidden";
  rightMenu.style.display = "block";
  // 获取宽度和高度
  rmWidth = document.getElementById("rightMenu").offsetWidth;
  rmHeight = document.getElementById("rightMenu").offsetHeight;
  rightMenu.style.visibility = "visible";
};

// 获取点击的href
let domhref = "";
let domImgSrc = "";
let globalEvent = null;

var oncontextmenuFunction = function (event) {
  if (document.body.clientWidth > 768) {
    let pageX = event.clientX + 10; //加10是为了防止显示时鼠标遮在菜单上
    let pageY = event.clientY;

    //其他额外菜单
    const $rightMenuOther = document.querySelector(".rightMenuOther");
    const $rightMenuPlugin = document.querySelector(".rightMenuPlugin");
    const $rightMenuCopyText = document.querySelector("#menu-copytext");
    const $rightMenuPasteText = document.querySelector("#menu-pastetext");
    const $rightMenuCommentText = document.querySelector("#menu-commenttext");
    const $rightMenuNewWindow = document.querySelector("#menu-newwindow");
    const $rightMenuNewWindowImg = document.querySelector("#menu-newwindowimg");
    const $rightMenuCopyLink = document.querySelector("#menu-copylink");
    const $rightMenuCopyImg = document.querySelector("#menu-copyimg");
    const $rightMenuDownloadImg = document.querySelector("#menu-downloadimg");
    const $rightMenuSearch = document.querySelector("#menu-search");
    const $rightMenuSearchBaidu = document.querySelector("#menu-searchBaidu");
    const $rightMenuMusicToggle = document.querySelector("#menu-music-toggle");
    const $rightMenuMusicBack = document.querySelector("#menu-music-back");
    const $rightMenuMusicForward = document.querySelector("#menu-music-forward");
    const $rightMenuMusicPlaylist = document.querySelector("#menu-music-playlist");
    const $rightMenuMusicCopyMusicName = document.querySelector("#menu-music-copyMusicName");

    let href = event.target.href;
    let imgsrc = event.target.currentSrc;

    // 判断模式 扩展模式为有事件
    let pluginMode = false;
    $rightMenuOther.style.display = "block";
    globalEvent = event;

    // 检查是否需要复制 是否有选中文本
    if (selectTextNow && window.getSelection()) {
      pluginMode = true;
      $rightMenuCopyText.style.display = "block";
      $rightMenuCommentText.style.display = "block";
      $rightMenuSearch.style.display = "block";
      $rightMenuSearchBaidu.style.display = "block";
    } else {
      $rightMenuCopyText.style.display = "none";
      $rightMenuCommentText.style.display = "none";
      $rightMenuSearchBaidu.style.display = "none";
      $rightMenuSearch.style.display = "none";
    }

    //检查是否右键点击了链接a标签
    if (href) {
      pluginMode = true;
      $rightMenuNewWindow.style.display = "block";
      $rightMenuCopyLink.style.display = "block";
      domhref = href;
    } else {
      $rightMenuNewWindow.style.display = "none";
      $rightMenuCopyLink.style.display = "none";
    }

    //检查是否需要复制图片
    if (imgsrc) {
      pluginMode = true;
      $rightMenuCopyImg.style.display = "block";
      $rightMenuDownloadImg.style.display = "block";
      $rightMenuNewWindowImg.style.display = "block";
      document.getElementById("rightMenu").style.width="12rem"
      domImgSrc = imgsrc;
    } else {
      $rightMenuCopyImg.style.display = "none";
      $rightMenuDownloadImg.style.display = "none";
      $rightMenuNewWindowImg.style.display = "none";
    }

    // 判断是否为输入框
    if (event.target.tagName.toLowerCase() === "input" || event.target.tagName.toLowerCase() === "textarea") {
      pluginMode = true;
      $rightMenuPasteText.style.display = "block";
    } else {
      $rightMenuPasteText.style.display = "none";
    }
    const navMusicEl = document.querySelector("#nav-music");
    //判断是否是音乐
    if (navMusicEl && navMusicEl.contains(event.target)) {
      pluginMode = true;
      $rightMenuMusicToggle.style.display = "block";
      $rightMenuMusicBack.style.display = "block";
      $rightMenuMusicForward.style.display = "block";
      $rightMenuMusicPlaylist.style.display = "block";
      $rightMenuMusicCopyMusicName.style.display = "block";
    } else {
      $rightMenuMusicToggle.style.display = "none";
      $rightMenuMusicBack.style.display = "none";
      $rightMenuMusicForward.style.display = "none";
      $rightMenuMusicPlaylist.style.display = "none";
      $rightMenuMusicCopyMusicName.style.display = "none";
    }

    // 如果不是扩展模式则隐藏扩展模块
    if (pluginMode) {
      $rightMenuOther.style.display = "none";
      $rightMenuPlugin.style.display = "block";
    } else {
      $rightMenuPlugin.style.display = "none";
    }

    rm.reloadrmSize();

    // 鼠标默认显示在鼠标右下方，当鼠标靠右或靠下时，将菜单显示在鼠标左方\上方
    if (pageX + rmWidth > window.innerWidth) {
      pageX -= rmWidth + 10;
    }
    if (pageY + rmHeight > window.innerHeight) {
      pageY -= pageY + rmHeight - window.innerHeight;
    }

    rm.showRightMenu(true, pageY, pageX);
    document.getElementById("rightmenu-mask").style.display = "flex";
    return false;
  }
};

// 监听右键初始化
window.oncontextmenu = oncontextmenuFunction

// 下载图片状态
rm.downloadimging = false;

// 复制图片到剪贴板
rm.writeClipImg = function (imgsrc) {
  console.log("按下复制");
  rm.hideRightMenu();
  anzhiyu.snackbarShow("正在下载中，请稍后", false, 10000);
  if (rm.downloadimging == false) {
    rm.downloadimging = true;
    setTimeout(function () {
      copyImage(imgsrc);
      anzhiyu.snackbarShow("复制成功！图片已添加盲水印，请遵守版权协议");
      rm.downloadimging = false;
    }, "10000");
  }
};

function imageToBlob(imageURL) {
  const img = new Image();
  const c = document.createElement("canvas");
  const ctx = c.getContext("2d");
  img.crossOrigin = "";
  img.src = imageURL;
  return new Promise(resolve => {
    img.onload = function () {
      c.width = this.naturalWidth;
      c.height = this.naturalHeight;
      ctx.drawImage(this, 0, 0);
      c.toBlob(
        blob => {
          // here the image is a blob
          resolve(blob);
        },
        "image/png",
        0.75
      );
    };
  });
}

async function copyImage(imageURL) {
  const blob = await imageToBlob(imageURL);
  const item = new ClipboardItem({ "image/png": blob });
  navigator.clipboard.write([item]);
}

rm.copyUrl = function (id) {
  const input = document.createElement("input"); // Create a new <input> element
  input.id = "copyVal"; // Set the id of the new element to "copyVal"
  document.body.appendChild(input); // Append the new element to the end of the <body> element
  
  const text = id;
  input.value = text;
  input.select();
  input.setSelectionRange(0, input.value.length);
  document.execCommand("copy");
  
  input.remove(); // Remove the <input> element from the DOM
};

function stopMaskScroll() {
  if (document.getElementById("rightmenu-mask")) {
    let xscroll = document.getElementById("rightmenu-mask");
    xscroll.addEventListener(
      "mousewheel",
      function (e) {
        //阻止浏览器默认方法
        rm.hideRightMenu();
        // e.preventDefault();
      },
      { passive: true }
    );
  }
  if (document.getElementById("rightMenu")) {
    let xscroll = document.getElementById("rightMenu");
    xscroll.addEventListener(
      "mousewheel",
      function (e) {
        //阻止浏览器默认方法
        rm.hideRightMenu();
        // e.preventDefault();
      },
      { passive: true }
    );
  }
}

rm.rightmenuCopyText = function (txt) {
  if (navigator.clipboard) {
    navigator.clipboard.writeText(txt);
  }
  rm.hideRightMenu();
};

rm.copyPageUrl = function (url) {
  if (!url) {
    url = window.location.href;
  }
  rm.copyUrl(url);
  anzhiyu.snackbarShow("复制链接地址成功", false, 2000);
  rm.hideRightMenu();
};

rm.sharePage = function () {
  var content = window.location.href;
  rm.copyUrl(url);
  anzhiyu.snackbarShow("复制链接地址成功", false, 2000);
  rm.hideRightMenu();
};

// 复制当前选中文本
var selectTextNow = "";
document.onmouseup = document.ondblclick = selceText;

function selceText() {
  var txt;
  if (document.selection) {
    txt = document.selection.createRange().text;
  } else {
    txt = window.getSelection().toString();
  }
  selectTextNow = txt !== "" ? txt : "";
}

// 读取剪切板
rm.readClipboard = function () {
  if (navigator.clipboard) {
    navigator.clipboard.readText().then(clipText => rm.insertAtCaret(globalEvent.target, clipText));
  }
};

// 粘贴文本到焦点
rm.insertAtCaret = function (elemt, value) {
  const startPos = elemt.selectionStart,
    endPos = elemt.selectionEnd;
  if (document.selection) {
    elemt.focus();
    var sel = document.selection.createRange();
    sel.text = value;
    elemt.focus();
  } else {
    if (startPos || startPos == "0") {
      var scrollTop = elemt.scrollTop;
      elemt.value = elemt.value.substring(0, startPos) + value + elemt.value.substring(endPos, elemt.value.length);
      elemt.focus();
      elemt.selectionStart = startPos + value.length;
      elemt.selectionEnd = startPos + value.length;
      elemt.scrollTop = scrollTop;
    } else {
      elemt.value += value;
      elemt.focus();
    }
  }
};

//粘贴文本
rm.pasteText = function () {
  const result = rm.readClipboard() || "";
  rm.hideRightMenu();
};

//引用到评论
rm.rightMenuCommentText = function (txt) {
  rm.hideRightMenu();
  const postCommentDom = document.getElementById("post-comment");
  var domTop = postCommentDom.offsetTop;
  window.scrollTo(0, domTop - 80);
  if (txt == "undefined" || txt == "null") txt = "好棒！";
  function setText() {
    setTimeout(() => {
      var input = document.getElementsByClassName("el-textarea__inner")[0];
      if (!input) setText();
      let evt = document.createEvent("HTMLEvents");
      evt.initEvent("input", true, true);
      let inputValue = replaceAll(txt, "\n", "\n> ");
      input.value = "> " + inputValue + "\n\n";
      input.dispatchEvent(evt);
      input.focus();
      input.setSelectionRange(-1, -1);
      if (document.getElementById("comment-tips")) {
        document.getElementById("comment-tips").classList.add("show");
      }
    }, 100);
  }
  setText();
};

//替换所有内容
function replaceAll(string, search, replace) {
  return string.split(search).join(replace);
}

// 百度搜索
rm.searchBaidu = function () {
  anzhiyu.snackbarShow("即将跳转到百度搜索", false, 2000);
  setTimeout(function () {
    window.open("https://www.baidu.com/s?wd=" + selectTextNow);
  }, "2000");
  rm.hideRightMenu();
};

//分享链接
rm.copyLink = function () {
  rm.rightmenuCopyText(domhref);
  anzhiyu.snackbarShow("已复制链接地址");
};

function addRightMenuClickEvent() {
  // 添加点击事件
  document.getElementById("menu-backward").addEventListener("click", function () {
  window.history.back();
    rm.hideRightMenu();
  });

  document.getElementById("menu-forward").addEventListener("click", function () {
    window.history.forward();
    rm.hideRightMenu();
  });

  document.getElementById("menu-refresh").addEventListener("click", function () {
    window.location.reload();
  });

  document.getElementById("menu-top").addEventListener("click", function () {
    anzhiyu.scrollToDest(0, 500);
    rm.hideRightMenu();
  });

  const menuLinks = document.querySelectorAll(".menu-link");
  menuLinks.forEach(function (link) {
    link.addEventListener("click", rm.hideRightMenu);
  });

  document.getElementById("menu-darkmode").addEventListener("click", anzhiyu.switchDarkMode);

  document.getElementById("menu-home") && document.getElementById("menu-home").addEventListener("click", function () {
    window.location.href = window.location.origin;
  });

  document.getElementById("menu-randomPost").addEventListener("click", function () {
    toRandomPost();
  });

  document.getElementById("menu-commentBarrage").addEventListener("click", anzhiyu.switchCommentBarrage);

  document.getElementById("rightmenu-mask").addEventListener("click", rm.hideRightMenu);

  document.getElementById("rightmenu-mask").addEventListener("contextmenu", function (event) {
    rm.hideRightMenu();
    event.preventDefault(); // Prevent the default context menu from appearing
  });

  document.getElementById("menu-copy").addEventListener("click", rm.copyPageUrl);

  document.getElementById("menu-pastetext").addEventListener("click", rm.pasteText);

  document.getElementById("menu-copytext").addEventListener("click", function () {
    rm.rightmenuCopyText(selectTextNow);
    anzhiyu.snackbarShow("复制成功，复制和转载请标注本文地址");
  });

  document.getElementById("menu-commenttext").addEventListener("click", function () {
    rm.rightMenuCommentText(selectTextNow);
  });

  document.getElementById("menu-newwindow").addEventListener("click", function () {
    window.open(domhref, "_blank");
    rm.hideRightMenu();
  });

  document.getElementById("menu-copylink").addEventListener("click", rm.copyLink);

  document.getElementById("menu-downloadimg").addEventListener("click", function () {
    anzhiyu.downloadImage(domImgSrc, "anzhiyu");
  });

  document.getElementById("menu-newwindowimg").addEventListener("click", function () {
    window.open(domImgSrc, "_blank");
    rm.hideRightMenu();
  });

  document.getElementById("menu-copyimg").addEventListener("click", function () {
    rm.writeClipImg(domImgSrc);
  });

  document.getElementById("menu-searchBaidu").addEventListener("click", rm.searchBaidu);

  //音乐
  document.getElementById("menu-music-toggle").addEventListener("click", anzhiyu.musicToggle);

  document.getElementById("menu-music-back").addEventListener("click", anzhiyu.musicSkipBack);

  document.getElementById("menu-music-forward").addEventListener("click", anzhiyu.musicSkipForward);

  document.getElementById("menu-music-copyMusicName").addEventListener("click", function () {
    rm.rightmenuCopyText(anzhiyu.musicGetName());
    anzhiyu.snackbarShow("复制歌曲名称成功", false, 3000);
  });

}

addRightMenuClickEvent();</script><script data-pjax>var themeColorMeta = document.querySelector('meta[name="theme-color"]');
var pageHeaderEl = document.getElementById("page-header");
var navMusicEl = document.getElementById("nav-music");
var consoleEl = document.getElementById("console");
// 已随机的歌曲
var selectRandomSong = [];
// 音乐默认声音大小
var musicVolume = 0.8;
// 是否切换了周杰伦音乐列表
var changeMusicListFlag = false;
// 当前默认播放列表
var defaultPlayMusicList = [];

document.getElementById("page-name").innerText = document.title.split(" | Smith")[0];
anzhiyu.initIndexEssay();
anzhiyu.changeTimeInEssay();
anzhiyu.removeBodyPaceClass();
anzhiyu.qrcodeCreate();
anzhiyu.changeTimeInAlbumDetail();
anzhiyu.reflashEssayWaterFall();
anzhiyu.sayhi();
anzhiyu.stopImgRightDrag();
anzhiyu.addNavBackgroundInit();
anzhiyu.setValueToBodyType();
anzhiyu.catalogActive();
anzhiyu.tagsPageActive();
anzhiyu.categoriesBarActive();
anzhiyu.topCategoriesBarScroll();
anzhiyu.switchRightClickMenuHotReview();
anzhiyu.getCustomPlayList();
anzhiyu.addEventListenerConsoleMusicList(false);
setTimeout(() => {if (typeof addFriendLinksInFooter === "function") {addFriendLinksInFooter();}}, 200)</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/aplayer/1.10.1/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/aplayer/1.10.1/APlayer.min.js"></script><script src="https://npm.elemecdn.com/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://lib.baomitu.com/pjax/0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div></body></html>